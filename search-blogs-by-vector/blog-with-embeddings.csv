title,description,content,embedding
Developing with Dragonfly: Solve Caching Problems,Developing with Dragonfly: Solve Caching Problems,"## Introduction  In our [previous blog post](https://www.dragonflydb.io/blog/developing-with-dragonfly-part-01-cache-aside) within the **Developing with Dragonfly** series, we delved into one of the simplest caching patterns known as Cache-Aside. It's a straightforward approach to caching that's relatively easy to implement. However, as we'll explore in this blog post, it can also uncover some common issues that may have significant consequences for your services. We'll shine a light on the 3 major problems in cache management and share best practices to steer clear of them.  It's important to note that these caching problems are not unique to Dragonfly. Even with Dragonfly's exceptional efficiency and performance, these challenges persist across various caching solutions. Dragonfly is protocol and command compatible with Redis, which means it's readily available for integration into your backend services at no development cost. By addressing these caching problems and harnessing Dragonfly's advantages, we aim to help you smoothly transition to Dragonfly and achieve greater success in your caching infrastructure.  ---  ## 1. Cache Penetration  Firstly, let's take a look at cache penetration. A cache miss occurs when the caching layer fails to find the requested data and forwards the request directly to the primary database. This scenario is quite common in caching systems. **However, cache penetration occurs when there is a cache miss, but the primary database also lacks the required data.**  ![cache-penetration](/assets/blog/developing-with-dragonfly-part-02-solve-caching-problems/cache-penetration.png)  Cache penetration effectively renders the caching layer ineffective, and the primary database becomes the point of contention. If a hacker were to flood the system with numerous requests containing random keys, all of which result in cache misses and are subsequently absent from the primary database, it could lead to a scenario where the primary database becomes overwhelmed, potentially causing it to fail. Now, let's delve into two widely used techniques to mitigate the issue of cache penetration.  ### Caching Empty Results  One effective technique to address cache penetration is to cache empty results. When the primary database doesn't contain the requested data, as the caching layer, we can still store the empty result (i.e., `null`, `nil`) in Dragonfly. This approach is relatively straightforward to implement, but it does come with a significant drawback. Although an empty value occupies very little memory space, if the service experiences a high volume of requests with non-existing keys, it could lead to wasteful utilization of valuable in-memory storage.  To manage this issue efficiently, it's crucial to evict empty results from the caching layer. Here are two methods for doing so:  - Expire the empty result after a certain, normally short, period of time. This is a simple and effective way to evict the empty result, which is also easy to implement. - Employ a strong and smart eviction policy to evict the empty results. This approach involves making eviction decisions based on various factors, such as cache usage patterns, access frequency, or memory constraints. We will discuss this approach in more detail in the [Dragonfly LFRU Eviction Policy](#dragonfly-lfru-eviction-policy) section below.  ### Bloom Filter  Another valuable technique to combat cache penetration is the use of a [Bloom Filter](https://en.wikipedia.org/wiki/Bloom_filter). A Bloom Filter is a probabilistic data structure employed to determine whether an element belongs to a specific set. It stands out for its space efficiency, often requiring much less memory than a traditional hash table, albeit with the trade-off of potentially allowing false positives. In the context of cache penetration, a Bloom Filter can serve as a protective mechanism, implementing either an allow-list or a block-list to filter requests before they reach the primary database.  As of the current version of Dragonfly (v1.9.0), the Bloom Filter functionality is not yet natively supported. However, the Dragonfly community is highly active, constantly evolving the project to meet users' needs. If features like Bloom Filter are essential for your use cases, we encourage you to engage with the community. You can do so by [opening an issue](https://github.com/dragonflydb/dragonfly/issues) or connecting with the Dragonfly community via Twitter or Discord, as indicated at the bottom of this page.  As a side note, it's worth mentioning that the Dragonfly community has a track record of responsiveness to user feedback and enhancement requests. For instance, they recently addressed a usability concern by transitioning from glob-style backup scheduling to a more universally accepted cron-style format. This change was proposed and implemented by community members, showcasing the collaborative spirit and responsiveness of the Dragonfly team and its remarkable community. You can read more about the cron-based backup scheduling in our [documentation](https://www.dragonflydb.io/docs/managing-dragonfly/backups#flags) and witness the positive synergy between Dragonfly team members and the enthusiastic community [here](https://github.com/dragonflydb/dragonfly/issues/1590).  ---  ## 2. Cache Breakdown  Next, let's explore the cache breakdown problem. **A cache breakdown occurs when a cached key containing a piece of _hot data_ either expires or gets evicted from the cache unexpectedly.** When this happens, multiple requests simultaneously query the same data, overwhelming the database due to the high concurrency.  ![cache-breakdown](/assets/blog/developing-with-dragonfly-part-02-solve-caching-problems/cache-breakdown.png)  The Cache-Aside strategy is not effective in this situation either. Since Cache-Aside loads data into Dragonfly passively, during periods of intense activity (imagine a celebrity's blog post suddenly disappearing from the cache), **multiple highly concurrent queries** can still reach and exert pressure on the database. Let's dive into techniques to mitigate the cache breakdown issue.  ### Refresh-Ahead Caching Strategy  The Refresh-Ahead caching strategy presents a practical solution to mitigate the cache breakdown problem effectively. Refresh-Ahead is a strategy that takes a proactive approach by refreshing the cache before the cached key expires, keeping data hot until it's no longer in high demand. Here are the common steps to implement the Refresh-Ahead strategy:  - Start by choosing a refresh-ahead factor, which determines the time before the cached key expires when the cache should be refreshed. - For example, if your cached data has a lifetime of 100 seconds and you choose a refresh-ahead factor of 50%: - If the data is queried before the 50th second, the cached data will be returned as usual. - If the data is queried after the 50th second, the cached data will still be returned, but a background worker will trigger the data refresh. - It's important to ensure that only one background worker is responsible for refreshing the data to avoid redundant reads to the database.  This caching strategy strikes a balance between keeping the cache fresh and minimizing the load on both the cache and the primary database. As a result, it's an effective means of ensuring reliable and responsive services even during high-traffic periods.  ---  ## 3. Cache Avalanche  Finally, let's examine the cache avalanche problem. **A cache avalanche is a situation that arises when a significant number of cached keys cannot be located in the caching layer simultaneously**, leading to a sudden surge of queries overwhelming the primary database.  ![cache-avalanche](/assets/blog/developing-with-dragonfly-part-02-solve-caching-problems/cache-avalanche.png)  There are two primary reasons behind cache avalanches:  - Many cached keys expire simultaneously. - The caching layer experiences a crash or becomes inaccessible for a period of time.  Let's also explore best practices to mitigate the cache avalanche problem.  ### Expiration Time Jitter  Expiration time jitter is a valuable technique employed to address the cache avalanche problem. When the strict timing of cache expirations is not essential from a business perspective, introducing a random jitter to the expiration time of each cached key can be beneficial, particularly when dealing with cached keys generated in batches. This method involves adding a random time variance to the expiration time, ensuring that cached keys do not all expire simultaneously, effectively mitigating the cache avalanche issue.  ### Refresh-Ahead Caching Strategy  The Refresh-Ahead caching strategy, which we discussed earlier in the context of mitigating the cache breakdown problem, can also serve as a valuable tool to address the cache avalanche issue. In this scenario, rather than relying on fixed expiration times for hot data, the Refresh-Ahead strategy is applied to ensure that data is refreshed before it expires, as long as it continues to be in high demand through frequent queries.  By employing the Refresh-Ahead approach in the context of cache avalanche mitigation, you can proactively refresh and maintain hot data in the cache, preventing it from expiring altogether. This strategy helps ensure that frequently accessed data remains readily available, reducing the risk of cache avalanche scenarios where a multitude of cached keys suddenly become invalid and overwhelm the primary database.  ### High-Availability  The last technique to mitigate the cache avalanche problem is to make the caching layer highly available. When the caching layer is highly available, it means that even if the primary instance of the caching layer experiences a crash or downtime, the database will not be inundated by an unexpected surge of queries. We will explore the high-availability options available in Dragonfly in more detail in the [Dragonfly High Availability](#dragonfly-high-availability) section below.  ---  ## Discussion  In this blog post, we've delved into some of the most prevalent caching challenges that can disrupt your services:  - Cache Penetration -- cache is always bypassed by a key/ID that doesn't exist in the system - Cache Breakdown -- a hot key suddenly expires or gets evicted, causing a surge of queries - Cache Avalanche -- a lot of cached keys become invalid/inaccessible simultaneously  We have also explored techniques to mitigate these problems, such as:  - Caching Empty Results (Cache Penetration) - Bloom Filter (Cache Penetration) - Refresh-Ahead Caching Strategy (Cache Breakdown & Cache Avalanche) - Expiration Time Jitter (Cache Avalanche) - High-Availability (Cache Avalanche)  Among these techniques, the Refresh-Ahead caching strategy has proven to be particularly powerful. We have added it to our [Dragonfly examples repository](https://github.com/dragonflydb/dragonfly-examples/tree/main/cache-refresh-ahead) to illustrate its implementation. Here is a brief walkthrough of the most important snippets of the example code.  Upon receiving a request, the service first checks the cache for the requested data. A `GET` command and a `TTL` command are pipelined to Dragonfly to retrieve the data and its expiration time. The `cacheKey` is based on the HTTP path (i.e., `/blogs/{blog_uuid}`).  ```go // cache_refresh_ahead.go  // Pipeline a GET command and a TTL command. commands, err := m.client.Pipelined(ctx, func(pipe redis.Pipeliner) error { pipe.Get(ctx, cacheKey) pipe.TTL(ctx, cacheKey) return nil })  // Extract results & errors from the pipelined commands. var ( cacheData, dataErr = commands[0].(*redis.StringCmd).Bytes() cacheTTL, ttlErr   = commands[1].(*redis.DurationCmd).Result() ) ```  If the data is not found in the cache, the service will read it from the database and passively load it into Dragonfly, just like the Cache-Aside strategy. This implies that the data is not in high demand anymore. Otherwise, its cache would have been continuously accessed and refreshed.  ```go // cache_refresh_ahead.go  // Cache miss. if errors.Is(dataErr, redis.Nil) { log.Info(""cache miss - reading from database"") return m.refreshCacheAndSendResponse(c, cacheKey) } ```  If the data is found in the cache, the service will check the expiration time of the data. If the data is about to expire (the urgency would be based on the refresh-ahead factor), the service will refresh the cache and return the data. Otherwise, the service will return the data directly. It is important to note that the `sendResponseAndRefreshCacheAsync` method utilizes a new goroutine to run the refresh operation in the background after the current HTTP handler is returned, thus ensuring that the response is sent to the client without delay.  ```go // cache_refresh_ahead.go  // Cache hit. if cacheTTL < m.refreshAheadDuration { log.Info(""cache hit - refreshing"") m.sendResponseAndRefreshCacheAsync(uid, cacheKey) return m.sendResponse(c, cacheData) } else { log.Info(""cache hit - no refreshing"") return m.sendResponse(c, cacheData) } ```  Within the `sendResponseAndRefreshCacheAsync` method, the middleware first tries to acquire the `refreshLock` for the current `cacheKey`. If the lock is acquired successfully, the middleware will refresh the cache by reading the data from the database and writing it to Dragonfly. Otherwise, the middleware will simply return without doing anything else. Since this implies that the current data is in high demand and another concurrent request has already triggered the process of refreshing the cache. The lock mechanism ensures that, under high concurrency, only one goroutine performs the refresh operation.  While the Refresh-Ahead caching strategy needs to be implemented in the service code as shown above, the idea behind it is simple: we are basically trying to **identify the hot data and avoid expiring it prematurely**. Similarly, for the caching empty results technique, even though the cached values are invalid (i.e., `null`, `nil`), we are still trying to identify the hot data (as it is being requested more frequently by attackers) and avoid evicting it too soon.  It's notable that these caching challenges and strategies are not unique to Dragonfly; they are common issues in many caching scenarios. While the implementation of these techniques may require some adjustments to your service code, Dragonfly offers several advantages that can be beneficial in addressing caching problems effectively. Let's explore some of these advantages below.  ### Dragonfly LFRU Eviction Policy  In the [previous installment](https://www.dragonflydb.io/blog/developing-with-dragonfly-part-01-cache-aside#high-hit-ratio-with-the-lfru-eviction-policy) of the **Developing with Dragonfly** series, we introduced Dragonfly's innovative LFRU eviction policy. This policy represents a fusion of the LFU (least frequently used) and LRU (least recently used) strategies, offering a sophisticated approach to managing cache eviction efficiently.  To enable the LFRU eviction policy in Dragonfly, simply pass the `cache_mode=true` argument during Dragonfly server initialization. What's remarkable about this policy is that it incurs zero memory overhead per cached item, making it highly resource-efficient. Moreover, it's designed to be robust in the face of fluctuations in traffic patterns.  The LFRU eviction policy acts as an additional layer of protection when combined with the Refresh-Ahead caching strategy implemented in the service layer. On the Dragonfly server side, LFRU strives to identify and retain hot data, automatically evicting data with lower demand as the cache approaches its maximum memory limit. This combination of proactive and passive management helps maintain optimal cache performance and responsiveness in dynamic and high-traffic environments.  ### Dragonfly High Availability  Dragonfly offers several robust methods to ensure high availability in your caching layer, which can be instrumental in preventing cache avalanches and maintaining system stability:  - [Replication](https://www.dragonflydb.io/docs/managing-dragonfly/replication): Dragonfly supports replication, allowing you to set up secondary instances. In the event of a primary instance failure, the secondary instance can take over via manual failover, ensuring moderately highly available services. - Compatibility with Redis Sentinel: Dragonfly's compatibility with the Redis protocol and commands means it can also be used with Redis Sentinel, a high-availability solution. This integration enables you to leverage the established capabilities of Redis Sentinel to maintain high availability in your Dragonfly-based caching layer. - Kubernetes Operator: Dragonfly provides an official Kubernetes operator, which streamlines the deployment and management of Dragonfly in Kubernetes environments. Leveraging this operator allows you to achieve high availability in Kubernetes clusters, enhancing your caching layer's resilience and scalability. You can learn more about this operator by referring to our [documentation](https://www.dragonflydb.io/docs/managing-dragonfly/high-availability).  ---  ## Conclusion  This blog post explored common caching challenges, including Cache Penetration, Cache Breakdown, and Cache Avalanche, and has provided practical techniques to mitigate these issues. We've discussed strategies such as the Refresh-Ahead caching strategy, the caching empty results technique, and the expiration time jitter technique, which help optimize cache performance while maintaining data availability. Additionally, Dragonfly's universal LFRU eviction policy and high availability options have been highlighted as powerful tools to enhance caching resilience. By combining these strategies and leveraging Dragonfly's capabilities, you can create a robust caching solution that not only mitigates common pitfalls but also ensures high availability, safeguarding your system against cache-related disruptions. In a future installment of the **Developing with Dragonfly series, we will summarize all the other caching strategies and techniques that we have not covered yet.**  Explore Dragonfly by [having it running in minutes](https://www.dragonflydb.io/docs/getting-started), and join our community to share your feedback and ideas with us. Happy building with Dragonfly, and see you next time!","[0.0077672419138252735, 0.03448345139622688, -0.0005542361177504063, -0.010476252995431423, -0.009509757161140442, 0.011315763927996159, -0.016042424365878105, -0.02344987541437149, -0.025453414767980576, -0.026130666956305504, 0.01188014168292284, 0.015971876680850983, -0.015887219458818436, 0.011506241746246815, 0.020543331280350685, 0.013164099305868149, 0.014758464880287647, -0.028247082605957985, 0.0339190736413002, -0.007111153565347195, -0.015224076807498932, -0.010370432399213314, -0.01142863929271698, 0.014843122102320194, -0.019527453929185867, -0.01745336689054966, 0.013890734873712063, -0.013234646990895271, -0.0054321312345564365, 0.013326358050107956, 0.023619187995791435, -0.014955997467041016, 0.00811997801065445, 0.003550285706296563, 0.007322794757783413, -0.008493877947330475, 0.006525611970573664, -0.008712573908269405, 0.03295963257551193, -0.0029153611976653337, 0.03267744183540344, -0.018342260271310806, -0.009587358683347702, -0.026483403518795967, -0.021982494741678238, 0.02965802513062954, 0.003929476719349623, -0.024366987869143486, 0.005710792262107134, -0.016352830454707146, 0.012169384397566319, 0.008783120661973953, -0.026158886030316353, 0.0016049478435888886, 0.020416347309947014, 0.015633249655365944, -0.011301654390990734, 0.02115003764629364, 0.013820188120007515, -0.005375693552196026, -0.0024620958138257265, 0.03485029563307762, 0.0014550350606441498, 0.0018836091039702296, -0.0069559495896101, -0.002774266991764307, 0.0072381384670734406, -0.02962980605661869, -0.009389827027916908, -0.001422407105565071, 0.026920795440673828, 0.035696860402822495, 0.0014761992497369647, -0.018864309415221214, 0.014998325146734715, -0.032592788338661194, -0.001804243540391326, -0.004148172680288553, 0.005308673717081547, 0.017044194042682648, 0.01295245811343193, 0.03058924712240696, -0.016268175095319748, 0.050511766225099564, 0.0008068830939009786, 0.02450808323919773, 0.005111141595989466, 0.016508035361766815, 0.012352807447314262, 0.005047649145126343, -0.028529269620776176, -0.006289279088377953, 0.021883727982640266, 0.015492156147956848, -0.003010599873960018, -0.0019629746675491333, 0.008606753312051296, 0.001765442662872374, -0.01611297018826008, -0.010003587231040001, -0.00900887232273817, 0.017354600131511688, -0.026850247755646706, -0.011887195520102978, -0.02567916549742222, -0.006292806472629309, 0.028529269620776176, -0.032282378524541855, 0.012776089832186699, 0.002703719772398472, -0.011873086914420128, 0.044614020735025406, 0.018793761730194092, -0.02490314655005932, 0.01925937458872795, -0.00020756295998580754, 0.00764731178060174, -0.0270477794110775, -0.0051428875885903835, -0.017213506624102592, 0.02249043434858322, 0.016254065558314323, 0.019837860018014908, -0.024000143632292747, -0.000848770490847528, -0.00532631017267704, -0.003185204230248928, 0.002172852400690317, 0.007393341977149248, -0.011717882938683033, -0.0029576895758509636, 0.021164147183299065, 0.0026966650038957596, -0.0053016189485788345, -0.01621173694729805, 0.007682585623115301, -0.03928065672516823, -0.015068872831761837, -0.008670245297253132, -0.011068848893046379, 0.007901282049715519, 0.02658216841518879, -0.022278791293501854, -0.008268127217888832, -0.0019453378627076745, 0.013495671562850475, 0.002627881709486246, -0.007499162573367357, -0.014871341176331043, -0.019245265051722527, 0.00579897640272975, -0.02676559053361416, -0.0017231142846867442, -0.0231394674628973, 0.0019876661244779825, 0.015407498925924301, -0.02052922360599041, -0.01482901256531477, -0.011202888563275337, -0.01934402994811535, 0.02807776816189289, 0.012218767777085304, 0.006776054389774799, 0.008839558809995651, 0.01327697467058897, 0.02257508970797062, 0.021869618445634842, -0.002322765067219734, -0.002322765067219734, -0.02968624420464039, 0.0035361761692911386, 0.015985986217856407, -0.025411086156964302, 0.017340490594506264, 0.003262805985286832, 0.011993017047643661, 0.00032694198307581246, 0.023153576999902725, -0.017340490594506264, -0.024804379791021347, 0.024423426017165184, -0.007633202243596315, 0.00370019837282598, 0.01652214489877224, -0.03806724771857262, -0.0037848548963665962, 0.00030357323703356087, -0.007520326878875494, -0.005213434807956219, -0.020980725064873695, -0.01791897788643837, 0.021234694868326187, -0.027372296899557114, -0.016508035361766815, -0.6054639220237732, -0.023365218192338943, 0.008296345360577106, -0.02621532417833805, -0.017086520791053772, -0.012084728106856346, -0.012021235190331936, 0.00996831338852644, 0.006031781900674105, 0.007022969424724579, 0.007068824954330921, -0.021530993282794952, -0.0011225816560909152, 0.002943580038845539, -0.024268222972750664, 0.0044550527818500996, 0.025862587615847588, -0.015661468729376793, 0.008211689069867134, -0.004987684078514576, -0.035358235239982605, 0.03651520982384682, -0.01422230713069439, -0.0014074158389121294, 0.0069100940600037575, 0.0021164147183299065, -0.0036402333062142134, 0.010412760078907013, 0.009982422925531864, 0.02195427566766739, -0.02748517319560051, 0.017509805038571358, 0.014998325146734715, 0.016903098672628403, 0.057594697922468185, -0.0088677778840065, 0.0037495812866836786, 0.020627988502383232, 0.004190501291304827, 0.058469485491514206, 0.008684354834258556, -0.009601468220353127, 0.016747895628213882, 0.023435765877366066, 0.021573320031166077, -0.0008192288805730641, 0.018314041197299957, -0.02689257636666298, -0.014123541302978992, -0.004793679341673851, 0.01010940782725811, -0.008500932715833187, 0.0028095406014472246, -0.011936578899621964, 0.0009797236416488886, -0.011689663864672184, 0.03490673378109932, -0.014998325146734715, 0.024240003898739815, 0.009227568283677101, 0.008691409602761269, 0.010560909286141396, -0.014201142825186253, -0.01018700934946537, -0.05457527935504913, 0.010165845043957233, -0.01338279526680708, -0.025114787742495537, 0.017650898545980453, -0.019555671140551567, 0.024014253169298172, 0.0005621726741082966, 0.0005533542716875672, -0.016747895628213882, 0.0016851952532306314, 0.00933338887989521, 0.01990840770304203, 0.0075697097927331924, -0.001911827945150435, 0.04097378998994827, 0.006049418821930885, -0.003552049398422241, -0.030702123418450356, -0.008938324637711048, 0.028811458498239517, 0.017665008082985878, -0.03343935310840607, -0.013015950098633766, 0.006783109158277512, 0.011026520282030106, 0.005749593488872051, 0.008790175430476665, -0.013573273085057735, -0.028331737965345383, 0.025354648008942604, 0.02083962969481945, -0.013128826394677162, -0.003114657010883093, -0.002920652274042368, -0.008670245297253132, 0.0028113042935729027, -0.014730246737599373, -0.005583807360380888, 0.0011560915736481547, 0.024155346676707268, -0.00734395906329155, -0.015181748196482658, -0.021502774208784103, 0.05282571166753769, -0.014998325146734715, -0.008127032779157162, -0.017509805038571358, -0.005943597760051489, 0.01088542677462101, 0.022123588249087334, -0.016874879598617554, 0.023463984951376915, 0.0002694019640330225, 0.020204706117510796, -0.002640227321535349, 0.01711473986506462, -0.012246986851096153, 0.0014656172133982182, -0.0064550647512078285, -0.0018642086070030928, 0.009530920535326004, -0.0016922499053180218, -0.00823285337537527, -0.010871317237615585, 0.009248732589185238, 0.012973622418940067, -0.031633343547582626, -0.000751327199395746, -0.008289290592074394, 0.03374975919723511, -0.011372202076017857, -0.00520285265520215, 0.01729816384613514, -0.00133157754316926, -0.036317676305770874, -0.009813109412789345, -0.011449803598225117, 0.022349338978528976, 0.004585565067827702, -0.032536350190639496, 0.007964774034917355, -0.03919599950313568, -0.0025220608804374933, 0.005386275239288807, 0.009996532462537289, -0.010313994251191616, -0.004324540961533785, 0.005308673717081547, 0.021629758179187775, -0.0111817242577672, 0.01683255098760128, 0.014885449782013893, -0.01978142373263836, 0.012663214467465878, -0.029516929760575294, 0.001418879721313715, 0.02903720922768116, -0.024620957672595978, -0.003202840918675065, -0.036261238157749176, -0.017538024112582207, 0.011188779026269913, 0.004430361557751894, -0.002768975915387273, -0.0239154864102602, -0.007633202243596315, -0.011061794124543667, -0.005841304548084736, 0.019061841070652008, -0.00855736993253231, 0.002664918778464198, -0.018864309415221214, 0.013467452488839626, -0.0010194063652306795, -0.0008805167162790895, 0.010645565576851368, 0.0075979288667440414, 0.003414482343941927, -0.013707312755286694, 0.035922612994909286, 0.01228225976228714, 0.022758513689041138, 0.01444100309163332, -0.00864908192306757, 0.009135857224464417, 0.008910105563700199, 0.006208149716258049, -0.012910129502415657, -0.030109526589512825, 0.005739011336117983, 0.015703797340393066, -0.0019894298166036606, 0.018144728615880013, -0.010567964054644108, 0.039393533021211624, 0.01698775589466095, -0.026483403518795967, 0.02052922360599041, -0.027315858751535416, -0.008063539862632751, -0.03885737434029579, -0.0022063623182475567, -0.00826107244938612, 0.035979051142930984, -0.007837789133191109, 0.016141189262270927, 0.0006283106049522758, -0.011449803598225117, -0.01804596371948719, -0.028839677572250366, 0.03394729271531105, -0.004063516389578581, 0.0018606812227517366, -0.018187057226896286, 0.02267385646700859, -0.000655647658277303, -0.007696694694459438, 0.020049501210451126, -0.01035632286220789, -0.007753132376819849, 0.003848347347229719, -0.0019224099814891815, 0.028952553868293762, 0.02024703472852707, -0.03674095869064331, 0.01885019987821579, 0.048084940761327744, 0.004663167055696249, 0.009178184904158115, 0.02282905951142311, 0.017340490594506264, 0.017749665305018425, -0.02521355450153351, 0.02676559053361416, -0.035950832068920135, 0.018003635108470917, 0.01173904724419117, 0.014144704677164555, -0.01633872091770172, -0.0025661529507488012, 0.020670317113399506, -0.0045820376835763454, 0.03355222940444946, -0.012148220092058182, 0.015238186344504356, -0.006786636542528868, -0.010483307763934135, 6.007531192153692e-05, 0.006712561938911676, -0.007072352338582277, -0.024917256087064743, 0.00986249279230833, 0.005682573653757572, 0.01853979378938675, 0.01677611470222473, 0.013926008716225624, -0.0019629746675491333, 0.014899559319019318, -0.01810240000486374, 0.022278791293501854, 0.000570991076529026, -0.025876697152853012, -0.023802610114216805, -0.02742873504757881, 0.007908335886895657, -0.0029541621915996075, -0.03964750096201897, -0.0018800817197188735, -0.041227757930755615, 0.016042424365878105, 0.02329467050731182, 0.0006481520249508321, 0.008811339735984802, 0.01714295893907547, 0.013149989768862724, -0.030673904344439507, -0.047718096524477005, 0.005298091564327478, 0.022998373955488205, 0.004419779404997826, -0.0355839878320694, 0.005375693552196026, 0.013460397720336914, -0.006356298923492432, 0.02143222652375698, 0.008077649399638176, 0.006786636542528868, -0.0015538011211901903, -0.008705519139766693, -0.013227592222392559, -0.012211713008582592, 0.04444471001625061, -0.0021199421025812626, -0.0008351019932888448, -0.0014294617576524615, 0.005019430071115494, 0.012881910428404808, -0.023379327729344368, -0.009058254770934582, 0.04421895742416382, -0.0006247832789085805, -0.015732016414403915, -0.026977233588695526, 0.007724913768470287, -0.00994009431451559, -0.008783120661973953, -0.006814855150878429, -0.02311124838888645, -0.036656301468610764, 0.020289361476898193, 0.013453342951834202, -0.007703749462962151, -0.005111141595989466, 0.03298785164952278, 0.012818418443202972, -0.01825760491192341, -0.010476252995431423, 0.0032116593793034554, -0.005523842293769121, 0.06569351255893707, 0.002128760563209653, -0.0002233258419437334, 0.012599722482264042, -0.0024409317411482334, -0.0138695714995265, 0.003589086700230837, -0.021404007449746132, 0.03056102804839611, -0.014941887930035591, 0.013037114404141903, 0.009298115037381649, -0.018596230074763298, 0.002495605731382966, 0.027809688821434975, 0.03329825773835182, -0.002966508036479354, -0.027837907895445824, -0.014137649908661842, -0.011442748829722404, 0.009467428550124168, -0.011590898036956787, 0.011435694061219692, 0.014603261835873127, 0.04390855133533478, 0.034060169011354446, 0.022603308781981468, 0.009954203851521015, 0.0007231083582155406, -0.012783144600689411, -0.014405729249119759, -3.447441122261807e-05, 0.001030870364047587, 0.01128754485398531, -0.009636742062866688, 0.027964893728494644, -3.4309065085835755e-05, -0.015985986217856407, 0.0015441009309142828, -0.0045820376835763454, 0.01405299361795187, 0.007456834428012371, 0.010010641999542713, 0.007633202243596315, 0.03425769880414009, -0.008959488943219185, 0.001009706174954772, 0.024705614894628525, -0.014814903028309345, -0.012416299432516098, 0.02835995703935623, -0.005435658618807793, -0.03084321692585945, -0.022659746930003166, 0.015548593364655972, -0.006737253628671169, 0.025044240057468414, -0.005425076466053724, -0.004165809601545334, -0.0494394488632679, -0.02034579962491989, 0.012585612945258617, -0.036317676305770874, 0.007816624827682972, 0.001844808110035956, -0.008903050795197487, -0.013693203218281269, -0.0014329891419038177, -0.018116509541869164, -0.00994009431451559, -0.03219772130250931, -0.01256444863975048, -0.035386454313993454, 3.7547069950960577e-06, 0.019485125318169594, 0.021474555134773254, 0.012338697910308838, 0.013904844410717487, -0.02171441540122032, 0.0053651113994419575, 0.009065309539437294, -0.010737277567386627, -0.004673749208450317, -0.04870575666427612, -0.018158838152885437, 0.0061940401792526245, -0.007866008207201958, -0.015308733098208904, -0.04038119316101074, 0.01770733669400215, -0.0006410973146557808, 0.013149989768862724, 0.03030705824494362, 0.002220471855252981, 0.001848335494287312, 0.01732638105750084, 0.027555719017982483, 0.004370396491140127, 0.01894896663725376, -0.019851969555020332, 0.02177085354924202, -0.005008848384022713, -0.02745695412158966, -0.016423378139734268, -0.009022981859743595, -0.0051040868274867535, 0.008606753312051296, -0.011844867840409279, 0.02668093517422676, -0.014758464880287647, -0.01018700934946537, -0.01352388970553875, -0.00897359848022461, -0.001291894819587469, 0.010208173654973507, 0.0026984286960214376, 0.004525600001215935, -0.007866008207201958, 0.0016490397974848747, -0.004857171792536974, 0.024141237139701843, -0.047040846198797226, 0.031040748581290245, 0.0037742729764431715, 0.001738987397402525, 0.017876649275422096, -0.004201082978397608, -0.015943657606840134, -0.04565811902284622, -0.01646570675075054, 0.008381002582609653, 0.027682704851031303, 0.01288896519690752, -0.030109526589512825, -0.03803902864456177, -0.0035079573281109333, -0.009735507890582085, -0.008472713641822338, -0.017086520791053772, -0.0032116593793034554, -0.019217045977711678, -0.022532761096954346, 0.01657858118414879, -0.008084704168140888, 0.009791945107281208, -0.024028360843658447, -0.027160655707120895, 0.01298067718744278, -0.0019717931281775236, 0.006370408460497856, -0.011943633668124676, -0.03434235602617264, -0.009876602329313755, -0.015097091905772686, -0.013982446864247322, -0.027837907895445824, 0.012599722482264042, -0.0035150120966136456, 0.019400468096137047, 0.0034920843318104744, 0.02394370548427105, -0.003158748848363757, -0.01693131774663925, 0.01234575267881155, -0.0005657000001519918, -0.012169384397566319, -0.007414506282657385, -0.014532714150846004, 0.006550303660333157, -0.005985926371067762, 0.03146403282880783, 0.010024750605225563, -0.003075856016948819, -0.02270207554101944, 0.008162305690348148, 0.03084321692585945, -0.005520314909517765, -0.03327003866434097, -0.021291131153702736, -0.03487851470708847, -0.017650898545980453, 0.02593313530087471, -0.0262435432523489, 0.0002634495322126895, -0.02900899015367031, 0.0011340455384925008, 0.032621003687381744, -0.009559139609336853, 0.023844938725233078, -0.011520350351929665, 0.012155274860560894, -0.013926008716225624, -0.004867753945291042, -0.004744296427816153, 3.827734326478094e-05, -0.02668093517422676, -0.009467428550124168, -0.02742873504757881, -0.015252294950187206, 0.012465682812035084, -0.0009938330622389913, 0.025763820856809616, 0.01947101578116417, -0.00023170332133304328, -0.007753132376819849, 0.0002458127564750612, 0.007086461875587702, 0.0021252331789582968, 0.0044832718558609486, -0.023280560970306396, -0.036317676305770874, -0.031068967655301094, -0.016324611380696297, -0.01633872091770172, 0.0027813217602670193, 0.013700257986783981, 0.005911851767450571, 0.035922612994909286, -0.0057954490184783936, -0.0002843932306859642, -0.009545030072331429, -0.01897718571126461, 0.037502869963645935, -0.0010008878307417035, 0.03121006302535534, 0.005368638783693314, -0.002686083083972335, -0.023238234221935272, -0.017566241323947906, 0.010257557034492493, -0.01049741730093956, 0.004758405964821577, 0.03583795577287674, -0.02621532417833805, -4.293456004234031e-05, -0.006292806472629309, -0.007365123368799686, 0.007061770651489496, -0.014631479978561401, 0.026695044711232185, 0.03733355551958084, 0.01465969905257225, -0.017538024112582207, -0.021728524938225746, -0.02136167883872986, 0.010659675113856792, -0.04283623397350311, 0.03293141350150108, 0.01639515906572342, -0.024183565750718117, -0.008127032779157162, 0.04656112194061279, 0.009079419076442719, 0.02611655741930008, -0.025481633841991425, 0.031040748581290245, 0.00489949993789196, 0.02347809448838234, 0.00955208484083414, -0.002536170184612274, 0.01419408805668354, 0.03053280897438526, -0.016719676554203033, -0.0004982393002137542, 0.0057284291833639145, 0.010172899812459946, -0.0009841328719630837, 0.003933004103600979, 0.005252236034721136, 0.03612014278769493, -0.001351859886199236, -0.002384493825957179, 0.0028677419759333134, -0.004980629310011864, 0.011280490085482597, -0.014250526204705238, -0.032254159450531006, -0.004112899303436279, 0.004296321887522936, -0.010440979152917862, 0.024451645091176033, -0.012853692285716534, -0.03544289246201515, -0.005851886700838804, -0.008049430325627327, -0.019866079092025757, -0.016423378139734268, -0.025425195693969727, 0.015520374290645123, -0.029827337712049484, -0.02471972443163395, 0.0020970143377780914, -0.008740792982280254, 0.01776377484202385, 0.008296345360577106, -0.010426869615912437, -0.027344077825546265, 0.023774391040205956, -0.012881910428404808, 0.02689257636666298, 0.01732638105750084, -0.011520350351929665, -0.025382867082953453, 0.015082982368767262, -0.020853739231824875, -0.009453319013118744, 0.015365171246230602, -0.016042424365878105, -0.03216950222849846, -0.01564735919237137, 0.010377487167716026, 0.027104217559099197, -0.01057501882314682, -0.0047795698046684265, 0.02143222652375698, -0.003968277480453253, 0.007576764561235905, -0.003592614084482193, -0.009777835570275784, 0.018469246104359627, -0.01411648653447628, -0.004828952718526125, 0.017128849402070045, -0.00352912163361907, -0.0017239961307495832, -0.010772550478577614, 0.015562702901661396, -0.018497465178370476, -0.018751434981822968, -0.01441278401762247, -0.022335229441523552, 0.008825449272990227, 0.002082904800772667, -0.008395112119615078, -0.0006164057995192707, -0.0355839878320694, -0.01729816384613514, 0.018906638026237488, -0.006603213958442211, 0.030419934540987015, 0.034088388085365295, -0.010814879089593887, 0.004955937620252371, 0.010243447497487068, -0.009763726964592934, 0.0009709052392281592, 0.00348679325543344, -0.011964797973632812, -0.03617658093571663, -0.003971804864704609, -0.013777859508991241, 0.03961928188800812, 0.01882198080420494, -0.007463889196515083, -0.021319350227713585, 0.006275169551372528, -0.02350631356239319, -0.009594413451850414, 0.005594389513134956, 0.013904844410717487, 0.01739692874252796, 0.008684354834258556, 0.028839677572250366, 0.03589439392089844, 0.013093552552163601, 0.019329920411109924, -0.009509757161140442, 0.01529462356120348, -0.013904844410717487, -0.01804596371948719, 0.04424717649817467, -0.0027601574547588825, -0.02205304056406021, -0.01944279670715332, -0.018751434981822968, -0.0037954370491206646, -0.00819757953286171, 0.01465969905257225, -0.01944279670715332, 0.004867753945291042, 0.0023104194551706314, 0.005820140242576599, 0.007971828803420067, 0.006458592135459185, -0.00665259687229991, -0.03216950222849846, 0.009918930009007454, 0.0119577432051301, -0.01252917479723692, -0.01142863929271698, 0.016635019332170486, 0.011252271942794323, 0.006712561938911676, -0.0017090048640966415, -0.019541561603546143, -0.00811997801065445, 0.005555588752031326, -0.008839558809995651, 0.014137649908661842, -0.004952410236001015, 0.008931269869208336, 0.018892528489232063, 0.0018677359912544489, -0.009298115037381649, -0.0012654396705329418, -0.01181664876639843, -0.014744356274604797, -0.00040035511483438313, -0.006426846142858267, -0.004179919138550758, 0.016663238406181335, -0.023802610114216805, 0.015590921975672245, -0.01167555432766676, -0.020627988502383232, -0.018680887296795845, 0.001202829065732658, -0.0006587340612895787, 0.04074803739786148, 0.003067037556320429, 0.0030617467127740383, -0.009855438023805618, 0.010313994251191616, 0.005453295074403286, -0.021996604278683662, 0.006698452401906252, 0.02991199493408203, -0.03716424107551575, 0.011054739356040955, 0.011943633668124676, -0.012860747054219246, -0.019202936440706253, 0.003756636055186391, 0.005537951830774546, 0.0009365135338157415, -0.025636836886405945, 0.20893245935440063, -0.0018359897658228874, 0.0003154780715703964, 0.0085079874843359, 0.00429279450327158, 0.008430385030806065, 0.012754926458001137, 0.006814855150878429, -0.014137649908661842, 0.028162425383925438, -0.0023068920709192753, -0.010257557034492493, -0.03849053010344505, -0.005640245042741299, 0.00756265502423048, -0.0006349243922159076, -0.030984312295913696, -0.022038931027054787, -0.012832527980208397, -0.00223634485155344, -0.0023368746042251587, 0.0015820199623703957, -0.03126649931073189, 0.016141189262270927, 0.048931509256362915, -0.00652913935482502, 0.015732016414403915, -0.008324564434587955, -0.004000023938715458, 0.017693227156996727, -0.007245193235576153, -0.01760856993496418, 0.0131358802318573, 0.02124880440533161, -0.017340490594506264, 0.007901282049715519, 0.029827337712049484, -0.008021212182939053, 0.005918906535953283, 0.0018430445343255997, 0.016127079725265503, -0.016917208209633827, 0.016888989135622978, 0.0019277010578662157, 0.004751351196318865, -0.009015927091240883, 0.007393341977149248, 0.009756672196090221, 0.01234575267881155, 0.018299931660294533, -0.034116603434085846, 0.019527453929185867, 0.018158838152885437, 0.0169595368206501, -0.009813109412789345, 0.0021199421025812626, 0.005213434807956219, 0.002430349588394165, -0.0047795698046684265, 0.01872321590781212, -0.006617323495447636, 0.027344077825546265, 0.011661444790661335, 0.015633249655365944, -0.044924430549144745, 0.008070594631135464, -0.022194135934114456, 0.05677635222673416, 0.020317580550909042, -0.016014205291867256, -0.027781469747424126, -0.026638606563210487, -0.026624497026205063, -0.0010008878307417035, -0.019428687170147896, -0.026878466829657555, -0.006398627068847418, 0.028303518891334534, 0.01804596371948719, 0.030504589900374413, 0.0033615720458328724, -0.021446336060762405, -0.020472785457968712, -0.0085079874843359, -0.010130572132766247, -0.045234836637973785, 0.013065333478152752, -0.012183493934571743, 0.004536182153970003, -0.006966531742364168, 0.016254065558314323, -0.022659746930003166, -0.02182728983461857, -0.025425195693969727, 0.01856801100075245, -0.014913668856024742, -0.0139118991792202, 0.018991295248270035, -0.008564424701035023, -0.02608833834528923, -0.024324659258127213, 0.04718193784356117, 0.01242335420101881, 0.0062222592532634735, -0.02342165634036064, 0.002005303045734763, -0.04289267212152481, 0.008719628676772118, -0.010694948956370354, -0.012684378772974014, 0.011336928233504295, -0.03310072794556618, 0.01590132899582386, -0.022504543885588646, 0.010130572132766247, 0.013742586597800255, 0.031689781695604324, -0.0031552216969430447, -0.0108219338580966, -0.0039894417859613895, 0.0010996537748724222, -0.016888989135622978, 0.026102447882294655, 0.004465634934604168, -0.00489949993789196, -0.016818441450595856, -0.02373206429183483, 0.0021146510262042284, -0.002989435801282525, -0.03899846971035004, 0.017961306497454643, -0.004035297315567732, 0.0019753205124288797, -0.020938396453857422, 0.002019412349909544, 0.002574971178546548, 0.01872321590781212, -0.023746173828840256, -0.0037354719825088978, -0.017058301717042923, -0.007104098796844482, 0.030335277318954468, 0.042469389736652374, 0.014546823687851429, 0.005499151069670916, -0.03583795577287674, 0.0013280502753332257, 0.003915367182344198, -0.008493877947330475, -0.012112947180867195, -0.02043045684695244, 0.023717954754829407, -0.007001805119216442, 0.009523865766823292, 0.005865996237844229, -0.02298426441848278, 0.018426917493343353, -0.015915438532829285, -0.0009065309423021972, 0.00683249207213521, -0.04537593200802803, 0.025707384571433067, 0.004716077353805304, 0.012381026521325111, -0.004465634934604168, -0.02344987541437149, -0.18014922738075256, 0.010927754454314709, 0.018285823985934258, 0.0005277809104882181, 0.03453988954424858, 0.00486069917678833, 0.03992969170212746, 0.0007949782884679735, 0.0005564406746998429, 0.017312271520495415, 0.006663179025053978, 0.0038412928115576506, -0.013312248513102531, -0.037474650889635086, 0.002564389258623123, 0.0009779599495232105, 0.0014858994400128722, 0.021996604278683662, 0.031943753361701965, 0.019358139485120773, 0.03809546306729317, -0.04859288036823273, 0.022377558052539825, 0.00709704402834177, 0.008832504041492939, -0.0016225846484303474, -0.008268127217888832, 0.002724883845075965, 0.007619093172252178, -0.04416251927614212, -0.021107709035277367, -0.003925949335098267, 0.031012529507279396, 0.004585565067827702, 0.029206523671746254, -0.011922469362616539, 0.01451860461384058, 0.008500932715833187, -0.013008895330131054, 0.03803902864456177, 0.02534053847193718, 0.037587523460388184, -0.007379232440143824, -0.008797230198979378, 0.016451597213745117, 0.00764731178060174, 0.002772503299638629, -0.0003291465691290796, 0.021516883745789528, -0.003268097061663866, 0.027386406436562538, -0.01947101578116417, 0.012105892412364483, 0.0028871423564851284, -0.0075979288667440414, 0.008423330262303352, 0.00420813774690032, 0.015703797340393066, 0.018130619078874588, -0.011273435316979885, 0.010349268093705177, 0.000472665939014405, 0.0009700233931653202, 0.019245265051722527, 0.0123739717528224, -0.040889132767915726, -0.012987731955945492, 0.018991295248270035, -0.01996484585106373, 0.007555600721389055, -0.008423330262303352, 0.008543260395526886, -0.0005485041183419526, 0.009911875240504742, 0.01497010700404644, 0.009213458746671677, -0.008592643775045872, 0.004370396491140127, 0.03465276211500168, 0.010462143458425999, -0.013149989768862724, 0.02024703472852707, -0.05178161337971687, -0.002731938613578677, -0.014927778393030167, -0.013848407194018364, -0.0017936615040525794, 0.008204634301364422, 0.008395112119615078, 0.0025396975688636303, 0.02676559053361416, -0.0479438491165638, 0.007100571412593126, -0.011231107637286186, 0.002470914274454117, 0.02745695412158966, 0.01358738262206316, -0.0011261090403422713, 0.04165104031562805, 0.03335469588637352, 0.005185216199606657, -0.004366869106888771, -0.0324799120426178, -0.024550409987568855, -0.008832504041492939, -0.004751351196318865, -0.002358038676902652, 0.004257521126419306, 0.03482207655906677, -0.029742682352662086, -0.027696814388036728, 0.011019465513527393, 0.01729816384613514, -0.004165809601545334, -0.01763678900897503, 0.02621532417833805, 0.01312177162617445, -0.000923285901080817, 0.017594460397958755, -0.01791897788643837, 0.057848669588565826, -0.008282235823571682, 0.0022398722358047962, 0.02065620757639408, 0.006151712033897638, -0.021982494741678238, -0.12529174983501434, -0.019993064925074577, 0.005079395137727261, 0.006500920746475458, -0.007555600721389055, -0.005724901799112558, 0.007760187145322561, 0.03738999366760254, -0.03978859633207321, 0.0285998173058033, -0.04289267212152481, -0.006684343330562115, -0.0011261090403422713, -0.009686124511063099, -0.008437439799308777, -0.0072381384670734406, 0.0033016069792211056, -0.010158790275454521, -0.0011587371118366718, 0.030956093221902847, 0.015844890847802162, -0.012268150225281715, 0.010603237897157669, -0.00214639725163579, -0.0308714359998703, -0.0011269908864051104, 0.0017918978119269013, 0.0029153611976653337, -0.0008888941956683993, -0.004021187778562307, 0.02133345976471901, 0.013679093681275845, 0.004529127385467291, -0.0138695714995265, 0.0057672299444675446, -0.010116462595760822, 0.009340443648397923, 0.007477998733520508, 0.03202841058373451, -0.030137745663523674, 0.00748505350202322, 0.004638475365936756, 0.00041137810330837965, -0.01164733525365591, -0.018963076174259186, 0.012606777250766754, -0.01801774464547634, 0.02425411343574524, 0.011590898036956787, -0.0023368746042251587, -0.030504589900374413, -0.013686148449778557, -0.031633343547582626, -0.01611297018826008, 0.03744643181562424, -0.0370795875787735, -0.00402824254706502, 0.0018677359912544489, -0.00989071186631918, -0.0025679164100438356, -0.006733726244419813, -0.018582120537757874, -0.0013818424195051193, 0.03214128315448761, 0.0050758677534759045, 0.00029762080521322787, -0.016903098672628403, -0.004042352084070444, 0.014208197593688965, 0.0075062173418700695, -0.01693131774663925, 0.00919229444116354, -0.015026544220745564, 0.022814949974417686, -0.03899846971035004, -0.001915355329401791, 0.021418116986751556, -0.005950652528554201, 0.009608522988855839, 0.004634948447346687, -0.016635019332170486, -0.01419408805668354, 0.004405669867992401, -0.03959106281399727, 0.016917208209633827, 0.03293141350150108, 0.04752056673169136, -0.011964797973632812, 0.015449827536940575, -0.05920317396521568, -0.01242335420101881, 0.012994786724448204, -0.007075879722833633, -0.039732158184051514, -0.01352388970553875, 0.025114787742495537, -0.011456858366727829, 0.009015927091240883, -0.006472701672464609, 0.029432274401187897, -0.015520374290645123, -0.006814855150878429, -0.05370049551129341, 0.011379256844520569, -0.004670221824198961, -0.01480079349130392, 0.0032822065986692905, -0.02282905951142311, -0.02264563739299774, -0.002089959569275379, 0.0060247271321713924, 0.01988018862903118, -0.019273484125733376, 0.013037114404141903, -0.011837813071906567, -0.0278237983584404, -0.0007041487842798233, -0.03276209905743599, 0.00502295745536685, -0.002451513661071658, -0.007065297570079565, 0.036289457231760025, -0.0088677778840065, 0.022927826270461082, 0.0058589414693415165, 0.010335158556699753, -0.015068872831761837, -0.008790175430476665, 0.023097138851881027, 0.030165964737534523, -0.007358068600296974, -0.019696766510605812, 0.007816624827682972, -0.03358044847846031, -0.002941816346719861, 0.006984168663620949, 0.0006591749843209982, 0.022405777126550674, 0.009954203851521015, 0.0029400528874248266, 0.00864908192306757, 0.010278720408678055, -0.03152047097682953, -0.02994021400809288, 0.011188779026269913, -0.03089965507388115, -0.008451549336314201, -0.014617371372878551, -0.010645565576851368, 0.00936160795390606, 0.024931365624070168, 0.003463865490630269, 0.02779557928442955, 0.01043392438441515, -0.00894537940621376, -0.03849053010344505, -0.010060024447739124, -0.006412736605852842, 0.0055344244465231895, 0.0027389933820813894, -0.013841352425515652, -0.028162425383925438, 0.04139707237482071, 0.01758035086095333, 0.013608546927571297, -0.041594602167606354, 0.029206523671746254, -0.01444100309163332, -0.04664577916264534, 0.0026543368585407734, -0.0055979168973863125, -0.02251865342259407, -0.025538070127367973, -0.0032733881380409002, 0.020204706117510796, 0.020289361476898193, 0.00665259687229991, -0.007809570524841547, -0.005474459379911423, 0.026469293981790543, -0.010765496641397476, 0.007086461875587702, 0.016479816287755966, -0.024550409987568855, 0.006987696047872305, 0.021728524938225746, 0.04630715399980545, -0.004917136859148741, -0.00037015212001278996, 0.022913716733455658, -0.006109383888542652, 0.004141117911785841, -0.020740864798426628, 0.007654366549104452, -0.010398650541901588, 0.0072381384670734406, 0.010948918759822845, -0.0015432190848514438, 0.005389802623540163, 0.01341806910932064, 0.0012301660608500242, 0.0037107805255800486, 0.01206356380134821, 0.007830734364688396, 0.004172864370048046, -0.016818441450595856, -0.012790199369192123, 0.018765544518828392, -0.009467428550124168, -0.03916778042912483, 0.0185115747153759, 0.030363496392965317, -0.006144657265394926, 0.013015950098633766, -0.008289290592074394, 0.024578629061579704, -0.005506205838173628, 0.013396904803812504, 0.0008328973781317472, -0.022038931027054787, 0.0006494747940450907, 0.014490386471152306, -0.006292806472629309, 0.00958030391484499, 0.02562272734940052, -0.010031805373728275, 0.018680887296795845, 0.02105127088725567, 0.013241701759397984, -0.01256444863975048, -0.0033157162833958864, -0.014758464880287647, 0.02050100453197956, -0.0108219338580966, -0.00986249279230833, -0.003975332248955965, 0.011280490085482597, -0.03310072794556618, 0.012500956654548645, 0.014631479978561401, -0.010194064117968082, 0.09131623804569244, 0.02239166758954525, -0.01621173694729805, 0.0023280561435967684, -0.014589152298867702, 0.00982721894979477, 0.001998248277232051, 0.00178396119736135, -0.009728453122079372, -0.04413430020213127, 0.00740039674565196, -0.005079395137727261, -0.020416347309947014, -0.0324234738945961, 0.0009171130368486047, 0.004758405964821577, -0.024479864165186882, -0.015322842635214329, 0.012324588373303413, -0.020289361476898193, 0.03372154012322426, 0.0018659722991287708, 0.013742586597800255, -0.015689687803387642, -0.01801774464547634, 0.0010564436670392752, 0.02999665029346943, -0.010208173654973507, -0.009185239672660828, -0.020754974335432053, 0.01988018862903118, -0.01611297018826008, -0.020486894994974136, -0.032282378524541855, -0.0036508154589682817, 0.008289290592074394, -0.003943586256355047, -0.02515711635351181, 0.017255835235118866, 0.02629997953772545, 0.008204634301364422, -0.007696694694459438, -0.01959799975156784, -0.02996843308210373, 0.011654390022158623, 0.016874879598617554, -0.0035079573281109333, -0.0037919096648693085, -0.024959584698081017]"
Building a Background Processing Pipeline with Dragonfly,Building a Background Processing Pipeline with Dragonfly,"## Introduction  In this blog post, you will learn how to use [Redis Lists](https://redis.io/docs/data-types/lists/) to build a background processing pipeline with [Dragonfly](/).  Dragonfly is an in-memory data store built for modern application workloads. It is fully compatible with the Redis and Memcached APIs and delivers 25X more throughput, higher cache hit rates, with lower tail latency, and effortless vertical scalability.  The particular use case we will be exploring is that of a marketing automation system that ingests user events and sends notifications based on some of them - for example, a welcome email when a user registers on a website.  ## High level solution architecture  The application includes the following components:  1. Dragonfly - a Redis compatible in-memory data store that is used as the backend for the producer and worker applications 2. A producer application that simulates a website user registration process. 3. A worker application that processes these user registration requests and sends welcome emails.  Both producer and worker applications are written in Go and make use of the _gocelery_ library. The _gocelery_ library lets you implement celery workers and submit celery tasks in Go.  Behind the scenes _gocelery_ uses Redis List so that we don't have to deal with it in our applications. Instead, _gocelery_ provides us with a simplified API to submit and process tasks that need to be handled asynchronously.  Alternatively, you can use go-worker or any Go Redis client to implement this using vanilla Redis List commands (combination of `LPUSH` and `BRPOP`)  ### Producer application  We start with the producer application, that is generating fake user registrations and adding them to a task queue.  In the code block below, the following things are happening:  1. First, we create a Redis connection pool and use it to create an instance of `gocelery.CeleryClient`. The `Delay` method is used to submit a task to the worker application. 2. The first argument is the name of the task and the second argument is the data that needs to be processed by the worker application. 3. Then we create a Go channel that will be used to listen for `SIGINT` and `SIGTERM` signals. A `goroutine` is started to send a mock user registration to the worker application every second. The mock data is generated using go-randomdata library. 4. Finally, we wait for the `exit` channel to receive a signal and then terminate the producer loop and the application.  ```go package main  import ( ""fmt"" ""log"" ""os"" ""os/signal"" ""syscall"" ""time""  rdata ""github.com/Pallinder/go-randomdata"" ""github.com/gocelery/gocelery"" ""github.com/gomodule/redigo/redis"" )  const ( redisHostEnvVar     = ""REDIS_HOST"" redisPasswordEnvVar = ""REDIS_PASSWORD"" taskName            = ""users.registration.email"" )  var ( redisHost string )  func init() { redisHost = os.Getenv(redisHostEnvVar) if redisHost == """" { redisHost = ""localhost:6379"" }  }  func main() { redisPool := &redis.Pool{ Dial: func() (redis.Conn, error) { c, err := redis.Dial(""tcp"", redisHost)  if err != nil { return nil, err } return c, err }, }  celeryClient, err := gocelery.NewCeleryClient( gocelery.NewRedisBroker(redisPool), &gocelery.RedisCeleryBackend{Pool: redisPool}, 1, )  if err != nil { log.Fatal(err) }  exit := make(chan os.Signal, 1) signal.Notify(exit, syscall.SIGINT, syscall.SIGTERM) closed := false  go func() { fmt.Println(""celery producer started..."")  for !closed { res, err := celeryClient.Delay(taskName, rdata.FullName(rdata.RandomGender)+"",""+rdata.Email()) if err != nil { panic(err) } fmt.Println(""sent data and generated task"", res.TaskID, ""for worker"") time.Sleep(1 * time.Second) } }()  <-exit log.Println(""exit signalled"")  closed = true log.Println(""celery producer stopped"") } ```  ### Worker application  Now we turn to the worker application, which should pick tasks off the queue and send emails corresponding to them.  1. First we create a Redis connection pool and use it to create an instance of `gocelery.CeleryClient`. The Celery client is used to receive tasks from Dragonfly List. 2. The `Register` method is used to register a function that will be called when a task is received. The first argument is the name of the task and the second argument is the function that will be called when a task is received. 3. In a `goroutine`, we start the worker instance which will start listening for events from Dragonfly. 4. Finally, we wait for the `exit` channel to receive a signal, stop the Celery worker instance and then gracefully shutdown the application.  ```go package main  import ( ""fmt"" ""log"" ""math/rand"" ""net/smtp"" ""os"" ""os/signal"" ""strings"" ""syscall"" ""time""  ""github.com/gocelery/gocelery"" ""github.com/gomodule/redigo/redis"" ""github.com/hashicorp/go-uuid"" )  const ( redisHostEnvVar = ""REDIS_HOST"" taskNameEnvVar  = ""TASK_NAME"" smtpServer      = ""localhost:1025"" taskName        = ""users.registration.email"" )  const fromEmail = ""admin@foo.com""  const emailBodyTemplate = ""Hi %s!!\n\nHere is your auto-generated password %s. Visit https://foobar.com/login to login update your password.\n\nCheers,\nTeam FooBar.\n\n[processed by %s]""  const autogenPassword = ""foobarbaz_foobarbaz""  const emailHeaderTemplate = ""From: %s"" + ""\n"" + ""To: %s"" + ""\n"" + ""Subject: Welcome to FooBar! Here are your login instructions\n\n"" + ""%s""  var ( redisHost string workerID  string )  func init() { redisHost = os.Getenv(redisHostEnvVar) if redisHost == """" { redisHost = ""localhost:6379"" }  rnd, _ := uuid.GenerateUUID() workerID = ""worker-"" + rnd }  func main() { redisPool := &redis.Pool{ Dial: func() (redis.Conn, error) { c, err := redis.Dial(""tcp"", redisHost) if err != nil { return nil, err } return c, err }, }  celeryClient, err := gocelery.NewCeleryClient( gocelery.NewRedisBroker(redisPool), &gocelery.RedisCeleryBackend{Pool: redisPool}, 1, )  if err != nil { log.Fatal(""failed to create celery client "", err) }  sendEmail := func(registrationEvent string) { name := strings.Split(registrationEvent, "","")[0] userEmail := strings.Split(registrationEvent, "","")[1]  fmt.Println(""user registration info:"", name, userEmail)  sleepFor := rand.Intn(9) + 1 time.Sleep(time.Duration(sleepFor) * time.Second)  body := fmt.Sprintf(emailBodyTemplate, name, autogenPassword, workerID) msg := fmt.Sprintf(emailHeaderTemplate, fromEmail, userEmail, body)   err := smtp.SendMail(smtpServer, nil, ""test@localhost"", []string{""foo@bar.com""}, []byte(msg)) if err != nil { log.Fatal(""failed to send email - "", err) }  fmt.Println(""sent email to"", userEmail)  }  celeryClient.Register(taskName, sendEmail)  go func() { celeryClient.StartWorker() fmt.Println(""celery worker started. worker ID"", workerID) }()  exit := make(chan os.Signal, 1) signal.Notify(exit, syscall.SIGINT, syscall.SIGTERM)  <-exit fmt.Println(""exit signalled"")  celeryClient.StopWorker() fmt.Println(""celery worker stopped"") } ```  ## Pre-requisites  To run the whole application using instructions in the blog, you will need the following installed on your local machine:  1. Go 2. Docker  ## Run the application  Our worker application will send emails. Rather than using an external service, we will make use of a mock SMTP server to keep things simple, yet realistic.  1. Start the SMTP server in Docker  ```shell docker run --rm -p 1080:1080 -p 1025:1025 soulteary/maildev ```  Once the container starts, you should see these logs:  ```shell MailDev using directory /tmp/maildev-1 MailDev webapp running at http://0.0.0.0:1080 MailDev SMTP Server running at 0.0.0.0:1025 ```  2. Start Dragonfly in Docker (refer to the documentation for Linux or MacOS specific instructions)  ```shell docker run --rm -p 6379:6379 --ulimit memlock=-1 docker.Dragonfly.io/Dragonfly/dragonfly ```  3. Start the worker application  ```shell go run worker/worker.go ```  You should see this log (worker ID might be different in your case):  ```shell celery worker started. worker ID worker-0d8d8b51-d351-ba87-c012-2b404439e1f2 ```  4. Start the producer application  ```shell go run producer/producer.go ```  As the producer applications starts and continues to send mock data, you should see these logs (task ID might be different in your case):  ```shell celery producer started... sent data and generated task 3687275c-748b-4eaf-b540-dbe772123fa8 for worker sent data and generated task 7da24e60-f33b-4690-9262-6408ac85a9ef for worker ... ```  ### Verify the results  As the producer application sends mock user data, the worker application will process it and send emails. To check the emails, navigate to the user interface of the SMTP server using a browser - `http://localhost:1080/`  ![](/assets/blog/building-a-background-processing-pipeline-with-dragonfly/email-preview.png ""Email sent by the worker application"")  This is a good time to peek into Dragonfly. Since it runs locally in a Docker container, we can connect to it using the `redis-cli`. After connecting, check a key called `celery` - this is the List that acts as the queue to hold the user registration events thats ultimately processed by the worker application.  ```shell 127.0.0.1:6379> llen celery  (integer) 106 ```  At the end of the email, you will notice `[processed by worker-<random uuid>]`. More on this in the next section.  ### Scaling the background processing pipeline  Using a List allows us to scale the processing pipeline horizontally by simply adding more worker applications. To start another instance of the worker application:  ```shell go run worker/worker.go ```  After a few seconds, you will notice from the worker application logs that both the instances are processing data from the List (`celery`). If you look closely at the email contents, at the end you will be able to see which instance of the worker application actually processed and sent that email.  This is only meant for learning/testing purposes.  You can continue to start additional worker instances.  ## Solution code walk through  Now that youve seen the application in action, lets take a look at the code. I will be highlighting the key parts of the code that are relevant to the blog post.  [The complete code is available on GitHub](https://github.com/dragonflydb/background-process-example)  ## Conclusion  In this blog post, we saw how to use Dragonfly and Go to build a background processing pipeline. The use case was a marketing automation system where we were sending emails to users who registered on a website. However, the same approach can be used to build any kind of processing pipeline using Dragonfly as the message backend. We also saw how to scale the background processing pipeline horizontally by simply adding more worker applications.","[-0.009448114782571793, 0.01087189745157957, -0.010498672723770142, -0.016933344304561615, -0.0053460984490811825, 0.0030220835469663143, -0.028005676344037056, 0.0032311584800481796, -0.018979167565703392, -0.01740333065390587, 0.009489583782851696, -0.007844630628824234, -0.019697971642017365, -0.008280059322714806, 0.0343090258538723, 0.02571103535592556, 0.009005773812532425, -0.03497253730893135, 0.006769881583750248, -0.009648550301790237, -0.016338948160409927, 0.010457203723490238, 0.005498153157532215, -0.0047171455807983875, -0.019905317574739456, -0.017348038032650948, 0.021342923864722252, -0.0075128753669559956, -0.003628573613241315, 0.01570308394730091, 0.013477559201419353, -0.022158488631248474, -0.0004933132440783083, 0.008915923535823822, -0.01212980318814516, -0.013857695274055004, 0.023914027959108353, 0.023236693814396858, 0.015094866044819355, 0.010858074761927128, 0.023969320580363274, -0.001926599768921733, -0.0012717286590486765, -0.0242043137550354, -0.020416773855686188, 0.025088993832468987, 0.01212980318814516, -0.046611618250608444, 0.014693995006382465, -0.03394962474703789, 0.013615790754556656, 0.0022289808839559555, -0.016974812373518944, 0.002572831464931369, -0.0008976400131359696, 0.022877292707562447, 0.015122512355446815, 0.008335351943969727, 0.011500850319862366, -0.009565611369907856, 0.013629613444209099, 0.022421129047870636, -0.008162562735378742, -0.023457864299416542, -0.014873695559799671, -0.010339707136154175, -0.025780150666832924, -0.007340086158365011, 0.00403635622933507, -0.009531053714454174, 0.03676954656839371, -0.0020769264083355665, 0.0016786472406238317, -0.00794830359518528, 0.021246163174510002, -0.024218136444687843, -0.001774545293301344, -0.012523762881755829, 0.01631130278110504, 0.01041573379188776, -0.003867022693157196, 0.0008410515147261322, -0.0062065888196229935, 0.054463163018226624, -0.003714968217536807, 0.0225870069116354, -0.01574455387890339, -0.005332275293767452, 0.008618726395070553, 0.010547054000198841, -0.011065421625971794, -0.00842520222067833, -0.009372087195515633, 0.016725996509194374, 0.0036873219069093466, -0.0036182061303406954, -0.01932474598288536, 0.021342923864722252, -0.01756920851767063, -0.028973296284675598, -0.024218136444687843, 0.001762449974194169, -0.013201096095144749, -0.003853199537843466, -0.02586309053003788, -0.0081003587692976, 0.013899165205657482, -0.028862711042165756, 0.025075171142816544, 0.009531053714454174, -0.026982763782143593, 0.03074265830218792, 0.03179321438074112, -0.016463356092572212, -0.0097660468891263, -0.0013633068883791566, 0.031820863485336304, -0.02349933423101902, 0.018053017556667328, -0.03381139412522316, 0.01856447383761406, 0.02889035828411579, 0.007367732468992472, -0.011839517392218113, 0.019089752808213234, -0.001583613222464919, -0.016463356092572212, -0.014597233384847641, 0.023471686989068985, -0.007146561983972788, -0.0051145609468221664, 0.004730968736112118, -0.016670703887939453, 0.011521585285663605, -0.023222871124744415, 0.008494317531585693, -0.018288010731339455, -0.00036156142596155405, -0.014182538725435734, -0.00681826239451766, -0.01174966711550951, 0.014472824521362782, -0.009848985821008682, 0.003562913741916418, -0.024107551202178, 0.031876154243946075, 0.006562534719705582, 0.009696930646896362, 0.0015499192522838712, -0.010629992932081223, 0.01604866236448288, -0.03148910775780678, -0.007018697913736105, -0.007830807007849216, 0.009496495127677917, 0.0343090258538723, -0.014707818627357483, 0.000576252059545368, 0.0162007175385952, -0.003918859641999006, 0.007533609867095947, 0.02706570364534855, -0.006673119496554136, -0.01917269080877304, 0.030162086710333824, 0.03339669853448868, 0.027494220063090324, -0.00771331088617444, -0.005857554730027914, -0.008687841705977917, 0.013125069439411163, 0.012703463435173035, -0.03339669853448868, 0.027494220063090324, -0.001155095873400569, 0.02197878807783127, -0.006244602147489786, -0.006648929324001074, 0.0013831777032464743, -0.020748529583215714, 0.00837682094424963, 0.002866573166102171, 0.004157308489084244, 0.0358295738697052, -0.019794732332229614, -0.008653284050524235, -0.03129558265209198, -0.01199848297983408, -0.002343021798878908, -0.01835712604224682, -0.0051145609468221664, 0.01288316398859024, -0.010782047174870968, -0.03265025094151497, -0.5896397233009338, -0.010906455107033253, -0.003721879795193672, -0.028047146275639534, -0.008770780637860298, 0.0019231439800933003, -0.004630750976502895, -0.008521963842213154, 0.007989773526787758, -0.0059577724896371365, 0.018840936943888664, -0.02072088234126568, 0.033286113291978836, 0.023126108571887016, -0.015509560704231262, -0.0013434361899271607, 0.0280194990336895, -0.018992990255355835, -0.00725714722648263, 0.007879188284277916, -0.058941859751939774, 0.02828213945031166, 0.0037529817782342434, 0.0027421650011092424, 0.014092688448727131, 0.01156996563076973, -0.012993749231100082, 0.01366417109966278, 0.013470647856593132, 0.042132921516895294, -0.052306752651929855, 0.0006384561420418322, 0.005767703987658024, 0.017043927684426308, 0.055624306201934814, -0.008086535148322582, -0.018840936943888664, 0.025876913219690323, -0.02052735909819603, 0.0280194990336895, -0.004779350012540817, -0.020955875515937805, 0.017997724935412407, 0.005501608829945326, 0.0170577522367239, 0.004703322425484657, 0.025946028530597687, -0.016117777675390244, 0.012288768775761127, 0.01086498610675335, -0.0031257569789886475, -0.004295540042221546, 0.00807271245867014, -0.00520786689594388, -0.000307348818751052, 0.003295090515166521, 0.0232505165040493, -0.008770780637860298, 0.015606322325766087, -0.0012855518143624067, 0.0013892253628000617, 0.009911189787089825, -0.04086119309067726, -0.000109991138742771, -0.03884301707148552, -0.01325638871639967, -0.011279679834842682, -0.02576632797718048, -0.003690777812153101, -0.01972561702132225, 0.027259226888418198, -0.01164599321782589, 0.013318592682480812, 0.004990152548998594, 0.010429557412862778, 0.020057372748851776, 0.009489583782851696, 0.031876154243946075, 0.012537585571408272, 0.035746634006500244, 0.02018178068101406, -0.0011836061021313071, -0.016670703887939453, -0.013615790754556656, 0.007588902488350868, 0.01730656810104847, -0.05504373461008072, -0.019131222739815712, -0.01665688119828701, -0.000489425437990576, 0.026637185364961624, 0.036050744354724884, -0.019739439710974693, -0.027715390548110008, 0.025144286453723907, 0.012067599222064018, -0.009717665612697601, -0.006984140258282423, -0.016090132296085358, -0.009109447710216045, 0.004979785066097975, -0.0034488728269934654, -0.006773337256163359, -0.006925391964614391, 0.0375436432659626, -0.016725996509194374, -0.021301455795764923, 0.0017849126597866416, 0.02902858890593052, -0.016864227131009102, 0.007747868541628122, -0.004775893874466419, -0.01539897546172142, 0.00033089134376496077, 0.005404846742749214, -0.03231849521398544, 0.015661614015698433, -0.0029806140810251236, 0.01414106972515583, -0.03173792362213135, 0.013408442959189415, 0.004762070719152689, 0.008217855356633663, -0.012544496916234493, 0.016338948160409927, 0.009717665612697601, 0.005238968878984451, -0.00933752954006195, 0.024024613201618195, 0.011017040349543095, -0.008307705633342266, -0.024923115968704224, 0.0304938405752182, -0.014334593899548054, 0.04044650122523308, 0.003049729624763131, 0.03500018268823624, 0.005318452138453722, 0.009323705919086933, -0.01376093365252018, -0.0044130366295576096, -0.00021339468366932124, 0.01982237957417965, -0.005505064502358437, -0.007879188284277916, 0.0030756480991840363, -0.03477901220321655, 0.002709334949031472, 0.014348416589200497, 0.010001040063798428, -0.0040017981082201, -0.00281128054484725, 0.006604003719985485, 0.009731489233672619, 0.0014410620788112283, 0.004748247563838959, 0.01086498610675335, -0.024135198444128036, -0.0022117020562291145, -0.015233097597956657, 0.009171651676297188, 0.04141411930322647, -0.03190379962325096, -0.0022911850828677416, -0.05053739249706268, -0.014279301278293133, -0.010263679549098015, 0.026153376325964928, -0.0058091734535992146, -0.01961503177881241, 0.0029875256586819887, -0.010208386927843094, -0.01451429445296526, 0.011535407975316048, 0.006178942508995533, 4.295432154322043e-05, -0.012938456609845161, 0.009434291161596775, 0.002324014902114868, -0.009800604544579983, 0.008031242527067661, 0.006286071613430977, 0.005055812653154135, 0.003452328499406576, 0.02687217853963375, 0.017776554450392723, 0.012592878192663193, 0.020098842680454254, -0.009213120676577091, 0.01099630631506443, -0.009994128718972206, 0.02441166155040264, -0.008722399361431599, -0.018536826595664024, -0.029056234285235405, -0.004019077401608229, -0.006666208151727915, -0.002166776917874813, -0.0009235583711415529, -0.003391852369531989, 0.014790757559239864, -0.00961399171501398, 0.028448017314076424, -0.03226320445537567, -0.015454268082976341, -0.015108689665794373, 0.0053841122426092625, -0.004606560338288546, 0.01997443288564682, 0.004019077401608229, 0.01615924760699272, 0.016380418092012405, -0.02214466594159603, 8.596263796789572e-05, -0.014928988181054592, 0.0327884815633297, -0.024715770035982132, -0.010657639242708683, -0.01978090964257717, 0.023582272231578827, -0.002593566197901964, -0.0008216127171181142, 0.016186894848942757, -0.02193732000887394, -0.016021016985177994, -0.0002527042233850807, -0.00034709033207036555, 0.03226320445537567, -0.003153403289616108, -0.0356360487639904, 0.004274805076420307, 0.049044493585824966, -0.0016069397097453475, 0.005339186638593674, 0.03342434763908386, 0.011058510281145573, 0.012254211120307446, -0.031323228031396866, 0.018440065905451775, -0.028945649042725563, 0.006407024338841438, 0.00479317270219326, 0.01892387494444847, -0.006282615941017866, 0.029470929875969887, -0.0012527218786999583, 0.007073990534991026, 0.007478317245841026, -0.02847566269338131, 0.010547054000198841, -0.032180264592170715, 0.002097661141306162, -0.0010687012691050768, 0.0014013205654919147, -0.0069945077411830425, -0.014790757559239864, 0.01726509816944599, -0.0033521107397973537, 0.027051880955696106, 0.022711414843797684, -9.692395542515442e-05, 0.01846771128475666, 0.038511261343955994, -0.021149400621652603, 0.003378029214218259, 0.0025037156883627176, -0.010146182961761951, -0.03516606241464615, -0.022365836426615715, -0.02424578368663788, -0.003331376239657402, -0.022061727941036224, -0.011099979281425476, -0.04025297611951828, 0.019642679020762444, 0.02214466594159603, 0.0015559669118374586, 0.006009608972817659, -0.013539763167500496, 0.011929367668926716, -0.017085397616028786, -0.03953417390584946, 0.016228362917900085, 0.006693854462355375, -8.909444295568392e-05, -0.018301833420991898, -0.0008890005410648882, 0.016338948160409927, 0.0027421650011092424, -0.011093067936599255, 0.014928988181054592, 0.010381176136434078, -0.0067906160838902, 0.00483118649572134, -0.01051249634474516, -0.002189239487051964, 0.0522238127887249, -0.0033832129556685686, -0.0010358713334426284, -0.022669944912195206, 0.01644953340291977, 0.03652073070406914, -0.040225330740213394, -0.01785949431359768, 0.03878772258758545, -0.013187273405492306, -0.021674679592251778, -0.011231299489736557, 0.013104334473609924, 0.007229500915855169, -0.0024052259977906942, 0.004419948440045118, -0.024066083133220673, -0.03110205940902233, 0.018453888595104218, -0.009544876404106617, -0.013373885303735733, 0.011728932149708271, 0.033230822533369064, 0.012157449498772621, -0.018025372177362442, -0.025904560461640358, 0.0002777586632873863, 0.0028821241576224566, 0.047026313841342926, 0.018495358526706696, 0.009952658787369728, -0.0020769264083355665, -0.018039194867014885, -0.02405225858092308, -0.022462598979473114, -0.0006056262063793838, 0.02510281838476658, 0.013705641031265259, -0.006486507132649422, 0.014887519180774689, -0.022172313183546066, -0.00525970384478569, 2.1652649593306705e-05, 0.016684526577591896, -0.022324366495013237, -0.02756333537399769, 0.0008656739955767989, -0.019255630671977997, 0.023706680163741112, 0.01987767219543457, -0.002266994444653392, 0.025697212666273117, 0.05399317666888237, 0.015938077121973038, 0.03710130229592323, 0.011134536936879158, 0.0061685750260949135, -0.02309846319258213, -0.015495737083256245, 0.011480115354061127, 0.005563812796026468, 0.01406504213809967, -0.012744932435452938, 0.04000416025519371, 0.0025088994298130274, 0.0026868723798543215, -0.0018574841087684035, 0.011487027630209923, 0.0035767368972301483, -0.004060546867549419, 0.006814806722104549, 0.010837339796125889, 0.01629747822880745, -0.014362240210175514, -0.021107930690050125, 0.020762352272868156, -0.016988635063171387, -0.005532710812985897, 0.0543249286711216, -0.002438055817037821, -0.0152469202876091, -0.007174208294600248, 0.02233819104731083, 0.0009226944530382752, 0.025241049006581306, -0.00080519774928689, -0.0038324648048728704, -0.04111001268029213, -0.007734045386314392, -0.007899923250079155, -0.028752125799655914, -0.013795491307973862, -0.016573941335082054, -0.005066179670393467, -0.0031758658587932587, 0.00019006813818123192, -0.019545916467905045, 0.005774615798145533, -0.022822000086307526, -0.03229084983468056, -0.015786023810505867, 0.004157308489084244, 0.0296368058770895, 0.022932585328817368, 0.025669565424323082, 0.0103880874812603, -0.016366595402359962, -0.012171272188425064, 0.011127625592052937, -0.037405408918857574, 0.0014211913803592324, -0.02536545693874359, -0.03024502471089363, 0.0062065888196229935, 0.011784224770963192, 0.0026730492245405912, -0.013125069439411163, 0.014210185036063194, -0.003165498375892639, 0.0225870069116354, 0.0038393763825297356, -0.0023637565318495035, 0.013131980784237385, 0.03253966569900513, 0.016587765887379646, -0.01595189981162548, 0.014597233384847641, -0.02138439379632473, 0.009800604544579983, -0.025904560461640358, -0.013290946371853352, -0.005100737791508436, -0.019642679020762444, -0.018951522186398506, 0.028185376897454262, 0.005885200574994087, 0.009157828986644745, -0.005536166485399008, 0.020665589720010757, -0.013366973958909512, 0.0003397467953618616, 0.018398595973849297, 0.022766707465052605, 0.0037737165112048388, 0.013014484196901321, 0.02441166155040264, 0.008701665326952934, -0.02273906208574772, 0.037654224783182144, -0.02199261263012886, 0.039672404527664185, 0.009842073544859886, -0.018094487488269806, 0.009268413297832012, 0.009952658787369728, -0.0223934818059206, -0.03281612694263458, 0.0034747913014143705, 0.013560498133301735, 0.015454268082976341, 0.002244531875476241, -0.019062107428908348, -0.028295962139964104, 0.008065801113843918, -0.016034839674830437, 0.009351352229714394, -0.01976708695292473, 9.794988727662712e-05, -0.007073990534991026, -0.013166538439691067, 0.025793975219130516, -0.01709922030568123, -0.002970246598124504, -0.02988562360405922, -0.0232505165040493, 0.005916303023695946, -0.004209145437926054, 0.005964683834463358, 0.002996165072545409, -0.01051249634474516, -0.004226424265652895, -0.029775038361549377, -0.011424822732806206, -0.030908536165952682, 0.009842073544859886, 0.00917856302112341, 0.023706680163741112, 0.012226564809679985, 0.04011474549770355, 0.017182160168886185, 0.025323987007141113, 0.0056882211938500404, -0.017320390790700912, -0.01282787136733532, -0.012157449498772621, -1.7778391338652e-05, -0.02123233862221241, -0.030632073059678078, 0.014763111248612404, 0.020555006340146065, -0.006507242098450661, 0.0025883824564516544, -0.01293154526501894, 0.012655082158744335, -3.35319091391284e-05, -0.007616548798978329, -0.026554247364401817, -0.042741142213344574, -0.027549512684345245, 0.03425373509526253, -0.028752125799655914, 0.008362998254597187, -0.02565574273467064, -0.003450600663200021, 0.04652868211269379, -0.008874454535543919, 0.03466843068599701, 0.01167363952845335, 0.012731109745800495, -0.02660953998565674, 0.009620903991162777, 0.007830807007849216, 0.006928847637027502, -0.012371707707643509, -0.00406400253996253, -0.039368294179439545, -0.015578676015138626, 0.03024502471089363, 0.028157731518149376, 0.011086156591773033, 0.02727304957807064, 0.0077962493523955345, -0.0002186863566748798, -0.002866573166102171, -0.012060687877237797, -0.0023015523329377174, -0.001738259568810463, -0.026125729084014893, -0.05330201983451843, -0.03104676678776741, -0.02656807005405426, -0.006182398181408644, 0.004672220442444086, 0.01403739582747221, -0.006434670649468899, 0.023278163745999336, -0.008245501667261124, -0.02662336267530918, -0.0022600828669965267, -0.01700245961546898, 0.029166819527745247, 0.003182777436450124, 0.024840177968144417, 0.031931448727846146, -0.002299824496731162, -0.014210185036063194, 0.0010928917909041047, 0.0029374167788773775, -0.011563054285943508, 0.012592878192663193, 0.04915507510304451, -0.028973296284675598, -0.024715770035982132, -0.01159761194139719, 0.01741715334355831, 0.009828250855207443, -0.009012686088681221, 0.024328721687197685, 0.04066767171025276, 0.00385665544308722, -0.024273429065942764, -0.012337150052189827, -0.015385151840746403, 0.021218515932559967, -0.031019121408462524, 0.012095245532691479, 0.010643815621733665, 0.0005788438720628619, -0.026733947917819023, 0.008888277225196362, -0.008756957948207855, 0.03079795092344284, -0.011341884732246399, 0.026789240539073944, -0.022310543805360794, 0.024024613201618195, -0.03436432033777237, -0.006987595930695534, 0.02298787795007229, 0.007678752765059471, -0.01239935401827097, -0.010325883515179157, 0.015813669189810753, 0.002299824496731162, 0.02214466594159603, 0.019435331225395203, 0.007782426197081804, 0.03588486462831497, -0.007782426197081804, 0.005743513815104961, 0.012876252643764019, -8.844648255035281e-05, 0.024632830172777176, -0.01932474598288536, -0.0233472790569067, -0.007160385139286518, -0.008328440599143505, -0.02647130750119686, 0.0162007175385952, -0.016021016985177994, -0.007658018264919519, 0.007053256034851074, -0.0013736742548644543, -0.02208937332034111, -0.011148360557854176, -0.007181120105087757, 0.018191248178482056, -0.04392993077635765, -0.011127625592052937, -0.021854380145668983, -0.002037184778600931, 0.01936621591448784, 0.011058510281145573, -0.015163982287049294, 0.016214540228247643, 0.04301760345697403, -0.017071574926376343, 0.015011927112936974, 0.010885721072554588, -0.02797803096473217, -0.01917269080877304, 0.022020258009433746, -0.017140690237283707, -0.018481533974409103, -0.0007373779662884772, -0.02401079051196575, -0.03710130229592323, -0.03394962474703789, -0.0028821241576224566, -0.00029136580997146666, -0.01134879607707262, -0.004298995714634657, 0.015053397044539452, 0.01253067422658205, 0.008411379531025887, 0.008114181458950043, 0.020085018128156662, 0.008321528322994709, -0.0064035686664283276, -0.012157449498772621, 0.001902409247122705, 0.007734045386314392, -0.001019456423819065, -0.001174102770164609, -0.004267893731594086, -0.01866123639047146, -0.017804201692342758, -0.017320390790700912, -0.0097660468891263, -0.001253585796803236, 0.004547812044620514, 0.007118915673345327, -0.010699108242988586, 0.0022168855648487806, -0.03190379962325096, 0.01826036535203457, 0.008542698808014393, -0.002299824496731162, 0.01669834926724434, 0.011680550873279572, 0.02043059654533863, 0.0007792793912813067, -0.01675364188849926, -0.0018021916039288044, -0.022517891600728035, 0.01537132915109396, -0.04387464001774788, -0.024273429065942764, -0.015316036529839039, 0.06424994021654129, 0.01374019868671894, 0.005829908419400454, -0.010664550587534904, -0.010187651962041855, -0.051090314984321594, -0.03505547717213631, -0.0012121163308620453, 0.005131839774549007, -0.0016155792400240898, 0.00855652242898941, 0.016725996509194374, 0.014707818627357483, 0.011514673940837383, 0.01644953340291977, -0.021315278485417366, 0.004648029804229736, -0.029194466769695282, -0.008342263288795948, 0.038815371692180634, -0.010305148549377918, -0.0360230952501297, -0.026858355849981308, -0.010318972170352936, -0.009157828986644745, -0.0026246681809425354, 0.01376093365252018, -0.03461313620209694, -0.0016380418092012405, -0.009800604544579983, -0.01521927397698164, -0.011791136115789413, -0.0036182061303406954, 0.0025400014128535986, -0.022808177396655083, 0.00322597473859787, 0.013436089269816875, -0.020748529583215714, 0.0041642202995717525, 0.009745311923325062, 0.020513536408543587, 0.009323705919086933, -0.0028026411309838295, -0.015357505530118942, 0.007250235415995121, 0.00045789143769070506, 0.017928609624505043, 0.013346238993108273, -0.021771442145109177, 0.009475761093199253, 0.057283081114292145, 0.0008255004649981856, -0.011120714247226715, -0.005000520031899214, 0.015316036529839039, -0.045312244445085526, -0.017887139692902565, -0.007139650639146566, -0.00888136588037014, 0.016366595402359962, -0.022531714290380478, 0.010298237204551697, -0.012323327362537384, -0.015716906636953354, -0.02022325061261654, -0.020209427922964096, 0.0002313215663889423, 0.02168850228190422, -0.018495358526706696, -0.009731489233672619, -0.030217379331588745, 0.018191248178482056, 0.020057372748851776, -0.04141411930322647, -0.021315278485417366, 0.0207761749625206, -0.014348416589200497, 0.005014343187212944, 0.03018973208963871, -0.016380418092012405, -0.024162843823432922, 0.016463356092572212, 0.0023637565318495035, -0.010187651962041855, -0.00848049484193325, 0.19186514616012573, -0.0070463442243635654, 0.011224387213587761, 0.04724748432636261, -0.005187132395803928, 0.03386668860912323, -0.004720601253211498, 0.00815565139055252, -0.01217818446457386, 0.009289148263633251, 0.0023084639105945826, 0.007118915673345327, -0.027743037790060043, -0.008584168739616871, 0.01537132915109396, 0.006341364234685898, -0.021370571106672287, -0.049735650420188904, 0.002804368967190385, -0.007844630628824234, 0.02197878807783127, 0.004889934789389372, -0.06209353357553482, -0.011086156591773033, 0.013747110031545162, -0.007858453318476677, -0.011784224770963192, 0.024038435891270638, 0.02813008427619934, 0.014832226559519768, -0.028392724692821503, -0.0014548852341249585, 0.016587765887379646, 0.028157731518149376, 0.005107649136334658, 0.0034056755248457193, 0.04730277508497238, -0.03265025094151497, 0.01614542491734028, 0.012890075333416462, 0.023582272231578827, -0.01947680115699768, 0.02058265171945095, 0.012268034741282463, -0.004959050565958023, -0.0017780010821297765, -0.005836819764226675, -0.0012838238617405295, 0.024743415415287018, 0.013525940477848053, -0.031765569001436234, 0.020264718681573868, 0.01521927397698164, 0.016739819198846817, 0.0072986166924238205, 0.009475761093199253, 0.006483051460236311, -0.0121021568775177, 0.01003559771925211, 0.04818745702505112, -0.01285551767796278, 0.03129558265209198, 0.0034125871025025845, 0.018440065905451775, -0.02283582277595997, -0.0027110627852380276, -0.05153265595436096, 0.02435636892914772, 0.017444798722863197, -0.021398216485977173, -0.028918003663420677, -0.016891874372959137, -0.008708576671779156, 0.011106890626251698, -0.021868202835321426, -0.014928988181054592, -0.005038533825427294, 0.03547016903758049, 0.02672012522816658, 0.05299790948629379, -0.02052735909819603, 0.006718044634908438, -0.0023758518509566784, -0.008210944011807442, -0.015633968636393547, -0.004858832806348801, 0.023126108571887016, -0.013339327648282051, -0.02479870803654194, -0.017278922721743584, -0.010021775029599667, -0.01835712604224682, -0.027646275237202644, -0.019697971642017365, 0.029000941663980484, -0.01756920851767063, -0.00797594990581274, -0.0005892112385481596, 0.004229879938066006, -0.0026505866553634405, -0.050095051527023315, 0.05429728329181671, 0.038566552102565765, 0.008224766701459885, -0.0394512340426445, -0.007692575920373201, -0.006628194358199835, 0.013809313997626305, 0.002956423442810774, -0.01330476999282837, -0.005093825981020927, -0.02938799001276493, 0.006714588962495327, -0.0076027256436645985, -0.0037357029505074024, -0.003068736521527171, 0.021508801728487015, 0.014804580248892307, -0.01631130278110504, 0.005442860536277294, -0.03195909410715103, -0.013767844997346401, 0.012053775601089, 0.0034678797237575054, -0.02355462685227394, -0.025987498462200165, -0.02535163424909115, -0.016822759062051773, 0.0019058650359511375, -0.02571103535592556, 0.021716149523854256, -0.0169609896838665, 0.018730351701378822, -0.03251202031970024, -0.011929367668926716, 0.0025417294818907976, -0.0018782188417389989, -0.00762346014380455, -0.00401216559112072, 0.0009166467934846878, -0.008494317531585693, 0.020859114825725555, 0.03419844061136246, 0.004979785066097975, 0.021356746554374695, -0.03140616789460182, -0.0008380276849493384, 0.019490623846650124, -0.01625601015985012, -0.02828213945031166, -0.034087855368852615, 0.021301455795764923, -0.007146561983972788, 0.01242700032889843, 0.006234235130250454, -0.025793975219130516, -0.012323327362537384, 0.0041262065060436726, 0.012641259469091892, -0.02913917414844036, -0.03726717829704285, -0.00449251988902688, 0.016117777675390244, -0.008017419837415218, -0.004720601253211498, -0.01976708695292473, -0.17428211867809296, 0.0033020018599927425, 0.011860252358019352, -0.019241807982325554, 0.0343090258538723, 0.01816360279917717, 0.019905317574739456, 0.006794072221964598, -0.010104713961482048, 0.021909672766923904, -0.005353009793907404, -0.0021028448827564716, -0.022822000086307526, -0.034696076065301895, 0.01217818446457386, 0.00998721644282341, 0.004879567306488752, 0.01816360279917717, 0.05485020950436592, 0.022158488631248474, 0.0276324525475502, -0.033479638397693634, 0.004205689765512943, 0.0014894431224092841, -0.00484500965103507, -0.022047903388738632, 0.011231299489736557, -0.008535787463188171, -0.013049041852355003, -0.02218613587319851, -0.03124029003083706, 0.025586627423763275, 0.017126867547631264, -0.008535787463188171, 0.014901341870427132, 0.017195982858538628, 0.01675364188849926, -0.016670703887939453, -6.57678974675946e-05, 0.021923495456576347, 0.04829804226756096, 0.03646543622016907, -0.003732247045263648, -0.00198707589879632, 0.011445557698607445, 0.017085397616028786, 0.0023741237819194794, -0.024895470589399338, 0.004896846599876881, -0.010256768204271793, 0.04041885584592819, -0.013028306886553764, -0.010394999757409096, 0.007740957196801901, 0.0033642060589045286, 0.017016282305121422, 0.00022225013526622206, 0.013366973958909512, -0.00963472668081522, -0.0067802490666508675, 0.03455784544348717, -0.011763489805161953, -0.00845284853130579, 0.0047171455807983875, -0.013809313997626305, -0.012509939260780811, -0.03124029003083706, 0.004900302272289991, -0.022075550630688667, 0.005639839917421341, -0.009759134612977505, -0.015136335976421833, -0.01881328970193863, -0.0007265786407515407, 0.03455784544348717, -0.0014980825362727046, -0.015025750733911991, 0.031572047621011734, 0.015260743908584118, -0.013443001545965672, 0.013595055788755417, 0.028309784829616547, -0.025531334802508354, 0.021951142698526382, -0.006600548047572374, 0.001945606549270451, -0.010581611655652523, 0.02580779790878296, -0.015260743908584118, -0.017652146518230438, 0.03356257826089859, -0.028918003663420677, 0.005954316351562738, -0.02098352275788784, -0.0008004460833035409, 0.022559359669685364, 0.013069776818156242, -0.011162183247506618, 0.03707365319132805, 0.0070290653966367245, -0.0041642202995717525, 0.003163770539686084, -0.017472445964813232, 0.008991951122879982, 0.02853095531463623, 0.02872448042035103, 0.003562913741916418, 0.009040331467986107, 0.03657602146267891, -0.011086156591773033, -0.03505547717213631, 0.021204693242907524, 0.018992990255355835, 0.037764810025691986, -0.007326263003051281, 0.0324014350771904, 0.014023573137819767, 0.0005732282297685742, 0.012157449498772621, -0.0029045867267996073, 0.05650898441672325, -0.004167675971984863, -0.0036631315015256405, 0.012675817124545574, 0.013118157163262367, -0.024190491065382957, -0.10477938503026962, 0.004098560195416212, -0.0013278851984068751, 0.008791515603661537, -0.022752884775400162, 0.006244602147489786, -0.013049041852355003, 0.0111967409029603, -0.026485132053494453, 0.028213024139404297, -0.015468090772628784, 0.0033210087567567825, 0.0009019597200676799, -0.001070429221726954, -0.012247299775481224, 0.006586724892258644, -0.018122132867574692, -0.013650348410010338, 0.009752223268151283, 0.022752884775400162, 0.008708576671779156, 0.0006237690686248243, -0.010837339796125889, 0.00028942193603143096, -0.015081043355166912, 0.0035387231037020683, 0.0006237690686248243, 0.0061685750260949135, 0.009026508778333664, 0.008819161914288998, -0.00032505972194485366, -0.006434670649468899, 0.012869341298937798, -0.006092547904700041, 0.008342263288795948, -0.005055812653154135, -0.005905935540795326, -0.002707607112824917, 0.03889830783009529, -0.012392442673444748, 0.01177731342613697, 0.007920658215880394, 0.03419844061136246, -0.016117777675390244, -0.012655082158744335, 0.015316036529839039, -0.016131602227687836, 0.028254492208361626, 0.014873695559799671, -0.013982103206217289, -0.01099630631506443, -0.010553965345025063, -0.02298787795007229, 0.01323565375059843, 0.018896229565143585, -0.03688013181090355, 0.009406644850969315, 0.0009270141599699855, -0.01001486275345087, 0.0008591943769715726, 0.00598541833460331, 0.0007339221774600446, -0.0062238676473498344, 0.010298237204551697, 0.005619105417281389, -0.006019976455718279, -0.018135955557227135, 0.012309503741562366, -0.002365484368056059, -0.012973014265298843, -0.018288010731339455, 0.021660856902599335, -0.017030104994773865, 0.002640219172462821, 0.004775893874466419, 0.0015110417734831572, 0.023623742163181305, 0.02083146758377552, 0.0023499333765357733, 0.013982103206217289, -0.027715390548110008, -0.01917269080877304, -0.0016760553698986769, -0.03085324354469776, -0.011901721358299255, 0.006030343938618898, 0.027950383722782135, -0.0021374025382101536, 0.01574455387890339, -0.03815186023712158, -0.02143968641757965, 0.002457062713801861, -0.007250235415995121, -0.01255832053720951, -0.011182918213307858, 0.011113802902400494, -0.02450842224061489, 0.017845669761300087, -0.007533609867095947, 0.041386473923921585, -0.03195909410715103, -0.010291325859725475, -0.06104297563433647, -0.0037495261058211327, 0.015136335976421833, -0.008439025841653347, 0.011977748945355415, -0.016670703887939453, -0.00015021862054709345, -0.005491241347044706, 0.000109991138742771, 0.011715109460055828, -0.012109068222343922, 0.003006532322615385, -0.024231959134340286, -0.025227226316928864, -0.010263679549098015, -0.017278922721743584, 0.023471686989068985, 0.0004626431327778846, -0.001738259568810463, 0.025047525763511658, 0.001921416143886745, 0.007651106454432011, 0.01089263241738081, 0.004357744008302689, -0.030659718438982964, -0.02143968641757965, -0.011867163702845573, 0.029913268983364105, -0.015316036529839039, -0.02159174159169197, 0.007588902488350868, -0.012724198400974274, -0.0040501793846488, -0.005746969487518072, 0.018025372177362442, 0.0027473485097289085, 0.023582272231578827, 0.007174208294600248, 0.006541799753904343, -0.005373744759708643, -0.011258945800364017, -0.03342434763908386, -0.0021788720041513443, -0.026250138878822327, 0.002403497928753495, -0.004150397144258022, -0.0018315657507628202, 6.787376332795247e-05, 0.030604425817728043, 0.01260670181363821, 0.00683208554983139, 0.005418669898062944, -0.013152715750038624, -0.02933269739151001, 0.0027732669841498137, -0.0021374025382101536, -0.0037460702005773783, 0.02018178068101406, -0.0280194990336895, 0.001219891826622188, 0.024384014308452606, 0.004364655818790197, 0.011943190358579159, -0.024895470589399338, 0.0016121234511956573, -0.013035218231379986, -0.046362802386283875, 0.0018626677338033915, 0.001774545293301344, -0.03784774988889694, -0.04417874664068222, -0.025600450113415718, 0.02847566269338131, 0.0005149118951521814, 0.008874454535543919, -0.008743134327232838, -0.02329198643565178, 0.017140690237283707, -0.008611815050244331, 0.020955875515937805, -0.000911463110242039, -0.006092547904700041, 0.00027495084214024246, 0.03309259191155434, 0.01726509816944599, 0.005332275293767452, 0.005536166485399008, -0.0025780152063816786, 0.027853621169924736, -0.011590700596570969, -0.0325949564576149, 0.0032588045578449965, 0.014652526006102562, 0.0011481844121590257, 0.023983143270015717, 0.012226564809679985, -0.018550651147961617, 0.009185475297272205, 0.016338948160409927, -0.003867022693157196, 0.03256731107831001, 0.017887139692902565, 0.004171131644397974, -0.023319633677601814, 0.011044686660170555, 0.02309846319258213, 0.001665688119828701, 0.0041607641614973545, 0.015979547053575516, 0.014134158380329609, -0.010028686374425888, -0.020444421097636223, -0.022158488631248474, 0.03441961109638214, 0.0035110770259052515, 0.013546674512326717, 0.011943190358579159, -0.0413588285446167, -0.003008260391652584, 0.029415637254714966, -0.007312439847737551, -0.017652146518230438, 0.030576780438423157, -0.009980305097997189, 0.011120714247226715, 0.047772761434316635, 0.004620383493602276, -0.0030929269269108772, 0.007727134041488171, -0.01199848297983408, -0.00010793926776386797, 0.00026631137006916106, -0.011493938975036144, -0.01363652478903532, 0.0061685750260949135, -0.013415355235338211, -0.010712931863963604, 0.02380344271659851, -0.013449912890791893, 0.10511113703250885, 0.009074890054762363, -0.022006435319781303, -0.003908492159098387, -0.02828213945031166, 0.011860252358019352, -0.0028648453298956156, 0.018205072730779648, -0.018937697634100914, -0.0518367663025856, 0.024314898997545242, 0.009537965059280396, -0.034889597445726395, -0.031627338379621506, 0.01821889542043209, 0.0026937839575111866, -0.03054913319647312, 0.012468470260500908, -0.010201475583016872, -0.006358643062412739, 0.008846808224916458, -0.0005693404818885028, 0.028807418420910835, -0.005463595036417246, -0.015454268082976341, -0.005771160125732422, 0.021425863727927208, 0.01220583077520132, -0.015233097597956657, -0.033534932881593704, 0.03256731107831001, -0.006963405292481184, -0.022103196009993553, -0.01770743913948536, -0.019697971642017365, 0.024273429065942764, 0.015537206083536148, -0.023471686989068985, 0.01456958707422018, 0.038815371692180634, -0.010312060825526714, -0.01911740005016327, -0.03345199301838875, -0.02994091622531414, -0.009945747442543507, 0.0304938405752182, -0.007754780352115631, -0.02401079051196575, -0.029249759390950203]"
Building E-Commerce Applications with Dragonfly,Building E-Commerce Applications with Dragonfly,"## Introduction  In the high-octane world of e-commerce applications, both response speed and data accuracy are crucial. Customers expect seamless access to searched items, past orders, recently viewed products, and personalized recommendations. In the meantime, these applications often experience fluctuating traffic, especially during peak periods like the Christmas season or Black Friday. High-traffic events furthermore introduce significant challenges, requiring rapid response and precise data handling. Addressing these variations often demands a scalable and robust in-memory data storage solution.  Dragonfly, an ultra-performant in-memory data store, utilizes a multi-threaded, shared-nothing architecture that pushes hardware to its limits, supporting up to 4 million ops/sec and 1 TB of memory on a single instance. This can drastically reduce operational complexities while providing a high-performance solution for e-commerce applications. For even more demanding scenarios, Dragonfly also offers cluster mode on top of the stunning single-node performance. This adaptability makes Dragonfly an ideal choice for e-commerce platforms that contend with unpredictable and varied traffic patterns.  In this blog, we will explore how Dragonfly can be used in various ways to elevate your e-commerce platform's performance and user experience, particularly in the following areas:  - [**Caching**](#caching) - **String**, **Hash**, and **JSON** data types are ideal for caching. - [**Personalization**](#personalization) - **Sorted-Set** is perfect for tracking user preferences. - [**High-Traffic Flash Sales**](#high-traffic-flash-sales) - **Atomic Operations** and **Distributed Locks** can be used to manage inventory verification and deduction under extremely demanding situations.  ---  ## Caching  Caching is a powerful strategy in web technology, particularly important for e-commerce applications. It enables quicker data retrieval by storing the results of a database query or an API request in a cache. When an identical request is made, the data can be swiftly served from the cache (in this case, Dragonfly) avoiding the need for time-consuming interactions with the primary database.  Selecting the appropriate data type for caching is crucial to easing the implementation and optimizing the performance of your e-commerce platform. The most accessible data type is a `String`, ideal for caching a blob of data. It's versatile and safe to store various formats, whether text or binary, like JSON strings, MessagePacks, or Protocol Buffers. For instance, a user's recent order summary could be cached as a JSON string. However, the downside of using the `String` data type is the difficulty in manipulating individual fields within cached data.  ```shell # Using the 'String' data type for caching.  # To cache an order: dragonfly$> SET order_string:<order_id> '{""id"": ""<order_id>"", ""items"": [{""id"": ""001"", ""name"": ""Laptop"", ""quantity"": 1}], ""total"": 1799.99}'  # To retrieve the entire cached order: dragonfly$> GET order_string:<order_id> ```  Alternatively, a `Hash` data type, which is a single-level string-to-string flat hashmap, is suitable for storing field/value pairs. This can be used to cache specific attributes of a user's order, like item IDs and quantities, allowing for quicker access and updates.  ```shell # Using the 'Hash' data type for caching.  # To cache quantities for different items and the total price in the order: dragonfly$> HSET order_hash:<order_id> item_001 5 item_002 6 item_003 7 total 2799.99  # To retrieve the quantity of a specific item: dragonfly$> HGET order_hash:<order_id> item_003  # To retrieve the entire cached order: dragonfly$> HGETALL order_hash:<order_id> ```  Lastly, for more complex data structures, the `JSON` data type in Dragonfly natively and fully supports the [JSON](https://www.json.org/json-en.html) specification and the [JSONPath](https://github.com/json-path/JsonPath) syntax, enabling easy manipulation of individual fields. This is particularly useful for detailed order information, where each aspect of an order (such as product details, pricing, and shipping info) can be individually accessed and modified, providing both flexibility and efficiency in data handling.  ```shell # Using the 'JSON' data type for caching.  # To cache an order as native JSON: dragonfly$> JSON.SET order_json:<order_id> $ '{""id"": ""<order_id>"", ""items"": [{""id"": ""001"", ""name"": ""Laptop"", ""quantity"": 1}], ""total"": 1799.99}'  # To update the quantity of a specific item: dragonfly$> JSON.SET order_json:<order_id> $.items[0].quantity 2  # To retrieve the total price of the order: dragonfly$> JSON.GET order_json:<order_id> $.total  # To retrieve the entire cached order: dragonfly$> JSON.GET order_json:<order_id> ```  For more caching-related techniques, check out our previous blog posts:  - [Developing with Dragonfly: Cache-Aside](https://www.dragonflydb.io/blog/developing-with-dragonfly-part-01-cache-aside) to follow along with a step-by-step tutorial on how to implement a cache-aside pattern using Dragonfly. - [Developing with Dragonfly: Solve Caching Problems](https://www.dragonflydb.io/blog/developing-with-dragonfly-part-02-solve-caching-problems) to learn how to solve the 3 common caching problems (Penetration, Breakdown, and Avalanche) with Dragonfly. - [Dragonfly Cache Design](https://www.dragonflydb.io/blog/dragonfly-cache-design) to learn more about the internal eviction algorithm of Dragonfly.  ---  ## Personalization  In e-commerce applications, personalizing the user experience is key. One effective way to achieve this is by showcasing prioritized items, such as the most-viewed product categories for a particular user or the top items viewed globally on the application for the day. `Sorted-Set`, a data structure available in Dragonfly, is perfectly suited for this task. It's a collection of unique elements, each associated with a score, which determines the order of the elements.  For instance, to track a user's most-viewed product categories, we can use a `Sorted-Set` where each category is a member and the number of times the user views that category is the score. Every time a user views a category, the score is incremented, ensuring the set always reflects the user's current preferences.  ```shell # Using the 'Sorted-Set' data type to track user preferences.  # To increment the view count for a category for a user: dragonfly$> ZINCRBY viewed_product_categories_by_user_id:<user_id> 1 ""electronics""  # To retrieve the top 5 viewed categories for a user: dragonfly$> ZREVRANGE viewed_product_categories_by_user_id:<user_id> 0 4 WITHSCORES ```  Similarly, for global views, we can maintain a `Sorted-Set` for the entire application, where each view of a product category by any user increments the category's score. This approach allows for dynamic, real-time ranking of categories or items based on popularity, providing valuable insights for both users and the platform.  `Sorted-Set` an important data structure in many applications, particularly for scenarios like those mentioned above. Redis has long been celebrated for its robust implementation of this data structure, facilitating efficient data sorting and retrieval. However, starting from v1.11, Dragonfly introduces a [B+ Tree](https://en.wikipedia.org/wiki/B%2B_tree)-based implementation. This new implementation not only enhances performance but also improves memory efficiency in terms of size, making it an excellent choice for handling large-scale data sorting and ranking tasks. We plan to explore this topic in greater depth in a future blog post.  ---  ## High-Traffic Flash Sales  In our earlier discussion, we highlighted the challenges e-commerce platforms face with fluctuating traffic, particularly during high-profile events like Black Friday flash sales. During these peak periods, Dragonfly can play a pivotal role, especially in managing inventory verification and deduction. While these tasks can be performed using a traditional SQL database, the simultaneous attempts by numerous users to purchase limited-stock items can quickly overwhelm the primary database. This is where the capabilities of Dragonfly, as an ultra-performant in-memory data store become invaluable.  Dragonfly can address this challenge with two mechanisms: **Atomic Operations** and **Distributed Locks**. Each mechanism can in turn be implemented in different ways, which we will explore in detail below.  ### 1. Atomic Operations with `INCR` or `DECR`  Dragonfly's atomicity ensures that each command, such as incrementing or decrementing a value, is executed entirely and independently, without interference from other operations. Consider a scenario where we have a limited stock of a product for a flash sale, we can initialize the inventory count in Dragonfly by setting the quantity:  ```shell # Assuming the flash sale has 100 units for a particular item. dragonfly$> SET item_on_sale:<item_id> 100 ```  For simplicity, we assume that each request is for a single unit of the item. When a purchase request is made, we use the `DECR` command to deduct inventory atomically:  ```shell dragonfly$> DECR item_on_sale:<item_id> ```  The return value of the `DECR` command is crucial. If it is greater than zero, it indicates that the product is still available, and the purchase can proceed. Conversely, if the return value is zero or less, it signifies that the product is sold out, and further purchases should be denied. This method is easy to implement and particularly effective for straightforward scenarios where immediate inventory updates are sufficient and more complex processes like order cancellations can be managed later.  ### 2. Atomic Operations with Lua Scripts  For more complex scenarios, Lua scripts can be used to implement atomic inventory verification and deduction. It is notable that Dragonfly allows non-atomic operations in Lua scripts with the `disable-atomicity` script flag, as explained in this [blog post](https://www.dragonflydb.io/blog/leveraging-power-of-lua-scripting). Thus, we need to make sure that the script flag is not used for our e-commerce inventory deduction scenario. Let's assume that we store the inventory of an item using the `Hash` data type:  ```shell dragonfly$> HSET item_on_sale:<item_id> inventory 100 purchased 0 ```  To verify and deduct inventory, we can use the following Lua script:  ```lua -- atomic_inventory_deduction.lua  local key = KEYS[1]; local num_to_purchase = tonumber(ARGV[1]);  if num_to_purchase <= 0 then return nil; end  local item = redis.call(""HMGET"", key, ""inventory"", ""purchased""); local inventory = tonumber(item[1]); local purchased = tonumber(item[2]);  if purchased + num_to_purchase <= inventory then redis.call(""HINCRBY"", key, ""purchased"", num_to_purchase); return num_to_purchase; end  return nil; ```  In the script above, we first parse the keys and arguments passed to the script. The script operates on a single key, which is the key of the item on sale. Similarly, the script expects a single argument, which is the number of units to purchase. Then, we retrieve the current inventory and the number of units purchased for the item using the `HMGET` command. If the total number of units purchased plus the number of units to purchase is less than or equal to the inventory, we increment the number of units purchased and return the number of units purchased. Otherwise, we return `nil` to indicate that the purchase cannot proceed. The script above can be executed using the `EVAL` command:  ```shell # General syntax of the 'EVAL' command: #   EVAL script num_of_keys [key [key ...]] [arg [arg ...]]  # Try to purchase 5 units of the item: dragonfly$> EVAL ""<script>"" 1 item_on_sale:<item_id> 5 ```  Alternatively, we can load the script and use the `EVALSHA` command, which is more efficient as it stores the script in Dragonfly:  ```shell # Load the script into Dragonfly and get the SHA1 digest of the script. dragonfly$> SCRIPT LOAD ""<script>""  # Try to purchase 5 units of the item using the SHA1 digest of the script: dragonfly$> EVALSHA ""<script_sha>"" 1 item_on_sale:<item_id> 5 ```  In comparison to the `DECR` command, the Lua script option allows for more complex inventory verification and deduction logic and covers more edge cases. For instance, in the script above, we have a sanity check to ensure that the number of units to purchase is greater than zero. In the meantime, we allow purchases of more than one unit of the item, and it handles the edge case where the inventory is not sufficient to fulfill the requested quantity nicely.  ### 3. Distributed Locks with Conditional `SET`  Another powerful feature of Dragonfly is its ability to act as distributed locks, playing a critical role in handling surges of traffic. During high traffic periods, such as flash sales, each incoming request attempts to acquire a lock from Dragonfly. Only the request that successfully secures a lock gains the exclusive right to proceed with further operations for that particular on-sale item. These operations might include database operations, payment processes, or any other actions that require direct interaction with the primary database or third-party services within the e-commerce platform.  Requests that fail to acquire a lock are denied further processing and can be redirected to a waiting page or a retry page with a countdown timer, depending on the implementation. This ensures that **only one request is allowed to proceed at a time per on-sale item**, preventing the primary database from being overwhelmed by excessive simultaneous requests.  A common logic for using distributed locks could be something similar to the following pseudocode:  ```javascript // purchase_item_pseudocode.js  const itemId = getItemId(); const userId = getUserId(); const expiration = getLockExpirationTime();  const lockKey = `item_lock:${itemId}`; const lockVal = userId;  const lockAcquired = acquireLock(lockKey, lockVal, expiration);  if (!lockAcquired) { sendResponse(""Another user got this item, please try again later.""); }  try { purchaseItem(itemId, userId); } catch (purchaseError) { throw purchaseError; } finally { releaseLock(lockKey, lockVal); }  sendResponse(""You have successfully purchased the item!""); ```  It is notable that both `acquireLock` and `releaseLock` take the item ID and user ID into account. We want to ensure that an acquired lock cannot be accidentally released by another user under high concurrency situations, the `releaseLock` implementation should conform to this requirement. Also, the choice of the lock expiration time is important. It should be long enough to allow the user to complete the purchase process, but not too long to prevent other users from acquiring the lock if the service process dies unexpectedly without releasing the lock.  The `acquireLock` function can be implemented in Dragonfly using the `SET` command with the `NX` and `EX` options:  ```shell # Using the 'SET' command with the 'NX' option to acquire a lock. # The 'NX' option ensures that the lock is only acquired if the key does not exist. # Also, we set the expiration time for the lock to prevent the lock from being held indefinitely. dragonfly$> SET item_lock:<item_id> <user_id> NX EX <expiration> ```  On the other hand, the `releaseLock` function needs to be implemented in a Lua script to ensure that the lock is only released if the user ID matches the one that acquired the lock. This can be achieved in Dragonfly using the `EVAL` command with the following Lua script:  ```lua -- release_lock.lua  local key = KEYS[1]; local val = ARGV[1];  local lock_val = redis.call(""GET"", key);  if lock_val == val then redis.call(""DEL"", key); end  return nil; ```  ### 4. Distributed Locks with RedLock  Using conditional `SET` commands and Lua scripts for distributed locking in Dragonfly is a straightforward yet effective way to manage highly concurrent operations. However, in environments where an even higher level of reliability and fault tolerance is required, particularly across distributed systems, the **RedLock** distributed lock algorithm adds additional safety.  RedLock is designed to extend the locking mechanism across multiple primary instances of Redis. Since Dragonfly is highly compatible with Redis, RedLock can be used with Dragonfly instances as well. RedLock ensures that a lock is acquired and released correctly and consistently across all these instances, enhancing the reliability and integrity of the distributed locking process.  When using RedLock, the `acquireLock` and `releaseLock` functions are normally provided by the client library already. This typically involves attempting to acquire the lock on multiple instances simultaneously and ensuring that a majority of the instances grant the lock before proceeding. Similarly, the release process involves trying to release the lock across all instances to maintain consistency.  For more information on RedLock, read the documentation [here](https://redis.io/docs/manual/patterns/distributed-locks/).  ---  ## Conclusion  In this blog, we explored how Dragonfly can be used in various ways to elevate your e-commerce platform's performance and user experience. We discussed how Dragonfly can be used for caching, personalization, and high-traffic flash sales.  Overall, Dragonfly is a versatile and powerful tool for building and maintaining an e-commerce platform, proficient in handling various aspects from everyday user interactions to the most demanding sales events. Although not directly shown in this blog, Dragonfly's performance is phenomenal, as discussed in detail in our previous [blog posts](https://www.dragonflydb.io/blog). We encourage you to [try Dragonfly out for yourself](https://www.dragonflydb.io/docs/getting-started) and experience its capabilities firsthand. Also, consider subscribing to our newsletter below to stay in the loop with the latest Dragonfly news and updates!","[-0.01802331767976284, 0.023469312116503716, -0.005494744051247835, -0.031004562973976135, -0.011999295093119144, 0.009917003102600574, -0.0376901850104332, -0.012493752874433994, -0.014415868557989597, -0.038330890238285065, 0.0008204683545045555, -0.00619116285815835, -0.00416110223159194, -0.016588695347309113, 0.005738490726798773, 0.019360441714525223, 0.005829025059938431, -0.020864706486463547, 0.001850732835009694, -0.010453245602548122, -0.002461840398609638, 0.00011273278505541384, -0.005581796169281006, 0.006225983612239361, -0.02117113023996353, 0.006570711266249418, 0.009137013927102089, -0.011052166111767292, -0.008872374892234802, 0.009478259831666946, 0.017117973417043686, 9.624724771128967e-05, -0.0017828320851549506, 0.009290226735174656, -0.029193874448537827, -0.002413091016933322, 0.008496308699250221, -0.001544308615848422, 0.023246457800269127, 0.007110435515642166, 0.036520201712846756, -0.009708077646791935, -0.009847361594438553, -0.0168254766613245, -0.003830303205177188, 0.004376992117613554, -9.096970461541787e-05, -0.020516496151685715, 0.008391845971345901, -0.029082447290420532, 0.0022825126070529222, 0.03465379774570465, -0.016727978363633156, 0.008022744208574295, 0.0013501818757504225, 0.02000114694237709, 0.007005972787737846, -0.000523184600751847, 0.023831449449062347, -0.010244320146739483, 0.009123085997998714, 0.04535079002380371, -0.01583656296133995, 0.0014755373122170568, -0.007960066199302673, -0.013426953926682472, -0.016003703698515892, -0.009074336849153042, -0.0020074271596968174, -0.0053206393495202065, 0.018914733082056046, 0.020711494609713554, -0.005954380612820387, -0.004129763226956129, 0.005968309007585049, -0.011804298497736454, 0.014241763390600681, -0.0053415317088365555, 0.025502854958176613, 0.0011029532179236412, 0.0023921984247863293, -0.0018089477671310306, -0.01604548841714859, 0.02692355029284954, -0.0021101487800478935, 0.04457079991698265, -0.023051461204886436, 0.013663736172020435, -0.013036958873271942, 0.014931218698620796, -0.008879339322447777, -0.012270898558199406, -0.00490278797224164, 0.01009807176887989, -0.010042358189821243, 0.005404209718108177, 0.007869532331824303, 0.008753984235227108, -0.02018221653997898, -0.007556143682450056, -0.026881763711571693, -0.008740055374801159, -0.017939748242497444, -0.013663736172020435, -0.02792639285326004, 0.007542215287685394, 0.020154358819127083, -0.02356681041419506, -0.00083657301729545, 0.009979681111872196, -0.01998721808195114, 0.03153384104371071, 0.03195169195532799, -0.012263934127986431, 0.00018933885439764708, 0.0007873884751461446, 0.0218118354678154, -0.017521895468235016, 0.0073332893662154675, -0.014415868557989597, 0.015822634100914, 0.020293643698096275, 0.011066094040870667, -0.02257789671421051, 0.0004289504431653768, 0.008196848444640636, -0.0094295097514987, -0.01859438046813011, 0.014304441399872303, -0.004516275599598885, -0.0019047053065150976, 0.03618592023849487, 0.0020022038370370865, 0.000880969746503979, -0.028636740520596504, 0.017563682049512863, -0.020530425012111664, 0.0006694325129501522, -0.029834579676389694, -0.019332583993673325, -0.00519180204719305, 0.0052301050163805485, -0.016351912170648575, -0.01495907548815012, -0.011066094040870667, 0.035350214689970016, 0.0032958018127828836, 0.0056444741785526276, 0.0027787107974290848, -0.00882362574338913, 0.018761521205306053, -0.012786248698830605, -0.0009105675271712244, 0.014596937224268913, 0.020293643698096275, 0.010432353243231773, -0.018469026312232018, 0.011254127137362957, -0.005891702603548765, -0.03028028830885887, 0.01721547171473503, 0.025098932906985283, -0.011741620488464832, 0.00371539406478405, 0.02043292671442032, 0.03621377423405647, 0.01706225983798504, -0.02656141109764576, 0.0015147108351811767, -0.006553300656378269, -0.009770755656063557, 0.02497357688844204, -0.029249588027596474, 0.028581026941537857, -0.002827460179105401, 0.021366126835346222, 0.013023030944168568, 0.01001450140029192, 0.004916716367006302, -0.023720022290945053, 0.03289882093667984, -0.00880273338407278, 0.009345939382910728, 0.009756826795637608, -0.02812138944864273, -0.026463912799954414, -0.015000860206782818, -0.013642843812704086, 0.0056061712093651295, -0.018900806084275246, -0.015321212820708752, 0.0004341735620982945, -0.017549753189086914, -0.021505411714315414, -0.6159684658050537, 0.002770005725324154, 0.012048044241964817, -0.04097728058695793, -0.009833432734012604, -0.013245885260403156, 0.003983515314757824, 0.016310127452015877, 0.010669135488569736, 0.004530203994363546, -0.002063140505924821, -0.010982523672282696, -0.0042133335955441, -0.007688463199883699, -0.03704947978258133, 0.0014285290380939841, 0.01405373029410839, 0.0030659835319966078, -0.00792524591088295, 0.005177873652428389, -0.04016943275928497, 0.025252144783735275, -0.009749862365424633, 0.00832220446318388, -0.011316805146634579, 0.01665833592414856, 0.00500376895070076, 0.0019639008678495884, 0.017716893926262856, 0.038720883429050446, -0.03423594683408737, 0.0227728933095932, 0.04103299230337143, 0.0037502150516957045, 0.04913930967450142, -0.012702678330242634, -0.027062833309173584, 0.04078228399157524, 0.010864133015275002, 0.05454351752996445, -0.0025436694268137217, -0.013120529241859913, 0.017939748242497444, 0.014332298189401627, 0.0066925841383636, 0.0012230854481458664, 0.004143691621720791, -0.021310415118932724, -0.0011821708176285028, -0.011630193330347538, -0.001819394063204527, -0.01019557099789381, 0.003327140584588051, -0.013621951453387737, 0.0006681267404928803, -0.005425102077424526, 0.030976707115769386, -0.012507680803537369, 0.02156112529337406, 0.006142413709312677, 0.024890007451176643, 0.006010093726217747, -0.01169983483850956, -0.019499724730849266, -0.02855316922068596, 0.009137013927102089, 0.004439669661223888, -0.027592111378908157, 0.01309267245233059, -0.008008815348148346, 0.03211883455514908, 0.007660606410354376, 0.0013136198977008462, 0.00524751516059041, 0.004181994590908289, 0.020962204784154892, 0.038943737745285034, 0.0010820606257766485, -0.014046766795217991, 0.03214668855071068, 0.03189598023891449, -0.00550519023090601, -0.014332298189401627, -0.029862437397241592, 0.02278682217001915, 0.0133782047778368, -0.02597641944885254, -0.002662060782313347, 0.007876495830714703, 0.010481102392077446, 0.017953675240278244, 0.02755032666027546, -0.02420751564204693, -0.010293069295585155, 0.018970446661114693, 0.024221444502472878, -0.015181928873062134, -0.01965293660759926, -0.0054076919332146645, -0.020878635346889496, -0.006643834989517927, -0.027619969099760056, -0.02358073927462101, 0.006163306068629026, 0.007737212348729372, 0.015209785662591457, -0.01009807176887989, -0.0011290688998997211, 0.04181298241019249, -0.013315526768565178, 0.00932504702359438, -0.010766633786261082, -0.0043003857135772705, -0.009603614918887615, 0.01188090443611145, -0.019179372116923332, 0.029444584622979164, -0.01883116364479065, 0.01604548841714859, -0.04081013798713684, 0.0026725069619715214, -0.013197135180234909, 0.006584639195352793, -0.012807141058146954, 0.014555152505636215, 0.003497763304039836, -0.0023469312582165003, -0.011623228900134563, -0.00023134160437621176, 0.003886016784235835, 0.021449698135256767, -0.02952815592288971, 0.016198700293898582, -0.017090115696191788, 0.03484879434108734, -0.014750149101018906, 0.013357311487197876, -0.0018664023373275995, 0.032982394099235535, -0.03089313581585884, 0.002790898084640503, -0.007194005884230137, 0.01296731736510992, -0.023887163028120995, -0.029026733711361885, 0.0004250330675859004, -0.024026447907090187, 0.007389002945274115, -0.0038198570255190134, -0.009338975884020329, -0.016003703698515892, -0.015042644925415516, -0.010306998156011105, 0.01782832108438015, -0.012716606259346008, 0.016087273135781288, -0.00863559264689684, -0.03250882774591446, -0.0009549642563797534, -0.0237757358700037, 0.0024409478064626455, 0.03426380455493927, -0.004195922985672951, 0.005477333441376686, -0.04044800251722336, -0.024527868255972862, -0.013970160856842995, 0.012960352934896946, -0.006859724875539541, -0.025405356660485268, -0.009680220857262611, -0.011936618015170097, 0.0015730358427390456, 0.011839118786156178, -0.0168533343821764, 0.0016696639358997345, -0.019736507907509804, 0.002209388418123126, 0.016909047961235046, 0.0025558569468557835, 0.019471868872642517, 0.01860830932855606, 0.009589686058461666, -0.005842953454703093, 0.038303032517433167, 0.0010750964283943176, 0.009868253953754902, 0.02454179711639881, -0.010710920207202435, 0.012953389436006546, 0.004934126976877451, 0.030029576271772385, -0.026282845064997673, -0.02300967648625374, -0.0188172347843647, -0.022675395011901855, -0.0030276805628091097, 0.007180077489465475, -0.014722292311489582, 0.031004562973976135, 0.007967030629515648, -0.003969586919993162, 0.010174677707254887, -0.006194645073264837, -0.008343096822500229, -0.010132892988622189, -0.004895824007689953, -0.009930931963026524, 0.019332583993673325, -0.009380760602653027, 0.014179086312651634, 0.012681785970926285, -0.0042098513804376125, -0.012048044241964817, -0.010181642137467861, 0.044069379568099976, -0.019485797733068466, 0.001666181837208569, -0.007570072077214718, 0.009366832673549652, 0.020850777626037598, 0.004805289674550295, 0.019374370574951172, 0.006313036195933819, 0.008489345200359821, -0.001378038665279746, -0.005466887261718512, 0.028776023536920547, 0.014875505119562149, -0.04120013490319252, 0.003906909376382828, 0.029361015185713768, 0.0038477135822176933, -0.004087978042662144, 0.03668734058737755, 0.03334452956914902, 0.034765224903821945, -0.02274503745138645, 0.031366702169179916, -0.01904008910059929, 0.029444584622979164, 0.026282845064997673, 0.016797620803117752, -0.02736925706267357, 0.00674133375287056, 0.003931283950805664, -0.0018368044402450323, 0.01605941727757454, -0.011978402733802795, 0.001627878868021071, -0.020697565749287605, -0.011734656058251858, 0.0055365292355418205, -0.011734656058251858, 0.01860830932855606, -0.003516914788633585, 0.010105036199092865, 0.006044914945960045, 0.013231956399977207, 0.018106887117028236, 0.005355460103601217, 0.013433918356895447, 0.02656141109764576, -0.004425741266459227, 0.016741907224059105, 0.005334567744284868, -0.013050887733697891, -0.03053099848330021, -0.01725725643336773, -0.0009732452454045415, 0.010773598216474056, -0.03665948286652565, -0.006427945103496313, -0.03014100342988968, 0.012688749469816685, 0.010028430260717869, -0.005616617389023304, 0.013823912478983402, -0.0148615762591362, 0.019095802679657936, -0.003186115762218833, -0.03451451286673546, -0.00043439120054244995, 0.01019557099789381, -0.0019900165498256683, -0.03688233718276024, 0.0036945014726370573, 0.025307858362793922, 0.02040506899356842, 0.008830590173602104, 0.01878937892615795, 0.004439669661223888, 0.003638788126409054, -0.010306998156011105, 0.005700187757611275, 0.013580165803432465, 0.058554891496896744, -0.004815735854208469, -0.011637157760560513, -0.007967030629515648, 0.015335140749812126, 0.012375361286103725, -0.03128313273191452, -0.014917289838194847, 0.04738433286547661, -0.01845509745180607, -0.021700408309698105, -0.013621951453387737, 0.026310700923204422, -0.003166964277625084, -0.002037024823948741, -0.033650953322649, -0.03523879125714302, -0.0436515286564827, 0.01880330592393875, 0.014318370260298252, -0.012814105488359928, -0.0031948210671544075, 0.03741161525249481, 0.012507680803537369, -0.021268628537654877, -0.019959362223744392, -0.013218028470873833, 0.01128198392689228, 0.04315010830760002, -0.0014346226816996932, -0.016992617398500443, -0.0006798788090236485, -0.012716606259346008, -0.013106601312756538, -0.00811327900737524, -0.010787527076900005, 0.043456532061100006, -0.002487956080585718, 0.0003183939552400261, 0.0002681212208699435, -0.0002544104936532676, -0.009380760602653027, 0.008733090944588184, 0.01784224808216095, -0.022452540695667267, -0.01739654131233692, -0.02197897620499134, -0.001066391239874065, 0.006313036195933819, -0.008900231681764126, 0.01763332262635231, 0.015780849382281303, 0.05309496819972992, 0.019666865468025208, 0.022912178188562393, 0.010237355716526508, 0.005668848752975464, -0.025015361607074738, -0.027647824957966805, -0.006950259208679199, 0.005731526296585798, 0.015794778242707253, -0.008816661313176155, 0.03150598332285881, -0.003327140584588051, -0.030224574729800224, 0.010481102392077446, 0.009109157137572765, 0.011233234778046608, 0.013851769268512726, 0.0025001433677971363, 0.00208055111579597, 0.027383185923099518, -0.01207590103149414, 0.00713829230517149, 0.012834997847676277, -0.026004277169704437, 0.021129345521330833, 0.03092099353671074, -0.004617256578058004, -0.01167894247919321, -0.0016722755972296, -0.004021818283945322, 0.0001857479364844039, 0.014304441399872303, -0.0067552621476352215, -0.008085422217845917, -0.04774647206068039, 0.012229113839566708, 0.01159537211060524, -0.02316288836300373, -0.0046938625164330006, -0.024639295414090157, 0.007423824165016413, -0.022675395011901855, 0.00366316270083189, -0.016142986714839935, -0.004906270187348127, -0.01456908043473959, -0.04264868423342705, -0.025920705869793892, -0.004199405200779438, 0.021352199837565422, 0.012424110434949398, 0.020962204784154892, 0.0168533343821764, 0.0017070964677259326, 0.004941090941429138, 0.0011064353166148067, -0.02216004580259323, 0.001391096506267786, -0.042732253670692444, -0.029026733711361885, -0.01607334427535534, 0.004791361279785633, -0.019332583993673325, -0.026227131485939026, 0.006546336226165295, 0.01516800094395876, -0.0031826337799429893, 0.028859592974185944, 0.015098358504474163, 0.005386799108237028, 0.016950832679867744, 0.02235504239797592, 0.003879052586853504, 0.02952815592288971, -0.03390166535973549, 0.007103471551090479, 0.0017393059097230434, -0.012535537593066692, -0.016881190240383148, 0.005076892673969269, -0.02314895950257778, 0.000689454551320523, -0.004826182033866644, 0.0228146780282259, -0.011205377988517284, -0.007507394067943096, 0.004272528924047947, -0.003490799106657505, 0.010599493980407715, 0.0287203099578619, 0.0038894987665116787, -0.004906270187348127, 0.022062545642256737, -0.000848760362714529, -0.019179372116923332, 0.02696533501148224, -0.03679876774549484, 0.03431951627135277, 0.018092960119247437, 0.002183272736147046, 0.019290799275040627, 0.014374082908034325, -0.025224287062883377, -0.009332011453807354, 0.0056061712093651295, 0.007256683427840471, 0.01546049676835537, 0.0037362866569310427, -0.01660262420773506, -0.0287203099578619, -0.0047460938803851604, -0.03473736718297005, -0.0037641434464603662, -0.017368683591485023, -0.0009732452454045415, -0.009923967532813549, -0.02500143274664879, 0.010627350769937038, -0.03663162887096405, -0.006427945103496313, -0.027007119730114937, -0.03314953297376633, 0.01197143830358982, 0.00658812141045928, 0.022494325414299965, -0.01803724654018879, -0.034347373992204666, 0.004133245442062616, -0.02611570432782173, -0.008148099295794964, -0.023873236030340195, 0.009345939382910728, -0.007500430103391409, 0.034180231392383575, 0.02374788001179695, 0.05164641514420509, 0.011832154355943203, 0.004133245442062616, 0.009457366541028023, -0.006107592489570379, -0.010822347365319729, -0.004753057844936848, -0.004356099292635918, -0.006198126822710037, -0.010251284576952457, 0.020544353872537613, 0.015613708645105362, -0.007012936752289534, -0.0032139725517481565, -0.00371539406478405, 0.00870523415505886, -0.01562763750553131, -0.01686726324260235, -0.03459808602929115, -0.01780046336352825, -0.01664440892636776, 0.029751010239124298, -0.005578314419835806, -0.0028448705561459064, -0.027633896097540855, -0.0005610523512586951, 0.041506558656692505, -0.018260100856423378, 0.020098645240068436, -0.009533972479403019, 0.009951824322342873, -0.020669708028435707, 0.0004909752169623971, 0.007980959489941597, -0.0029841545037925243, -0.01766118034720421, -0.008189884945750237, -0.030642425641417503, -0.022104332223534584, 0.01760546676814556, 0.011476981453597546, 0.02537749893963337, 0.009387725032866001, 0.011755548417568207, -0.009791648015379906, -0.006570711266249418, -0.010536815971136093, 0.012626072391867638, 0.005790722090750933, -0.02500143274664879, -0.02874816581606865, -0.028776023536920547, -0.033372387290000916, -0.025252144783735275, 0.0011125289602205157, 0.01544656790792942, 0.009269333444535732, 0.01902616024017334, -0.007730248384177685, 0.0033776310738176107, -0.0056096529588103294, -0.01546049676835537, 0.028776023536920547, -0.007089543156325817, 0.017981532961130142, 0.02633855678141117, 0.005435548257082701, -0.03089313581585884, -0.02493179216980934, 0.023093245923519135, -0.027397114783525467, 0.023469312116503716, 0.048247892409563065, -0.026046061888337135, -0.019527582451701164, 0.007590964436531067, -0.013726414181292057, -0.0011395151959732175, -0.021268628537654877, 0.017312970012426376, 0.02851138450205326, 0.0032453115563839674, -0.024848220869898796, -0.010669135488569736, -0.01269571390002966, 0.015906205400824547, -0.03743947297334671, 0.027592111378908157, 0.01742439717054367, -0.0065985675901174545, -0.005755900871008635, 0.030001720413565636, 0.010397532023489475, 0.032815251499414444, -0.015279428102076054, 0.02337181381881237, -0.011358589865267277, 0.023288244381546974, -0.011442160233855247, -0.007340253796428442, 0.001155184581875801, 0.02302360348403454, -0.007521322462707758, -0.007291504647582769, 0.020850777626037598, 0.004861002787947655, 0.020934348925948143, -0.00803667213767767, 0.009387725032866001, 0.03028028830885887, -0.030224574729800224, -0.001807206659577787, 0.03621377423405647, -0.0077093555592000484, -0.008489345200359821, -0.015808705240488052, -0.02855316922068596, 0.0003630082937888801, -0.006232948042452335, -0.008740055374801159, 0.008733090944588184, -0.022132188081741333, -0.00440136669203639, -0.002420055214315653, 0.004867967218160629, -0.021881477907299995, -0.014032837934792042, -0.02061399631202221, 0.01277928426861763, -0.03128313273191452, -0.026589268818497658, 0.003483834909275174, 0.011226270347833633, 0.015335140749812126, 0.01604548841714859, -0.015042644925415516, -8.367906411876902e-05, 0.03490450978279114, -0.014875505119562149, 0.030224574729800224, 0.023678237572312355, -0.011476981453597546, -0.029583869501948357, 0.010996452532708645, -0.017953675240278244, -0.015349069610238075, 0.01603155955672264, -0.018747592344880104, -0.037968751043081284, -0.01587834767997265, 0.013914447277784348, -9.88044121186249e-05, -0.015780849382281303, -0.016700122505426407, 0.032954536378383636, 0.019388297572731972, 0.014018910005688667, -0.008865410462021828, -0.011748584918677807, 0.011671978048980236, -0.029751010239124298, -0.01703440211713314, 0.014973003417253494, -0.0017985014710575342, -0.010843239724636078, -0.007065168581902981, 9.369008330395445e-05, -0.02156112529337406, -0.022926105186343193, -0.026853907853364944, -0.036520201712846756, 0.01643548347055912, 0.004906270187348127, 0.009547901339828968, -0.017340827733278275, -0.01959722489118576, -0.015209785662591457, 0.015098358504474163, -0.020279714837670326, 0.019527582451701164, 0.02314895950257778, -0.004512793384492397, 0.014805862680077553, 0.02795424871146679, -0.006675173994153738, -0.0017662921454757452, -0.008684341795742512, -0.02575356513261795, -0.05562993139028549, -0.015028716996312141, -0.010996452532708645, 0.0435958132147789, 0.015822634100914, -0.020753279328346252, -0.01188786793500185, 0.006657763384282589, -0.052816398441791534, -0.012612143531441689, -0.005205730441957712, 0.01624048501253128, 0.02314895950257778, 0.005842953454703093, 0.023093245923519135, 0.021923262625932693, 0.012974281795322895, 0.015223714523017406, -0.025112859904766083, -0.00012916392006445676, -0.017786534503102303, -0.02238289825618267, 0.04638148844242096, 0.0032696861308068037, -0.04340081661939621, -0.025419285520911217, -0.017758678644895554, -0.008921124041080475, 0.004516275599598885, 0.013635879382491112, -0.009506115689873695, 0.007072132546454668, 3.509297675918788e-05, 0.00812024250626564, 0.0038894987665116787, -0.004373509902507067, 0.011024309322237968, -0.03621377423405647, -0.00931808352470398, 0.007890424691140652, -0.010571637190878391, -0.020474711433053017, 0.0031060276087373495, 0.01865009404718876, -0.004808771423995495, 0.00034646832500584424, 0.0029127714224159718, 0.006424462888389826, 0.018079031258821487, 0.006612495984882116, -0.00851720105856657, 0.0017018733778968453, 0.015432639978826046, 0.036353059113025665, -0.014917289838194847, -0.009930931963026524, -0.0029597796965390444, 0.0038651241920888424, -0.024305015802383423, 0.0103836040943861, -0.004342170897871256, -0.021881477907299995, 0.006358303129673004, -0.02911030501127243, 0.020237930119037628, -0.003910391591489315, -0.0024600992910563946, -0.010425388813018799, -0.015293356031179428, -0.041701555252075195, 0.011372518725693226, -0.013287669979035854, -0.008155063726007938, -0.02515464648604393, 0.01998721808195114, 0.006452319677919149, -0.018942590802907944, -0.0017697741277515888, 0.015780849382281303, -0.0050316257402300835, -0.010738776996731758, 0.020279714837670326, -0.00016561709344387054, -0.01725725643336773, 0.015975845977663994, 0.0031808926723897457, 0.008175956085324287, -0.018134744837880135, 0.20457997918128967, 0.009485223330557346, 0.006017058156430721, 0.05005858093500137, 0.0038964629638940096, 0.026394270360469818, 0.025823207572102547, 0.005923041608184576, -0.00792524591088295, 0.0036213775165379047, 0.0020579174160957336, 0.001946490490809083, -0.02079506404697895, -0.0006232947926037014, 0.01229875534772873, 0.0026463912799954414, -0.023720022290945053, -0.026798194274306297, 0.0020126502495259047, -0.01179733406752348, -0.002808308694511652, -0.0039034271612763405, -0.035740211606025696, -0.0054459949024021626, 0.03607449308037758, -0.0218118354678154, 0.006790082901716232, -0.01700654625892639, 0.001041145995259285, 0.0028379063587635756, -0.0019621597602963448, -0.010843239724636078, 0.006612495984882116, 0.004805289674550295, 0.002413091016933322, -0.0029632619116455317, 0.029416728764772415, -0.015307284891605377, 0.0008922865381464362, 0.006570711266249418, -0.007911317050457, -0.011762512847781181, 4.398863893584348e-05, -0.007180077489465475, 0.027842821553349495, -0.013336419127881527, -0.013524452224373817, 0.017675107344985008, -0.012138579040765762, 0.007110435515642166, -0.020850777626037598, 0.0022494324948638678, -0.008656485006213188, 0.021129345521330833, -0.00979861244559288, 0.0043003857135772705, 0.006302590016275644, -0.00435261707752943, -0.003081653034314513, 0.003147812793031335, -0.011121807619929314, 0.019861863926053047, 0.010571637190878391, -0.0089071961119771, -0.04434794560074806, 0.0012648706324398518, -0.04025300592184067, 0.0416179858148098, 0.02735532820224762, -0.012354468926787376, -0.02495964802801609, -0.02515464648604393, -0.027438899502158165, 0.008670413866639137, -0.02122684381902218, -0.020530425012111664, -4.711708243121393e-05, 0.0013937080511823297, 0.008238634094595909, 0.026644982397556305, 0.001041145995259285, -0.011268055997788906, -0.0070233833976089954, 0.008524165488779545, -0.0033584795892238617, -0.016351912170648575, 0.024430369958281517, -0.02299574762582779, -0.035935208201408386, -0.020920420065522194, -0.0073332893662154675, -0.008914160542190075, -0.023538954555988312, -0.01919330097734928, 0.031645268201828, -0.013823912478983402, 0.0062712510116398335, 0.026505697518587112, -0.016324056312441826, -0.02200683206319809, -0.03507164865732193, 0.06044914945960045, 0.020335428416728973, -0.000970633642282337, -0.017967604100704193, 0.005748936906456947, -0.028803879395127296, 0.0018803306156769395, -0.006682137958705425, -0.003024198580533266, 0.019959362223744392, -0.04788575321435928, 0.018747592344880104, -0.02695140615105629, -0.0023695649579167366, 0.010320926085114479, 0.02614356018602848, -0.017326898872852325, -0.002111889887601137, 0.006786600686609745, 0.0013118787901476026, -0.018134744837880135, 0.01805117353796959, 0.009150942787528038, -0.031060276553034782, -0.029667438939213753, -0.03306596353650093, 0.0138656971976161, -0.0001517975324532017, -0.021909333765506744, 0.015418711118400097, -0.026059990748763084, 0.01823224313557148, -0.016532981768250465, -0.0047635044902563095, 0.011644122190773487, 0.010000573471188545, -0.017535824328660965, -0.009568793699145317, -0.0012587768724188209, -0.0010202535195276141, 0.028776023536920547, 0.03977943956851959, 0.01686726324260235, 0.01963900960981846, -0.020460782572627068, 0.0034072287380695343, 0.005867328029125929, -0.008210777305066586, -0.01998721808195114, -0.01098948810249567, 0.02341359853744507, 0.010132892988622189, 0.00042742700316011906, 0.013009102083742619, -0.012124651111662388, -0.00032448762794956565, -0.006497587077319622, 0.013148386031389236, -0.003962622955441475, -0.05613135173916817, -0.0032801323104649782, 0.002322556683793664, 0.004582435358315706, -0.005240551196038723, -0.025098932906985283, -0.17794892191886902, 0.004697344731539488, 0.009979681111872196, -0.018190458416938782, 0.02454179711639881, 0.005153499078005552, 0.022494325414299965, 0.011100915260612965, 0.0023208155762404203, 0.007389002945274115, -0.008168991655111313, 0.0015234160237014294, -0.05047643184661865, -0.03858159855008125, 0.014666578732430935, 0.015502281486988068, 0.012688749469816685, 0.009290226735174656, 0.03855374455451965, 0.02097613364458084, 0.022243615239858627, -0.05423709377646446, 0.015934061259031296, 0.0030154932755976915, 0.016198700293898582, -0.014374082908034325, 0.012535537593066692, -0.007451680954545736, 0.008078457787632942, -0.038358744233846664, -0.011727691628038883, -0.0026272397954016924, 0.022828606888651848, 0.004091460257768631, 0.020753279328346252, 0.00903255119919777, 0.009603614918887615, 0.032397400587797165, -0.008189884945750237, 0.04003015160560608, 0.013719449751079082, 0.041868697851896286, -0.015530138276517391, 0.008851482532918453, 0.0188172347843647, 0.019081873819231987, -0.006549818441271782, -0.007737212348729372, 0.0006737851654179394, 0.00584643566980958, 0.04125584661960602, -0.007994887419044971, 0.012758391909301281, -0.00982646830379963, 0.016686193645000458, 0.009840397164225578, -0.005216176621615887, 0.022884320467710495, 0.009492187760770321, -0.023065390065312386, 0.002042247913777828, -0.016950832679867744, 0.005146534647792578, -0.008503273129463196, 0.007009455002844334, -0.014179086312651634, -0.01219429261982441, 0.025293929502367973, -0.025057146325707436, 0.005080374889075756, -0.008363989181816578, 0.007284540217369795, 0.010543780401349068, 0.01417212188243866, -0.0003347162564750761, 0.004707790911197662, -0.004993322771042585, 0.003861641976982355, 0.035127364099025726, -0.0018925180193036795, -0.010766633786261082, 0.012013223953545094, -0.03423594683408737, 0.003899945179000497, -0.012479824014008045, -0.006208573468029499, -0.005581796169281006, 0.006058843340724707, -0.003543030470609665, 0.0065985675901174545, 0.04312225058674812, -0.03223026171326637, 0.007493465673178434, -0.003389818361029029, -0.0039243195205926895, 0.014018910005688667, 0.012584286741912365, -0.007514358498156071, 0.03785732388496399, 0.017716893926262856, 0.0044988649897277355, 0.0023713058326393366, -0.01923508569598198, 0.0034072287380695343, 0.009833432734012604, 0.027494613081216812, 0.004523240029811859, 0.010641278699040413, 0.04849860444664955, -0.003506468376144767, -0.02156112529337406, 0.029806723818182945, 0.027257829904556274, 0.02534964308142662, -0.015961918979883194, 0.028191031888127327, 0.009638436138629913, -0.001443327870219946, 0.019109731540083885, -0.019541511312127113, 0.06579764187335968, -0.013419989496469498, -0.002200683346018195, 0.021867549046874046, 0.007451680954545736, -0.011658050119876862, -0.10975559800863266, -0.023678237572312355, 0.005574832204729319, 0.0032923195976763964, -0.014116408303380013, 0.014722292311489582, -0.002776969922706485, 0.03543378785252571, -0.029082447290420532, 0.024848220869898796, -0.034570228308439255, 0.0011438678484410048, -0.012577323243021965, -0.0005923912394791842, 0.01465265080332756, 0.004916716367006302, -0.005675812717527151, 0.0019952398724853992, 0.0041715484112501144, 0.0337345264852047, 0.013956231996417046, -0.019081873819231987, 0.0053415317088365555, 0.003262721933424473, -0.021115416660904884, -0.0109059177339077, -0.009972716681659222, 0.003038126975297928, 0.01841331273317337, 0.002305146073922515, -0.001800242462195456, 0.0009802094427868724, 0.019680794328451157, -0.013635879382491112, -0.005599206779152155, -0.016184771433472633, -0.017104044556617737, 0.013197135180234909, 0.03682662546634674, -0.035545215010643005, -0.0031756695825606585, 0.002334743971005082, 0.012096794322133064, -0.0051813554018735886, 0.007382038980722427, -0.0035970029421150684, -0.008809697814285755, 0.03326096013188362, 0.0067587438970804214, -0.0005932617350481451, -0.007228826638311148, -0.004074049647897482, -0.02955601178109646, -0.012417146936058998, 0.02415180206298828, -0.031199561432003975, 0.014875505119562149, -0.014046766795217991, -0.006501069292426109, 0.02235504239797592, -0.0051604630425572395, -0.0024409478064626455, -0.00011137259571114555, 0.02752246893942356, 0.015516210347414017, 0.00011958816321566701, -0.01048806682229042, 0.010745741426944733, 0.0008848870638757944, -0.005811614450067282, -0.011372518725693226, 0.025321785360574722, -0.02117113023996353, 0.0056270635686814785, -0.025433212518692017, 0.007883460260927677, 0.00282049598172307, -0.007194005884230137, 0.014750149101018906, -0.0049550193361938, -0.016978690400719643, -0.0033410689793527126, 0.0009123085765168071, -0.02475072257220745, 0.010209498926997185, 0.016783691942691803, 0.035378072410821915, -0.012208220548927784, 0.018274027854204178, -0.049473587423563004, -0.010481102392077446, -0.002188496058806777, 0.006856242660433054, -0.023441456258296967, -0.022285399958491325, 0.010146821849048138, -0.026603197678923607, 0.009262369945645332, 0.022146116942167282, 0.024486083537340164, -0.030670281499624252, -0.0148615762591362, -0.06167484447360039, 0.0023034049663692713, 0.029583869501948357, -0.009694148786365986, 0.021909333765506744, -0.02952815592288971, -0.010376639664173126, -0.006351339165121317, 0.01603155955672264, 0.008078457787632942, -0.01784224808216095, -0.016727978363633156, -0.023901091888546944, -0.026881763711571693, -0.019471868872642517, -0.013768198899924755, 0.017173686996102333, -0.010738776996731758, 0.007312397006899118, 0.028664596378803253, 0.003375889966264367, -0.00024265841057058424, 0.010035394690930843, -0.007695427164435387, -0.023859307169914246, -0.013691592961549759, -0.002063140505924821, 0.02755032666027546, -0.006166788283735514, -0.010912882164120674, 0.015683351084589958, -0.026310700923204422, -0.0010524628451094031, 0.004965465981513262, 0.001965641975402832, -0.0031008045189082623, 0.006723923142999411, 0.006779636722058058, 0.02195112034678459, -0.0011734656291082501, -0.014819791540503502, -0.027578182518482208, 1.3697142094315495e-05, -0.015739064663648605, -0.006494104862213135, -0.0005244903732091188, 0.005494744051247835, -0.00550519023090601, 0.030837422236800194, 0.0003828126937150955, 0.025307858362793922, 0.010279141366481781, -0.01515407208353281, -0.028260674327611923, -0.016365841031074524, -0.013050887733697891, 0.026589268818497658, 0.018928661942481995, 0.0035656641703099012, -0.002630721777677536, 0.026589268818497658, 0.007120881695300341, 0.003325399709865451, -0.029221732169389725, 0.021714337170124054, -0.013211064040660858, -0.050420720130205154, -0.006156342104077339, 0.013524452224373817, -0.005839471239596605, -0.01626834273338318, -0.012500716373324394, 0.013287669979035854, -0.009930931963026524, -0.0006337410886771977, -0.01621262915432453, -0.003969586919993162, 0.013552309013903141, -0.02117113023996353, 0.009847361594438553, 0.016978690400719643, -0.030001720413565636, -0.0022389863152056932, 0.015014788135886192, 0.03604663535952568, 0.0005223140469752252, -0.012215184979140759, 0.03186812251806259, 0.012904639355838299, 0.010474137961864471, -0.00961754284799099, 0.006340892985463142, -0.010432353243231773, 0.009137013927102089, 0.010000573471188545, -0.002688176464289427, -0.017870105803012848, 0.023650381714105606, 0.022494325414299965, 0.024513941258192062, 0.013155350461602211, 0.011811261996626854, 0.021881477907299995, -0.012145543470978737, 0.003952176310122013, 0.012911603786051273, -0.008851482532918453, -0.0020770689006894827, 0.0030781710520386696, 0.022327184677124023, 0.00016801102901808918, -0.019290799275040627, -0.0089071961119771, 0.026241058483719826, -0.0020335428416728973, 0.00821774173527956, 0.019889719784259796, -0.015934061259031296, -0.0038337851874530315, 0.020948275923728943, -0.013580165803432465, 0.008935052901506424, 0.029778866097331047, -0.017368683591485023, 0.020335428416728973, 0.019708650186657906, 0.008141135796904564, -0.006253840401768684, -0.005226622801274061, -0.00869827065616846, 0.011233234778046608, 0.007444716524332762, -0.007973995059728622, -0.0029702261090278625, 0.00041785126086324453, -0.02933315746486187, -0.004000925924628973, 0.014889433048665524, 0.00972200557589531, 0.09772147983312607, 0.028065675869584084, -0.02100398950278759, -0.006135449279099703, -0.022480398416519165, 0.010808419436216354, -0.0014581268187612295, 0.003368925768882036, -0.011435195803642273, -0.037940893322229385, 0.03548949956893921, -0.004373509902507067, -0.021742193028330803, -0.04184084013104439, 0.011456089094281197, 0.008398810401558876, -0.016560837626457214, 0.0031826337799429893, -0.015920132398605347, -0.008259526453912258, 0.01665833592414856, -0.010822347365319729, 0.0073332893662154675, -0.015585851855576038, -0.02300967648625374, -0.002566303126513958, 0.030252430588006973, 0.0009601873462088406, -0.009861289523541927, -0.04181298241019249, 0.019290799275040627, -0.012375361286103725, -0.007674534805119038, -0.004373509902507067, -0.0188172347843647, 0.021909333765506744, -0.012821069918572903, -0.020446855574846268, 0.003478611819446087, 0.019694723188877106, -0.010585565119981766, -0.006420981138944626, -0.01565549336373806, -0.027243902906775475, 0.010954666882753372, 0.003861641976982355, 0.0011473499471321702, -0.00892808847129345, -0.030224574729800224]"
Redis Analysis - Part 2: Simplicity,Redis Analysis - Part 2: Simplicity,"Redis was initially designed as a simple store, and it seems that its APIs achieved this goal. Unfortunately, Redis's simple design makes it unreliable and difficult to manage in production.  So the question is - what simplicity means to you as a datastore user?  Before diving into Redis specifics, a disclosure: some of the problems I mention below do not show up for small workloads. For those of you, who have managed Redis instances larger than 12GB, please answer the following questions:  - There are eight Redis cache eviction policies. How well do you know them? Are you happy with either one of them?  - How confident are you when you need to change Redis settings, especially those that control its memory consumption? Can you guarantee what its peak memory usage will be?  - Have you ever needed to debug an unresponsive Redis instance or a its OOM crash? How easy was it?  - Have you ever observed connection overload events when multiple clients connect to a redis instance?  Fourteen years after Redis's inception, we've established that the engineering community demands a simple, low-latency Redis-like API that compliments relational databases. However, the community is unlikely to settle with a fragile technology that is hard to manage. API simplicity does not mean that the foundation should not be solid.  I was fortunate to observe Redis and Memcached usage globally, so my opinion was shaped by looking at the whole range of workloads: I've seen how those ""simple"" design decisions in Redis caused a sub-optimal but manageable quirks with 4-16GB workloads, made it painful at 64GB scale, and caused frustration and a lack of trust with 100+ GB workloads.  ## Redis Caching  I mentioned cache policy already. It's one of more significant settings in Redis when used as a cache (a pretty popular use-case for Redis). In a perfect world, a regular user of Redis would love to have a magical cache that does the following:  - Reclaims expired items instead of growing in memory. btw, this requirement holds for non-cache scenarios as well. - similarly, does not evict non-expired entries if there is a sinificant number of expired items that could be evicted instead. - maximizes hit-ratio in a robust manner by keeping entries that are most likely to be hit in the future.  A normal user does not want to know what LFU or LRU is, or why Redis implements guesstimate of those heuristics or why it can not evict expired items efficiently. In reality, not only that the user is expected to know the internal implementation details of the Redis cache algorithms, he also needs to decide between eight ""simple"" options of `maxmemory-policy` setting.  ![redis settings](/assets/blog/redis-analysis-part-2-simplicity/choices.jpg)  ## Persistence  If I had to pick a single design choice that looked ""simple"" at the time yet had a substantial negative impact on the reliability of the whole system and the complexity of other features - it would be the fork-based BGSAVE command. The BGSAVE algorithm allows Redis to produce a point-in-time snapshotting of in-memory data or sync with its secondary replica. Redis does it by forking the serialization routine into a child process. By doing so, this child process gets an immutable, point-in-time snapshot of its parent process memory from Linux for ""free"". Redis relies on Linux property that does not copy the physical memory during `fork()` but uses lazy Copy-On-Write operation instead.  Using the OS to achieve consistent snapshot isolation looks like an elegant choice at first sight. However, there are some serious problems with this approach:  1. **Lack of back-pressure** When the Redis parent process mutates its entries, it in fact duplicates the Linux memory pages with CoW. CoW is transparent to the parent process; therefore the Redis memory component has a hard time estimating its actual memory usage. And even if it did, there is no efficient mechanism in Redis to ""postpone"" or stall the incoming writes - the execution thread must progress with the flow. Under the heavy writes, this will easily cause OOM crashes.  ![bgsave](/assets/blog/redis-analysis-part-2-simplicity/bgsave.gif)  1. **Unbounded memory overhead** In the worst case, both child and parent processes could double Redis physical memory. Unfortunately, it does not stop there with replica syncs: the parent must also hold the replication log of mutations during the snapshot, which grows in memory until the sync completes. In addition, the parent dataset can grow beyond its initial size because the user continues adding items. These factors can contribute to RSS usage spiking wildly under different write loads or database sizes. All this makes it very hard to estimate the maximum memory usage for Redis.  ![boromir knows](/assets/blog/redis-analysis-part-2-simplicity/boromir.jpg)  1. **Linux large pages** Enabling large pages usually improves the database performance; however, with Redis and bgsave, huge pages would create high write amplification - a tiny write would cause 2MB or 1GB CoW. This would quickly cause 100% memory overhead and major latency spikes during writes. 1. **Bad interactions with other Redis features** Ask Redis maintainers how hard it was to implement TLS support in Redis 6. The seemingly unrelated feature had several problems due to how the TLS session interacted with the `fork()` call. As a result: TLS in Redis has mediocre performance.  So far, I've mentioned a few stability problems with Redis that are impossible to fix with the current Redis architecture. There is a long tail of additional problems that hurt Redis reliability, impact its resource usage or obscure its API guarantees. Here are some of them in random order:  - Unreliable replica syncs: if the master's replication buffer overflows during replica sync, the replica will retry the whole synchronization flow, possibly entering the infinite cycle of never-ending attempts. - Unreliable timeouts in blocking commands: blocking commands can expire with timeouts much larger than specified. - Uncontrolled freezes: commands like `FLUSHDB` will ""stop the world"" during their execution. This means Redis may completely stall the processing of ongoing requests for minutes or longer. - LUA stalling: a similar problem with unresponsiveness exists when running bad LUA scripts. Moreover, even good scripts may cause significant delays to other concurrent requests due to the sequential nature of Redis execution. - PUB/SUB is unreliable and prone to data loss when a SUB client disconnects.  ## Fight against complexity  I think it's time to redesign the system that once challenged traditional databases but nowadays suffers from complexity itself.  Lately, I've been working on a novel design of a cache and dictionary data structures that could be the foundation stones for the next-generation memory store. The work is still in progress, but it already shows some promising results. The cache design is so novel that I think it deserves a blog post of its own. Therefore, today I will share just the basic characteristics of the underlying dictionary.  Below you can see a Redis 6.2 vs my experimental store (POC), both running on a dedicated 64-cpu n2d instance in GCP.  I run the same three commands on both servers: `debug populate`, `save` and `flushdb`. `populate` is interesting because it demonstrates the raw efficiency of the underlying engine, without bottlenecks like networking. `save` and `flushdb` are interesting because both are ""stop the world"" commands that must process the whole database and their performance directly affects database robustness.  ![redis 6.2](/assets/blog/redis-analysis-part-2-simplicity/redis_table.png)  As you can see it takes almost 180s to create 200M items in Redis. What's remarkable about this number is that it sets an upper bound on write throughput limit for Redis: no matter how big the Redis server is, it won't be able to go faster than ~1.1M records a second because records creation is always done entirely in a single thread. Saving 200M records takes 150s which shows how quickly a server can persist its data or replicate itself to a replica. Note the gap: those 200M items take up 17GB of RAM, hence Redis moves 17GB in 150s or 110MB/s (for comparison, the slowest hdd in AWS (sc1) reaches 250MB/s and in GCP (pd-standard) reaches 400MB/s). Finally, `flushdb` demonstrates that a simple ""empty my store"" operation may be cpu-intensive, and completely stall other requests for almost 3 minutes! Not so simple anymore.  This snapshot below is the POC store under development.  ![POC](/assets/blog/redis-analysis-part-2-simplicity/df_table2.png)  You can see that the same commands run an order of magnitude faster. The result is achieved in part because of the [shared-nothing architecture](/blog/redis-analysis-part-1-threading-model/) that distributes operations across cpus but also due to novel dictionary design. Btw, you can see that `flushdb` operation was not timed - `redis-cli` does not show latencies of ""fast"" operations below 500ms. Hence, we can conclude that `flushdb` was at least 350 times faster in this case. If you compare `used_memory_human` metric, you can see that Redis required almost twice more RAM than the POC (16.9GB vs 9.5GB).  There is a lot more to cover. For example, Redis `SAVE` stalls the processing of all requests, similarly to `FLUSHDB` . In contrast, the new store runs it concurrently with the rest of the traffic while still producing a consistent point-in-time snapshot. In other words, it provides `BGSAVE` product experience with the reliability of `SAVE`.  If we combine the long tail of improvements that come from a new design, we will get a product that redefines what simplicity and ease of use mean for an in-memory database world.","[0.009897508658468723, 0.005825350992381573, 0.019026685506105423, -0.025424793362617493, -0.02584388293325901, 0.0005238624871708453, 0.00714199198409915, -0.012258382514119148, -0.02068907581269741, -0.024055765941739082, 0.00029685540357604623, 0.010854430496692657, -0.0032985873986035585, 0.00464491406455636, 0.01350866723805666, 0.022533072158694267, 0.03112441673874855, -0.017601778730750084, 0.017364295199513435, -0.010330568067729473, 0.008039542473852634, -0.010728703811764717, -0.03886361047625542, 0.008863753639161587, -0.02223970927298069, -0.0072991508059203625, 0.036740221083164215, 0.0020465559791773558, 0.0008211544482037425, 0.009045358747243881, 0.02112213522195816, -0.025885790586471558, -0.014710058458149433, 0.008242103271186352, -0.03249344229698181, 0.0019470222759991884, 0.013934741728007793, -0.012984804809093475, 0.008605314418673515, -0.017811324447393417, 0.021219922229647636, -0.005193223245441914, -0.00845164805650711, -0.015548238530755043, -0.006579712964594364, 0.021331680938601494, -0.003918491303920746, -0.025760063901543617, 0.0002828857395797968, -0.022016193717718124, 0.0007286053732968867, 0.01381599996238947, -0.011727535165846348, 0.009219979867339134, 0.003925476223230362, -0.01149703562259674, -0.003539564087986946, 0.01301274448633194, -0.0055843740701675415, -0.020018531009554863, 0.01775544509291649, 0.01876126229763031, -0.007494725752621889, 0.008011603727936745, -0.0049382769502699375, -0.008465617895126343, -0.0011708326637744904, -0.025382883846759796, -0.0021321203093975782, -0.012153609655797482, 0.015450450591742992, 0.05230243131518364, -0.0011935333022847772, 0.0026943993289023638, 0.03590204194188118, -0.008835813961923122, -0.003282871562987566, 0.01647023670375347, 0.005552942398935556, 0.008961540646851063, -0.009373646229505539, 0.0016510399291291833, -0.015548238530755043, 0.02539685368537903, 0.013033698312938213, 0.05417436361312866, -0.003949922975152731, -0.002923152642324567, -0.011531959287822247, 0.01869141310453415, 0.002179267816245556, 0.013857908546924591, 0.0225470419973135, -0.003144921036437154, 0.0014345101080834866, 0.01422810461372137, 0.01980898715555668, 0.00978575088083744, -0.014046499505639076, 0.0023469040170311928, -0.024866005405783653, 0.00573105551302433, -0.023874159902334213, -0.011231611482799053, -0.029978903010487556, -0.010051175020635128, 0.01139924768358469, -0.025005701929330826, 0.017350325360894203, 0.009206010028719902, -0.019180351868271828, 0.03503592312335968, 0.00018968187214341015, -0.0005020349053665996, -0.0027153538540005684, 0.016176873818039894, 0.01775544509291649, -0.015338693745434284, 0.0019784539472311735, -0.021219922229647636, 0.016973145306110382, -0.007536634802818298, 0.041154637932777405, -0.03050975129008293, 0.005654222331941128, -0.031152356415987015, -0.02242131344974041, 0.006949909031391144, 0.007606483064591885, -0.015157087706029415, 0.00909425225108862, 0.029028967022895813, -0.030984720215201378, -0.01477990671992302, -0.013292137533426285, 0.012034866958856583, 0.0005339031922630966, -0.0027502779848873615, -0.009862584061920643, -0.013522637076675892, 0.023441100493073463, 0.026109306141734123, -0.012062806636095047, -0.010421371087431908, 0.000964780047070235, 0.042886875569820404, -0.0009787497110664845, 0.014318907633423805, -0.0016772330272942781, 0.00816527009010315, 0.00476714875549078, -0.006041880697011948, -0.02087068185210228, 0.017252538353204727, 0.015296784229576588, 0.010651870630681515, -0.025704186409711838, 0.015059299767017365, -0.029168663546442986, -0.012956865131855011, 0.033750712871551514, 0.02050746977329254, -0.023692553862929344, 0.0011324160732328892, 0.00882184412330389, 0.032884594053030014, 0.03372277319431305, -0.0009298559161834419, 0.012663502246141434, -0.01769956760108471, 0.009743842296302319, 0.022253679111599922, -0.02559242770075798, 0.03713137283921242, 0.0018562193727120757, 0.023399190977215767, 0.012998774647712708, 0.01578572206199169, 0.003607666352763772, -0.01444463524967432, 0.02087068185210228, 0.007145484443753958, 0.013173394836485386, 0.03168320283293724, -0.016791539266705513, -0.006523834075778723, 0.01099412702023983, 0.006073312368243933, 0.004033741075545549, 0.0012127415975555778, -0.00925490353256464, 0.009548266418278217, -0.019459744915366173, -0.01621878333389759, -0.6088539361953735, 0.008507526479661465, -0.013969666324555874, -0.041657544672489166, -0.00771824037656188, 0.015338693745434284, 0.01757384091615677, 0.00829099677503109, -0.0231756754219532, 0.018300263211131096, 0.011594822630286217, 0.008793904446065426, 0.02274261601269245, -0.023999886587262154, -0.038723915815353394, -0.03067738749086857, 0.011147793382406235, 0.009953387081623077, 0.0008621903252787888, -0.0184539295732975, -0.00851451139897108, 0.041266392916440964, -0.03294047340750694, 0.010393431410193443, 0.026249002665281296, -0.00801858864724636, -0.006859106011688709, 0.00018564377387519926, -0.01109191495925188, 0.03796955198049545, -0.0191244725137949, 0.005196715705096722, 0.03802543133497238, 0.0006648687995038927, 0.06068423017859459, -0.006593682337552309, -0.006349213421344757, 0.02851208858191967, 0.009115207009017467, 0.03858421742916107, -0.006981340702623129, -0.01518502738326788, 0.01009308360517025, 0.015157087706029415, 0.00888470746576786, 0.00476714875549078, 0.01658199355006218, 0.0001586866710567847, 0.0017916096840053797, -0.003597188973799348, 0.008926616981625557, -0.008703102357685566, 0.0055878665298223495, -0.003914998844265938, 0.0163305401802063, -0.014200165867805481, 0.026933517307043076, -0.009185055270791054, 0.013229274190962315, 0.018803169950842857, 0.007473771460354328, 0.015464420430362225, -0.024125613272190094, -0.012775260023772717, -0.05409054830670357, 0.02775772660970688, -0.0060034641064703465, -0.037187252193689346, 0.02025601640343666, -0.0035587723832577467, 0.008179239928722382, -0.010526143014431, -0.006373660173267126, -0.02429324947297573, -0.005881229415535927, 0.00031257126829586923, 0.03573440760374069, 0.007543619722127914, 0.015855571255087852, 0.01688932627439499, 0.010428356006741524, 0.0026839221827685833, -0.004763656295835972, -0.0356505885720253, 0.017545901238918304, 0.017867203801870346, -0.017476052045822144, -0.013250228017568588, -0.0031292052008211613, 0.002963315462693572, -0.0017418427160009742, 0.019655320793390274, -0.004536649212241173, -0.025620367377996445, 0.023203615099191666, 0.02981126680970192, -0.008675162680447102, 0.002348650014027953, -0.012873047031462193, -0.031096477061510086, -0.015450450591742992, -0.03087296150624752, -0.011811352334916592, 0.03134793043136597, 0.014486543834209442, 0.010225795209407806, -0.011063975282013416, -0.011909140273928642, 0.05260976403951645, -0.0053608594462275505, 0.009303797967731953, -0.00540276849642396, 0.009492387995123863, -0.015338693745434284, -0.0010503443190827966, -0.02869369462132454, 0.04640723019838333, -0.006066327448934317, 0.009946402162313461, -0.026723971590399742, 0.014270014129579067, -0.0026193123776465654, 0.00816527009010315, 0.00204830220900476, 0.0013594231568276882, -0.011448141187429428, 0.009024403989315033, 0.01595335826277733, 0.01015594694763422, 0.003646082943305373, 0.0049103377386927605, -0.025005701929330826, 0.02173680067062378, -0.02068907581269741, 0.024363098666071892, 0.005392291117459536, 0.008738026022911072, -0.004117559175938368, 0.0025320020504295826, -0.035566769540309906, 0.02914072386920452, 0.00962509959936142, 0.021597104147076607, -0.02497776225209236, -0.01603717729449272, -0.021401528269052505, -0.0021600595209747553, -0.0027834558859467506, -0.004372505471110344, -0.021904436871409416, -0.005399276036769152, -0.019976623356342316, -0.006090774666517973, 0.002381828147917986, -0.007557589560747147, 0.012412047944962978, -0.012565714307129383, -0.022686738520860672, -0.005008125212043524, -0.006206023972481489, -0.013906802982091904, 0.014500513672828674, -0.009338721632957458, 0.007012772373855114, -0.03581822291016579, -0.034309498965740204, -0.006342228502035141, 0.0015244397800415754, -0.00984861422330141, -0.026682062074542046, 0.00528053380548954, -0.010714733973145485, 0.011022066697478294, -0.0022700708359479904, -0.026430608704686165, -0.006509864237159491, -0.030090661719441414, 0.004023263696581125, -0.004596020095050335, -0.007648392114788294, 0.023678584024310112, 0.027981242164969444, -0.0045122019946575165, -0.012349184602499008, 0.05333618447184563, 0.006206023972481489, -0.007229302078485489, -0.0026175661478191614, -0.030649447813630104, 0.019054625183343887, 0.033136047422885895, 0.02193237654864788, -0.00011361267388565466, -0.011371308006346226, -0.010442325845360756, 0.009492387995123863, -0.0060558500699698925, 0.004389967769384384, 0.013131486251950264, 0.03626525402069092, 0.007781104184687138, 0.012928926385939121, 0.013306107372045517, -0.015701904892921448, -0.011783413589000702, -0.026346789672970772, 0.009268873371183872, -0.00400929432362318, 0.027129091322422028, 0.008304966613650322, -0.013152441009879112, 0.007135007064789534, 0.011504020541906357, -0.021569164469838142, -0.009946402162313461, 0.03520355746150017, -0.012048836797475815, 0.027673909440636635, -0.004533156752586365, 0.004302657209336758, 0.02515936829149723, 0.015757784247398376, 0.002311979653313756, 0.00507797347381711, 0.0058323354460299015, 0.0005644618067890406, 0.021261831745505333, 0.020591288805007935, 0.010428356006741524, -0.038723915815353394, -0.0062549179419875145, 0.0343933179974556, -0.003371928120031953, -0.010875385254621506, 0.027911392971873283, 0.030146539211273193, 0.03243756666779518, -0.013341031037271023, 0.0018160565523430705, -0.03000684268772602, -0.01213963981717825, 0.022938191890716553, 0.01881713978946209, -0.02291025221347809, 0.010637900792062283, 0.03299635276198387, 0.022323526442050934, 0.01634451001882553, -0.014458604156970978, 0.0017575586680322886, -0.004107081796973944, -0.011133823543787003, -0.025271127000451088, -0.001864950405433774, 0.0003099519817624241, -0.004026756156235933, 0.009820675477385521, 0.008800889365375042, 0.028973087668418884, 0.01663787290453911, 0.010309613309800625, 0.012034866958856583, 0.01591145060956478, -0.004753178916871548, 0.019836926832795143, -0.023203615099191666, -0.008430693298578262, -0.029643632471561432, 0.014095393009483814, 0.0022089534904807806, -0.006017433479428291, -0.041098758578300476, -0.017476052045822144, -0.025368914008140564, 0.009157116524875164, 0.007089605554938316, 0.01500342134386301, 0.004162960685789585, -0.0038870596326887608, 0.007948740385472775, -0.0002385757106821984, -0.005727563053369522, 0.016735659912228584, 0.01634451001882553, -0.0055564348585903645, -0.01564602553844452, -0.03676816076040268, -0.0006085535860620439, 0.020479530096054077, -0.0009412062354385853, -0.0026926530990749598, 0.02571815624833107, -0.016051147133111954, 0.008605314418673515, -0.021401528269052505, 0.0033282730728387833, 0.050961341708898544, -0.005525003187358379, -0.024377066642045975, 0.0016309585189446807, 0.015590147115290165, 0.005727563053369522, -0.013124501332640648, -0.014500513672828674, 0.032577261328697205, 0.008144315332174301, -0.0022386389318853617, -0.014961512759327888, -0.002993000904098153, -0.014765936881303787, -0.008710087276995182, -0.032269928604364395, -0.014500513672828674, -0.008542451076209545, 0.030900901183485985, 0.016721690073609352, -0.036796100437641144, 0.013271182775497437, 0.036991674453020096, 0.002222923096269369, -0.014081423170864582, -0.02142946794629097, -0.02137358859181404, 0.0009307290310971439, 0.0472174733877182, 0.012726365588605404, 0.010421371087431908, 0.018230414018034935, -0.020116319879889488, -0.009513342753052711, -0.000705468119122088, -0.01248888112604618, 0.03573440760374069, 0.00656923558562994, -0.0027590091340243816, -0.01993471384048462, 0.01180436834692955, -0.016498176380991936, 0.00264026690274477, 0.0032095308415591717, 0.0016632634215056896, -0.051464248448610306, -0.006380645092576742, -0.035063862800598145, 0.005294503644108772, 0.003094281069934368, -0.008277026936411858, 0.027366576716303825, 0.022211769595742226, 0.007355029229074717, 0.024111643433570862, -0.005455154459923506, 0.0037787947803735733, -0.04333390295505524, -0.003667037468403578, 0.009408569894731045, 0.010616946034133434, 0.021443437784910202, -0.007781104184687138, 0.015031361021101475, 0.012698426842689514, -0.0047427015379071236, -0.013173394836485386, -0.0036146510392427444, 0.010421371087431908, -0.00718739302828908, 0.00464491406455636, 0.0031065044458955526, 0.018663473427295685, -0.01783926412463188, 0.013047668151557446, 0.04691014066338539, -0.02304994873702526, 0.004620467312633991, 0.03405804559588432, -0.017350325360894203, -0.047804199159145355, -0.00359369651414454, 0.005001140292733908, -0.004679838195443153, -0.005151314195245504, -0.00792080070823431, -0.011783413589000702, -0.03548295050859451, -0.012342199683189392, 0.00437949039041996, -0.01591145060956478, -0.0075715589337050915, -0.020479530096054077, -0.015827631577849388, -0.002741547068580985, 0.009946402162313461, -0.021960314363241196, -0.0009403331787325442, -0.022253679111599922, -0.024558672681450844, -0.05719181150197983, -0.0008246468496508896, 0.033443380147218704, 0.027282757684588432, 0.017042992636561394, 0.009583191014826298, -0.0055634197778999805, 0.018286293372511864, 0.0009429524652659893, -0.022952161729335785, 0.001960991881787777, -0.034141864627599716, -0.017098871991038322, 0.004253763239830732, -0.00030580471502617, -0.00835386011749506, -0.028218725696206093, 0.016232751309871674, 0.013173394836485386, 0.0060593425296247005, 0.05230243131518364, 0.007431862410157919, 0.0038800747133791447, 0.0246704313904047, 0.021639013662934303, 0.021457407623529434, 0.011923110112547874, -0.030286235734820366, 0.017406204715371132, 0.020214106887578964, -0.027813605964183807, -0.009715902619063854, 0.008151300251483917, -0.0033981213346123695, -0.028148876503109932, -0.03701961413025856, -0.006132683251053095, -0.025508610531687737, -0.0012127415975555778, -0.028498118743300438, -0.0007102701929397881, 0.010540112853050232, 0.001609130878932774, 0.011797383427619934, -0.02272864617407322, 0.038612157106399536, 0.006684485357254744, -0.004369013011455536, 0.00141704804264009, -0.03215816989541054, 0.01332706119865179, 0.002603596542030573, -0.009778765961527824, 0.005039556883275509, 0.013089577667415142, -0.0407634861767292, -0.037187252193689346, -0.005622790660709143, 0.014416695572435856, 0.023888129740953445, -0.016931235790252686, -0.017350325360894203, -0.022714676335453987, -0.0006906253984197974, 0.0049173226580023766, 0.007396938279271126, -0.01955753192305565, -0.007089605554938316, -0.013690273277461529, -0.011392262764275074, 0.011853261850774288, -0.0225470419973135, 0.00909425225108862, -0.025243187323212624, -0.017783384770154953, 0.0020675105042755604, -0.0009551758994348347, 0.023580797016620636, -0.015939388424158096, -0.03523149713873863, -0.023524917662143707, -0.015087239444255829, -0.007368999067693949, -0.01993471384048462, 0.011427187360823154, -0.0036844995338469744, 0.017741475254297256, 0.00935269147157669, 0.02056334912776947, 0.03386247158050537, 0.005937108304351568, 0.006740363780409098, 0.004990663379430771, -0.01033755298703909, 0.015059299767017365, -0.015687935054302216, -0.011182717978954315, -0.008137330412864685, 0.0006172846187837422, 0.01589748077094555, -0.016316570341587067, 0.003094281069934368, 0.004655391443520784, 0.03799749165773392, -0.0012747320579364896, -0.021639013662934303, -0.030286235734820366, -0.03746664524078369, -0.012642547488212585, 0.025578457862138748, 0.0023626198526471853, 0.010267704725265503, -0.007040711585432291, -0.010470264591276646, -0.00900345016270876, -0.01447257399559021, 0.03123617358505726, -0.021415498107671738, 0.016442297026515007, -0.010875385254621506, 0.004148990847170353, 0.005294503644108772, 0.005112897604703903, -0.011161763221025467, -0.018523776903748512, -0.016302600502967834, -0.019836926832795143, 0.007725225295871496, -0.004072157666087151, 0.004976693540811539, 0.013341031037271023, 0.01987883448600769, 0.0014074438950046897, -0.013410879299044609, -0.02802314981818199, -0.01627466082572937, 0.025117460638284683, 0.003949922975152731, -0.018090717494487762, -0.024879975244402885, -0.022281616926193237, -0.01913844235241413, 0.006363182794302702, 0.015115179121494293, 0.00984861422330141, 0.021331680938601494, -0.007627437822520733, -0.009108222089707851, 0.016987113282084465, -0.018370110541582108, 0.01607908494770527, 0.007809043396264315, 0.030761204659938812, 0.0046868231147527695, 0.006719409488141537, -0.03794161230325699, -0.00835386011749506, 0.03210229426622391, -0.006740363780409098, 0.023930037394165993, 0.015073269605636597, -0.01444463524967432, 0.0005011617904528975, -0.0026943993289023638, -0.007180408574640751, 0.00034880510065704584, -0.03715931251645088, 0.015017391182482243, 0.00962509959936142, 0.0003477137361187488, -0.01248888112604618, -0.0012476658448576927, -0.0053853061981499195, -0.0012852093204855919, -0.028344452381134033, 0.0057939188554883, 0.023944007232785225, -0.005657714791595936, -0.020269986242055893, 0.029531873762607574, 0.022127950564026833, 0.009387616068124771, -0.034253619611263275, -0.014416695572435856, -0.008039542473852634, 0.010721718892455101, -0.012118685059249401, 0.009876553900539875, -0.0029388684779405594, 0.01595335826277733, -0.002706622937694192, -0.013648363761603832, 0.019920744001865387, 0.023385221138596535, 0.014151271432638168, -0.006953401491045952, -0.007739195134490728, 0.02652839571237564, 8.321773930219933e-05, -0.019040655344724655, 0.0045087095350027084, -0.014151271432638168, 0.0018492345698177814, -0.031655263155698776, -0.031459689140319824, -0.0032654094975441694, -0.014018559828400612, 0.010602976195514202, 0.030230358242988586, -0.009590175934135914, -0.007599498610943556, -0.007306135259568691, -0.007194377947598696, -0.010512174107134342, -0.023678584024310112, -0.0026612214278429747, 0.025243187323212624, -0.029280420392751694, 0.00450172508135438, -0.002224669326096773, -0.013271182775497437, -0.0006836405373178422, 0.005727563053369522, -0.008877722546458244, 0.0071000829339027405, 0.045317597687244415, -0.005486586596816778, 0.01254476048052311, 0.020828772336244583, 0.00033614507992751896, -0.02242131344974041, 0.018859049305319786, -0.026486486196517944, -0.0027188463136553764, 0.02261688932776451, 0.0070826206356287, -0.02460058219730854, -0.033331625163555145, 0.0030768190044909716, 0.0203817430883646, -0.018314233049750328, 0.010854430496692657, 0.015492360107600689, 0.013054653070867062, 0.004589035175740719, -0.013578515499830246, -0.010148962028324604, 0.018467899411916733, -0.01279621385037899, -0.011189702898263931, 0.011608792468905449, -0.011762458831071854, 0.0058113811537623405, -0.00610125157982111, 0.00832592137157917, -0.004473785404115915, -0.01074267365038395, -0.01913844235241413, -0.0005592231755144894, 0.013850923627614975, -0.015240905806422234, 0.004180422518402338, -0.006296826992183924, -0.021764740347862244, -0.02031189389526844, 0.03162732347846031, 0.021820617839694023, -0.00102415110450238, -0.004606497474014759, -0.005734547972679138, 0.007005787454545498, -0.0011036036303266883, -0.010058159939944744, -0.0030453873332589865, -0.027715817093849182, 0.00014515356451738626, -0.03260520100593567, -0.022714676335453987, -0.017182689160108566, 0.053699396550655365, -0.0005421976675279438, -0.002545971656218171, -0.03595792129635811, 0.009506357833743095, -0.043138328939676285, -0.014032529667019844, -6.17721161688678e-05, 0.010959203355014324, 0.015240905806422234, 0.017056962475180626, 0.009995296597480774, 0.02925248071551323, 0.01387886330485344, 0.033638957887887955, -0.017978960648179054, 0.019180351868271828, -0.04271923750638962, -0.013620424084365368, 0.04484262689948082, 0.00023595639504492283, -0.01901271566748619, -0.008807874284684658, 0.01242601778358221, -0.010938248597085476, -0.015171057544648647, 0.027073213830590248, -0.015548238530755043, 0.03341544046998024, -0.00792080070823431, 0.023063918575644493, 0.000869611743837595, 0.01447257399559021, 0.005706608761101961, -0.034309498965740204, 0.014863724820315838, 0.027925362810492516, -0.0017881172243505716, -0.006824181880801916, -0.005944092757999897, -0.002600104082375765, 0.00043546067900024354, -0.01307560782879591, -0.005228147376328707, -0.014584331773221493, 0.00026149468612857163, -0.000933348317630589, -0.0031099969055503607, 0.003286364022642374, 0.003247947432100773, 0.02694748528301716, -0.030649447813630104, -0.015380602329969406, -0.0036810070741921663, -0.005242117214947939, -0.016945205628871918, 0.033080168068408966, 0.008731041103601456, 0.011098899878561497, 0.017308415845036507, -0.008612299337983131, 0.01807674765586853, -0.0011428933357819915, -0.021834587678313255, -0.017811324447393417, 0.005877736955881119, -0.02074495516717434, 0.006111728958785534, 0.0038765822537243366, 0.005542465019971132, 0.0040127867832779884, 0.007599498610943556, -0.004281702451407909, -0.002149582374840975, 0.01037247758358717, 0.003467969596385956, -0.010204841382801533, 0.006412076763808727, 0.0085983294993639, 0.0027450392954051495, -0.053392063826322556, -0.009122191928327084, 0.024949824437499046, 0.011727535165846348, 0.004382982850074768, 0.22206181287765503, -0.00180557940620929, 0.005549449939280748, 0.03347131982445717, -0.021778710186481476, 0.010973173193633556, 0.02285437472164631, 0.007473771460354328, -0.004473785404115915, 0.04230014979839325, -0.007536634802818298, -0.004152483306825161, -0.013403894379734993, 0.0015052314847707748, -0.0051408372819423676, 0.002444691490381956, -0.04000912234187126, -0.05104516074061394, -0.011825322173535824, 0.0040372335352003574, 0.010079113766551018, 0.00028856092831119895, -0.024768218398094177, 0.0028498119208961725, 0.025578457862138748, 0.008144315332174301, -0.005633268039673567, -0.027590090408921242, -0.0005068369791842997, -0.002504062606021762, -6.17721161688678e-05, -0.01695917546749115, 0.02112213522195816, -0.0015183280920609832, -0.03159938380122185, -0.0006674880860373378, 0.0191244725137949, -0.020521439611911774, -0.01782529428601265, -0.00949937291443348, 0.02112213522195816, -0.011937079951167107, 0.016735659912228584, -0.011189702898263931, -0.008277026936411858, 0.02279849536716938, -0.02292422205209732, -0.006296826992183924, 0.0017593047814443707, 0.012537775561213493, -0.02013028971850872, -0.0038870596326887608, 0.010812521912157536, -0.002352142473682761, 0.02074495516717434, -0.008612299337983131, -0.008703102357685566, 0.0034854316618293524, -0.00038198305992409587, 0.004128036554902792, -0.006310796830803156, 0.0025634337216615677, -0.013096561655402184, 0.018956836313009262, -0.044311780482530594, 0.0302582960575819, -0.04230014979839325, 0.02763199992477894, 0.006949909031391144, -0.02205810323357582, -0.020577318966388702, -0.00437949039041996, -0.03011859953403473, -0.004005801863968372, 0.000579741143155843, -0.013774090446531773, 0.02175077050924301, 0.013711227104067802, 0.0195156242698431, 0.022882312536239624, -0.00941555481404066, -0.016791539266705513, -0.035063862800598145, 0.004246778320521116, 0.010700764134526253, -0.004355043638497591, 0.0365167073905468, -0.011874216608703136, -0.013725196942687035, -0.016973145306110382, -0.009101237170398235, -0.008339890278875828, -0.01634451001882553, -0.03185083717107773, 0.014200165867805481, -0.007962709292769432, 0.006370167713612318, 0.017727507278323174, -0.019166382029652596, -0.0424957238137722, -0.013054653070867062, 0.06426046788692474, 0.045932263135910034, 0.007026742212474346, -0.019836926832795143, -0.01146211102604866, -0.012824153527617455, 0.011790398508310318, 0.011790398508310318, -0.02874957211315632, 0.007382968440651894, -0.04492644593119621, 0.0027485317550599575, -0.019655320793390274, -0.015101209282875061, 0.011420202441513538, 0.0014441142557188869, -0.00953429751098156, 0.009611130692064762, -0.0008015095954760909, -0.02130374126136303, -0.008332906290888786, 0.013410879299044609, -0.002027347916737199, -0.009171085432171822, -0.025606397539377213, -0.02559242770075798, 0.04403238743543625, -0.01115477830171585, -0.03330368548631668, 0.030174478888511658, -0.0029860162176191807, -0.00882184412330389, -0.012565714307129383, -0.004596020095050335, 0.013843939639627934, -0.008905662223696709, -0.016847416758537292, -0.010211826302111149, -0.010826491750776768, 0.005944092757999897, 0.012824153527617455, 0.02925248071551323, -0.0015689681749790907, 0.02000456117093563, -0.014947542920708656, -0.00458205072209239, 0.018956836313009262, -0.009178070351481438, -0.012859078124165535, -0.008877722546458244, -7.841566548449919e-05, 0.010449310764670372, 0.006733379326760769, 0.0017654165858402848, -0.014011574909090996, -0.008318936452269554, -0.01899874582886696, -0.008032558485865593, 0.01584160141646862, -0.058113809674978256, 0.01046327967196703, 0.01721062883734703, 0.004728732164949179, -0.025941669940948486, -0.013969666324555874, -0.17802943289279938, 0.026989394798874855, -0.0032706481870263815, -0.000741265423130244, 0.01943180523812771, 0.0021338665392249823, 0.03637700900435448, -0.0033893901854753494, -0.02658427506685257, -0.00554595747962594, -0.0022089534904807806, 0.010938248597085476, -0.02236543595790863, -0.03894742950797081, -0.01589748077094555, -0.014458604156970978, -0.0027223387733101845, 0.03143174946308136, 0.01802087016403675, 0.010274689644575119, 0.027729786932468414, -0.029643632471561432, 0.012956865131855011, 0.0012450465001165867, 0.01701505295932293, -0.002867273986339569, 0.0017497006338089705, 0.006981340702623129, 0.022253679111599922, -0.04464705288410187, -0.007662361953407526, -0.010987142100930214, 0.02522921748459339, 0.010875385254621506, -0.005130359902977943, 0.016065116971731186, 0.003539564087986946, 0.010044190101325512, -0.005538972560316324, 0.02955981343984604, 0.03330368548631668, 0.024391036480665207, 0.0008111137431114912, 0.0021740293595939875, 0.01301274448633194, 0.015506329014897346, 0.018551716580986977, -0.004679838195443153, 0.004121051635593176, 0.004987170919775963, 0.028232695534825325, -0.01025373488664627, 0.011385277844965458, 0.002998239593580365, -0.0007630930049344897, -0.0006308177253231406, 0.0075715589337050915, 0.0022613396868109703, 0.0010599484667181969, 0.0003182464570272714, 0.00436202809214592, -0.011552914045751095, 0.028526058420538902, -0.002900451887398958, 0.011133823543787003, -0.02844224125146866, 0.0033020798582583666, 0.015604116953909397, -0.020158227533102036, 0.012223457917571068, 0.010770612396299839, 0.014458604156970978, 0.011685625649988651, 0.016819478943943977, 0.0058078886941075325, 0.012698426842689514, 0.005259579513221979, -0.008200193755328655, 0.014919603243470192, 0.025732124224305153, -0.011797383427619934, -0.0005653349217027426, -0.03741076588630676, 0.002963315462693572, -0.011713565327227116, -0.005102420691400766, 0.005151314195245504, -0.003764824941754341, -0.017727507278323174, 0.006024418398737907, 0.02094052918255329, -0.022211769595742226, 0.010840460658073425, 0.0075715589337050915, -0.006719409488141537, 0.01518502738326788, 0.00845164805650711, -0.015422511845827103, 0.022882312536239624, -0.015171057544648647, -0.011182717978954315, -0.0018911435035988688, -0.024558672681450844, -0.024628521874547005, 0.020968468859791756, 0.005909168627113104, 0.006419061683118343, -0.024195462465286255, 0.04154578596353531, -0.008109391666948795, -0.022267647087574005, 0.0182583536952734, 0.020549379289150238, 0.03637700900435448, -0.019180351868271828, 0.025145398452878, 0.017420174553990364, -0.0071524688974022865, 0.029392177239060402, -0.03280077502131462, 0.04713365435600281, -0.02216986007988453, -0.022323526442050934, 0.039226822555065155, 0.02440500631928444, -0.026933517307043076, -0.12148021906614304, -0.03782985731959343, -0.005919646006077528, 0.005378321278840303, -0.004190899897366762, 0.024488825350999832, -0.008535466156899929, 0.029727449640631676, -0.029364237561821938, 0.03249344229698181, -0.03173908218741417, -0.014933573082089424, 0.0053818137384951115, -0.0073480443097651005, 0.0033858977258205414, -0.0029091830365359783, 0.0005762487417086959, -0.006771795451641083, -0.012349184602499008, 0.029615692794322968, 0.015548238530755043, -0.0264026690274477, -0.010973173193633556, 0.003022686578333378, 0.0002606215712148696, -0.006667023058980703, -0.007271211128681898, 0.01944577507674694, 0.004421399440616369, 0.02969950996339321, 0.027925362810492516, 0.004906845279037952, -0.005940600764006376, -0.00630381191149354, 0.010428356006741524, 0.0012205996317788959, -0.022002223879098892, -0.019781047478318214, 0.01320133451372385, -0.021904436871409416, -0.008521496318280697, 0.02863781526684761, -0.0030698340851813555, -0.019669290632009506, -0.011483065783977509, -0.010246749967336655, -0.0018405035370960832, 0.01744811236858368, -0.0012494120746850967, -0.009310782887041569, -0.0027153538540005684, 0.007725225295871496, -0.016917265951633453, 0.007173423655331135, 0.008437678217887878, -0.00969494879245758, 0.03721519187092781, 0.030956780537962914, -0.01043534092605114, 0.0034539999905973673, -0.000774879939854145, -0.0014423680258914828, -0.016162903979420662, 0.02595563977956772, 0.02627694234251976, 0.0006356197991408408, 0.006174592301249504, 0.010044190101325512, 0.0020308401435613632, -0.00521767046302557, -0.008668177761137486, 0.012349184602499008, -0.02831651270389557, 0.016568023711442947, -0.027506273239850998, -0.00212862784974277, -0.016372447833418846, -0.02800917997956276, -0.0075226654298603535, 0.01838408038020134, -0.011531959287822247, -0.0017165227327495813, -0.008877722546458244, -0.017867203801870346, 0.009366661310195923, 0.003834673436358571, 0.021401528269052505, -0.000581923930440098, 0.0013934741728007793, -0.020842742174863815, -0.014158256351947784, 0.017182689160108566, 0.003635605564340949, -0.03213023394346237, -0.009806705638766289, 0.03246550261974335, -0.013292137533426285, 0.012942895293235779, 0.00935269147157669, 0.007229302078485489, -0.02043762244284153, -0.0039045216981321573, -0.035063862800598145, 0.00925490353256464, 0.021597104147076607, -0.02249116264283657, 0.01447257399559021, -0.023063918575644493, -0.009855599142611027, -0.037746038287878036, -0.0010809028754010797, -0.009219979867339134, -0.03123617358505726, 0.02638869918882847, -0.0020378250628709793, -0.026598244905471802, -0.04964819177985191, -0.00785793736577034, -0.002504062606021762, -0.0021391052287071943, -0.0020203629974275827, -0.0029161677230149508, -0.009639069437980652, -0.009261888451874256, 0.0070965904742479324, -0.00283409608528018, 0.0032130233012139797, -0.019920744001865387, -0.012041851878166199, 0.028218725696206093, -0.005339904688298702, -0.011175733059644699, 0.016414357349276543, -0.027073213830590248, 0.0003191195719409734, 0.010505189187824726, -0.007725225295871496, 0.01944577507674694, -0.005518018268048763, -0.00374387064948678, 0.022882312536239624, -0.0016335778636857867, -0.03154350444674492, -0.03654464706778526, -0.003768317401409149, -0.03168320283293724, -0.02247719280421734, -0.0023643660824745893, -0.03296841308474541, 0.007257241755723953, 0.01701505295932293, -0.007585528772324324, 0.022714676335453987, 0.017252538353204727, -0.0034906703513115644, -0.03838864341378212, -0.01512914802879095, 0.004536649212241173, -0.0016458012396469712, 0.02522921748459339, -0.01543648075312376, -0.011650701984763145, 0.027282757684588432, 0.011545929126441479, 0.004655391443520784, -0.037243131548166275, 0.025494640693068504, -0.026696031913161278, -0.02851208858191967, 0.0028567968402057886, -0.009953387081623077, -0.03151556849479675, -0.011329399421811104, -0.020661136135458946, 0.02571815624833107, 0.02714306116104126, 0.016288630664348602, -0.01870538294315338, 0.008745010942220688, -0.00016054202569648623, -0.02578800357878208, 0.016176873818039894, 0.0008106771856546402, -0.048670317977666855, -0.011001111939549446, -0.0035360718611627817, 0.05266563966870308, 0.004323611501604319, -0.014388755895197392, 0.043697115033864975, 0.0009804959408938885, 0.0028026641812175512, -0.006129191257059574, -0.003667037468403578, -0.007843967527151108, 0.001931306323967874, 0.01708490215241909, 0.02099640853703022, -0.03042593225836754, 0.011937079951167107, 0.016316570341587067, -0.011252566240727901, 0.014207150787115097, -0.002289279131218791, 0.010162931866943836, -0.016595963388681412, -0.00949937291443348, 0.019669290632009506, -0.022211769595742226, -0.011985973455011845, 0.0091291768476367, 0.03263314068317413, -0.011622762307524681, -0.010183886624872684, -0.0064504933543503284, 0.02950393408536911, 0.0019243215210735798, 0.021708860993385315, -0.009764797054231167, -0.0020710029639303684, -0.00489287544041872, 0.01676359958946705, 0.002795679494738579, 0.004868428688496351, 0.03185083717107773, 0.007760149426758289, 0.008786920458078384, 0.033331625163555145, 0.029923025518655777, -0.011881201528012753, -0.008535466156899929, -0.007494725752621889, 0.030146539211273193, -0.005629775580018759, -0.007023249752819538, -0.017923081293702126, 0.005476109217852354, -0.027045274153351784, 0.007850952446460724, 0.0028550506103783846, -0.018314233049750328, 0.08487968891859055, 0.010749658569693565, -0.026500456035137177, 5.6970045989146456e-05, 0.018216444179415703, 0.027855513617396355, 0.01130145974457264, 0.0038102264516055584, 0.009680978953838348, -0.04702189564704895, 0.04875413328409195, -0.0016973144374787807, -0.004169945139437914, -0.05305679142475128, 0.003506386186927557, 0.013341031037271023, -0.020521439611911774, -0.0066530536860227585, 0.0016300854040309787, -0.020269986242055893, 0.012230442836880684, -0.013159425929188728, 0.015939388424158096, -0.011077945120632648, -0.015813661739230156, -0.012439987622201443, 0.02335728146135807, 0.008891692385077477, -0.008277026936411858, -0.014835785143077374, 0.020088380202651024, 0.007417892571538687, -0.03657258674502373, -0.002287532901391387, 0.00788587611168623, 0.01589748077094555, 0.0009639069903641939, -0.019543562084436417, 0.013774090446531773, 0.002869020216166973, -0.00745281670242548, -0.008360845036804676, -0.016595963388681412, -0.020046470686793327, 0.0253409743309021, -0.009150131605565548, -0.01065885554999113, -0.013578515499830246, -0.04280305653810501]"
DragonflyDB 2022 In Review,DragonflyDB 2022 In Review," ## From code to product  At the beginning of 2022, Dragonfly was little more than an idea with the beginning of a codebase aimed at making that idea a reality. The idea was to rethink what an in-memory datastore should look and behave like, with the goal of building something significantly more performant and easier to scale than Redis. Today Dragonfly is a real product that supports a wide variety of use cases. That progress was made through a lot of contributors shipping a lot of code.  |               | Commands Supported | Data Structures                                | Lines Of Code | | ------------- | ------------------ | ---------------------------------------------- | ------------- | | January 2022  | 16                 | Strings only                                   | 22,100        | | December 2022 | 196                | Strings, HMAP, SET, LIST,<br/>Sorted Set, JSON | 98,270        |  ## From solo to project  At the beginning of 2022 Dragonfly was a private project that no one had ever heard of with exactly one contributor: [me](https://github.com/romange). We made the project [public on May 31st](/blog/announcing-dragonfly) and since then everything has changed. The community that quickly formed made it clear that we were far from alone in our desire for a better in-memory datastore. Today Dragonfly is a blossoming community project with over 16,000 Github stars, over 40 contributors, and [a growing Discord community](https://discord.com/invite/HsPjXGVH85).  |               | Stars | Contributors | Discord Members | | ------------- | ----- | ------------ | --------------- | | January 2022  | 0     | 1            | 0               | | December 2022 | 16.4K | 41           | 283             |  ## From project to company  I knew early on that in order to succeed in my goal of building the most performant in-memory datastore on the market, I would also need to found a company to shepherd the project. Databases are technically challenging and require a lot of resources to build as well as to take to market in a way that can adequately serve a wide array of customers.In 2022 I co-founded DragonflyDB with [Oded Poncz](https://www.linkedin.com/in/poncz/) and since then a small but mighty team has formed to grow the project and serve DragonflyDB customers.  |               | Employees | Countries | Languages Spoken | | ------------- | --------- | --------- | ---------------- | | January 2022  | 0         | 1         | 2                | | December 2022 | 9         | 4         | 7                |  Once again, thank you to everyone in the Dragonfly community who helped make 2022 a great year and the start of something very exciting. We cant wait for even bigger and better things in 2023.  **Thank you for your support!**  Roman","[0.011470149271190166, -0.0018673541489988565, -0.025413982570171356, -0.025510717183351517, 0.0017948020249605179, 0.018766822293400764, -0.03391294926404953, 0.0039143613539636135, -0.024833563715219498, -0.01966508850455284, 0.021710367873311043, 0.022857382893562317, -0.01261716429144144, -0.009065563790500164, 0.020024392753839493, 0.01884973980486393, 0.011041746474802494, -0.0005367995472624898, 0.013342685997486115, 0.00579726230353117, 0.009183029644191265, -0.01981710083782673, -0.017467793077230453, 0.033636558800935745, -0.01507702749222517, 0.012078206054866314, 0.03670447692275047, -0.02497175894677639, 0.013211401179432869, 0.008650979958474636, 0.03012641705572605, -0.02128196321427822, -0.009162300266325474, 0.0008576700347475708, -0.028219331055879593, -0.018559530377388, 0.00178961968049407, -0.0011228309012949467, 0.019195226952433586, 0.016431335359811783, 0.04065684229135513, -0.0021731096785515547, 0.0046087889932096004, -0.014759180136024952, -0.03490794822573662, 0.013356504961848259, -0.0018587169470265508, -0.007317402400076389, 0.011891642585396767, -0.01433077733963728, 0.014579527080059052, 0.03819698095321655, 0.0022456618025898933, 0.007365770637989044, 0.0006629020790569484, 0.016859738156199455, 0.027638914063572884, 0.0014113120269030333, 0.02082592248916626, -0.0039765490218997, 0.01752307265996933, 0.023520715534687042, -0.008139660581946373, 0.006671342998743057, -0.016956474632024765, 0.01089664176106453, -0.02716905251145363, -0.005638338625431061, 0.008450598455965519, -0.0006607428076677024, 0.027182871475815773, 0.01793765462934971, 0.02487502247095108, 8.091940253507346e-05, 0.01648661307990551, -0.025759467855095863, 0.0030592824332416058, -0.014427512884140015, 0.0060356478206813335, -0.009507786482572556, -0.0037243436090648174, -0.0055450573563575745, -0.018448974937200546, 0.015989111736416817, -0.0025686915032565594, 0.02622932940721512, -0.025925301015377045, 0.013619075529277325, 0.0010079566854983568, -0.0022940298076719046, -0.008568063378334045, 0.027735650539398193, 0.0015702358214184642, 0.0022439344320446253, 0.01619640365242958, -0.019195226952433586, 0.0018794462084770203, 0.0071792080998420715, -0.004854084458202124, -0.006160023156553507, -0.02318904921412468, -0.010958829894661903, -0.008284764364361763, -0.010613342747092247, -0.02461245283484459, 0.017357237637043, 0.03186766803264618, -0.022290784865617752, 0.02260863222181797, 0.013024838641285896, -0.003948909696191549, 0.04126489907503128, 0.035350169986486435, -0.0006944276974536479, 0.010806815698742867, -0.022677728906273842, 0.008326223120093346, -0.0014665898634120822, 0.010005286894738674, -0.004905907437205315, 0.04272976145148277, 0.02299557626247406, 0.0035446907859295607, -0.012506608851253986, 0.007925458252429962, 0.0075108748860657215, -0.02381092496216297, -9.139195753959939e-05, 0.008008375763893127, 0.003518779296427965, 0.0086786188185215, -0.009031015448272228, 0.009093202650547028, -0.010433690622448921, -0.0038107153959572315, 0.023755647242069244, -0.01381254754960537, 0.0068129925057291985, 0.006909728515893221, -0.0033944041933864355, -0.0013370325323194265, 0.014607165940105915, -0.02364509180188179, -0.000633103889413178, -0.013978380709886551, 0.012672442011535168, -0.0015590075636282563, 0.0004171748587395996, 0.020881200209259987, -0.016541890799999237, 0.03358127921819687, -0.020328421145677567, 0.005714345723390579, 0.013087025843560696, 0.031922947615385056, 0.01810348965227604, -0.00567634217441082, 0.020038213580846786, 0.00776653503999114, 0.02299557626247406, 0.004740073811262846, 0.050772685557603836, -0.005082105286419392, -0.010026016272604465, 0.02085356041789055, 0.034714475274086, 0.019291961565613747, -0.02036987990140915, -0.0028761746361851692, -0.022069673985242844, -0.0048506292514503, 0.01489737443625927, -0.04295087233185768, 0.026326065883040428, -0.015159945003688335, 0.01509084738790989, 0.014427512884140015, 0.011152301914989948, -0.019181406125426292, -0.0047677126713097095, -0.003907451406121254, -0.007421048358082771, 0.018117308616638184, 0.014247860759496689, -0.015463972464203835, -0.020743004977703094, 0.0007622294360771775, -0.0029746382497251034, 0.0068855443969368935, 0.010191849432885647, -0.004553511273115873, 0.010599523782730103, -0.029159054160118103, -0.009549245238304138, -0.6018649935722351, -0.023341063410043716, 0.02588384412229061, -0.057378385215997696, -0.005116654094308615, -0.028357526287436485, -0.010212578810751438, 0.009742717258632183, -0.02976711094379425, 0.00829167477786541, 0.0014329049736261368, -0.0007013374706730247, 0.02193147875368595, 0.0035135969519615173, -0.044194623827934265, 0.0036517914850264788, 0.023880021646618843, -0.012561886571347713, -0.024529537186026573, 0.005907817743718624, -0.023824743926525116, 0.02487502247095108, 0.0015037297271192074, 0.005541602149605751, 0.0004910225979983807, 0.004760803189128637, 0.004335854668170214, -0.009908550418913364, -0.0002347148401895538, 0.018117308616638184, -0.026837386190891266, 0.020577171817421913, 0.030375167727470398, -0.002059099031612277, 0.036289893090724945, -0.011767268180847168, -0.01962362974882126, 0.035350169986486435, -0.006021828390657902, 0.028039678931236267, -0.01271390076726675, -0.0010096840560436249, 0.008174208924174309, 0.019775643944740295, -0.016279321163892746, -0.009874002076685429, 0.027901483699679375, -0.014883555471897125, -0.007801083382219076, -0.0029694559052586555, -0.007828722707927227, -0.024405160918831825, 0.009424869902431965, -0.013971471227705479, -0.01003983523696661, -0.010081293992698193, 0.04897615686058998, -0.006643704138696194, 0.00955615472048521, -0.018697725608944893, 0.009272855706512928, -0.0034099509939551353, -0.0021402884740382433, -0.01677682064473629, -0.002311304211616516, -0.015339597128331661, -0.008284764364361763, -0.0075108748860657215, 0.025054676458239555, -0.004950820468366146, 0.02147543616592884, -0.0006987462984398007, 0.0027604366187006235, -0.004187295679003, -0.00027682099607773125, 0.02721051126718521, 0.04955657199025154, -0.0042183892801404, -0.0019364514155313373, 0.03612406179308891, 0.02053571306169033, -0.016915015876293182, -0.012589525431394577, -0.02779092825949192, 0.04706907272338867, -0.003361582988873124, -0.04303378984332085, -0.002473682863637805, 0.010634072124958038, -0.006688617169857025, 0.00262396945618093, 0.015187583863735199, -0.012029837816953659, -0.011850184760987759, 0.03883267566561699, 0.024985577911138535, -0.026160232722759247, 0.00178961968049407, 0.013791818171739578, -0.02425314672291279, -0.006336221005767584, -0.013239040039479733, 0.023009397089481354, 0.01025403756648302, 0.009639071300625801, 0.0251928698271513, -0.041568927466869354, -0.000581280910409987, 0.03604114428162575, -0.021530713886022568, 0.011034836992621422, -0.03275211527943611, -0.026118773967027664, -0.011559976264834404, -0.0004983641556464136, -0.023119952529668808, 0.02075682394206524, -0.02921433188021183, -0.007566152606159449, -0.015505431219935417, -0.0072828540578484535, -0.007773444522172213, -0.002988457679748535, 0.0031249248422682285, 0.015215222723782063, 0.0037174338940531015, -0.01930578239262104, -0.005123563576489687, -0.0002936634700745344, 0.025510717183351517, 0.03073447197675705, -0.017025571316480637, 0.02270536869764328, -0.011055565439164639, 0.027998220175504684, 0.006719711236655712, 0.021143769845366478, -0.012651712633669376, 0.014524249359965324, -0.008181118406355381, 0.00338403950445354, 0.010509696789085865, 0.020411338657140732, -0.008913549594581127, -0.0040698302909731865, -0.009279765188694, -0.009507786482572556, -0.0046951607801020145, 0.010613342747092247, -0.012582615949213505, -0.008733896538615227, -0.01781328022480011, -0.0180758498609066, 0.024764467030763626, 0.0003254050388932228, 0.008416049182415009, -0.0008637160644866526, -0.03886031359434128, -0.01211275439709425, -0.03468683734536171, 0.0020763734355568886, 0.024087313562631607, -0.017923835664987564, 0.007089381571859121, -0.010627162642776966, -0.023023216053843498, -0.013093935325741768, 0.021641269326210022, -0.00472970912232995, -0.014344596303999424, -0.006115109659731388, -0.007711257319897413, 0.005914727691560984, 0.0013353050453588367, -0.006460596341639757, 0.004860993940383196, -0.029684193432331085, -0.0010390504030510783, 0.008360771462321281, 0.003786531277000904, 0.008270945399999619, -0.008036014623939991, 0.0058041722513735294, 0.0022301150020211935, 0.038528647273778915, 0.013363415375351906, 0.027652733027935028, 0.025082314386963844, 0.011656711809337139, 0.009217577986419201, -0.003216478740796447, 0.011546156369149685, -0.014427512884140015, -0.018891198560595512, -0.026961760595440865, -0.015104666352272034, -0.02159981243312359, -0.004529327154159546, -0.004394587595015764, 0.029131416231393814, 0.0180758498609066, 0.012174941599369049, 0.012782998383045197, -0.0017680268501862884, -0.024363702163100243, -0.024045854806900024, 0.008623341098427773, -0.0070755621418356895, 0.0042771222069859505, -0.009694349020719528, 0.015629805624485016, 0.0033564006444066763, -0.005282487720251083, 0.002580783562734723, 0.0057039810344576836, 0.03280739113688469, -0.013999110087752342, 0.005897453520447016, -0.013142303563654423, 0.014565708115696907, -0.012264768593013287, -0.0051822965033352375, 0.011518517509102821, -0.002216295339167118, -0.004221844021230936, 0.0067818984389305115, -0.0046606119722127914, 0.036289893090724945, 0.019319601356983185, -0.02613259293138981, 0.00621875561773777, 0.02439134195446968, 0.005817991681396961, -0.006861360277980566, 0.012105844914913177, -0.003897086950019002, 0.01761980727314949, -0.039274897426366806, 0.017053211107850075, -0.010710079222917557, 0.007441777735948563, 0.0012929829536005855, 0.02545543946325779, -0.013384144753217697, 0.017633628100156784, 0.01395765133202076, 0.012610254809260368, 0.023037035018205643, -0.02060481160879135, 0.024833563715219498, -0.02730724774301052, 0.0016669720644131303, 0.0022888476960361004, -0.0070962910540401936, 0.009217577986419201, -0.01797911338508129, -0.018241683021187782, 0.009908550418913364, 0.013847095891833305, 0.027182871475815773, -0.0030869212932884693, 0.008381500840187073, 0.0249441210180521, -0.003480775747448206, -0.0001685325987637043, 0.008049833588302135, -0.0038867222610861063, -0.021420158445835114, 0.0004426544765010476, -0.032503362745046616, -6.040614243829623e-05, -0.01778564229607582, -0.010689349845051765, -0.019609808921813965, 0.015850916504859924, -6.835502972535323e-06, -0.015685083344578743, 0.018310781568288803, -0.013031748123466969, 0.033636558800935745, -0.021848561242222786, -0.014676263555884361, -0.0032251158263534307, -0.005603789817541838, -0.003686340292915702, -0.04201114922761917, 0.007884000428020954, 0.01836605928838253, 0.014289318583905697, -0.00026408120174892247, -0.014759180136024952, -0.020452797412872314, -0.011048655956983566, 0.015049388632178307, -0.009666710160672665, 0.004843719769269228, 0.03582003340125084, -0.02581474557518959, -0.02075682394206524, -0.01966508850455284, 0.012644803151488304, 0.021226685494184494, -0.01677682064473629, -0.021392520517110825, 0.0689314529299736, -0.008333132602274418, -0.012036747299134731, -0.014814457856118679, 0.019678907468914986, -0.022263145074248314, -0.016500432044267654, 0.0014648624928668141, -0.030762111768126488, 0.005842175334692001, 0.004422226455062628, 0.006184207275509834, -0.013093935325741768, 0.0002945271844509989, 0.029463082551956177, 0.013695081695914268, -0.002205930883064866, -0.034023504704236984, -0.018283141776919365, 0.013646714389324188, 0.06373533606529236, -0.002737979870289564, -0.014828277751803398, -0.016168765723705292, -0.02940780483186245, 0.02827460877597332, -0.022359881550073624, -0.011573795229196548, 0.006546967662870884, 0.0007669798796996474, 0.013646714389324188, -0.019278142601251602, 0.009265946224331856, -0.014247860759496689, 5.198491271585226e-05, 0.00785636156797409, -0.02921433188021183, -0.015035569667816162, -0.013301227241754532, 0.0007721621659584343, -0.009929279796779156, 0.02202821522951126, 0.027459261938929558, 0.015574527904391289, 0.0457976795732975, 0.0020090036559849977, 0.01829696074128151, 0.0031473813578486443, 0.026049677282571793, 0.0007069515995681286, -0.02273300662636757, 0.002895176177844405, 0.008416049182415009, 0.02169654704630375, -0.009404140524566174, 0.026312246918678284, 0.00037161383079364896, -0.01564362645149231, 0.006591881159693003, 0.014468971639871597, 0.0031922946218401194, 0.01619640365242958, -0.0163898766040802, 0.006146203726530075, 0.00588708883151412, -0.0086786188185215, -0.015961473807692528, 0.018573351204395294, -0.009687439538538456, -0.005814536474645138, 0.003109377808868885, 0.00433930940926075, -0.034963227808475494, -0.002162744989618659, 0.004964639898389578, 0.007372680585831404, 0.014178763143718243, -0.0062429397366940975, -0.019761823117733, -0.04593587666749954, -0.005997644271701574, -0.043061427772045135, -0.0025617817882448435, -0.041154343634843826, -0.01972036622464657, -0.014745361171662807, -0.021033214405179024, 0.003969639074057341, -0.007966917008161545, -0.02325814589858055, -0.01972036622464657, -0.03537781164050102, -0.024653911590576172, 0.00661606527864933, 0.006571151781827211, 0.01225785817950964, -0.004498233553022146, 0.006809537764638662, -0.010240217670798302, 0.01135268434882164, 0.0018552620895206928, -0.028357526287436485, 0.00734504172578454, -0.024640092626214027, -0.031922947615385056, 0.007503965403884649, -0.007725076749920845, -0.0016825188649818301, -0.0021852017380297184, 0.017398696392774582, 0.016431335359811783, 0.009839453734457493, 0.006733530666679144, 0.005762713495641947, 0.013453241437673569, -0.0032769388053566217, 0.02345161885023117, 0.023520715534687042, 0.002525505842640996, -0.022567173466086388, 0.023893840610980988, -0.00412856275215745, 0.011428691446781158, -0.027583636343479156, 0.004411861766129732, 0.011483969166874886, 0.0042460281401872635, 0.0012739811791107059, -0.012741539627313614, -0.013100845739245415, 0.003420315682888031, -0.037119060754776, -0.022746827453374863, 0.0045915148220956326, 0.021917659789323807, -0.014759180136024952, 0.0017671630484983325, 0.006204936187714338, -0.031204333528876305, -0.02824697084724903, 0.02921433188021183, -0.0006162614445202053, 0.03485267236828804, -0.0058249011635780334, 0.0005627110367640853, 0.010122752748429775, 0.018863558769226074, -0.009120841510593891, -0.03200586140155792, -0.0010779176373034716, 0.0267544686794281, 0.016693904995918274, -0.0004789305676240474, -0.021682728081941605, -0.000343758991220966, -0.026699190959334373, -0.006688617169857025, -0.01177417766302824, -0.020590990781784058, 0.0016609260346740484, -0.02733488567173481, -0.015325778163969517, -0.0059112729504704475, -0.022111130878329277, -0.030679194256663322, -0.032724473625421524, -0.03239280730485916, -0.0039143613539636135, 0.01517376396805048, 0.0271137747913599, -0.021295784041285515, -0.03294558450579643, -0.003741618013009429, -0.018310781568288803, 0.0010960557265207171, -0.0004305624752305448, -0.0005298898322507739, -0.020093491300940514, 0.03330489248037338, 0.01969272643327713, 0.033277254551649094, 0.011801816523075104, 0.028164053335785866, -0.00579726230353117, 0.0033650377299636602, -0.02186238206923008, -0.011200670152902603, -0.006529693491756916, -0.004809170961380005, -0.008464417420327663, 0.0019675451330840588, 0.026740649715065956, -0.003900541691109538, -0.020038213580846786, -0.008229486644268036, 0.0044878688640892506, -0.0327797532081604, -0.013225220143795013, -0.019181406125426292, -0.03877739608287811, -0.03150836378335953, 0.005686706863343716, 0.006004554219543934, 0.023714188486337662, -0.008588792756199837, -0.017108488827943802, 0.02921433188021183, -0.03239280730485916, 0.014344596303999424, 0.004045646172016859, 0.030623916536569595, 0.006529693491756916, 0.006460596341639757, 0.0015849190531298518, 0.01099337823688984, -0.0251928698271513, -0.0074072289280593395, -0.009673619642853737, -0.030623916536569595, 0.019706545397639275, 0.008802994154393673, 0.034603919833898544, 0.014040568843483925, 0.014980291947722435, -0.005047556944191456, 0.009908550418913364, -0.007655979134142399, -0.013771088793873787, 0.014731541275978088, -0.019609808921813965, -0.00137244479265064, -0.03714670240879059, -0.03054100088775158, -0.027611276134848595, -0.027708012610673904, 0.023119952529668808, 0.008422959595918655, 0.025607453659176826, 0.001057188492268324, -0.022719187662005424, -0.0021955661941319704, -0.01697029359638691, 0.03167419508099556, -0.010108932852745056, 0.021254325285553932, 0.04372476413846016, 0.02863391488790512, -0.03803114593029022, -0.006712801288813353, 0.027099955826997757, -0.01791001670062542, 0.02396293915808201, 0.026837386190891266, -0.04167948290705681, -0.0029677285347133875, -0.005665977485477924, 0.006142748519778252, -0.014220221899449825, -0.01661098748445511, 0.0023216689005494118, 0.03897086903452873, 0.010578794404864311, -0.013784908689558506, 0.002161017619073391, -0.001958908047527075, 0.007704347372055054, -0.03352600336074829, 0.0073035829700529575, 0.012057476677000523, -0.022138770669698715, 0.0030869212932884693, -0.007814902812242508, -0.0010269584599882364, 0.016016751527786255, 0.004477504175156355, -0.002522050868719816, -0.0001198406025650911, 0.011663622222840786, -0.009915460832417011, -0.010440600104629993, -0.006412228103727102, 0.03371947631239891, -0.011228309012949467, 0.006322401575744152, 0.014911194331943989, 0.017246682196855545, 0.003786531277000904, -0.006287853233516216, -0.008056744001805782, 0.030015861615538597, -0.02121286652982235, -0.01489737443625927, -0.0033132147509604692, 0.014565708115696907, -0.0018518072320148349, 0.010806815698742867, -0.025870023295283318, -0.01431695744395256, -0.00895500835031271, -0.0052548483945429325, 0.017951475456357002, -0.023133771494030952, -0.010302405804395676, 0.006488235201686621, -0.015422514639794827, -0.026436621323227882, -0.004315125290304422, -0.014952653087675571, 0.007821813225746155, -0.02234606258571148, -0.0004262438742443919, -0.0007989373989403248, 0.017896197736263275, 0.011511608026921749, 0.0005298898322507739, -0.007628340274095535, 0.015768000856041908, 0.028329886496067047, 0.001686837524175644, 0.02345161885023117, 0.022000575438141823, -0.0027638913597911596, -0.046101707965135574, 0.014026748947799206, -0.029103776440024376, -0.024059675633907318, 0.005313581321388483, -0.01658334955573082, -0.02617405168712139, 0.0006387180183082819, 0.024460438638925552, -0.004805716220289469, -0.022498076781630516, 0.0014441332314163446, 0.02940780483186245, 0.013708901591598988, 0.0067818984389305115, -0.01788237690925598, -0.04093323275446892, 0.03587530925869942, -0.022525714710354805, -0.014648624695837498, 0.005330855492502451, 0.013771088793873787, -0.007082471624016762, 0.0025652367621660233, -0.004135472699999809, -0.03150836378335953, -0.026505718007683754, -0.01089664176106453, -0.011276677250862122, 0.01025403756648302, -0.009804904460906982, -0.0022905750665813684, -0.03333253040909767, -0.029656555503606796, -0.014206402003765106, 0.011145392432808876, 0.011428691446781158, 0.01923668384552002, 0.026160232722759247, 0.017605988308787346, 0.01677682064473629, 0.01353615801781416, -0.007186117582023144, -0.021972937509417534, -0.02866155467927456, -0.011974560096859932, -0.040048785507678986, -0.01923668384552002, -0.003204386681318283, 0.04762184992432594, 0.009950009174644947, -0.029877666383981705, -0.006951186805963516, 0.007331221830099821, -0.03490794822573662, -0.02095029689371586, -0.004377312958240509, 0.00198827451094985, 0.026699190959334373, 0.016445154324173927, 0.020839741453528404, 0.03358127921819687, 0.018545711413025856, 0.016044389456510544, -0.029822388663887978, -0.0037243436090648174, 0.006339676212519407, 0.003377129789441824, 0.04657157137989998, -0.005942366551607847, -0.03054100088775158, -0.028882665559649467, -0.0011686078505590558, -0.01101410761475563, -0.003924726042896509, 0.023783285170793533, -0.024266967549920082, 0.010716988705098629, -0.024446619674563408, -0.02183474227786064, -0.01749543286859989, -0.0003852173686027527, 0.004719344433397055, -0.040048785507678986, -0.010848273523151875, 0.021033214405179024, -0.012043656781315804, -0.027611276134848595, -0.02552453801035881, -0.0005661658942699432, 0.0026688827201724052, 0.005548512097448111, -0.01311466470360756, 0.01658334955573082, 0.0033443085849285126, -0.004370403476059437, 0.021807104349136353, -0.0028278063982725143, 0.0019209044985473156, 0.042508650571107864, 0.011103933677077293, -0.010350773110985756, -0.008125840686261654, -0.012202580459415913, -0.010509696789085865, -0.007579972501844168, -0.010820634663105011, -0.01853189244866371, 0.029490722343325615, -0.034548643976449966, 0.011960740201175213, -0.0364004485309124, -0.017191404476761818, -0.02130960300564766, -0.009604522958397865, -0.01553307007998228, 0.021392520517110825, -0.006495144683867693, -0.019388698041439056, -0.011587615124881268, -0.0003010050568263978, 0.0021385611034929752, 0.0014354961458593607, -0.014275499619543552, -0.007669798564165831, 0.01423404086381197, -0.02357599325478077, 0.0354330874979496, -0.009680530056357384, -0.02176564559340477, 0.005006098188459873, 0.007234485819935799, -0.012741539627313614, -0.019803281873464584, 0.22840799391269684, 0.009086293168365955, 0.011608344502747059, 0.05464213341474533, 0.00041760673047974706, -0.0009846363682299852, 0.014703902415931225, -0.00221456796862185, -0.0020729186944663525, 0.008809903636574745, -0.03148072212934494, 0.0030385530553758144, -7.2714094130788e-05, -0.005973460152745247, 0.02516523189842701, 0.007545423693954945, -0.015215222723782063, -0.015132305212318897, -0.015878556296229362, -0.00030942627927288413, -0.02918669395148754, 0.011048655956983566, -0.0378376729786396, -0.01810348965227604, 0.02166890911757946, -0.015394875779747963, -0.006695527117699385, -0.008471326902508736, 0.0057005262933671474, 0.0025980579666793346, -0.020646268501877785, -0.004515507724136114, 0.007483236026018858, 0.016915015876293182, 0.012900463305413723, -0.01059261430054903, 0.04308906942605972, -0.007966917008161545, -0.008056744001805782, 0.005479414947330952, 0.022567173466086388, -0.012306226417422295, 0.01868390664458275, 0.005272123031318188, 0.013225220143795013, 0.008229486644268036, -0.009908550418913364, 0.015947652980685234, -0.019540712237358093, 0.02099175564944744, -0.022815924137830734, 0.0014303138013929129, 0.02629842795431614, 0.0194025170058012, 0.0021713823080062866, -0.007414138875901699, 0.030845029279589653, 0.017896197736263275, -0.009003376588225365, -0.0018293506000190973, -0.016265500336885452, 0.0313425287604332, -0.005610699765384197, 0.006453686393797398, -0.03980003669857979, -0.0027656189631670713, -0.03161891922354698, 0.05334310606122017, 0.028523359447717667, -0.011048655956983566, -0.007027193903923035, -0.014482791535556316, -0.025690371170639992, 0.004294396378099918, -0.004408407025039196, -0.03598586842417717, 0.007552333176136017, -0.0009051744709722698, 0.011490878649055958, 0.050413381308317184, 0.006543512921780348, -0.01774418354034424, -0.01126976776868105, 0.002423587255179882, -0.015021749772131443, -0.010758447460830212, 0.024653911590576172, -0.021433977410197258, -0.034410446882247925, -0.01619640365242958, 0.016749182716012, -0.01726050116121769, -0.026934122666716576, -0.004252938088029623, 0.017578350380063057, -0.01962362974882126, 0.0021817467641085386, 0.03219933435320854, -0.014925014227628708, -0.03830753639340401, -0.027348706498742104, 0.035709477961063385, 0.027666553854942322, 0.0009820451959967613, -0.02066008932888508, 0.0005635747220367193, -0.018600989133119583, 0.015367235988378525, -0.0014890464954078197, -0.025897663086652756, 0.017149945721030235, -0.02195911668241024, 0.017343418672680855, -0.010019106790423393, -0.0006780170951969922, -0.0015063207829371095, 0.0056487033143639565, -0.005413772538304329, 0.009328133426606655, -0.004992278758436441, -0.0014139031991362572, -0.003152563702315092, 0.02121286652982235, 0.007621430791914463, -0.02820551209151745, -0.020881200209259987, -0.025179050862789154, 0.004691705573350191, -0.01788237690925598, -0.022981757298111916, 0.010972648859024048, -0.013017929159104824, 0.021627450361847878, -0.022815924137830734, -0.02475064806640148, 0.004912816919386387, 0.009860183112323284, 0.016500432044267654, -0.017578350380063057, -0.02533106505870819, -0.033608920872211456, 0.013930012471973896, 0.03219933435320854, 0.004912816919386387, 0.0069719161838293076, -0.0015944198239594698, 0.015989111736416817, -0.013660533353686333, -0.0038867222610861063, -0.018697725608944893, -0.016445154324173927, 0.034023504704236984, 0.016832098364830017, 0.01237532403320074, 0.011069385334849358, -0.008996467106044292, 0.0055139632895588875, -0.011421781033277512, 0.0053377654403448105, -0.011242127977311611, -0.05464213341474533, -0.005089015234261751, 0.02571800909936428, -0.0025514173321425915, -0.009597613476216793, -0.0160305704921484, -0.17611517012119293, 0.023423979058861732, 0.005500143859535456, -0.016804460436105728, 0.037975870072841644, 0.01353615801781416, 0.01527050044387579, -0.0031888396479189396, 0.016818279400467873, -0.008326223120093346, 0.0029660009313374758, 0.0021869291085749865, -0.046820320188999176, -0.041541289538145065, 0.026284607127308846, 0.026989400386810303, 0.01245133113116026, 0.021641269326210022, 0.055720049887895584, 0.022954117506742477, 0.03322197496891022, -0.03717434033751488, -7.195834768936038e-05, 0.012734630145132542, 0.009887821972370148, 0.00251859612762928, 0.008547334000468254, -0.009625252336263657, -0.007455597165971994, -0.023603633046150208, -0.032724473625421524, -0.005980370100587606, 0.021420158445835114, -0.0037105241790413857, 0.004995733965188265, -0.0008516240632161498, 0.025054676458239555, 0.010288585908710957, -0.02202821522951126, 0.04054628685116768, 0.002846808172762394, 0.019443975761532784, -0.003164655761793256, 0.013080116361379623, 0.0009025832987390459, 0.03546072542667389, -0.007227576337754726, -0.01329431775957346, -0.00682681193575263, 0.010198759846389294, 0.03051336109638214, -0.014565708115696907, 0.014759180136024952, -0.01305247750133276, 0.003738163271918893, -0.0014536341186612844, 0.009452508762478828, 0.016541890799999237, 0.011705080047249794, -0.015588347800076008, 0.008305493742227554, -0.005831811111420393, -0.0016894286964088678, 0.004543146584182978, 0.01846279576420784, -0.01433077733963728, -0.014047478325664997, 0.020356060937047005, -0.020425157621502876, 0.0027552542742341757, -0.0034427721984684467, 0.013384144753217697, 0.0035118695814162493, 0.020784463733434677, -0.007137749809771776, -0.0017101578414440155, -0.016901196911931038, 0.01489737443625927, 0.031563639640808105, 0.002542780013754964, -0.015864737331867218, 0.01853189244866371, -0.01135268434882164, 0.028799748048186302, 0.0010727354092523456, -0.012789907865226269, 0.005147747695446014, -0.0017490250756964087, -0.012499699369072914, -0.006640249397605658, 0.032531000673770905, -0.024087313562631607, 0.001572826993651688, 0.005372313782572746, 0.007462507113814354, 0.012838276103138924, 0.0044533200562000275, -0.009673619642853737, 0.028965583071112633, 0.004263302776962519, 0.005745439324527979, 0.013280498795211315, -0.02296793833374977, 0.013563796877861023, 0.012230219319462776, 0.02646426111459732, -0.029159054160118103, 0.008692438714206219, 0.03499086573719978, 0.00851969514042139, -0.028067316859960556, 0.03803114593029022, 0.009445599280297756, 0.028744470328092575, -0.007573062554001808, 0.027942942455410957, 0.012513518333435059, -0.006363859865814447, 0.0069166384637355804, -0.002157562645152211, 0.06915256381034851, 0.00612892908975482, 0.00809820182621479, 0.01995529606938362, 0.009058654308319092, -0.023700369521975517, -0.09314314275979996, -0.023824743926525116, 0.008070562966167927, -0.0030800115782767534, -0.0038348992820829153, 0.010551155544817448, -0.007483236026018858, 0.027680372819304466, -0.04300615191459656, 0.01499411091208458, -0.007932368665933609, 0.005997644271701574, -0.01319758128374815, 0.0029867300763726234, -0.005044101737439632, 0.014441332779824734, -0.007172298151999712, 0.0021713823080062866, 0.0018690816359594464, 0.02318904921412468, 0.029352527111768723, -0.009072473272681236, 0.017205223441123962, 0.02535870485007763, -0.026035858318209648, 0.006491689942777157, -0.0156712643802166, 0.008540424518287182, 0.003779621561989188, 0.0021091946400702, 0.008968827314674854, -0.009507786482572556, 0.01966508850455284, -0.025109954178333282, -0.023299604654312134, -0.0257871076464653, -0.03405114263296127, 0.0163898766040802, 0.034797392785549164, -0.040408093482255936, -0.004494778346270323, -0.021060852333903313, 0.011601434089243412, -0.023244326934218407, -0.01913994736969471, 0.003900541691109538, -0.002465045778080821, 0.0263951625674963, 0.01243751123547554, -0.010198759846389294, -0.023202868178486824, -0.019001754000782967, -0.00591818243265152, -0.04015934094786644, 0.026795927435159683, -0.015049388632178307, 0.012990289367735386, 0.008056744001805782, -0.0163898766040802, 0.00724830524995923, -0.01612730696797371, -0.0021817467641085386, 0.0009725443087518215, 0.0009492239914834499, 0.01433077733963728, 0.00494736572727561, -0.033249612897634506, -0.007738896179944277, 0.018766822293400764, -0.01862862892448902, -0.008125840686261654, 0.016279321163892746, -0.02940780483186245, -0.006529693491756916, -0.02846808172762394, -0.0024961393792182207, 0.003123197238892317, 0.000633967574685812, 0.008699348196387291, -0.023728007450699806, -0.02056335285305977, -0.006408773362636566, -0.009597613476216793, -0.03297322615981102, 0.02082592248916626, 0.03142544627189636, 0.03468683734536171, 0.010336954146623611, 0.016721542924642563, -0.02646426111459732, -0.016859738156199455, 0.003123197238892317, -0.01930578239262104, -0.021199047565460205, 0.004290941637009382, 0.012727719731628895, 0.00725521519780159, 0.012603345327079296, -0.008305493742227554, 0.015298139303922653, -0.05826283246278763, -0.033830031752586365, -0.05997644364833832, 0.010019106790423393, 0.008070562966167927, -0.011117753572762012, 0.0031352892983704805, -0.01158070471137762, -0.024543356150388718, -0.006923547945916653, 0.016597168520092964, 0.015284319408237934, -0.011097024194896221, -0.004688250832259655, -0.037119060754776, -0.012541157193481922, -0.012181851081550121, -0.011117753572762012, 0.01253424771130085, 0.0017343418439850211, 0.0030731018632650375, 0.00020815557218156755, 0.0006827675388194621, -0.002789802849292755, 0.007262124679982662, 0.014082026667892933, -0.02082592248916626, -0.012706991285085678, 0.021807104349136353, 0.022788284346461296, -0.014966472052037716, -0.03319433704018593, -0.0006236030021682382, -0.02224932610988617, 0.0165142510086298, 0.010509696789085865, 0.011200670152902603, 0.005873269401490688, -0.0022836653515696526, 0.002674065064638853, 0.017080849036574364, -0.006032193079590797, -0.006788808386772871, -0.02772183157503605, 0.006633339449763298, -0.03827989473938942, -0.020300783216953278, -0.003427225397899747, 0.0005704844952560961, -0.014178763143718243, 0.026740649715065956, 0.023589814081788063, 0.0025151411537081003, 0.02007967047393322, -0.035129059106111526, -0.01629314012825489, 4.313182216719724e-05, -0.022097311913967133, 0.020411338657140732, 0.020300783216953278, 0.00546559551730752, -0.0023441254161298275, 0.023230507969856262, 6.521056639030576e-05, -0.007462507113814354, -0.03653864562511444, 0.02212495170533657, -0.008906640112400055, -0.01803439110517502, 0.013425602577626705, 0.0014441332314163446, -0.0004452456487342715, -0.03186766803264618, -0.006173842586576939, 0.01107629481703043, -0.006280943285673857, -0.01313539408147335, -0.0032423902302980423, -0.015215222723782063, -0.004864449147135019, -0.010613342747092247, 0.02448807843029499, 0.018614808097481728, -0.038335174322128296, 0.010046745650470257, 0.020701546221971512, 0.02617405168712139, 0.02620169147849083, 0.012264768593013287, 0.026519538834691048, 0.018987935036420822, 0.0019174496410414577, -0.02072918601334095, -0.007752715609967709, 0.009411050006747246, 0.00461569894105196, 0.027666553854942322, -2.0216353732394055e-05, 0.009549245238304138, 0.01947161555290222, 0.01872536540031433, 0.0042494828812778, 0.01571272313594818, 0.009867092594504356, 0.017730362713336945, -0.017094668000936508, -0.006529693491756916, 0.027030859142541885, 0.008561153896152973, 0.0004102651437278837, 0.006771534215658903, 0.020673908293247223, 0.014455152675509453, -0.008851362392306328, -0.024736829102039337, 0.028965583071112633, -0.0012782998383045197, -0.0019364514155313373, 0.004280576948076487, -0.027514539659023285, 0.0006888135685585439, 0.023506896570324898, 0.012624073773622513, 0.007552333176136017, 0.040629204362630844, -0.01713612675666809, 0.007877090945839882, 0.015007930807769299, 0.019830921664834023, -0.008927369490265846, -0.010627162642776966, 0.012492788955569267, -0.010703169740736485, 0.025897663086652756, -0.009535425342619419, -0.014828277751803398, 0.022138770669698715, -0.022194048389792442, -0.024087313562631607, 0.01089664176106453, 0.01507702749222517, 0.08838924765586853, 0.030651556327939034, -0.03507378324866295, -0.019195226952433586, -0.013017929159104824, 0.00877535529434681, 0.00685790553689003, 0.006681707687675953, -0.011297406628727913, -0.0364004485309124, 0.02827460877597332, -0.007932368665933609, -0.02147543616592884, -0.018144946545362473, 0.0007674117223359644, 0.021461617201566696, -0.012161122635006905, 0.02277446538209915, -0.012416781857609749, 0.00430821580812335, 0.021351061761379242, 0.004474049434065819, -0.004788442049175501, -0.022691547870635986, -0.025413982570171356, 0.014130394905805588, 0.022857382893562317, 0.010046745650470257, -0.008561153896152973, -0.042315177619457245, -0.004657157231122255, 0.0018915381515398622, -0.031536001712083817, 0.0010148664005100727, -0.011608344502747059, 0.017578350380063057, 0.025109954178333282, -0.01574036106467247, 0.02376946620643139, 0.013757269829511642, -0.032531000673770905, -0.015187583863735199, -0.03352600336074829, -0.011960740201175213, 0.022138770669698715, 0.014620985835790634, 0.0027777107898145914, -0.01525668054819107, -0.030043499544262886]"
Redis Analysis - Part 1: Threading model,Redis Analysis - Part 1: Threading model,"multi-threaded argument.  This question in the context of Redis has been raised quite a few times before, sometimes sparkling pretty heated discussions. See, for example  <blockquote className=""twitter-tweet"" data-dnt=""true"">I was blocked and riduclued for saying Redis should be multi-threaded. Both by the community and the maker for years.<br/><br/>Ahem.https://t.co/Aom4CIYSaf<br/><br/>But we already knew this would be the result, didnt we? This is how modern computers work. Its not really a debate.<br/>&mdash; Kelly Sommers (@kellabyte) <a href=""https://twitter.com/kellabyte/status/1111380252398280704?ref_src=twsrc%5Etfw"">March 28, 2019</a></blockquote> <script async defer src=""https://platform.twitter.com/widgets.js""></script>  and  ![replies](/assets/blog/redis-analysis-part-1-threading-model/redis-twitter.png)  .  Eventually, Salvatore has decided to allow the offloading of I/O processing onto additional threads. But as I said before, only a single designated thread handles the main Redis dictionary.  It seems, however, that was not enough for the community. Two and half years ago, a couple of talented folks from Canada decided to change the status quo and created a multi-threaded Redis fork called _KeyDb_. KeyDb allows multiple threads to access the Redis dictionary by protecting it with spinlocks. See their [introductionary post](https://medium.com/@john_63123/redis-should-be-multi-threaded-e28319cab744) about this.  In the previous post I mentioned the following arguments why Redis was built as single-threaded:  1. It preserves low tail latency by avoiding contention on locks. 2. Redis Cluster provides horizontal scale, which should be as good as vertical scale if not better: N single-core machines are equivalent to a single process spanning N cores. 3. Pipelining gives you more throughput. A redis client can pipeline requests reaching ~1M qps, which is an order of magnitude higher than the regular traffic throughput. 4. Room for the upside on a single machine is limited anyway. 5. Single-threaded is simple, multi-threaded is complicated.  I think there are great benefits of having multi-threaded databases, and I will try to challenge these arguments. But before we continue forward, let's agree on a few terms:  _A vertically scalable system_ is a system that can scale _almost_ linearly with its performance metrics (aka requests per second) as a function of available CPUs on a single server. _Horizontally scalable system_ is a distributed system that can run on multiple nodes/processes and scale _almost_ linearly with a number of nodes.  I assert the following claims:  1. A vertically scalable system is more cost-efficient than its equivalent horizontally scalable configuration until it reaches its physical limits on a single server. 2. In order to reach the full potential of the modern hardware, and preserve the low latency property, a system should be designed as a shared-nothing architecture, i.e. avoid locking and contention, along with the original philosophy of Redis.  I will try to prove (1). I base (2) on the empirical evidence gathered in the research community and on lessons learned from other well-designed systems like [ScyllaDb](https://www.scylladb.com/product/technology/shard-per-core-architecture/) or [Twitter's Pelikan](http://twitter.github.io/pelikan/2016/separation-concerns.html).  ## Vertical scale vs Horizontal scale  Imagine you are in the business of selling sugar. You need to choose between renting a warehouse that can hold 10,000kg of sugar vs 10 warehouses that can hold 1000kg each. The price of smaller warehouses is precisely a tenth of the bigger one. It seems that there is no difference, right? However, if you choose to rent 10 smaller warehouses, you will see that after some time, some, but not all of them, will be nearly empty, and you need to send trucks to fill them up. Why? Because the randomness of nature dictates that you have almost zero chance that all warehouses are depleted at precisely the same rate. So you need to spend resources to fill some of the warehouses. Then you will spend resources to fill others and so on. Moreover, you need to staff those warehouses: you might need 2.5 people per place on average, but you will need to round it up and hire 3 folks in every place. There will be high-pressure days when your workers will work like crazy, while during other days, they will do nothing. Let's do some math to understand how to model those inefficiencies.  Let's assume that $X_1...X_n$ are independent random variables. Then the expected mean and variance of their sum is the sum of their means and variances:  $$ \mathbb{E} \biggl[ \sum_{i=1}^n X_i \biggr] = \sum*{i=1}^n {E[X_i]} $$  $$ Var \biggl[ \sum*{i=1}^n X*i \biggr] = \sum*{i=1}^n {Var[X_i]} $$  These formulas are basic rules in probability theory, see [here](https://en.wikipedia.org/wiki/Algebra_of_random_variables), for example. Specifically, for independent random variables with the same mean $\mu$ and standard deviation $\sigma$, we get:  $$ \mathbb{E} \biggl[ \sum_{i=1}^n X_i \biggr] = \sum*{i=1}^n {E[X_i]} = \sum*{i=1}^n \mu = n\\* \mu $$  $$ Var \biggl[ \sum_{i=1}^n X_i \biggr] = \sum*{i=1}^n {Var[X_i]} = \sum*{i=1}^n \sigma^2 = n\\*\sigma^2 $$  The last equation can be rewritten as $ StdDev \biggl[\sum_{i=1}^n X_i \biggr] = \sqrt n \sigma $.  These equations prove the so-called `square root staffing law` in queueing theory, which explains why provisioning a bigger system is more efficient than provisioning a few smaller ones with equivalent capacity.  Indeed, when we provision a system that handles the load distributed as $(\mu, \sigma)$, we usually take an additional margin, say, twice the standard deviation, to cope with the intrinsic stochastic variability of that load. With $n$ warehouses, we can model their load as $n$ independent variables distributing as $(\mu, \sigma)$, therefore, in order to cope with $n * \mu$ effective load, we will need to staff $2 n \sigma$ additional resources. However, a single warehouse that handles the load $(n \mu, \sqrt n \sigma)$ needs only $2 \sqrt n \sigma$ resources to cover the same margin. The bigger warehouse is, the larger the difference between $\sqrt n \sigma$ and $n \sigma$.  There are quite a few articles on the internet and lots of academic research in this area. See [this post](https://www.networkpages.nl/the-golden-rule-of-staffing-in-contact-centers/), for example.  Obviously, the vertical scale is equivalent to renting a bigger warehouse, and the horizontal scale is equivalent to provisioning multiple smaller places.  Let's switch back to the memory-store example. Suppose we provision 9 nodes that are expected to host 12GB of data _on average_ with the standard deviation - 2GB. We would take servers with `12GB+2*2GB=16GB` capacity, in total `144GB` with `36GB` margin. With a single server, however, we would need `108 + sqrt(9) * 4 = 120GB`. We just reduced the overall cost of the system by 17%. And if 17% seems not much, we can compare a single server with arbitrary many `n` servers of $\frac 1 n$ capacity. With `n` large enough, the standard deviation becomes the significant factor compared to the average load. For example, 108 nodes that host 108GB overall, would need to sustain load $L(\mu=1, \sigma=0.577)$, thus we would need to provision `108*(1 + 2*0.577) = 232GB` which is 93% higher than the single server cost.  So far, I have talked about economy of scale and why pooling resources is more efficient than employing multiple independent capacities. There are additional factors that increase the total cost of ownership for multi-node system: I believe that any experienced devop would agree that managing a fleet of `N` servers is more complicated than managing a single server just because of moving parts: The chance that at least one of the servers will fail is approximately `N` time bigger than for a single machine. In addition, the horizontally scalable system might impose additional restrictions on how the system is used. Specifically, with Redis - Redis Cluster does not allow transactions or multi-key operations covering multiple nodes, it lacks multi-database support, and it can not issue consistent management operations like `flushdb`, `save` across the cluster.  The goal of this section is not to persuade you that vertical scale is strictly better than horizontal scale - obviously, the vertical scale is bounded by the physical limits of its host and can not always be chosen. However, when there is a choice - it can be the much simpler and most cost-efficient alternative to splitting your workloads across separate nodes.  ## Shared-nothing architecture  `Hardware on which modern workloads must run is remarkably different from the hardware on which current programming paradigms depend, and for which current software infrastructure is designed.` - From Scylla blog.  Share-nothing architecture is a methodology to build a system in such way that its state is partitioned among multiple processors, and each processor can execute its work independently from others. Some prominent examples of shared-nothing architecture: a) Map-Reduce is a distributed processing framework that processes huge amounts of data over multiple independent workers. b) Redis Cluster is comprised of independent Redis nodes, where each one of them can perform without relying on others. c) ScyllaDb is a Cassandra clone that partitions its server database over CPUs in such a way that each CPU thread consistently handles the same partition. See more info about their [open-sourced Seastar framework](http://seastar.io/shared-nothing/) d) Similarly, Envoy is a prominent proxy server that [uses thread-local storage](https://blog.envoyproxy.io/envoy-threading-model-a8d44b922310) to minimize contention between multiple threads inside its process.  Shared-nothing architecture can be designed over multiple nodes like with (a) and (b) or within a single process like with (c) and (d).  In our case, I believe that memory store can be designed as a multi-threaded, single-process system that utilizes the underlying CPUs using shared-nothing architecture. In other words, every cpu thread will handle its dictionary partition shard. Other threads can not access directly the data-structures they do not own. If a thread needs to write or read from a dictionary managed by another thread, it achieves it by sending a message to the owner via a dedicated message bus. This architecture is not novel - it appears a lot in technical papers, and became mainstream thanks to ScyllaDb design.  Any mature database needs to perform operations equivalent to Redis `flushdb`, `save`, `load` etc. It also needs to perform resize or compaction operations periodically. With the single-threaded architecture, it means that a single CPU is involved in processing all this data which heavily reduces database resilience. This brings us to another significant benefit for shared-nothing architecture with the thread-per-core threading model, which is often neglected. Modern servers maintain a bounded ratio of CPU vs memory. Say, in AWS, `r5` family has 1:8 ratio, `m5` family has 1:4. Similarly, in GCP `n2` family maintains ratios between 1-8 GB per vcpu. Therefore, with the thread-per-core model, each thread handles at most `K` GB of workload, which means that a database stays resilient whether it's 8GB or 860 GB on a single machine.  ## Benchmarks  This section addresses arguments (3) and (4) from the beginning of the post, namely how much upside we can bring by employing shared-nothing architecture using modern cloud servers. For that, I will use a toy redis-like memory store called [midi-redis](https://github.com/romange/midi-redis). [midi-redis](https://github.com/romange/mini-redis) is similar to rust tokio [mini-redis](https://github.com/tokio-rs/mini-redis) - i.e. it's built to demonstrate the capabilities of the underlying IO library by implementing a subset of redis/memcached commands.  Specifically, midi-redis supports `GET`, `SET`, `PING`, and `DEBUG POPULATE` commands. It also has complimentary support for memcached `GET` and `SET` commands and pipeline mode for both protocols.  The underlying I/O library that powers `midi-redis` is [helio](https://github.com/romange/helio) that uses linux io-uring api underneath. `helio` is specially designed for shared-nothing architectures and it is the evolution of my previous library [GAIA](https://github.com/romange/gaia).  I performed benchmarking of `midi-redis` on a variety of instances on the AWS cloud. The point is not to evaluate `midi-redis` but to show the true potential of the hardware vs what Redis gives us on this hardware. Please, treat these numbers as directional only - I run each load-test only once, so I believe there is some variance that could affect numbers in +-15% range. `redis-1` bar in the graph represents Redis 6 with the `io-threads=1` configuration, and `redis-8` denotes `io-threads=8` configuration. Redis results were similar on all instance types, therefore I used the `redis-1` run on `c5.18xlarge` as my relative baseline for all other runs.  I used read-only traffic to minimize the influence of memory allocations and database resizes on the results. Also, I run ""debug populate 10000000"" command before each run to fill a server under test with data. Finally, I run [memtier_benchmark](https://github.com/RedisLabs/memtier_benchmark) from 3 client machines in the same zone with the following configuration: `--key-prefix=key: --key-pattern=P:P --ratio 0:1 -n 2000000`. The number of threads and connections for `memtier_benchmark` were chosen to maximize the throughput of the server under test and were different for each instance type.  My first graph shows throughput for regular traffic without pipelined requests:  ![no-pipeline](/assets/blog/redis-analysis-part-1-threading-model/throughput-p1.png)  You can see that midi-redis running most network-capable AWS instance c6gn.16xlarge has the throughput that is >20 times higher than `redis-1` and >10 times higher than `redis-8`.  My next graph shows the throughput of instances with pipeline mode when `memtier_benchmark` sends bursts of 10 requests at once (`--pipeline 10`):  ![pipeline-10](/assets/blog/redis-analysis-part-1-threading-model/throughput-p10.png)  Here, `c6gn.16xlarge` has seven times more throughput reaching a staggering 7.4M qps. Interestingly, `redis-8` is a bit slower than `redis-1` because Redis main thread becomes the bottleneck for pipelined traffic. And `redis-8` spends additional cpu for coordination with its io-threads. `midi-redis` on the other hand, splits its dictionary between all its threads, reduces their communication to a minimum, and scales its performance much better.  I do not know if a factor of 20 or a factor of 7 sounds impressive to you, but please remember that Redis 6 is the product of a decade of development and optimizations. Even 5%, 10% of incremental improvement is significant here. By changing the foundation, we allow potential 2000% upside for the non-pipeline case. Moreover, with time we will benefit from additional tailwinds from hardware advancements - with better networking and more cpus we will see even higher rates.  The speed of a car is 140 km/h, the speed of a jet plane is 950 km/h and the speed of sound is 1235 km/h. If Redis is a fast car, then we could fly instead on a supersonic plane.","[-0.02355940267443657, -0.004683916922658682, 0.027194682508707047, -0.026439663022756577, -0.004907626658678055, -0.00221437425352633, -0.004795771557837725, -0.006819643080234528, -0.02828526496887207, -0.042448870837688446, 0.006767211481928825, 0.02044145204126835, 0.002422354184091091, -0.013632295653223991, -0.0037366473115980625, 0.014736860990524292, 0.03361234813928604, -0.0028348183259367943, 0.01891743205487728, -0.009906134568154812, -0.0018333690240979195, -0.017029883340001106, -0.01328274980187416, -0.010975745506584644, -0.031375251710414886, 0.006686815991997719, 0.03517831489443779, -0.00417707534506917, -0.007983631454408169, -0.011555992066860199, 0.023070039227604866, -0.009465706534683704, -0.0100669264793396, -0.0026880090590566397, -0.023237820714712143, -0.0009385311277583241, 0.016694318503141403, -0.013695213943719864, 0.019966069608926773, -0.016973955556750298, 0.017253592610359192, -0.01286329422146082, -0.004044247791171074, -0.021518055349588394, -0.010682127438485622, 0.021378235891461372, 0.0031668872106820345, -0.03453514724969864, -0.006826634053140879, -0.01565966196358204, 0.015058443881571293, 0.01273046713322401, -0.03260565549135208, 0.022734474390745163, -0.017435356974601746, -0.010192763060331345, -0.004344857297837734, -0.001142141642048955, 0.00024096830748021603, -0.013394604437053204, 0.022762438282370567, 0.02245483733713627, -0.01215721108019352, 0.03101172484457493, -0.03235398232936859, -0.01504446193575859, -0.00718666659668088, -0.01170280110090971, 0.00933986995369196, -0.0037785926833748817, 0.00568711431697011, 0.04994313791394234, -0.006697302218526602, -0.012716485187411308, 0.03008892387151718, -0.011283346451818943, -0.0002835692139342427, -0.0020413489546626806, -0.009116160683333874, -0.0061380285769701, -0.0020588261540979147, 0.0012872032821178436, -0.01401679590344429, 0.019546614959836006, 0.0014479944948107004, 0.0228043831884861, -0.008459013886749744, -0.0007489023846574128, 0.009969052858650684, 0.00984321627765894, 0.009179078973829746, 0.009878171607851982, 0.01273046713322401, 0.005250181537121534, 0.005805959925055504, 0.013562386855483055, 0.01009488943964243, 0.014918625354766846, -0.002030862495303154, 0.01263259444385767, -0.04809753596782684, -0.0057500326074659824, -0.023265784606337547, -0.024146640673279762, -0.014513151720166206, 0.000650592555757612, -0.006218424066901207, 0.003600324271246791, 0.01711377501487732, -0.004379811696708202, -0.014485187828540802, 0.011367237195372581, 0.007710985839366913, -0.007501258049160242, 0.012066329829394817, -0.0010914575541391969, 0.009353851899504662, -0.0016000469913706183, -0.0005946651799604297, -0.01570160873234272, 0.02983725070953369, 0.0010634938953444362, 0.01695997454226017, -0.01691802777349949, 0.03831024467945099, 0.0013824546476826072, -0.006721770390868187, -0.006309306249022484, 0.002039601095020771, -0.008745642378926277, -0.003483226289972663, 0.01715571992099285, -0.02154601737856865, -0.01661042869091034, -0.008920415304601192, -0.007703994866460562, 0.005040453746914864, -0.006061128340661526, -0.021378235891461372, -0.0449935682117939, 0.01796666719019413, 0.004040752071887255, -0.007473294623196125, -0.0223429836332798, -0.004194552544504404, 0.04706287756562233, 0.012262075208127499, 0.03140321746468544, -0.0023192379157990217, -0.009367833845317364, -0.007508249022066593, -0.017225628718733788, -0.0016341278096660972, -0.0005352423759177327, 0.024887679144740105, 0.030564306303858757, -0.022384928539395332, 0.009955070912837982, -0.011227418668568134, 0.0023873995523899794, 0.018693722784519196, 0.008787587285041809, -0.01897335983812809, 0.00014790166460443288, 0.012800375930964947, 0.03858988359570503, 0.03235398232936859, -0.00291870953515172, 0.015939299017190933, -0.007494267076253891, -0.004191057290881872, 0.033696237951517105, -0.028914447873830795, 0.01705784723162651, 0.019504670053720474, 0.010780000127851963, -0.004295920953154564, 0.014387315139174461, 0.007193657569587231, -0.010584253817796707, 0.01222712080925703, -0.0032700032461434603, 0.01802259311079979, 0.042952217161655426, -0.007207639515399933, -0.0005378639907576144, 0.007361439522355795, 0.014254488050937653, 0.005365531891584396, -0.0003128437092527747, 0.004722367040812969, 0.0064141699112951756, -0.015170298516750336, -0.01912716031074524, -0.6241494417190552, 0.006393196992576122, -0.017882775515317917, -0.042253125458955765, 0.004732853267341852, -0.0016411186661571264, 0.021462127566337585, 0.01827426627278328, -0.02572658844292164, 0.018595850095152855, 0.003523424034938216, 0.016470609232783318, 0.015254189260303974, -0.010556290857493877, -0.032186198979616165, -0.015394007787108421, 0.019015304744243622, -0.003236796474084258, -0.013960869051516056, -0.012045356445014477, -0.027446355670690536, 0.02315392903983593, -0.006057633087038994, 0.012996122241020203, -0.011129545979201794, 0.008920415304601192, 0.01902928575873375, -0.0052327043376863, -0.01419156976044178, 0.0056626456789672375, -0.021518055349588394, -0.0022126263938844204, 0.03204638138413429, -0.014345369301736355, 0.05589940398931503, -0.011863593012094498, -0.019252996891736984, 0.021713800728321075, 0.009053242392838001, 0.025838444009423256, -0.021266382187604904, -0.014499169774353504, 0.01454111561179161, -0.0058933463878929615, 0.0072845397517085075, 0.028802594169974327, 0.015505862422287464, -0.0013885716907680035, -0.0015476151602342725, -0.01932290568947792, 0.00019629194866865873, -0.017784902825951576, 0.014310414902865887, -0.005162795074284077, 0.010591245256364346, -0.014051751233637333, 0.028914447873830795, -0.010947782546281815, -0.0007239972474053502, 0.01167483814060688, -0.0018193871947005391, 0.01847001351416111, -0.02224511094391346, -0.009500661864876747, -0.050810012966394424, -0.003238544100895524, -0.006200946867465973, -0.02369922213256359, 0.0191830862313509, -0.015575772151350975, 0.009102178737521172, -0.017491284757852554, 0.008382114581763744, -0.029305940493941307, 0.007501258049160242, 0.0015895606484264135, 0.03512238711118698, -0.005851400550454855, 0.0017879280494526029, 0.017589157447218895, 0.001274095382541418, 0.0036143059842288494, -0.01963050663471222, -0.01645662821829319, 0.02505546063184738, -0.010185771621763706, -0.009850207716226578, -0.0058933463878929615, -0.003775097196921706, 0.0014654718106612563, -0.003446524031460285, 0.04085494205355644, -0.011765719391405582, -0.03738744556903839, 0.016470609232783318, 0.04507745802402496, 0.005603223107755184, -0.0029973573982715607, -0.012716485187411308, -0.03129136189818382, -0.02083294466137886, -0.034451257437467575, 0.004330875352025032, 0.01391892321407795, 0.03221416473388672, 0.006718275137245655, -0.00883652362972498, 0.004505648277699947, 0.03845006600022316, -0.004414766561239958, 0.010731063783168793, 0.0022108787670731544, -0.025628715753555298, 0.002691504545509815, -0.004848203621804714, -0.027907755225896835, 0.03537406027317047, -0.006221919786185026, 0.011283346451818943, -0.004575557541102171, 0.007445330731570721, -0.008878469467163086, 0.003425551112741232, -0.00718666659668088, -0.00016974829486571252, -0.00885749701410532, 0.007836822420358658, -0.0047433399595320225, 0.012401893734931946, -0.0010634938953444362, -0.009465706534683704, -0.023517457768321037, 0.03355642035603523, -0.020203761756420135, 0.04770604521036148, 0.0026652885135263205, 0.01252773031592369, 0.0062708561308681965, 0.017505265772342682, -0.04935590177774429, 0.000574566307477653, -0.0011779702035710216, 0.01147210132330656, -0.015785498544573784, -0.003505946835502982, -0.027795901522040367, -0.024901660159230232, -0.005715077742934227, -0.0069070300087332726, -0.02083294466137886, -0.00644213380292058, -0.00890643335878849, -0.012695512734353542, 0.011087600141763687, -0.011814656667411327, 0.016932010650634766, 0.0043273800984025, -0.03612907975912094, -0.00870369654148817, -0.023769130930304527, -0.005362036172300577, 0.011192464269697666, -0.015883373096585274, 0.02304207533597946, -0.030536342412233353, -0.014597042463719845, -0.011793683283030987, 0.016848118975758553, 0.00598772382363677, -0.022510765120387077, -0.016316808760166168, -0.0144712058827281, 0.0202876515686512, -0.0004330001538619399, -0.02218918316066265, -0.0016393709229305387, -0.013268767856061459, 0.0028750163037329912, -0.011500065214931965, -0.010780000127851963, 0.0020361056085675955, 0.03039652481675148, -0.016428664326667786, -0.013779104687273502, 0.03707984462380409, 0.016372736543416977, 0.008486977778375149, -0.00883652362972498, -0.03095579706132412, 0.027348482981324196, 0.02032959833741188, 0.009437743574380875, -0.016778210178017616, -0.00014517083764076233, -0.004215525463223457, -0.010472399182617664, 0.01922503300011158, -0.0004264461749698967, 0.006896543316543102, 0.03909322991967201, 0.010073916986584663, 0.009290933609008789, 0.0043273800984025, -0.023769130930304527, -0.012716485187411308, -0.024174604564905167, 0.010500363074243069, -0.011898547410964966, 0.025894371792674065, -0.006403683684766293, -0.00039323928649537265, 0.009752335026860237, -0.009325888007879257, -0.02369922213256359, -0.011597937904298306, 0.04868477210402489, -0.021979454904794693, 0.009507652372121811, -0.015338080003857613, -0.0013868239475414157, -0.004816744476556778, 0.003565369639545679, 0.003406326286494732, 0.024286458268761635, -0.01215721108019352, -0.0013405090430751443, 0.011716783046722412, 0.00644213380292058, -0.0017066585132852197, -0.02224511094391346, -0.018232321366667747, 0.02228705585002899, 0.0020693126134574413, 0.0031826167833060026, 0.03531813248991966, 0.03556980565190315, 0.02743237279355526, 0.0027981160674244165, 0.023223839700222015, -0.02007792517542839, 0.014457223936915398, 0.010954773053526878, 0.001568587846122682, -0.030620234087109566, 0.03070412389934063, 0.025964280590415, 0.03296918421983719, -0.006819643080234528, -0.015114370733499527, -0.01963050663471222, -0.003304957877844572, 0.0008052667253650725, -0.008158404380083084, -0.010220726020634174, 0.007165693677961826, 0.0001364321942673996, 0.004131634254008532, -0.0032857328187674284, 0.02445424161851406, 0.013793086633086205, 0.004100175108760595, 0.019308922812342644, 0.022063346579670906, -0.007445330731570721, 0.010689117945730686, -0.017281556501984596, -0.015254189260303974, 0.008934397250413895, 0.026789208874106407, 0.003289228305220604, -0.008207340724766254, -0.020245706662535667, -0.008619805797934532, -0.011248392052948475, 0.004837717395275831, 0.01626088283956051, 0.018386121839284897, 0.010793982073664665, -4.4785585487261415e-05, 0.013149921782314777, -0.006512042600661516, -0.007543203420937061, 0.004159598145633936, 0.005638177506625652, -0.016498573124408722, -0.03680020570755005, -0.018511958420276642, 0.011493073776364326, 0.027865810319781303, 0.0075292219407856464, -0.000822307076305151, 0.015687625855207443, -0.01967245154082775, -0.003126689465716481, -0.005722068715840578, -0.005840914323925972, 0.05039055645465851, -0.00322106690146029, -0.0295855775475502, -0.01252773031592369, 0.002752674976363778, 0.00910917017608881, -0.02969743125140667, -0.007815849967300892, 0.0456087663769722, 0.003264760132879019, -0.006064624059945345, -0.010430454276502132, 0.0076830219477415085, -0.0012015645625069737, 0.016820155084133148, -0.028019610792398453, -0.01595328189432621, -0.013198859058320522, -0.0031913553830236197, -0.0022528241388499737, -0.008459013886749744, 0.012723475694656372, 0.0430920347571373, -0.004442729987204075, -0.012450830079615116, -0.0262718815356493, -0.013925914652645588, 0.011262373067438602, 0.03940083086490631, 0.009752335026860237, 0.0006623897352255881, 0.012164202518761158, -0.03341660276055336, 0.0009734857594594359, -0.00588635541498661, -0.01112255547195673, 0.03900934010744095, -0.004767808131873608, 0.006428151857107878, -0.01942077837884426, 0.02098674513399601, -0.002156699076294899, 0.007766913156956434, 0.0034727398306131363, -0.015338080003857613, -0.03101172484457493, -0.0030812483746558428, -0.013876978307962418, -0.0010241699637845159, -0.0036282879300415516, 0.009738353081047535, 0.04353945702314377, 0.0289424117654562, 0.01313594076782465, 0.0011736007872968912, 0.0016341278096660972, 0.007319494150578976, -0.02849499322474003, -0.017575174570083618, 0.0002671842521522194, 0.0026810180861502886, 0.009766316041350365, -0.005260667763650417, 0.018903449177742004, -0.005547295790165663, -0.005697600543498993, 0.00723560294136405, -0.0016061640344560146, -0.007676030974835157, 0.001618398237042129, 0.003624792443588376, 0.01767304725944996, 0.013576367869973183, -0.011912529356777668, 0.009703397750854492, 0.018204357475042343, -0.015771517530083656, 0.013499468564987183, 0.033192891627550125, -0.011870583519339561, -0.052264124155044556, 0.0010040709748864174, 0.001611407264135778, -0.008486977778375149, -0.02094479836523533, -0.01796666719019413, -0.013024085201323032, -0.017141737043857574, -0.018497977405786514, -0.0005243190680630505, 0.008780596777796745, 0.0027491797227412462, -0.00718666659668088, -0.006697302218526602, 0.002693252172321081, -0.0027386932633817196, -0.016093099489808083, -0.00031415451667271554, -0.018246304243803024, -0.014638988301157951, -0.054025836288928986, 0.004460207652300596, 0.05290728807449341, 0.02607613429427147, 0.024999532848596573, 0.01361831370741129, -0.014114669524133205, 0.02279040217399597, -0.0239089485257864, -0.011276355013251305, -0.00014932169870007783, -0.02245483733713627, -0.022329000756144524, 0.0065225292928516865, -0.008046549744904041, 0.002104267245158553, -0.01877761259675026, 0.0078088585287332535, 0.016778210178017616, 0.00246604741550982, 0.023377640172839165, -0.010276653803884983, 0.01096875499933958, 0.010381517931818962, 0.032941218465566635, 0.020091906189918518, 0.014862697571516037, -0.05245986953377724, 0.004400784615427256, 0.00915810652077198, 0.0033381646499037743, -0.015981245785951614, 0.006602924782782793, -0.015631699934601784, -0.0012225372483953834, -0.007641076575964689, 0.0012618611799553037, -0.022007418796420097, 0.0031179506331682205, -0.00542495446279645, 0.01016479916870594, 0.010388508439064026, 0.0037051881663501263, -0.004292425233870745, 0.005998210050165653, 0.04286832734942436, 0.002023871522396803, 0.007256575860083103, 0.01529613509774208, -0.008326186798512936, 0.01564568094909191, -0.005078903865069151, -0.0100669264793396, 0.024943605065345764, 0.019518651068210602, -0.04012788459658623, -0.03660446032881737, 0.011514046229422092, 0.008193359710276127, 0.014569079503417015, 0.006106569431722164, -0.019211050122976303, -0.012877276167273521, -0.004463702905923128, 0.006316297221928835, -0.0187216866761446, -0.016596445813775063, 0.005638177506625652, -0.009374825283885002, -0.004379811696708202, 0.009780297987163067, -0.021070634946227074, -0.0037366473115980625, -0.020357562229037285, -0.030788015574216843, 0.006865084171295166, 0.013590349815785885, 0.017575174570083618, -0.01665237359702587, -0.026146044954657555, -0.003282237332314253, -0.013142931275069714, -0.014918625354766846, -0.019085213541984558, 0.013611323200166225, -0.021881582215428352, 0.031682852655649185, 0.013897950761020184, 0.03587740659713745, 0.028103502467274666, 0.004991517402231693, 0.016848118975758553, 0.009367833845317364, -0.028425084426999092, 0.015254189260303974, 0.008787587285041809, -0.011828637681901455, 0.0014462467515841126, 0.02420256845653057, 0.015324098989367485, -0.028103502467274666, 0.007116757333278656, -0.00890643335878849, 0.04365130886435509, -0.0013824546476826072, -0.0056416732259094715, -0.05008295550942421, -0.029417794197797775, 0.005966750904917717, 0.022482801228761673, -0.02329374849796295, -0.004100175108760595, -0.004212029743939638, -0.015939299017190933, 0.030732087790966034, -0.0212384182959795, 0.023475512862205505, 0.020357562229037285, 0.00698392977938056, -0.013024085201323032, 0.004988022148609161, -0.0001859148032963276, 0.004355343524366617, -0.02520926110446453, -0.014736860990524292, -0.01968643255531788, 0.00036571253440342844, 0.014023787342011929, 0.003858988406136632, 0.026355771347880363, 0.002258067484945059, 0.021476108580827713, 0.01268153078854084, -2.704885628190823e-05, -0.034255512058734894, -0.017477301880717278, 0.0010984484106302261, 0.00033228722168132663, -0.00956358015537262, -0.03229805454611778, -0.021853618323802948, -0.010675135999917984, -0.006085596513003111, 0.01640070043504238, 0.012038365937769413, -0.009374825283885002, -0.027949701994657516, -0.01600920967757702, 0.010940791107714176, 0.005215227138251066, 0.022370947524905205, -0.005337567999958992, 0.015142334625124931, 0.007620103657245636, 0.017071828246116638, -0.004253975581377745, -0.02058127149939537, 0.023125967010855675, -0.006634383928030729, 0.03906526416540146, 0.023629313334822655, -0.01670830138027668, 0.004079202190041542, -0.006207937840372324, -0.028117483481764793, 0.0011124302400276065, -0.04588840529322624, 0.015533826313912868, 0.021671853959560394, -0.004802762530744076, -0.028271283954381943, -0.004834221675992012, -0.02063719928264618, 0.0021829151082783937, -0.02144814468920231, -0.005452918354421854, 0.00568711431697011, -0.000595976016484201, -0.018847523257136345, 0.055032528936862946, 0.015827445313334465, 0.04071512445807457, -0.017589157447218895, -0.007522230967879295, -0.02245483733713627, -0.007074811961501837, -0.0343114398419857, -0.011807665228843689, 0.013045058585703373, 0.022133255377411842, -0.01197544764727354, 0.002114753471687436, 0.018008612096309662, 0.0018333690240979195, -0.010738054290413857, 0.009668443351984024, -0.0035461445804685354, 0.028718702495098114, -0.0162049550563097, 0.019756343215703964, 0.00723560294136405, -0.007228611968457699, 0.010724072344601154, -0.026285862550139427, -0.017337484285235405, 0.0005723816575482488, -0.017575174570083618, -0.0012190418783575296, 0.01730952039361, -0.014359351247549057, 0.010584253817796707, -0.009228015318512917, -0.007088793907314539, -0.008731660433113575, -0.02158796414732933, -0.007773904129862785, 0.021154526621103287, -0.04614007845520973, -0.010556290857493877, -0.0032088325824588537, -0.0026565499138087034, 0.0012172941351309419, -0.012947185896337032, -0.0008550769998691976, -0.007494267076253891, 0.03624093532562256, -0.014387315139174461, 0.021601945161819458, 0.0184140857309103, -0.01842806674540043, -0.021560000255703926, 0.015827445313334465, -0.008291232399642467, -0.002728206804022193, 0.02129434421658516, -0.025097405537962914, -0.02416062168776989, -0.02561473473906517, 0.017393410205841064, 0.010947782546281815, -0.023391621187329292, 0.0027963684406131506, 0.0010870881378650665, 0.019798288121819496, -0.0031931030098348856, -0.010759027674794197, -0.0019190077437087893, 0.001620145863853395, -0.021923527121543884, -0.012052347883582115, 0.02088887244462967, 0.004928599111735821, -0.0108499089255929, -0.01856788620352745, -0.00024774076882749796, -0.01972837932407856, -0.025852425023913383, -0.02460804209113121, 0.0047643124125897884, 0.0019137646304443479, -0.02964150533080101, 0.008542905561625957, 0.003775097196921706, -0.041050687432289124, -0.018693722784519196, 0.01610708236694336, 0.0012094293488189578, -0.00860582385212183, -0.015743553638458252, -0.01096875499933958, 0.02249678410589695, -0.0029676458798348904, -0.015813462436199188, -0.014485187828540802, 0.0012461316073313355, 0.006637879181653261, -0.05707387626171112, -0.030116887763142586, -0.02129434421658516, 0.04625193402171135, 0.008046549744904041, -0.0008633787510916591, -0.015086406841874123, 0.003956861328333616, -0.05738147720694542, -0.04292425513267517, -0.0053795138373970985, 0.0030165824573487043, 0.031123580411076546, 0.003890447551384568, 0.01115051843225956, 0.028802594169974327, 0.01746332086622715, 0.010731063783168793, -0.0298931784927845, -0.0025394519325345755, -0.041302360594272614, -0.02602020837366581, 0.012835330329835415, 0.00035500770900398493, -0.04337167367339134, -0.0004954815376549959, 0.008493969216942787, 0.009486679919064045, 0.011311310343444347, 0.03050837852060795, 0.009801271371543407, 0.02919408492743969, -0.012828339822590351, 0.013862996362149715, 0.004523125942796469, 0.0022598151117563248, 0.006763715762645006, -0.04091086983680725, -0.012604630552232265, 0.025139352306723595, -0.004212029743939638, -0.006054137367755175, 0.0013772114180028439, 0.011052645742893219, 0.0032088325824588537, -0.030871907249093056, -0.004100175108760595, -0.000595976016484201, 0.025181297212839127, -0.011206446215510368, 0.009682425297796726, 0.014918625354766846, 0.022930219769477844, 0.025684643536806107, -0.007214630488306284, -0.005267658736556768, 0.018707703799009323, -0.006036660168319941, -0.03201841935515404, 0.02576853521168232, 0.028397120535373688, 0.0018421076238155365, 0.0037471335381269455, 0.0005099002737551928, 0.003733151825144887, 0.008514941670000553, -0.0019067736575379968, -0.011737756431102753, -0.008990324102342129, -0.00532358605414629, -0.005851400550454855, -0.003350398736074567, -0.009549598209559917, -0.0018753145122900605, 0.01061920914798975, 0.0015030479989945889, -0.004848203621804714, -0.0061555057764053345, 0.017631102353334427, -0.00659243855625391, -0.012010402046144009, 0.01856788620352745, -0.010856900364160538, -0.0459163673222065, 0.00392540218308568, 0.006256874185055494, -0.010556290857493877, -0.004767808131873608, 0.22169607877731323, 0.014988534152507782, 0.004208534490317106, 0.0298931784927845, -0.006637879181653261, -0.002600622596219182, 0.014275460503995419, 0.009703397750854492, -0.011395201086997986, 0.03120747022330761, -0.0013116715708747506, 0.0002763598458841443, -0.004246984608471394, 0.0012041861191391945, 0.005491368472576141, -0.004299416206777096, -0.027712009847164154, -0.04918811842799187, 0.006152010522782803, -0.005239695310592651, 0.005851400550454855, -0.006903534289449453, -0.026845136657357216, -0.01691802777349949, 0.01786879450082779, 0.005991219077259302, -0.0014707149239256978, -0.012898248620331287, 0.0066833202727139, -0.0047608171589672565, -0.009773307479918003, -0.0024538133293390274, 0.012269065715372562, -0.005288631655275822, -0.02174176461994648, -0.008549896068871021, 0.025964280590415, -0.02446822263300419, 0.011828637681901455, 0.006767211481928825, 0.023419585078954697, 0.0028068546671420336, 0.015729572623968124, -0.020609235391020775, 0.012534720823168755, -0.005204740446060896, -0.01645662821829319, -5.5408509069820866e-05, -0.010514345020055771, 0.02435636892914772, -0.017029883340001106, -0.01252773031592369, 0.012548702768981457, 0.0033451556228101254, 0.005155804101377726, -0.0011971951462328434, -0.004037256818264723, 0.003726160852238536, -0.0069000390358269215, 0.016498573124408722, -0.006435142830014229, 0.012443839572370052, -0.014848715625703335, 0.007004902698099613, -0.035513877868652344, 0.02938983216881752, -0.05053037777543068, 0.023335693404078484, -0.0048971399664878845, -0.020804980769753456, -0.012821349315345287, -0.008689714595675468, -0.014862697571516037, -0.010129844769835472, 0.007934695109724998, -0.019252996891736984, 0.02491564117372036, 0.0007008397951722145, 0.02133629098534584, 0.019057249650359154, -0.011891555972397327, -0.012856303714215755, -0.008521932177245617, -0.005036958493292332, 0.0003255147603340447, -0.011003709398210049, 0.017351465299725533, -0.0201338529586792, 0.0022370945662260056, -0.02119647152721882, -0.012877276167273521, -0.006242892239242792, -0.03126339986920357, -0.03612907975912094, 0.014750842936336994, -0.005306108854711056, 0.01152103766798973, 0.0076550585217773914, -0.004138625226914883, -0.025754552334547043, -0.028620829805731773, 0.0541376918554306, 0.024733878672122955, -0.005620700307190418, -0.00493209483101964, 0.004484675824642181, -0.012373929843306541, 0.014918625354766846, 0.0018770622555166483, -0.02470591478049755, -0.00024184216454159468, -0.030927833169698715, 0.008647768758237362, -0.021462127566337585, 0.016246899962425232, 0.018861504271626472, -0.006952470634132624, -0.024384332820773125, -0.0034412806853652, 0.008312204852700233, -0.010241699405014515, -0.014002814888954163, 0.02143416367471218, 0.0007620104006491601, -0.022077327594161034, -0.02797766588628292, -0.027614137157797813, 0.03120747022330761, -0.022818366065621376, -0.005330577027052641, 0.014513151720166206, -0.013254785910248756, 0.013310713693499565, -0.010283644311130047, -0.0021968968212604523, 0.010171789675951004, 0.009025278501212597, -0.018050557002425194, -0.010982736945152283, -0.014960570260882378, 0.010381517931818962, 0.00036156168789602816, 0.01145112793892622, 0.006375719793140888, 0.017701011151075363, -0.017784902825951576, 0.005599727388471365, 0.006477088201791048, -0.0033923443406820297, -0.017351465299725533, -0.00840308703482151, 0.010122853331267834, 0.010584253817796707, -0.0008074513752944767, 0.0037646109703928232, 0.004593035206198692, 0.004593035206198692, -0.009430752135813236, -0.012758431024849415, 0.012199156917631626, -0.02622993476688862, 0.008172386325895786, 0.019364850595593452, -0.003313696477562189, -0.014820752665400505, -0.03277343884110451, -0.17885571718215942, 0.009990026243031025, 0.011514046229422092, 0.0023681744933128357, 0.036716315895318985, 0.0013160408707335591, 0.015841426327824593, 0.013911932706832886, -0.017393410205841064, -0.01767304725944996, -0.013247795403003693, -0.006812652572989464, -0.01235994789749384, -0.03366827592253685, -7.351390377152711e-05, -0.004939085803925991, -0.017687030136585236, 0.016540518030524254, 0.016680337488651276, 0.01417059637606144, 0.03386402130126953, -0.04046345129609108, 0.01519826240837574, -0.023279765620827675, 0.012751439586281776, -0.0034867217764258385, 0.001997655723243952, 0.025740571320056915, 0.020259689539670944, -0.04001603275537491, -0.0008773605804890394, -0.008801569230854511, 0.03232601657509804, 0.010738054290413857, 0.021867601200938225, 0.021629909053444862, 0.002752674976363778, 0.018889468163251877, -0.013429558835923672, 0.0237551499158144, 0.05220819637179375, 0.025880388915538788, 0.019085213541984558, -0.01665237359702587, 0.002079799072816968, 0.016316808760166168, -0.002895988989621401, -0.026915045455098152, 0.0027002431452274323, -0.004058229736983776, 0.007354448549449444, 0.013527431525290012, 0.005208236165344715, 0.006686815991997719, 0.0017879280494526029, -0.004404280334711075, -0.0008882838883437216, 0.024831751361489296, 0.006651861127465963, -0.0007869155379012227, 0.008521932177245617, -0.004904130939394236, 0.018232321366667747, -0.012877276167273521, 0.0056521594524383545, -0.02632780745625496, 0.0051208497025072575, 0.019868196919560432, -0.03940083086490631, 0.016498573124408722, -0.03064819797873497, 0.008333177305758, 0.017435356974601746, 0.006498061120510101, -0.006110064685344696, 0.01437333319336176, -0.0007816723664291203, 0.01645662821829319, 0.00913713313639164, 0.003556631039828062, 0.008235304616391659, 0.028550921007990837, -0.010304617695510387, 0.0024398313835263252, -0.019252996891736984, 0.0028068546671420336, 0.013401594944298267, -0.004495162051171064, -0.0030427982565015554, 0.0032595167867839336, 0.03512238711118698, -0.02793571911752224, 0.002829575212672353, -0.007039857096970081, -0.004795771557837725, 0.008850505575537682, 0.02355940267443657, -0.016540518030524254, 0.026551516726613045, 0.004526621196419001, -0.0079486770555377, 0.012450830079615116, -0.022860310971736908, -0.009074214845895767, 0.019015304744243622, 0.01998005248606205, -0.010563281364738941, 0.0037401425652205944, 0.045776549726724625, 0.01220614742487669, -0.016736265271902084, 0.011800674721598625, 0.011045655235648155, 0.04021177813410759, -0.019798288121819496, 0.03050837852060795, 0.02813146635890007, -0.023573385551571846, 0.02214723639190197, -0.0040092929266393185, 0.06996513903141022, -0.014611024409532547, -0.024090712890028954, 0.03548591583967209, 0.032381944358348846, -0.03987621143460274, -0.13131745159626007, -0.017742957919836044, 0.022972166538238525, 0.026705317199230194, -0.003062023315578699, 0.02269252948462963, -0.00518376799300313, 0.022384928539395332, -0.034003838896751404, 0.025153333321213722, -0.032437872141599655, -0.0033294260501861572, -0.00047975193592719734, 0.008577859960496426, -0.010360544547438622, -0.003932393155992031, 0.008472995832562447, 0.008228314109146595, -0.02702689915895462, 0.02592233382165432, 0.0162049550563097, -0.011542010121047497, 0.008997315540909767, -0.006756724789738655, -0.0005361162475310266, 0.011737756431102753, -0.02032959833741188, 0.012241102755069733, 0.0016035424778237939, 0.0031983463559299707, 0.016526537016034126, 0.006085596513003111, -0.015841426327824593, -0.024118676781654358, -0.0024398313835263252, 0.002691504545509815, -0.0007563302642665803, -0.014764824882149696, 0.02396487630903721, -0.009577561169862747, -0.01686210185289383, 0.016820155084133148, 0.00533407274633646, 0.012905240058898926, 0.009186070412397385, 0.0018089007353410125, -0.008472995832562447, 0.024132659658789635, 0.002936186734586954, -0.018987340852618217, -0.022888274863362312, 0.022986147552728653, -0.020525343716144562, 0.003214075928553939, 0.01877761259675026, -0.010004008188843727, 0.03668835386633873, 0.019868196919560432, -0.017589157447218895, 0.0057675098069012165, 0.002733450150117278, -0.0034867217764258385, 0.011744746938347816, 0.029725395143032074, 0.015743553638458252, -0.02249678410589695, 0.013597341254353523, 0.00648058345541358, 0.00568711431697011, -0.007354448549449444, -0.014114669524133205, 0.01059823576360941, -0.023335693404078484, 0.00498103117570281, -0.040239740163087845, 0.0016620914684608579, -0.033640310168266296, -0.008445032872259617, 0.006714779417961836, 0.029529649764299393, -0.035402022302150726, 0.001636749366298318, 0.009878171607851982, -0.028103502467274666, -0.002677522599697113, 0.004809753503650427, 0.014485187828540802, 0.0023174902889877558, 0.009325888007879257, -0.030284669250249863, -0.022356964647769928, 0.009423761628568172, -0.010996718890964985, -0.015212243422865868, 0.005197749473154545, 0.02702689915895462, -0.007270557805895805, 0.006043651141226292, -0.0015878129051998258, 0.018637795001268387, -0.03366827592253685, -0.0049950131215155125, -0.03159896284341812, 0.005421459209173918, 0.02611808106303215, -0.01655450090765953, 0.014918625354766846, -0.02274845726788044, -0.003810051828622818, -0.027795901522040367, -0.017477301880717278, 0.009647470898926258, -0.015030479989945889, 0.02787979319691658, -0.004222516436129808, -0.02445424161851406, -0.03000503219664097, -0.011087600141763687, 0.0009752334444783628, -0.02350347675383091, 0.007515239994972944, 0.006735752336680889, -0.0008170639048330486, 0.024831751361489296, 0.0030410506296902895, 0.03719170019030571, -0.012415875680744648, -0.02611808106303215, -0.03534609451889992, 0.0275302454829216, -0.002474786015227437, -0.0037471335381269455, 0.02938983216881752, -0.03858988359570503, -0.0029222050216048956, 0.004949572030454874, -0.006627392955124378, 0.016428664326667786, 0.015827445313334465, 0.011458119377493858, 0.008144422434270382, 0.026383735239505768, -0.03428347408771515, -0.0516209602355957, -0.00633027870208025, -0.0020430965814739466, -0.02546093426644802, 0.017085811123251915, 0.012842321768403053, 0.010325590148568153, -0.0008341042557731271, -0.0013160408707335591, 0.021462127566337585, 0.01645662821829319, -0.012290039099752903, -0.041498105973005295, -0.03159896284341812, 0.005844410043209791, 0.008445032872259617, 0.013198859058320522, 0.006326783448457718, -0.02300013042986393, 0.023769130930304527, 0.010108871385455132, 0.0076620494946837425, -0.03115154430270195, 0.0011202950263395905, -0.026635408401489258, -0.025195278227329254, 0.015254189260303974, -0.010220726020634174, -0.01645662821829319, 0.002558676991611719, -0.03330474719405174, 0.023573385551571846, 0.017742957919836044, 0.014652970246970654, -0.019518651068210602, -0.0009105674689635634, 0.006955966353416443, -0.02189556509256363, 0.010800972580909729, -0.01726757362484932, -0.042476836591959, -0.018246304243803024, -0.015939299017190933, 0.026789208874106407, -0.0013055545277893543, -0.005917814560234547, 0.033444564789533615, -0.0022440855391323566, 0.011227418668568134, 0.0033364170230925083, 0.00022065093799028546, -0.02611808106303215, -0.011632892303168774, 0.01742137409746647, 0.013338676653802395, -0.020846925675868988, -0.0024048767518252134, 0.02561473473906517, 0.012136238627135754, 0.016624409705400467, 0.00658195186406374, 0.001073980238288641, -0.009997016750276089, 0.010276653803884983, 0.013010104186832905, -0.010675135999917984, 0.014457223936915398, 0.006630888674408197, 0.01570160873234272, -0.004841212648898363, -0.012338975444436073, 0.01240888424217701, 0.031179506331682205, -0.00608909223228693, 0.019308922812342644, -0.009444734081625938, -0.007836822420358658, -0.011982438154518604, 0.02119647152721882, 0.005029967520385981, -0.006235901266336441, 0.031067652627825737, 0.003415064886212349, 0.01852593943476677, 0.04172181710600853, 0.029361868277192116, 0.0031249416060745716, -0.002189905848354101, -0.013639286160469055, 0.023783111944794655, 0.01135325524955988, 0.009990026243031025, -0.014387315139174461, -0.008787587285041809, -0.024999532848596573, 0.020119870081543922, 0.033444564789533615, -0.006071614567190409, 0.07002106308937073, 0.019462723284959793, -0.02178370952606201, 0.002927448134869337, 0.008368132635951042, 0.00359333329834044, 0.01519826240837574, 0.0014549853513017297, 0.00938880629837513, -0.027418391779065132, 0.026397718116641045, 0.0024433268699795008, -0.009151115082204342, -0.042476836591959, 0.013107976876199245, 0.013492477126419544, -0.019099196419119835, 0.011562983505427837, -0.00557525921612978, -0.01293320395052433, 0.016666354611516, -0.023880986496806145, 0.01701590232551098, -0.0176171213388443, -0.008109468035399914, -0.004551089368760586, 0.025446951389312744, 0.0022196173667907715, -0.0065435017459094524, -0.03227009251713753, 0.012513748370110989, 0.009430752135813236, -0.027040882036089897, -0.010807964019477367, -6.947227666387334e-05, -0.0026390727143734694, -0.0020623216405510902, -0.009969052858650684, 0.0198262520134449, 0.004928599111735821, -0.0046349805779755116, 0.01437333319336176, -0.0239089485257864, -0.012115266174077988, 0.008920415304601192, -0.00723560294136405, -0.001317788613960147, -0.017994631081819534, -0.05265561491250992]"
Developing with Dragonfly: Cache-Aside,Developing with Dragonfly: Cache-Aside,"## Introduction  In the realm of web application development (or any other applications involving backend servers), the quest for optimal performance often intersects with the challenge of managing data retrieval efficiently. Imagine a scenario where a web application is tasked with fetching a large amount of data from its main database: user profiles, blog posts, product details, transaction history, and more. These queries to the primary database will inevitably introduce significant latency, resulting in a poor user experience and potentially pushing the database to its limits.  A common solution is to add a cache that can relieve the primary database of much of the load. This cache mechanism operates as a strategic intermediary, positioned between the intricate network of services constituting your application and the primary database itself. Its fundamental purpose is to store a duplicate copy of the most frequently requested data or data anticipated to be accessed imminently.  ## Where to Cache?  While caching within individual services might appear to be a convenient solution, it introduces challenges. This approach leads to stateful services, potentially resulting in data inconsistencies across multiple instances of the same service application.  Redis has traditionally occupied the role of a centralized cache service, offering seamless data storage and retrieval. However, since Redis is often limited by its single-threaded data manipulation and complex cluster management, the emergence of Dragonfly takes the spotlight. Dragonfly can serve as a drop-in replacement for Redis, retaining compatibility while leveraging novel algorithms and data structures on top of a multi-threaded, shared-nothing architecture to elevate your application's cache management to unprecedented levels of speed and scalability.  In this blog post, we will see code examples implementing the caching layer in your service as well as discuss different cache eviction strategies.  ---  ## A Basic Cache-Aside Implementation  The service code example will be implemented in Go using the [Fiber](https://github.com/gofiber/fiber) web framework instead of the standard library. Fiber is inspired by [Express](https://github.com/expressjs/express), and it is an easier option to demonstrate the caching layer in this blog post. But the general ideas and techniques can be applied to other programming languages and frameworks as well. If you want to follow along, the sample application code can be found in [this GitHub repo](https://github.com/dragonflydb/dragonfly-examples/tree/main/cache-aside-with-expiration).  ### 1. The Cache-Aside Pattern  The code example presented in this blog post brings to life the Cache-Aside pattern depicted below. Cache-Aside (or Lazy-Loading) is the most common caching pattern available. The fundamental data retrieval logic can be summarized as:  - When a service within your application needs specific data, it queries the cache first. - Ideally, the required data is readily available in the cache; this is often referred to as a **cache hit**. With a cache hit, the service can respond to the query directly. This fast-track journey sidesteps the need to engage the database, thus substantially reducing the response time. - If the required data is absent from the cache, aptly termed a **cache miss**, the service redirects the query to the primary database instead. - After data retrieval from the database, the cache is also lazily populated, and the service can eventually respond to the query.  As we delve into the intricacies of the code and concepts, it's valuable to maintain the visualization of the Cache-Aside pattern. In times of uncertainty or confusion, this illustration serves as a steadfast point of reference.  ![architecture](/assets/blog/developing-with-dragonfly-part-01-cache-aside/architecture.png)  ### 2. Connect to Dragonfly  Firstly, let's create a client that talks to Dragonfly:  ```go import ( ""context"" ""log"" ""time""  ""github.com/gofiber/fiber/v2"" ""github.com/redis/go-redis/v9"" )  // Use local Dragonfly instance address & credentials. func createDragonflyClient() *redis.Client { client := redis.NewClient(&redis.Options{Addr: ""localhost:6379""})  err := client.Ping(context.Background()).Err() if err != nil { log.Fatal(""failed to connect with dragonfly"", err) }  return client } ```  In the provided code snippet, what's noteworthy is the usage of the [go-redis](https://github.com/redis/go-redis) library. It's important to highlight that due to Dragonfly's impressive compatibility with the RESP wire protocol, the very same code can seamlessly connect to Dragonfly as long as the correct network address and credential are provided. This inherent adaptability minimizes friction when considering the switch to Dragonfly, showcasing its role as an effortless upgrade path for optimizing cache management in your web application.  ### 3. Create a Cache Middleware  Next, let's create a cache middleware:  ```go import ( ""context"" ""log"" ""time""  ""github.com/gofiber/fiber/v2"" ""github.com/gofiber/fiber/v2/middleware/cache"" ""github.com/redis/go-redis/v9"" )  func createServiceApp() *fiber.App { client := createDragonflyClient()  // Create cache middleware connecting to the local Dragonfly instance. cacheMiddleware := cache.New(cache.Config{ Storage:              &CacheStorage{client: client}, Expiration:           time.Second * 30, Methods:              []string{fiber.MethodGet}, MaxBytes:             0, // 0 means no limit StoreResponseHeaders: false, })  // ... } ```  In the Fiber framework, a middleware function behaves as a link in the chain of actions during an HTTP request cycle. It gains access to the context, encapsulating the request's scope, to enact a specific task. In the context of this tutorial, the middleware is constructed using a ready-to-use cache middleware template. It's crucial to observe the configuration parameters applied to the cache middleware:  - `Storage` designates the cache's data repository. Here, a wrapper layer `CacheStorage` over the memory-store `client`, which connects and issues commands to Dragonfly, is employed. - `Expiration` dictates the time-to-live for each cached entry. - `Methods` governs which HTTP methods undergo caching. In the code snippet above, emphasis rests on caching only the `GET` endpoints. - `MaxBytes` defines the upper limit for stored response body bytes. Setting it to `0` means no limit, relinquishing control to Dragonfly's `maxmemory` and `cache_mode` flags for server-side cache eviction management. More on this follows shortly.  ### 4. The Storage Interface  In the code snippet above, we passed in a struct pointer wrapping the Dragonfly client.  ```go Storage: &CacheStorage{client: client} ```  The rationale behind this choice stems from the fact that the creators of Fiber anticipated diverse scenarios during the middleware design. Consequently, directly passing the Dragonfly client, which is equipped with uniquely typed methods for various commands, wasn't viable. Instead, the ingenious solution involves the introduction of the `CacheStorage` wrapper. This wrapper adheres to a common interface defined in Fiber, namely `Storage`, effectively representing a fixed collection of method signatures that denote specific behaviors.  The subsequent code snippet delves into the mechanics of `CacheStorage`:  ```go // CacheStorage implements the fiber.Storage interface. type CacheStorage struct { client *redis.Client }  func (m *CacheStorage) Get(key string) ([]byte, error) { // Use the actual GET command of Dragonfly. return m.client.Get(context.Background(), key).Bytes() }  func (m *CacheStorage) Set(key string, val []byte, exp time.Duration) error { // Use the actual SET command of Dragonfly. return m.client.Set(context.Background(), key, val, exp).Err() }  func (m *CacheStorage) Delete(key string) error { // Use the actual DEL command of Dragonfly. return m.client.Del(context.Background(), key).Err() }  func (m *CacheStorage) Close() error { return m.client.Close() }  func (m *CacheStorage) Reset() error { return nil }  // In https://github.com/gofiber/fiber/blob/master/app.go // Below is the 'Storage' interface defined by the Fiber framework. // The 'CacheStorage' type needs to conform all the methods defined in this interface. type Storage interface { Get(key string) ([]byte, error) Set(key string, val []byte, exp time.Duration) error Delete(key string) error Reset() error Close() error } ```  Within this construct, `CacheStorage` meticulously aligns itself with the requirements of the Fiber framework. This alignment is facilitated by method implementations such as `Get`, `Set`, and `Delete`, designed to interact with byte data at specified keys. While the implementation above leverages the `GET`, `SET`, and `DEL` commands intrinsic to Dragonfly, the underlying principle here is the realization of these methods as prescribed by the Fiber interface.  ### 5. Register Middleware & Handlers  With the cache middleware now in place, utilizing Dragonfly as the underlying in-memory store, the next step is to register the cache middleware and handlers for reading user and blog information. It's important to underline that the implementation's elegance shines through the `app.Use(cacheMiddleware)` instruction, an act that propagates the effects of the cache middleware globally for all routes. However, we configured the cache middleware to only cache responses on routes that use the HTTP GET method (i.e., `Methods: []string{fiber.MethodGet}`). Routes with any other HTTP methods (such as HEAD, POST, PUT, etc.) remain exempt from caching. Note that, for simplicity, there are only GET routes in the service application.  ```go func createServiceApp() *fiber.App { client := createDragonflyClient()  // Create cache middleware connecting to the local Dragonfly instance. cacheMiddleware := cache.New(cache.Config{ Storage:              &CacheStorage{client: client}, Expiration:           time.Second * 30, Methods:              []string{fiber.MethodGet}, MaxBytes:             0, // 0 means no limit StoreResponseHeaders: false, })  // Create Fiber application. app := fiber.New()  // Register the cache middleware globally. // However, the cache middleware itself will only cache GET requests. app.Use(cacheMiddleware)  // Register handlers. app.Get(""/users/:id"", getUserHandler) app.Get(""/blogs/:id"", getBlogHandler)  return app } ```  ### 6. Start Dragonfly & Service Application  The concluding segment of the Go code entails the creation of a service application instance, a construct meticulously established in prior sections. Subsequently, this instance is harnessed within a `main` function, as depicted below:  ```go func main() { app := createServiceApp() if err := app.Listen("":8080""); err != nil { log.Fatal(""failed to start service application"", err) } } ```  However, before running the `main` function, let's not forget another important step: starting a Dragonfly instance locally. There are several options available to [get Dragonfly up and running quickly](https://www.dragonflydb.io/docs/getting-started). For this tutorial, using the `docker-compose.yml` file below along with the `docker compose up` command, we will have a Dragonfly instance running locally.  ```yaml version: '3' services: dragonfly: container_name: ""dragonfly"" image: 'docker.dragonflydb.io/dragonflydb/dragonfly' ulimits: memlock: -1 ports: - ""6379:6379"" command: - ""--maxmemory=2GB"" - ""--cache_mode=true"" ```  As previously noted, the specification of `maxmemory` and `cache_mode` flag arguments during the Dragonfly instance initialization assumes paramount significance. Finally, we can run the `main` function, initializing a service application using Dragonfly as a caching layer.  ### 7. Interact with the Service  With the service application now running, the next step is to initiate an HTTP GET request to the service, thus engendering interaction with the caching mechanism:  ```bash curl --request GET \ --url http://localhost:8080/blogs/1000 ```  There should be a successful response from the HTTP call. In the meantime, the response body should be saved in Dragonfly automatically by our cache middleware:  ```bash dragonfly$> GET /blogs/1000_GET_body ""{\""id\"":\""1000\"",\""content\"":\""This is a micro-blog limited to 140 characters.\""}"" ```  ### 8. Recap - Cache Read & Write Paths  Now, let's trace back to the [Cache-Aside pattern illustration](#1-the-cache-aside-pattern), with a focus on the read-path:  - An HTTP GET request is initiated. - The adept cache middleware intervenes, positioning itself before the handler's execution, and tries to read from Dragonfly. - A cache miss occurs, as this is the first time of data retrieval. - The cache middleware delegates to the handler, the handler in turn reads from the primary database. - Once the cache middleware gets the response from the handler, it saves the response in Dragonfly before returning. - Future requests for the same data can be readily answered by the cache, steering clear of the primary database.  In terms of the write-path, the service application in the example refrains from incorporating HTTP POST/PUT routes for simplicity. Consequently, cache invalidation or replacement strategies remain uncharted domains for this blog post. The service application relies on the expiration configuration imbued within the cache middleware. This arrangement orchestrates the eviction of certain cached items as they gradually outlive their relevance.  However, despite the presence of automated expirations, it's important to acknowledge that the Dragonfly instance can still find itself nudging against its defined `maxmemory`, which is 2GB in the example configuration above. To visualize this potential scenario, consider our service application diligently answering user and blog requests, spanning across a diverse spectrum of tens of millions of IDs. Under these circumstances, the likelihood of nearing `maxmemory` is obvious.  Fortunately, the `cache_mode=true` argument was also specified. By doing so, Dragonfly will evict items least likely to be requested again in the future when it is nearing the `maxmemory` limit. We will discuss further about the power of the `cache_mode=true` argument [below](#high-hit-ratio-with-the-lfru-eviction-policy).  ## Dragonfly Advantages as a Cache Store  In this blog post, we created a service application with a caching layer backed by Dragonfly. As we have seen, the Fiber authors designed a generic storage interface for the middleware. This means many in-memory data stores can be adapted and used as backing storage. This revelation prompts a natural question: with a variety of options available, why is Dragonfly such a good choice for modern caching?  ### Memory Efficiency & Ultra-High Throughput  While classic hash-tables are built upon a dynamic array of linked-lists, [Dragonfly's Dashtable](https://github.com/dragonflydb/dragonfly/blob/main/docs/dashtable.md) is a dynamic array of flat hash-tables of constant size. This design allows for much better memory efficiency, resulting in steady-state memory usage that's up to 30% less, as detailed in the [Redis vs. Dragonfly Scalability and Performance blog post](https://www.dragonflydb.io/blog/scaling-performance-redis-vs-dragonfly).  Meanwhile, thanks to Dragonfly's advanced architecture, a lone AWS EC2 `c6gn.16xlarge` instance can surge to a staggering 4 million ops/sec throughput.  ### High Hit Ratio with the LFRU Eviction Policy  When `cache_mode=true` is passed during initialization, Dragonfly utilizes a universal **Least-Frequently-Recently-Used (LFRU)** cache policy to evict items when approaching the `maxmemory` limit. Compared to Redis' LRU cache policy, LFRU is resistant to fluctuations in traffic, does not require random sampling, has zero memory overhead per item, and has a very small run-time overhead. Comprehensively described in the [Dragonfly Cache Design blog post](https://www.dragonflydb.io/blog/dragonfly-cache-design), the algorithm behind LFRU, namely 2Q, takes both frequency and time sensitivity into consideration:  > 2Q improves LRU by acknowledging that just because a new item was added to the cache - does not mean it's useful. > 2Q requires an item to have been accessed at least once before to be considered as a high quality item.  By employing the 2Q algorithm, Dragonfly's LFRU eviction policy leads to a higher cache hit ratio. With a higher hit ratio, fewer requests would propagate through the caching layer and reach the primary database, which in turn leads to more steady latency and better quality of service.  Taking full advantage of Dragonfly's strengths: memory efficiency, high throughput, and high hit ratio, it becomes a compelling choice for a cache store within modern cloud-driven environments.  ## Conclusion  In this blog post, we demonstrated how to craft a caching layer using the Fiber web framework middleware. Our exploration delved primarily into the Cache-Aside pattern with a fixed cache expiration period. Also, we discussed how Dragonfly's universal LFRU eviction policy provides a higher cache hit ratio and can be highly beneficial by reducing load on the primary database.  Although we refrained from an in-depth discussion of cache replacement strategies, particularly in the context of write operations, the upcoming blog posts in the **Developing with Dragonfly** series will explore more advanced caching patterns to address this matter.  Stay tuned for further insights in our upcoming posts. And as always, [get started with Dragonfly in minutes](https://www.dragonflydb.io/docs/getting-started), and happy building until we meet again!  ---  ## Appendix  The term **middleware** was mentioned plenty of times in this tutorial. In different contexts, the term may have vastly different meanings. In the discourse of this blog, we specifically reference the concept of middleware within the realm of web frameworks. This interpretation aligns with the definition provided in the [Express documentation](https://expressjs.com/en/guide/using-middleware.html), where middleware functions are described as:  > Middleware functions are functions that have access to the request object (req), the response object (res), and the next middleware function in the application's request-response cycle.  Additionally, middleware functions can perform the following tasks:  - Execute any code. - Make changes to the request and the response objects. - End the request-response cycle. - Call the next middleware function in the stack.  Many web frameworks have concepts similar, if not identical, to middleware that are potentially suitable for implementing caching. Here is a brief, incomplete list of popular frameworks using the same concept:  - [Actix](https://github.com/actix/actix-web) & [Axum](https://github.com/tokio-rs/axum) (Rust) both have middleware. - [Django](https://github.com/django/django) (Python) has middleware. - [Express](https://github.com/expressjs/expressjs.com) (JavaScript) has middleware. - [Fiber](https://github.com/gofiber/fiber) (Go) has middleware. - [Nest](https://github.com/nestjs/nest) (TypeScript/JavaScript) has interceptors. - Note that Nest has middleware, interceptors, and exception filters. - Despite the name differences, Nest interceptors are probably the closest to the middleware definition above. - [Spring Boot](https://github.com/spring-projects/spring-boot) (Java) has interceptors.","[-0.0025748172774910927, 0.028305472806096077, -0.014117705635726452, -0.020024020224809647, -0.009990991093218327, -0.0020738663151860237, -0.015932338312268257, -0.0062496243044734, -0.009913922287523746, -0.030183162540197372, 0.020668601617217064, -0.009549594484269619, -0.0018619257025420666, 0.012478229589760303, 0.010180161334574223, 0.006677009165287018, 0.009500550106167793, -0.01851065829396248, 0.011441296897828579, -0.009423480369150639, -0.009241316467523575, 0.00044380564941093326, -0.007286557462066412, 0.009843858890235424, -0.015301770530641079, -0.005983384791761637, 0.008624762296676636, -0.006077969912439585, 0.006281152833253145, -0.004088179208338261, 0.024241816252470016, -0.025755178183317184, -0.0035872282460331917, -0.010502452030777931, 0.0019950454588979483, -7.613883644808084e-05, 0.0017892352771013975, -0.01681513339281082, 0.021004904061555862, -0.00497798016294837, 0.03626463562250137, -0.016268640756607056, -0.0044630165211856365, -0.019393453374505043, -0.009542588144540787, 0.04248623549938202, -0.005510459188371897, -0.04329896718263626, 0.01539985928684473, -0.03113602101802826, 0.02487238310277462, 0.017011309042572975, -0.02875387668609619, 0.010712641291320324, 0.004354418721050024, 0.0167450699955225, -0.014545089565217495, 0.017473725602030754, 0.016212590038776398, -0.009164247661828995, -0.004228305071592331, 0.041421275585889816, -0.008905014023184776, -0.003356020199134946, -0.008757881820201874, -0.012758482247591019, -0.005401861388236284, 0.003909518476575613, -0.014461014419794083, -0.011637473478913307, 0.018216393887996674, 0.03954358771443367, 0.011364227160811424, -0.01361325103789568, 0.01776799000799656, -0.029566608369350433, -0.0023646280169487, 0.003529426408931613, -0.001771719427779317, 0.000876226054970175, 0.004350915551185608, -0.0007492367876693606, -0.006084976252168417, 0.05579821392893791, 0.005997397471219301, 0.01832849532365799, 0.013830446638166904, 0.014839354902505875, 0.006803122349083424, 0.004592633340507746, -0.008694824762642384, -0.008905014023184776, 0.011532378382980824, 0.007657891605049372, -0.008316484279930592, -0.008722850121557713, -0.0027622359339147806, 0.006775097455829382, -0.018062254413962364, 4.3351516069378704e-05, -0.016801120713353157, 0.013220897875726223, -0.02942648157477379, -0.005027024075388908, -0.024325892329216003, 0.002131668385118246, 0.009605644270777702, -0.035283755511045456, 0.022756479680538177, 0.0012129666283726692, -0.014503052458167076, 0.028641777113080025, 0.022938644513487816, -0.014096686616539955, -0.011959763243794441, 0.014320888556540012, 0.023190870881080627, -0.030155139043927193, 0.01886097341775894, -0.030183162540197372, 0.005114602856338024, 0.042626362293958664, 0.010292262770235538, -0.007692923303693533, 0.004708237014710903, -0.006190070882439613, -0.02192973531782627, 0.006067460402846336, 0.00885596964508295, -0.00695375818759203, 0.01996796950697899, 0.014951455406844616, -0.007980181835591793, 0.010432388633489609, -0.010572514496743679, -0.002513512037694454, -0.030715642496943474, 0.009640675969421864, 0.0011157541302964091, -0.023933539167046547, 0.002869082149118185, 0.01696927100419998, -0.014909417368471622, 0.01026423741132021, -0.025755178183317184, 0.02469022013247013, 0.007202481850981712, 0.009934941306710243, -0.009080171585083008, -0.009409467689692974, 0.026287658140063286, -0.024550093337893486, -0.005713642109185457, -0.02323290891945362, -0.006221598945558071, 0.010285256430506706, -0.02134120650589466, -0.015413871966302395, -0.005895806010812521, -0.005566509440541267, 0.020514462143182755, 0.014545089565217495, 0.017782002687454224, -0.006957261357456446, 0.016198577359318733, 0.033013712614774704, 0.022434189915657043, -0.0033507654443383217, 0.0010237963870167732, -0.01296166516840458, 0.007058852817863226, 0.014117705635726452, -0.033490139991045, 0.01996796950697899, 0.00483084749430418, 0.010516464710235596, 0.005741667002439499, 0.021467318758368492, -0.010369331575930119, -0.023429084569215775, 0.012197977863252163, -0.010894805192947388, 0.002513512037694454, 0.031500350683927536, -0.022910619154572487, 0.0012444950407370925, -0.005766189191490412, 0.004203783348202705, -0.005825743079185486, -0.024606144055724144, -0.020262235775589943, 0.025965368375182152, -0.0094585120677948, -0.016801120713353157, -0.5954799056053162, -0.008246421813964844, 0.00649834843352437, -0.031808625906705856, -0.015329795889556408, -0.012176958844065666, -0.0026396254543215036, 0.020794713869690895, 0.0058537679724395275, -0.0029216292314231396, -0.0018531677778810263, -0.0033192371483892202, 0.0035872282460331917, 0.006309178192168474, -0.03200480341911316, -0.0055034528486430645, 0.0011866929708048701, -0.015932338312268257, -0.013178860768675804, -0.008491641841828823, -0.025236712768673897, 0.02934240736067295, -0.004063657019287348, -0.0029006104450672865, -0.00577669870108366, 0.008456610143184662, 0.0074617150239646435, 0.008708837442100048, 0.01758582703769207, 0.028571713715791702, -0.028922028839588165, 0.0071394252590835094, 0.016324691474437714, 0.016170552000403404, 0.05123010650277138, -0.007791011594235897, -0.008267439901828766, 0.019365428015589714, 0.004606645554304123, 0.04427985101938248, -0.0023348513059318066, -0.014783304184675217, 0.009171254001557827, 0.021102990955114365, 0.0222940631210804, 0.015582023188471794, 0.030939843505620956, -0.024241816252470016, -0.003342007752507925, 0.007706935983151197, -0.011497346684336662, -0.00843559205532074, -0.007391652092337608, -0.016534879803657532, -0.0067330594174563885, -0.00604644138365984, 0.0328175351023674, -0.014461014419794083, 0.010068060830235481, 0.01411069929599762, 0.018524670973420143, 0.024886395782232285, -0.041981782764196396, -0.00648083258420229, -0.04419577494263649, 0.025418875738978386, -0.01730557344853878, -0.031276147812604904, 0.011343208141624928, 0.00015293450269382447, 0.02995896153151989, 0.015708137303590775, -0.008176358416676521, -0.023401059210300446, 0.011441296897828579, 0.02003803290426731, 0.021593432873487473, 0.010278250090777874, 0.014432989060878754, 0.02527874894440174, 0.027030326426029205, 0.008246421813964844, -0.018776899203658104, -0.017683913931250572, 0.012814532034099102, 3.670099613373168e-05, -0.0406365692615509, -0.013522169552743435, 0.01873486116528511, 0.004074166528880596, 0.015189670026302338, 0.018342508003115654, -0.03578820824623108, -0.02809528447687626, 0.020416373386979103, 0.03491942584514618, -0.009213291108608246, -0.0017787257675081491, 0.017964167520403862, -0.012464216910302639, 0.006729556247591972, 0.0033700328785926104, -0.007580822333693504, 0.006221598945558071, 0.024087678641080856, -0.001681513269431889, -0.03427484631538391, -0.0030862775165587664, 0.04649384319782257, -0.03203282877802849, 0.0019740264397114515, -0.0041512358002364635, -0.004252827260643244, 0.006796116009354591, 0.012464216910302639, -0.016142526641488075, 0.014376938343048096, -0.005209187977015972, 0.004028625786304474, -0.024942446500062943, 0.005727654788643122, -0.009913922287523746, 0.011427284218370914, 0.0009887648047879338, 0.009122209623456001, 0.003527674823999405, -0.005755679681897163, -0.013361024670302868, -0.0017655889969319105, 0.000921329134143889, 0.007104393560439348, -0.017165448516607285, 0.011966769583523273, -0.011441296897828579, 0.04881993681192398, 0.001420528395101428, 0.016548892483115196, 0.008498648181557655, -0.003527674823999405, -0.04366329312324524, -0.003145831171423197, -0.01287058275192976, 0.01111900620162487, -0.01310179103165865, -0.016198577359318733, 0.013991591520607471, -0.04178560525178909, -0.010082073509693146, 0.01740366220474243, 0.004049644339829683, -0.0077699925750494, 0.000922204926609993, 0.003056500805541873, 0.015932338312268257, -0.006330196745693684, 0.012036832980811596, 0.00844960380345583, -0.023036731407046318, -0.0044349911622703075, -0.014573114924132824, -0.006491342093795538, 0.03029526397585869, -0.02766089327633381, -0.009535581804811954, -0.04240215942263603, -0.0120158139616251, 0.006873185746371746, 0.01914122700691223, -0.022097887471318245, -0.021313181146979332, -0.010628565214574337, -0.024325892329216003, -0.0158762875944376, 0.010908817872405052, 0.010061054490506649, -0.0003505342174321413, -0.02220998704433441, 0.01510559394955635, 0.001607947051525116, -0.00908717792481184, 0.01364828273653984, 0.00800120085477829, 0.0014713241253048182, -0.016801120713353157, 0.03755379840731621, 0.011511359363794327, 0.007398658432066441, 0.006631467957049608, -0.011048943735659122, 0.01338204275816679, 0.013662295415997505, 0.009640675969421864, -0.029258331283926964, -0.01950555481016636, -0.014699229039251804, 0.008092282339930534, -0.0006318811792880297, 0.0074617150239646435, -0.017067359760403633, 0.024858372285962105, 0.009773795492947102, -0.01817435584962368, 0.010285256430506706, -0.031500350683927536, -0.014012610539793968, -0.02106095477938652, 0.00791011843830347, -0.011027924716472626, 0.011574416421353817, -0.013788408599793911, 0.02694625034928322, 0.012744469568133354, -0.004764287732541561, -0.023555198684334755, -0.013893503695726395, 0.03483534976840019, -0.011027924716472626, -0.008834950625896454, -0.004133719950914383, 0.028515662997961044, 0.010649584233760834, -0.0067610847763717175, 0.007209488190710545, -0.008127314038574696, -0.015652086585760117, 0.0045295762829482555, -0.011294163763523102, 0.03634871169924736, 0.010922829620540142, -0.03057551570236683, -0.004333399701863527, 0.04587728902697563, -0.004564607981592417, 0.013592232018709183, 0.018664797767996788, 0.031556397676467896, 0.0009397207177244127, -0.029902910813689232, 0.02880992740392685, -0.03772194683551788, 0.014867380261421204, 0.008869982324540615, 0.017361624166369438, -0.03519967943429947, 0.014026623219251633, -0.009465518407523632, 0.006179561372846365, 0.02037433534860611, -0.01496546808630228, 0.005132118705660105, -0.011938744224607944, -0.0005565633764490485, 0.0055314782075583935, -0.006463316734880209, 0.000708512612618506, -0.00283755362033844, 0.019897907972335815, -0.009311379864811897, 0.028025221079587936, 0.016394754871726036, 0.010936842299997807, -0.002890100935474038, 0.02942648157477379, -0.03309778496623039, 0.013325992971658707, -0.0040846760384738445, -0.019337402656674385, -0.02459213137626648, -0.024325892329216003, -0.012324091047048569, 0.010292262770235538, -0.01799219287931919, -0.0015799218090251088, -0.03343408927321434, 0.031248122453689575, 0.02080872654914856, 0.009766790084540844, 0.01916925050318241, -0.006074466742575169, 0.007447702810168266, -0.01894504949450493, -0.03987988829612732, 0.0011499099200591445, 0.002695675939321518, -0.004375437740236521, -0.04066459462046623, -0.011385246179997921, 0.018874986097216606, 0.004711740184575319, 0.004378940910100937, 0.004200280178338289, -0.005282754078507423, -0.010971873998641968, -0.009696726687252522, -0.020640576258301735, 0.010222199372947216, 0.05400460213422775, -0.01525973342359066, -0.008477629162371159, -0.0069502550177276134, 0.01860874705016613, 0.017207486554980278, -0.026651985943317413, -6.387780013028532e-05, 0.04517665505409241, -0.004123210906982422, -0.01364828273653984, -0.010964867658913136, 0.027338603511452675, -0.002324341796338558, -0.0027324589900672436, -0.00848463550209999, -0.010075067169964314, -0.0371614433825016, 0.021845659241080284, -0.0019092182628810406, -0.01020118035376072, 0.014671203680336475, 0.022658390924334526, 0.02239215187728405, -0.01656290516257286, -0.015035531483590603, -9.715774649521336e-05, -0.011364227160811424, 0.05406065285205841, -0.00783304963260889, -0.00697127403691411, -0.017950154840946198, -0.007391652092337608, -0.00359773775562644, -0.010334300808608532, -0.006091982591897249, 0.016857171431183815, -0.00283755362033844, 0.027254527434706688, 0.013171854428946972, -0.017908116802573204, -0.003571464214473963, 0.020360322669148445, 0.025222700089216232, -0.03166849911212921, -0.029706735163927078, -0.010866779834032059, -0.02270042896270752, 0.014699229039251804, 0.003030227031558752, -0.0020966369193047285, 0.016520867124199867, 0.04265438765287399, 0.02745070494711399, 0.015792211517691612, 0.014131718315184116, 0.008891001343727112, -0.03780602291226387, -0.003906015306711197, -0.001963517162948847, 0.0021702030207961798, 0.015778198838233948, -0.013886497355997562, 0.0404403954744339, 0.0026116003282368183, -0.006344209425151348, 0.010285256430506706, 0.012211990542709827, 0.013290961273014545, -0.004960464313626289, 0.007244519889354706, 0.012001801282167435, 0.023316984996199608, -0.014348912984132767, -0.008316484279930592, 0.01886097341775894, -0.005612050648778677, -0.003485637018457055, 0.030127113685011864, 0.01158142276108265, -0.023190870881080627, -0.0124992486089468, 0.014362925663590431, -0.022616352885961533, 0.03340606391429901, 0.011959763243794441, -0.01594635099172592, -0.05055749788880348, -0.013970572501420975, 0.009675707668066025, -0.04072064533829689, -0.0009493543766438961, 0.00606395723298192, -0.01235912274569273, 0.011104993522167206, -0.0016219597309827805, -0.007819036953151226, -0.000994019559584558, -0.02648383378982544, -0.026091480627655983, -0.016941245645284653, -0.0021369231399148703, 0.02205584943294525, 0.015035531483590603, 0.008022219873964787, 0.00034155737375840545, -0.009556600823998451, 0.016576917842030525, 0.015918325632810593, -0.021046942099928856, -0.01293363980948925, -0.042318083345890045, -0.02738064154982567, -0.010257231071591377, 0.016142526641488075, -0.011469322256743908, -0.02149534411728382, 0.006785606499761343, -0.018118305131793022, 0.007398658432066441, 0.016675006598234177, -0.011896706186234951, 0.0026203582528978586, 0.021901709958910942, 0.0066664996556937695, 0.0012243518140166998, 0.011938744224607944, -0.03581623360514641, 0.0061655486933887005, 0.006659493315964937, -0.014657191000878811, -0.021635470911860466, 0.010894805192947388, -0.0011394004104658961, 0.014979480765759945, -0.016857171431183815, 0.022868581116199493, -0.008330496959388256, 0.015063556842505932, -0.009654688648879528, 0.006838154047727585, 0.02040236070752144, 0.006501851137727499, 0.01888899877667427, 0.0027447200845927, 0.010957861319184303, -0.00587829016149044, -0.014937442727386951, 0.035928335040807724, -0.03200480341911316, 0.04772695153951645, 0.009017114527523518, -0.021285155788064003, -0.0011394004104658961, -0.017347611486911774, -0.008876988664269447, -0.03727354481816292, -0.00791011843830347, -0.003249174216762185, 0.010061054490506649, 0.00014658505097031593, -0.02047242410480976, -0.02766089327633381, -0.01321389153599739, -0.010026022791862488, -0.00032316584838554263, -0.02862776443362236, 0.01003302913159132, -0.02090681530535221, -0.023961564525961876, 0.012443197891116142, -0.003056500805541873, -0.00061655486933887, -0.02883795276284218, -0.02034630998969078, 0.004235311411321163, -0.012779501266777515, 0.007657891605049372, -0.020892802625894547, -0.020360322669148445, -0.0028760882560163736, -0.004235311411321163, -0.012478229589760303, -0.025909317657351494, 0.0023996594827622175, -0.015862274914979935, 0.01991192065179348, 0.010411369614303112, 0.03335001319646835, 0.0025275247171521187, 0.008680812083184719, 0.00393053749576211, -0.014643178321421146, -0.022027824074029922, -0.014783304184675217, -0.007776998914778233, -0.011518365703523159, -0.006691021379083395, 0.02998698689043522, 0.02034630998969078, -0.011567410081624985, 0.002580072032287717, -0.016492843627929688, 0.018468620255589485, 0.010992893017828465, -0.0319487527012825, -0.030715642496943474, -0.0471944734454155, -0.01615653932094574, 0.054817333817481995, -0.02738064154982567, -0.0013644779101014137, -0.024073665961623192, 0.006291662342846394, 0.03668501600623131, -0.018006205558776855, 0.03570413216948509, -0.0029023620299994946, 0.01077569741755724, -0.02775898203253746, 0.015610048547387123, -0.0005333549925126135, 0.014215793460607529, -0.020262235775589943, -0.01155339740216732, -0.02694625034928322, -0.013108797371387482, 0.009731758385896683, 0.01077569741755724, 0.018398558720946312, 0.019239313900470734, -0.0005013887421227992, 0.014068661257624626, -0.005181162618100643, -0.009171254001557827, 0.002341857645660639, 0.006134020164608955, -0.02111700363457203, -0.03702131658792496, -0.04540085792541504, -0.02791311964392662, -0.016478830948472023, -0.002552046673372388, 0.027436692267656326, 0.003030227031558752, 0.025853266939520836, -0.02313482016324997, -0.016086477786302567, -0.0023348513059318066, -0.024241816252470016, 0.040300268679857254, -5.741886343457736e-05, 0.041981782764196396, 0.012471223250031471, -0.003219397272914648, -0.008022219873964787, -0.018804922699928284, 0.015680111944675446, -0.009633669629693031, 0.015932338312268257, 0.02704433910548687, -0.010894805192947388, -0.002774497028440237, -0.002916374709457159, -0.018973074853420258, 0.007664897944778204, 0.001393378945067525, 0.012120908126235008, 0.05265939235687256, 0.010572514496743679, -0.02865578979253769, -0.003072264837101102, -0.009570613503456116, 0.02694625034928322, -0.043158840388059616, 0.010831748135387897, 0.008729856461286545, -0.02939845807850361, 0.007356620393693447, 0.02906215377151966, 0.01149034034460783, 0.04299068823456764, -0.01118206325918436, 0.031528372317552567, -0.003243919461965561, 0.003671304089948535, 0.013550194911658764, -0.001063206815160811, 0.02155139483511448, 0.02351316064596176, -0.008393554016947746, 0.009157241322100163, 0.011378239840269089, 0.002105394843965769, 0.006218095775693655, 0.012807526625692844, -0.0018339004600420594, 0.03724551945924759, -0.0060429382137954235, 0.015778198838233948, -0.007994194515049458, -0.0056645977310836315, 0.01582023687660694, -0.02341507188975811, -0.014503052458167076, -0.0141877681016922, -4.4391512346919626e-05, -0.013227904215455055, 0.0240316279232502, -0.019155239686369896, -0.01594635099172592, -0.0197858065366745, -0.00995596032589674, -0.01415974274277687, -0.017880091443657875, -0.008940045721828938, 0.017529776319861412, -0.030071062967181206, -0.013935541734099388, -0.023120807483792305, -0.0037098387256264687, 0.02016414701938629, 0.008260433562099934, -0.028669800609350204, -0.008533679880201817, 0.03486337512731552, -0.022223999723792076, 0.04122510179877281, 0.00806425791233778, -0.007727955002337694, -0.03346211463212967, 0.019211288541555405, -0.02862776443362236, -0.014271844178438187, 0.011287158355116844, -0.018973074853420258, -0.04158942773938179, -0.024017615243792534, 0.013872484676539898, 0.01643679291009903, -0.015091581270098686, 0.01468521635979414, 0.010691622272133827, -0.005072565283626318, -0.0015413871733471751, 0.0006940620951354504, -0.0015501450980082154, 0.017361624166369438, -0.022532278671860695, -0.013466118834912777, 0.010509458370506763, -0.0009335901704616845, 0.009703733026981354, -0.0033700328785926104, -0.0030354817863553762, -0.023779399693012238, -0.03049144148826599, -0.017543788999319077, -0.01717946119606495, 0.01932338997721672, -0.01668901927769184, 0.01411069929599762, -0.005356320645660162, -0.025629064068198204, -0.016240615397691727, 0.00952156912535429, 0.012695425190031528, 0.0228265430778265, 0.01172154862433672, -0.005156640894711018, 0.02998698689043522, 0.007135922089219093, -0.009591631591320038, 0.009549594484269619, -0.009143228642642498, -0.008491641841828823, -0.049912918359041214, -0.018622759729623795, -0.023807425051927567, 0.060366325080394745, 0.015624061226844788, -0.007419677451252937, -0.014839354902505875, 0.013893503695726395, -0.041477326303720474, -0.011854669079184532, 0.0015466419281437993, 0.013403061777353287, 0.0241297148168087, -0.002841056790202856, 0.022027824074029922, 0.021467318758368492, 0.009934941306710243, 0.011798618361353874, -0.011076969094574451, 0.011917725205421448, -0.01513361930847168, -0.013129816390573978, 0.048091281205415726, 0.007286557462066412, -0.04156140238046646, -0.03292963653802872, -0.008365528658032417, -0.018258431926369667, -0.005563006270676851, 0.009577619843184948, -0.020738663151860237, -0.020738663151860237, -0.02474627085030079, -0.003972575068473816, -0.007720948662608862, -0.011651486158370972, 0.0078050242736935616, -0.03049144148826599, 0.021327193826436996, 0.03598438575863838, -0.01755780167877674, -0.00203533167950809, 0.003958562389016151, 0.018973074853420258, 0.0022437693551182747, 0.00980182085186243, 0.0031563404481858015, 0.0008911144686862826, 0.008848963305354118, -0.000592032796703279, 0.014278850518167019, -0.01009608618915081, 0.018692823126912117, 0.048960063606500626, 0.001729681622236967, -0.0029549093451350927, 0.002646631794050336, -0.011111999861896038, -0.038786906749010086, -0.0029496545903384686, -0.013248923234641552, -0.018034229055047035, 0.014979480765759945, -0.025362825021147728, 0.01799219287931919, 0.002602842403575778, -0.024508055299520493, -0.032116904854774475, -0.015301770530641079, 0.003716845065355301, 0.03026723861694336, 0.00245746155269444, -0.007854068651795387, -0.009577619843184948, 0.02400360256433487, 0.01408267393708229, -0.017375636845827103, 0.0030845259316265583, 0.025194674730300903, -0.002087878994643688, 0.010950854979455471, 0.012534280307590961, -0.009815833531320095, -0.028179360553622246, -0.007128915749490261, 0.0012348613236099482, 0.015413871966302395, -0.011882693506777287, 0.21713940799236298, 0.010138124227523804, -0.004385947249829769, 0.014005604200065136, -0.007097387220710516, 0.029790811240673065, 0.002438194351270795, 0.004942948464304209, -0.03192072734236717, 0.02164948359131813, -0.015273746103048325, -0.00902412086725235, -0.035900309681892395, -0.007086877711117268, 0.02279851771891117, -0.001324191689491272, -0.017263537272810936, -0.03315383568406105, -0.006060454063117504, -0.005013011395931244, 0.0010343057801946998, 0.005079571157693863, -0.028613751754164696, -0.004851866513490677, 0.036460813134908676, -0.010565508157014847, 0.005135621875524521, 0.00435792189091444, 0.010306275449693203, 0.011609448119997978, -0.002371634356677532, 0.00043658039066940546, 0.013410068117082119, 0.02295265719294548, -0.011602441780269146, 0.0219577606767416, 0.02592333033680916, 0.0009414723026566207, -0.0014940946130082011, 0.00806425791233778, 0.01687118411064148, -0.017081372439861298, 0.03318186104297638, 0.002299819840118289, 0.02574116550385952, -0.013115803711116314, -0.0005802096566185355, 0.008358522318303585, 0.019995994865894318, 0.029510557651519775, -0.03452707454562187, 0.023064756765961647, 0.0072375135496258736, 0.02164948359131813, 0.0008657166035845876, 0.00189170241355896, -0.008386547677218914, -0.009745771065354347, 0.000944975414313376, 0.009962966665625572, -0.0197858065366745, 0.016422780230641365, 0.0018864476587623358, 0.01730557344853878, -0.048147331923246384, 0.013711339794099331, -0.01919727586209774, 0.036516863852739334, 0.008358522318303585, -0.016506856307387352, -0.026778098195791245, -0.013059752993285656, -0.02453608065843582, 0.0070833745412528515, -0.006235611625015736, -0.013725352473556995, 0.003364778123795986, 0.029314382001757622, 0.002841056790202856, 0.036460813134908676, -0.014124711975455284, -0.017683913931250572, -0.0046802121214568615, 0.015596035867929459, -0.014657191000878811, -0.03169652447104454, 0.019799819216132164, -0.021159041672945023, -0.02351316064596176, -0.016548892483115196, 0.0033297466579824686, -0.015049544163048267, -0.01324191689491272, -0.015077569521963596, 0.02487238310277462, -0.01965969242155552, -0.009780801832675934, 0.011013912037014961, -0.011020918376743793, -0.020542487502098083, -0.01932338997721672, 0.05896506458520889, 0.010054048150777817, 0.007734960876405239, -0.02530677430331707, -0.006652486976236105, -0.01513361930847168, 0.02164948359131813, -0.016731057316064835, -0.0014030126621946692, 0.00010766720515675843, -0.028978079557418823, 0.008421579375863075, -0.02239215187728405, -0.0019740264397114515, 0.01091582328081131, -0.0011560403509065509, 0.004837853834033012, -0.028025221079587936, -0.004550595302134752, -0.019491542130708694, -0.013732358813285828, 0.01455910224467516, -0.0024767289869487286, -0.023022718727588654, -0.024984484538435936, -0.028585726395249367, -0.012169952504336834, 0.010089079849421978, -0.05008107051253319, 0.024017615243792534, -0.01935141533613205, 0.022896606475114822, -0.02558702789247036, 0.0016955259488895535, 0.001728805829770863, 0.021607445552945137, -0.026189569383859634, -0.016366729512810707, -0.004123210906982422, 0.005184665787965059, 0.027464717626571655, 0.048679810017347336, 0.009738764725625515, 0.023176858201622963, -0.012317084707319736, -0.009143228642642498, 0.01303873397409916, -0.00648083258420229, -0.008526673540472984, -0.02834751084446907, 0.01631067879498005, 0.004025122616440058, -0.004648683592677116, -0.004252827260643244, 0.002746471669524908, -0.01270243152976036, -0.014671203680336475, -0.0004540961526799947, -0.010523471049964428, -0.04338304325938225, 0.005275747738778591, 0.022994693368673325, 0.022560304030776024, -0.008505654521286488, -0.03525573015213013, -0.1783525049686432, 0.00844960380345583, 0.02338704653084278, -0.0025152636226266623, 0.039991989731788635, 0.010782703757286072, 0.023330997675657272, -0.01338204275816679, -0.0021159041207283735, 0.010971873998641968, -0.00015096398419700563, -0.015834249556064606, -0.02418576553463936, -0.02911820448935032, 0.01155339740216732, -0.0027061854489147663, -0.0021369231399148703, 0.007202481850981712, 0.042570311576128006, 0.022013811394572258, 0.04512060806155205, -0.033854465931653976, 0.013704333454370499, -0.0014503052225336432, 0.01415974274277687, 0.0073285955004394054, 0.003948052879422903, 0.0014757030876353383, 0.007468721363693476, -0.04624161496758461, -0.01901511289179325, 0.0024959961883723736, 0.02037433534860611, 0.0018619257025420666, 0.02382143773138523, 0.00307401642203331, 0.015834249556064606, 7.247147004818544e-05, -0.015525972470641136, 0.039067160338163376, 0.019057150930166245, 0.05010909587144852, -0.003716845065355301, -0.0015431387582793832, 0.015049544163048267, 0.005983384791761637, -0.01712341047823429, -0.015287757851183414, -0.006113001611083746, 0.0002756543399300426, 0.025853266939520836, -0.002173706190660596, 0.003312230808660388, 0.003317485563457012, 0.004739765543490648, 0.006957261357456446, 0.010803722776472569, 0.018804922699928284, 0.014895405620336533, 0.005146131385117769, 0.008666799403727055, 0.006060454063117504, 0.00771394232288003, 0.013655289076268673, 0.01566609926521778, -0.020416373386979103, -0.016787108033895493, 0.007244519889354706, -0.019575616344809532, -0.002578320447355509, -0.012821538373827934, 8.861881360644475e-05, 0.021201079711318016, 0.006547392345964909, 0.006677009165287018, 0.02213992550969124, 0.0017358121694996953, 0.021018916741013527, 0.01817435584962368, 0.0013311980292201042, -0.006740065757185221, 0.01773996464908123, -0.020206185057759285, -0.005426383577287197, -0.01219097152352333, -0.0054088677279651165, -0.004550595302134752, 0.011735561303794384, 0.0068942042998969555, 0.008968071080744267, 0.013725352473556995, -0.0482594296336174, 0.011294163763523102, -0.009129215963184834, -0.007608847692608833, 0.02446601912379265, 0.022308075800538063, -0.0018724350957199931, 0.04164547845721245, 0.016170552000403404, 0.0126673998311162, -0.00931838620454073, -0.01299669686704874, -0.021201079711318016, 0.00398658774793148, 0.008176358416676521, 0.0016745069297030568, 0.007692923303693533, 0.02701631374657154, -0.02418576553463936, -0.028137322515249252, 0.017137423157691956, 0.02127114310860634, 0.014601140283048153, -0.012723450548946857, 0.03547992929816246, 0.03606845811009407, -0.0030670100823044777, 0.01802021823823452, -0.007741967216134071, 0.06277649849653244, -0.007079871371388435, 0.008057251572608948, 0.0030477428808808327, 0.005843258462846279, -0.0180482417345047, -0.10139524936676025, -0.01600240170955658, 0.011819637380540371, 0.010964867658913136, -0.020724650472402573, -0.006134020164608955, -0.006445800885558128, 0.0326213575899601, -0.023933539167046547, 0.029286356642842293, -0.04500850662589073, -0.0010343057801946998, -0.008022219873964787, -0.0072725447826087475, -0.022630365565419197, -0.0010027774842455983, -0.0002281428169226274, -0.012303072027862072, 0.003219397272914648, 0.019127214327454567, 0.018090279772877693, -0.002110649598762393, -0.020136121660470963, -0.003581973724067211, -0.03236912935972214, 0.004554098471999168, 0.004550595302134752, 0.0018759382655844092, -0.009171254001557827, -0.0026658992283046246, 0.0012821538839489222, 0.018973074853420258, 0.010971873998641968, -0.00877890083938837, 0.013325992971658707, -0.01914122700691223, 0.0038499648217111826, 0.004967470653355122, 0.051033928990364075, -0.023681312799453735, 0.005177659448236227, -0.006995795760303736, 0.009941947646439075, -0.013311980292201042, -0.012197977863252163, 0.011805624701082706, -0.021747572347521782, 0.03873085603117943, 0.018931036815047264, 0.013557201251387596, -0.012891601771116257, -0.01879091002047062, -0.0236953254789114, -0.010761684738099575, 0.040888797491788864, -0.02995896153151989, 0.0032299067825078964, -0.003406815929338336, -0.001868931925855577, 0.008701831102371216, 0.003779901657253504, -0.023863475769758224, 0.010712641291320324, 0.02576919086277485, 0.018818935379385948, -0.009038133546710014, -0.006302171852439642, 0.010439394973218441, 0.0029514061752706766, -0.00039957836270332336, -0.015638073906302452, 0.005300269927829504, -0.02213992550969124, -0.005808227229863405, -0.023316984996199608, -0.0012585076037794352, 0.023218896239995956, -0.006361725274473429, -0.004816834814846516, 0.0020668599754571915, -0.01870683580636978, -0.02540486305952072, -0.007097387220710516, -0.05237913876771927, 0.009920928627252579, 0.023499147966504097, 0.04139325022697449, 0.0035854766611009836, 0.008043238893151283, -0.056246619671583176, -0.011090981774032116, 0.009745771065354347, 0.0036117504350841045, -0.025937343016266823, -0.010313281789422035, 0.011658492498099804, -0.003503152634948492, 0.028109297156333923, -0.010103092528879642, 0.04397157207131386, -0.014201780781149864, -0.01792212948203087, -0.05386447533965111, -0.0004072414885740727, 0.0028743366710841656, 0.0008355019381269813, 0.003856971161440015, -0.0317525751888752, -0.013066759333014488, -0.015988389030098915, 0.006712040398269892, 0.023022718727588654, -0.02701631374657154, -0.003483885433524847, -0.019309377297759056, -0.0231628455221653, -0.001109623583033681, -0.020948853343725204, 0.011048943735659122, -0.010740665718913078, -0.0020545991137623787, 0.03859072923660278, 0.0031773594673722982, 0.020738663151860237, 0.009682714007794857, -0.0062496243044734, -0.03786207363009453, -0.003906015306711197, -0.006624461617320776, 0.03657291457056999, -0.007903112098574638, -0.02939845807850361, 0.013760383240878582, -0.011048943735659122, 0.004042638000100851, 0.012814532034099102, 0.01118206325918436, 0.009570613503456116, 0.031051944941282272, -0.0007650009938515723, 0.007727955002337694, 0.013143829070031643, -0.03800220042467117, -0.048679810017347336, 0.0025625561829656363, -0.012842557393014431, -0.006344209425151348, -0.0013916273601353168, -0.00044665197492577136, -0.001965268747881055, 0.02239215187728405, 0.003856971161440015, 0.016548892483115196, 0.01243619155138731, 0.00293038715608418, -0.024073665961623192, -0.0033209887333214283, -0.01063557155430317, 0.006750575266778469, 0.007882093079388142, -0.026497846469283104, -0.00672254990786314, 0.02635772153735161, 0.022560304030776024, 0.004925432614982128, -0.03393854200839996, 0.02995896153151989, -0.006967770867049694, -0.05038934946060181, 0.001183189800940454, 0.023583224043250084, -0.024241816252470016, -0.04206585884094238, -0.004263336770236492, 0.02257431671023369, 0.009675707668066025, 0.00908717792481184, -0.014306875877082348, -0.010691622272133827, 0.013970572501420975, -0.015680111944675446, 0.006344209425151348, 0.018650785088539124, -0.022630365565419197, 0.01904313825070858, 0.03337803855538368, 0.030631566420197487, -0.010040035471320152, 0.011945750564336777, 0.015091581270098686, 0.0074617150239646435, 0.002629116177558899, -0.015091581270098686, 0.004540085792541504, 0.0026203582528978586, -0.0013618506491184235, 0.005689119920134544, -0.02006605826318264, -0.006463316734880209, 0.008225402794778347, -0.0005845886189490557, 0.006088479422032833, 0.021901709958910942, 0.0094585120677948, 0.0074617150239646435, -0.010831748135387897, -0.005902812350541353, 0.0236953254789114, -0.02040236070752144, -0.010593533515930176, 0.010369331575930119, 0.010005003772675991, -0.01947752945125103, 0.002079121069982648, -0.023176858201622963, 0.026876186951994896, -0.015764186158776283, 0.025516964495182037, -2.2537860786542296e-05, -0.016885196790099144, -0.0026221098378300667, -0.006120007950812578, -0.010950854979455471, 0.008982083760201931, 0.018804922699928284, -0.008694824762642384, 0.0005556875839829445, 0.053051743656396866, 0.004610148724168539, -0.014447001740336418, -0.011280152015388012, -0.018538683652877808, 0.01745971292257309, -0.0017471973551437259, -0.01358522567898035, -0.010929835960268974, -0.0016631217440590262, -0.010936842299997807, -0.002937393495813012, 0.011819637380540371, -0.014811329543590546, 0.09220297634601593, 0.026988288387656212, -0.008253428153693676, -0.018440594896674156, -0.01415974274277687, 0.011462315917015076, -0.010712641291320324, 0.00786107499152422, -0.010075067169964314, -0.060086075216531754, 0.007170953322201967, 0.00023711964604444802, -0.011504353024065495, -0.027184464037418365, -0.008736862801015377, 0.013599238358438015, -0.05271544307470322, 0.015231708064675331, 0.00034418475115671754, -0.01431388221681118, 0.03573215752840042, -0.003103793365880847, 0.02527874894440174, -0.02816534787416458, -0.014447001740336418, 0.0042738462798297405, 0.034723248332738876, 0.010537482798099518, -0.014615152962505817, -0.02502652257680893, 0.03831047937273979, 0.0010754679096862674, -0.028179360553622246, -0.03833850100636482, 0.010565508157014847, 0.014867380261421204, 0.00800120085477829, -0.03161244839429855, 0.030631566420197487, 0.037077367305755615, -0.004399959929287434, -0.02267240360379219, -0.024956459179520607, -0.01863677240908146, 0.006077969912439585, 0.02663797326385975, -0.010481433011591434, -0.020990891382098198, -0.03225703164935112]"
Infrastructure should be boring,Infrastructure should be boring,"Infrastructure should [be boring](https://www.google.com/search?q=infrastructure%2Bneeds%2Bto%2Bbe%2Bboring&oq=infrastructure%2Bneeds%2Bto%2Bbe%2Bboring). Boring is good. Boring means that it just works, and you dont have to worry about it. A year ago, we went on a quest to build a boring in-memory store.  We live in an era of really exciting breakthroughs. In the realm of technological advances, we witness artificial intelligence creating pictures and movies, self-driving cars driving through streets in central cities, and companies undergoing digital transformations that drastically improve their efficiency and quality of services. These are really exciting things. But behind the scenes, they are often supported by an unreliable infrastructure that doesnt meet the demands of todays hyper-connected, fast-paced world.  For example, take in-memory datastores. Redis is by far the most popular, and its product proposition is spot on. But its engine lacks the properties that would make it boring, dead-simple to use, like reliability and simplicity when its workloads grow beyond a few dozen GBs.  And unless you enjoy telling war stories about how your junior team member ran ""flushdb"" in production and caused your service traffic to stall, or how your engineering team spent a month tuning the Redis engine before Christmas you should really think whether this is how you want to spend your time. Engineers should not spend their careers intimately memorizing random quirks of the infrastructure they use. They deserve better. They deserve boring.  Last year, we embarked on a mission to change the status quo and build a boring in-memory datastore. Apparently, this idea resonated and excited a huge number of engineers around the world. In less than 5 months the Dragonfly project accumulated 15K GitHub stars, and become the most exciting project of our lives.  Heres to making infra boring .  _Want to learn more? Give us a star on our [GitHub Repo](https://github.com/dragonflydb/dragonfly), join [our Discord](https://discord.gg/HsPjXGVH85), or give us a follow on [Twitter](https://twitter.com/dragonflydbio)!_  ![](/assets/blog/infrastructure-should-be-boring/dragonfly_15k.png)","[-0.0032897072378546, 0.009166281670331955, 0.011245445348322392, -0.013048308901488781, 0.015472848899662495, 0.005225540138781071, -0.0270222257822752, -0.023375054821372032, 0.002859713975340128, -0.03818478062748909, 0.004351738840341568, -0.002484980970621109, 0.025157194584608078, -0.0029926837887614965, 0.005691797938197851, 0.019893663004040718, 0.033542927354574203, 0.0025143378879874945, 0.006783186458051205, -0.004431175068020821, -0.004666030872613192, -0.011245445348322392, -0.01653660647571087, 0.009442582726478577, -0.022629041224718094, 4.238951805746183e-05, 0.02275337651371956, -0.01946539618074894, -0.005774688441306353, 0.01713065430521965, 0.03199564293026924, -0.028348470106720924, -0.0076189967803657055, 0.0030893890652805567, -0.0035850037820637226, -0.022477075457572937, 0.0017234267434105277, -0.006002636626362801, 0.019907478243112564, 0.009380415081977844, 0.031028587371110916, -0.01579059474170208, -0.01109348051249981, -0.013476574793457985, -0.024784188717603683, 0.02119227685034275, -0.005488025955855846, -0.002790638944134116, 0.007128562778234482, -0.021717248484492302, 0.02370661497116089, 0.0215514674782753, -0.010561601258814335, 0.0031705524306744337, -0.0017286073416471481, 0.02843135967850685, -0.009953739121556282, 0.005311884451657534, 0.013165736570954323, -0.007266712840646505, 0.003092842875048518, 0.004286117386072874, -0.029647083953022957, 0.004272302147001028, -0.03174697235226631, 0.0023848218843340874, -0.011100387200713158, -0.028624771162867546, 0.020404819399118423, -0.013856489211320877, 0.04603172466158867, 0.03928998485207558, 0.005622722674161196, 0.002695660339668393, 0.004769643768668175, -0.011521746404469013, 0.006727926433086395, -0.003458941588178277, 0.006354920100420713, -0.0020895253401249647, 0.014422905631363392, 0.005304976832121611, -0.006337651517242193, 0.03448234871029854, -0.0018667577533051372, 0.027823498472571373, -0.007543013896793127, -0.010050443932414055, 0.004258487373590469, -0.003531470661982894, -0.018277302384376526, 0.01967262290418148, 0.017890481278300285, 0.015058397315442562, 0.005035583395510912, 0.0024383552372455597, -0.004068530164659023, 0.02005944401025772, 0.0006592366262339056, -0.004158328287303448, -0.0036886166781187057, 0.00030608955421485007, -0.008061078377068043, -0.010071166791021824, -0.009111021645367146, -0.008233766071498394, 0.018595049157738686, -0.02722945064306259, 0.01565244421362877, 0.013835766352713108, -0.0014756193850189447, 0.03370870649814606, 0.004375915043056011, -0.01844308339059353, 0.00023183370649348944, -0.00700422702357173, 0.026441993191838264, -0.016398457810282707, 0.0055916388519108295, -0.023900026455521584, 0.02168961800634861, 0.005829948466271162, 0.0318022295832634, -0.03130488842725754, 0.016688572242856026, 0.01628793589770794, -0.01638464257121086, -0.0016483074286952615, 0.004679846111685038, -0.02903922274708748, 0.013925564475357533, 0.024286847561597824, -0.025019044056534767, -0.011666804552078247, -0.0067382873967289925, -0.01197764277458191, -0.0006277210777625442, 0.005260077770799398, 0.008765645325183868, -0.020846901461482048, 0.0033087029587477446, 0.011404318735003471, -0.02729852683842182, -0.026718294247984886, -0.014726836234331131, 0.020515339449048042, 0.0031947288662195206, 0.0007334924885071814, -0.0005884345155209303, -0.006527608260512352, 0.01072047371417284, -0.006144240498542786, -0.011176370084285736, 0.0006506022182293236, 0.0001877982576843351, 0.030116794630885124, -0.001941013615578413, 0.020957421511411667, -0.0055985464714467525, 0.012792730703949928, 0.0279063880443573, 0.01628793589770794, -0.0017286073416471481, -0.024314476177096367, 0.04506467282772064, 0.024853263050317764, 0.016785278916358948, 0.008544604294002056, 0.004969961941242218, -0.02094360627233982, 0.007042218465358019, 0.022408001124858856, -0.04390420764684677, 0.012247036211192608, -0.006116610486060381, 0.02139950357377529, 0.00789529737085104, 0.01860886439681053, -0.023015862330794334, -0.032410092651844025, 0.018070077523589134, -0.015058397315442562, 0.03044835664331913, 0.040920160710811615, -0.009180096909403801, 0.021800139918923378, 0.0014013635227456689, 0.004444990307092667, -2.7252332074567676e-05, 0.017752330750226974, -0.010154057294130325, 0.0032344472128897905, -0.01744840107858181, -0.005570916458964348, -0.6206822991371155, -0.00040344244916923344, 0.02327834814786911, -0.03097332827746868, -0.011086572892963886, 0.0010041809873655438, 0.0012796184746548533, 0.01956210285425186, 0.000811633828561753, 0.0022276758681982756, 0.0035038404166698456, 0.004735106136649847, 0.015307068824768066, -0.010520155541598797, -0.024273032322525978, -0.008130153641104698, 0.014478165656328201, -0.002638673409819603, -0.021979734301567078, 0.01638464257121086, -0.018802274018526077, 0.05680745840072632, -0.022200774401426315, -0.02221458964049816, 0.011818770319223404, 0.00043927523074671626, 0.009801773354411125, -0.015182733535766602, -0.008896888233721256, 0.02157909795641899, -0.011210908181965351, 0.015942560508847237, 0.022435631603002548, -0.004051261581480503, 0.057304803282022476, -0.003750784322619438, -0.022352740168571472, 0.0166056826710701, 0.0031705524306744337, 0.032023269683122635, -0.014464350417256355, -0.012999956496059895, 0.017931926995515823, 0.009725790470838547, -0.027685347944498062, 0.02641436457633972, 0.01294469553977251, -0.01871938444674015, -0.00833737850189209, -0.011438855901360512, 0.015389958396553993, -0.02776823751628399, -0.015086027793586254, 0.0036748016718775034, -0.015086027793586254, 0.004116883035749197, 0.019202910363674164, -0.013676892966032028, 0.006292752455919981, 0.009995183907449245, 0.013745968230068684, 0.014063715003430843, -0.025157194584608078, -0.013801228255033493, -0.03348766639828682, 0.0056779831647872925, -0.003248262219130993, -0.0263176579028368, -0.004223949741572142, -0.017987186089158058, 0.026538699865341187, -0.02037718892097473, -0.006161509547382593, -0.012993048876523972, 0.013324609957635403, 0.005197910126298666, 0.024217771366238594, 0.006389457732439041, 0.004835265222936869, 0.04031229764223099, 0.034620501101017, -0.002524699317291379, -0.014699206687510014, -0.026607774198055267, 0.04111357033252716, 0.015624814666807652, -0.026994595304131508, -0.03702431544661522, -0.002889071125537157, -0.004382822662591934, 0.01320718228816986, 0.022490890696644783, -0.002279482316225767, -0.034620501101017, 0.040146518498659134, 0.024010546505451202, 0.010078074410557747, -0.01614978536963463, 0.021537654101848602, -0.02409343607723713, -0.0033760513179004192, -0.015804409980773926, 0.005173733923584223, 0.0029167011380195618, 0.014892617240548134, 0.016453716903924942, -0.00735651096329093, 0.015210363082587719, 0.025350606068968773, -0.029343152418732643, -0.013787413947284222, -0.0026593960355967283, -0.009401137009263039, -0.001445398898795247, 0.0020169964991509914, -0.017779961228370667, 0.0173102505505085, -0.02468748390674591, 0.0011613271199166775, -0.009256078861653805, 0.016412271186709404, -0.006569053512066603, 0.0015170645201578736, 0.00012919223809149116, -0.014409090392291546, 0.0003412747464608401, 0.023264532908797264, 0.007888389751315117, -0.004286117386072874, 0.011804955080151558, 0.007812407333403826, 0.00932515412569046, 0.026607774198055267, -0.0076120891608297825, 0.02992338500916958, 0.025723611935973167, 0.016122156754136086, -0.03373633697628975, 0.014616316184401512, -0.03276928514242172, 0.0014902978437021375, -0.013946286402642727, 0.018456898629665375, 0.0031377417035400867, -0.01758655160665512, -0.015279438346624374, -0.035974372178316116, 0.008503159508109093, 0.023969100788235664, -0.014215679839253426, -0.007985095493495464, 0.01597019098699093, -0.008786368183791637, 0.021855399012565613, -0.0028303570579737425, 0.0020325384102761745, -0.0002896841906476766, -0.02659395895898342, -0.010506341233849525, -0.0035435587633401155, -0.016080711036920547, 0.0088278129696846, -0.02139950357377529, 0.013580188155174255, -0.033321887254714966, -0.02341649867594242, -0.01176350936293602, 0.03439945727586746, -0.02087453193962574, -0.029232632368803024, 0.00507012102752924, -0.008606771938502789, 0.012709840200841427, 0.011487209238111973, -0.019064759835600853, 0.007480846252292395, -0.032023269683122635, -0.00020787323592230678, 0.012530244886875153, -0.000897114397957921, -0.007708794437348843, 0.014270939864218235, -0.017365509644150734, -0.014685391448438168, 0.051060400903224945, 0.016439901664853096, 0.019189095124602318, 0.018042447045445442, -0.008351193740963936, -0.0007710521458648145, 0.007280528079718351, 0.011556284502148628, -0.005695251747965813, -0.015984006226062775, -0.030172055587172508, -0.007280528079718351, -0.006890253163874149, -0.0034796642139554024, -0.021993549540638924, 0.010382005013525486, 0.011936197988688946, 0.02409343607723713, 0.001502386061474681, -0.0037404231261461973, 0.000368473120033741, -0.00323272030800581, 0.005805772263556719, -0.013117384165525436, 0.011238537728786469, 0.007035310845822096, 0.018208228051662445, 0.013842673972249031, 0.003982186317443848, -0.027008410543203354, -0.016453716903924942, 0.021993549540638924, -0.01011951919645071, 0.013220996595919132, -0.0038060445804148912, 0.005643445532768965, 0.005228993948549032, 0.002502249786630273, 0.01635701209306717, 0.005474211182445288, 0.006475801579654217, -0.0019945469684898853, 0.015583368949592113, 0.028196504339575768, 0.027671532705426216, -0.03716246783733368, 0.005878301337361336, 0.043848950415849686, -0.004134151618927717, -0.03448234871029854, 0.027699163183569908, 0.02285008318722248, 0.011204000562429428, -0.0353112518787384, 0.0287905503064394, -0.005971552804112434, 0.032935064285993576, 0.0054224045015871525, 0.02818268910050392, -0.008434084244072437, 0.02130279690027237, 0.025212455540895462, 0.02168961800634861, 0.008503159508109093, -0.004137605428695679, 0.012240128591656685, -0.01851215772330761, 0.0009739605593495071, -0.011293798685073853, -0.0028683484997600317, -0.004614224657416344, -0.02441118285059929, 0.007992003113031387, -0.011735879816114902, 0.02758864313364029, 0.01981077343225479, 0.02164817415177822, 0.007480846252292395, 0.038626860827207565, -0.014132789336144924, 0.01266148779541254, -0.006866076961159706, 0.006938605569303036, 0.001519654761068523, -0.00035012501757591963, 0.010243854485452175, 0.007784777320921421, -0.014561056159436703, -0.0075982739217579365, -0.01137668825685978, 0.0052013639360666275, 0.014257125556468964, 0.008199228905141354, 0.01128689106553793, -0.007985095493495464, 0.011259260587394238, -0.007176915183663368, -0.019230540841817856, -0.0010482164798304439, 0.006942059379070997, 0.00576778082177043, -0.03171934187412262, -0.021496208384633064, -0.0007930698338896036, -0.014975507743656635, -0.010181686840951443, -0.002963326871395111, -0.0076189967803657055, -0.01554192416369915, 0.003149830037727952, -0.01148030161857605, -0.0025540562346577644, 0.04506467282772064, -0.004134151618927717, -0.029868124052882195, 0.0003112702106591314, 0.01896805502474308, 0.009546195156872272, -0.024217771366238594, -0.016508977860212326, 0.017531290650367737, -0.007328880485147238, -0.010361283086240292, -0.01241972390562296, 0.014657760970294476, -0.028458990156650543, -0.013172644190490246, -0.00047316524432972074, -0.011404318735003471, -0.018097708001732826, -0.008786368183791637, 0.005567462649196386, -0.01882990449666977, 0.004199773073196411, 0.029398413375020027, 0.008371916599571705, 0.01109348051249981, -0.013310794718563557, -0.008703477680683136, 0.009566918015480042, 0.08023777604103088, -0.012336834333837032, -0.008869257755577564, 0.017600364983081818, -0.015956375747919083, -0.005505295004695654, -0.034841541200876236, -0.025530200451612473, 0.015279438346624374, -0.02568216621875763, 0.008544604294002056, -0.01758655160665512, 0.0016897525638341904, -0.0067555564455688, 0.016274120658636093, -0.0008245854405686259, -0.013145013712346554, -0.017862850800156593, -0.015376144088804722, -0.020404819399118423, -0.019368691369891167, 0.0018339470261707902, 0.010098797269165516, 0.015804409980773926, 0.058410003781318665, 0.015666259452700615, 0.018415452912449837, 0.02028048411011696, 0.0038025907706469297, -0.010133334435522556, 0.005764327012002468, 0.00623403862118721, 0.018525972962379456, 0.011411226354539394, -0.021772509440779686, 0.01681290753185749, -0.004310293588787317, 0.023789504542946815, 0.0008444445556961, 0.005543286446481943, 0.007190730422735214, 0.024922339245676994, 0.0007801182800903916, 0.0009912294335663319, 0.014284755103290081, -0.02133042737841606, 0.000684276397805661, 0.021841583773493767, -0.021275168284773827, -0.009000500664114952, 0.021731063723564148, -0.01137668825685978, -0.040257036685943604, -0.015086027793586254, 0.008724200539290905, -0.0019461943302303553, 0.0015999547904357314, -0.0024573509581387043, -0.022173145785927773, -0.0420253649353981, -0.00795055739581585, -0.022062625735998154, -0.006396365351974964, -0.011832584626972675, -0.0017329246038571, -0.024701299145817757, 0.003757691942155361, -0.008012725040316582, -0.0035608275793492794, -0.0020981598645448685, -0.007529198657721281, -0.0310838483273983, -0.0501486100256443, 0.017420770600438118, 0.009262986481189728, 0.010091889649629593, 0.009159374050796032, 0.006534515880048275, -0.018111523240804672, 0.006168417166918516, -0.0005534652154892683, -0.015362328849732876, 0.0014246763894334435, -0.052055083215236664, -0.02570979669690132, -0.0006635538302361965, -0.007204545196145773, -0.0016966600669547915, -0.0010810272069647908, 0.012426631525158882, -0.005007953383028507, 0.020197594538331032, 0.02970234490931034, 0.01603926531970501, 0.015914930030703545, 0.021137017756700516, 0.032658763229846954, 0.008786368183791637, -0.005239355377852917, -0.0388479046523571, 0.029370782896876335, 0.008710385300219059, -0.006855715531855822, -0.008544604294002056, 0.020114703103899956, -0.0027163829654455185, -0.011293798685073853, -0.00967743806540966, 0.01851215772330761, -0.020156148821115494, 0.006783186458051205, -0.002980595687404275, -0.021219907328486443, 0.0039372872561216354, 0.0009558283491060138, -0.008772552944719791, 0.0013391957618296146, 0.0038854810409247875, -0.018166782334446907, -0.00830284133553505, 0.008786368183791637, -0.014105159789323807, 0.014174235053360462, 0.011183277703821659, -0.004296478815376759, 0.01011951919645071, -0.003215451491996646, -0.020073259249329567, -0.034841541200876236, -0.011052034795284271, -0.01585967093706131, 0.013497297652065754, -0.012281574308872223, -0.03478628024458885, -0.027243265882134438, -0.03205090016126633, 0.022946787998080254, -0.015307068824768066, -0.004310293588787317, -0.010499433614313602, -0.024328291416168213, 0.0013789141084998846, 0.017683256417512894, -0.009815588593482971, -0.025309160351753235, -0.03094569779932499, -0.025088120251893997, 0.020156148821115494, 0.011183277703821659, 0.02804453857243061, -0.020902160555124283, -0.01236446388065815, 0.006962782237678766, -0.009532379917800426, -0.01197764277458191, -0.02285008318722248, 0.01208125613629818, -0.02112320251762867, 0.029481302946805954, 0.031525928527116776, 0.021786324679851532, 0.016205046325922012, 0.019948923960328102, 0.03210616111755371, 0.004472620319575071, -0.034565240144729614, -0.0032845267560333014, -0.009490935131907463, -0.008820905350148678, -0.01047180313616991, 0.02500522881746292, 0.00779859209433198, -0.012778915464878082, -0.035090211778879166, 0.006866076961159706, 0.016660943627357483, -0.018622679635882378, -0.009435675106942654, -0.03218905255198479, -0.030752288177609444, -0.028901072219014168, 0.016260307282209396, -0.00563308410346508, 0.01953447237610817, -0.016122156754136086, -0.0020688027143478394, 0.021661989390850067, -0.019838402047753334, 0.03705194592475891, -0.011694434098899364, 0.029453672468662262, -0.012620042078197002, -0.007515383884310722, 0.00011559305858099833, 0.024314476177096367, -0.014270939864218235, -0.011880937963724136, -0.01776614598929882, -0.029757604002952576, 0.013794321566820145, 0.01534851361066103, 0.016343196853995323, 0.01515510305762291, 0.020114703103899956, 0.016122156754136086, -0.003224085783585906, -0.004289571195840836, 0.006544876843690872, 0.0007805499481037259, -0.027699163183569908, -0.023927655071020126, -0.041279349476099014, -0.03044835664331913, -0.02627621404826641, 0.0031567374244332314, 0.01568007469177246, -0.016826722770929337, 0.024894708767533302, -0.026897890493273735, -0.010098797269165516, -0.004880164284259081, 0.0016595320776104927, 0.020142333582043648, -0.011252352967858315, 0.04100304841995239, 0.009774143807590008, 0.00973269809037447, -0.014795911498367786, 0.002072256524115801, 0.005222086329013109, -0.022062625735998154, 0.020460080355405807, 0.011155648157000542, -0.030641766265034676, -0.025336790829896927, -0.007681164424866438, -0.005374052096158266, 0.012302296236157417, -0.02688407525420189, 0.009048854000866413, 0.011190185323357582, 0.0004349580267444253, -0.006182231940329075, -0.021206092089414597, -0.00019211544713471085, 0.014139696955680847, -0.012454262003302574, 0.0032292664982378483, 0.007888389751315117, -0.00967743806540966, 0.009905386716127396, 0.011839492246508598, -0.015251807868480682, 0.028818180784583092, -0.0023347423411905766, -0.0084755290299654, 0.00277682370506227, 0.019824588671326637, -0.008841628208756447, -0.00036134972469881177, 0.01706157997250557, 0.026870260015130043, -0.006803908850997686, 0.01373906061053276, 0.004217042122036219, 0.026359103620052338, 0.012323019094765186, -0.004534787964075804, -0.0052151791751384735, 0.024203956127166748, -0.007335788104683161, -0.023817135021090508, -0.011010590009391308, -0.010651398450136185, 0.025212455540895462, -0.034620501101017, -0.02211788482964039, 0.011238537728786469, -0.015445219352841377, -0.018636494874954224, 0.0015775052597746253, -0.010264577344059944, 0.0011086572194471955, -0.00613733334466815, -0.005349875893443823, -0.0069144293665885925, 0.00464530847966671, -0.009470212273299694, 0.03260350227355957, -0.023886211216449738, -0.020998867228627205, 0.0027146560605615377, -0.00846171472221613, -4.9485919589642435e-05, 0.009711976163089275, 9.168656106339768e-05, -0.006006090436130762, 0.02818268910050392, -0.005146103911101818, 0.010230040177702904, 0.022836267948150635, 0.003500386606901884, -0.012019088491797447, 0.01783522218465805, -0.0036402640398591757, 0.0027820044197142124, 0.006665758788585663, 0.00030889574554748833, -0.02786494418978691, -0.03373633697628975, 0.016937242820858955, 0.019023315981030464, -0.02892870083451271, -0.0035107480362057686, 0.015431404113769531, 0.018415452912449837, 0.009553102776408195, -0.003816405776888132, -0.02593083679676056, 0.028279393911361694, 0.010865531861782074, -0.0005586458137258887, 0.004586594644933939, -0.0030013183131814003, -0.01340749952942133, 0.004700568504631519, -0.0024072714149951935, -0.022048810496926308, -0.02345794439315796, -0.0017752330750226974, -0.01692342944443226, 0.03210616111755371, -0.013538742437958717, -0.00103526480961591, 0.0006605318048968911, -0.018056262284517288, -0.01717210002243519, 0.024148697033524513, -0.001055123982951045, 0.026262398809194565, 0.019410137087106705, -0.005374052096158266, 0.020363373681902885, 0.0045762332156300545, -0.019451580941677094, 0.00040322658605873585, -0.025875577703118324, 0.0015136107103899121, -0.04373842850327492, -0.01011951919645071, -0.0007688935147598386, 0.04719218984246254, 0.010872439481317997, -0.015265623107552528, 0.002327834954485297, 0.01354565005749464, -0.03614015504717827, 0.00394764868542552, -0.0025972281582653522, 0.016025450080633163, 0.03879264369606972, 0.009463304653763771, -0.001616360154002905, 0.03589148446917534, -0.0008979778503999114, 0.0173102505505085, 0.004458805546164513, 0.017890481278300285, -0.009297524578869343, -0.0011855034390464425, 0.03893079236149788, 0.002654215320944786, -0.02620713785290718, -0.009421859867870808, 0.0019133836030960083, -0.007294343318790197, -0.003774960758164525, 0.035974372178316116, -0.005698705557733774, 0.020515339449048042, 0.017075393348932266, -0.020335745066404343, 0.009297524578869343, -0.0012899796711280942, 0.02112320251762867, -0.02818268910050392, -0.011936197988688946, 0.012240128591656685, 0.0035107480362057686, -0.0012027722550556064, -0.016370827332139015, 0.004755828995257616, 0.006147694308310747, -0.004545149393379688, -0.012108885683119297, 0.009242264553904533, -0.002395183313637972, -0.008558419533073902, 0.011639174073934555, -0.024811819195747375, -0.0016008182428777218, 0.025723611935973167, -0.019506841897964478, -0.025654535740613937, -0.004693661350756884, -0.006748648826032877, -0.015279438346624374, 0.008399546146392822, 0.002605862682685256, -0.021482393145561218, 0.010250762104988098, -0.008295933715999126, 0.005481118801981211, -0.005380959715694189, -0.006496524438261986, -0.009180096909403801, -0.005519109778106213, -0.006810816470533609, -0.006600137334316969, -0.011680619791150093, 0.01329697947949171, -0.005380959715694189, -0.01610834151506424, 0.004925062879920006, -0.022449446842074394, -0.017752330750226974, -0.0018339470261707902, -0.015237993560731411, 0.008952148258686066, 0.011335243470966816, -0.01631556637585163, -0.04448444023728371, 0.004610770847648382, 0.033432405441999435, -0.0047316523268818855, -0.012426631525158882, 0.2345241755247116, 0.008005817420780659, -0.00555364741012454, 0.04760663956403732, -0.017434585839509964, -0.005318792071193457, -0.0002398205251665786, -0.006520700640976429, -0.01869175396859646, 0.021537654101848602, 0.004769643768668175, -0.012288480997085571, -0.02307112328708172, -0.008150875568389893, 0.013497297652065754, -0.023900026455521584, -0.029978644102811813, -0.027989279478788376, -0.010768827050924301, -0.0021396048832684755, 0.004455351736396551, -0.019382506608963013, -0.022808637470006943, -0.005042491015046835, 0.007992003113031387, -0.013642355799674988, -0.010057351551949978, 0.02298823371529579, 0.007846944965422153, 0.016467532142996788, -0.008489344269037247, -0.006213315762579441, 0.0015351967886090279, 0.0005556237883865833, -0.008150875568389893, 0.0032016364857554436, 0.006624313537031412, -0.018498344346880913, -0.00422049593180418, 0.014036084525287151, 0.008268303237855434, -0.02105412632226944, 0.025488756597042084, 0.008503159508109093, 0.009408044628798962, -0.00023204956960398704, -0.02101268246769905, 0.016909614205360413, 0.01876083016395569, 0.021717248484492302, -0.021275168284773827, 0.007404863368719816, 0.012640764936804771, 0.03055887669324875, 0.0008068848983384669, -0.00830284133553505, 0.0037715069483965635, 0.043462127447128296, 0.026096617802977562, 0.0036506252363324165, -0.012958510778844357, 0.017420770600438118, -0.017890481278300285, 0.017254989594221115, -0.03404026851058006, 0.006624313537031412, -0.030365467071533203, 0.038626860827207565, 0.007888389751315117, -0.016591867431998253, -0.0016439901664853096, 0.00017808454867918044, -0.01617741584777832, 0.008772552944719791, -0.020888345316052437, -0.0176556259393692, 0.03768743947148323, 0.012903250753879547, 0.025240084156394005, 0.019631177186965942, -0.0159011147916317, -0.0197831429541111, -0.015251807868480682, -0.0007226994493976235, 0.009912294335663319, -0.02108175680041313, 0.010692844167351723, -0.014740651473402977, -0.0231401976197958, -0.036858536303043365, 0.006002636626362801, -0.021454762667417526, -0.013428222388029099, -0.02282245270907879, 0.02098505198955536, -0.00022837994038127363, 0.001469575334340334, 0.009373507462441921, -0.009497842751443386, -0.026538699865341187, -0.0263176579028368, 0.030669396743178368, 0.0318022295832634, 0.01858123391866684, -0.007328880485147238, -0.006144240498542786, 0.0017640084261074662, 0.012834175489842892, 0.01109348051249981, -0.010900069959461689, 0.001059441128745675, -0.03196801245212555, 0.0051944563165307045, -0.016730017960071564, -0.006924790795892477, 0.014174235053360462, 0.015072212554514408, -0.01670238748192787, 0.020156148821115494, 0.009408044628798962, -0.025557830929756165, -0.024203956127166748, 0.010326744988560677, 0.0023571918718516827, -0.01145957875996828, -0.008924518711864948, -0.017047764733433723, 0.028652401641011238, -0.009960646741092205, -0.023292163386940956, 0.035449400544166565, -0.0027215636800974607, -0.014450536109507084, -0.029481302946805954, -0.013020678423345089, 0.020764010027050972, 0.0034952061250805855, -0.020639674738049507, -0.013642355799674988, -0.014367645606398582, -0.017724700272083282, -0.012633857317268848, 0.0363888256251812, -0.0011725518852472305, 0.01310356892645359, -0.005660714115947485, -9.621962090022862e-05, 0.017393140122294426, 0.00482145044952631, -0.016412271186709404, -0.013815043494105339, -0.003736969316378236, -0.002333015436306596, -0.00414105923846364, 0.014754466712474823, -0.027215635403990746, -0.0173102505505085, -0.03984258696436882, 0.008530789986252785, 0.013428222388029099, -0.03987021744251251, 0.008468621410429478, 0.023264532908797264, 0.017144469544291496, -0.010202409699559212, -0.019935108721256256, -0.17672203481197357, 0.02264285646378994, 0.012088163755834103, -0.02387239597737789, 0.02059823088347912, -0.009477119892835617, 0.006202954798936844, -0.015942560508847237, -0.002364099258556962, 0.005636537913233042, -0.005135742481797934, -0.0035124749410897493, -0.046611957252025604, -0.027740607038140297, 0.0033570555970072746, 0.03310084342956543, 0.0041203368455171585, 0.022946787998080254, 0.03373633697628975, 0.010050443932414055, 0.017987186089158058, -0.03351529687643051, 0.014809726737439632, -7.047830877127126e-05, -0.010416543111205101, -0.010416543111205101, -0.006365281529724598, 0.014132789336144924, 0.004683299921452999, -0.02758864313364029, -0.025792686268687248, -0.01414660457521677, 0.02550256997346878, 0.011190185323357582, 0.030365467071533203, -0.0069006141275167465, 0.0013789141084998846, 0.00466257706284523, -0.006910975556820631, 0.039649177342653275, 0.029757604002952576, 0.033432405441999435, 0.013172644190490246, 0.0160668957978487, 0.0047316523268818855, 0.029785234481096268, -0.0009635993046686053, -0.03879264369606972, 0.013711431063711643, -0.012765100225806236, 0.02203499525785446, -0.023941470310091972, -0.01128689106553793, 0.005539832636713982, -0.003923472482711077, 0.0024487164337188005, 0.001469575334340334, 0.04553438350558281, 0.0032655310351401567, 0.001778686884790659, -0.0037404231261461973, -0.01815296709537506, 0.011770416982471943, -0.009207726456224918, -0.014782097190618515, -0.015873486176133156, 0.00978795811533928, 0.00030738473287783563, -0.025488756597042084, 0.009256078861653805, -0.01928580179810524, -0.015030767768621445, -0.0065103392116725445, 0.029149742797017097, -0.017890481278300285, 0.025101933628320694, -0.008026540279388428, 0.0119223827496171, 0.009857033379375935, 0.0007926381076686084, -0.007805499713867903, 0.009048854000866413, -0.017282620072364807, 0.007625903934240341, -0.01112801767885685, 0.001941013615578413, 0.001493751653470099, 0.01744840107858181, -0.01599782146513462, 0.0035850037820637226, 0.049153923988342285, -0.031111478805541992, 0.004603863228112459, 0.005273893009871244, -0.019548287615180016, 0.01603926531970501, 0.011639174073934555, -0.007397955749183893, 0.003306976053863764, 0.01706157997250557, -0.006265122443437576, 0.02130279690027237, -0.023181643337011337, -0.007632811553776264, 0.01773851551115513, 0.017890481278300285, 0.0067382873967289925, 0.01642608642578125, 0.034316569566726685, 0.00323272030800581, -0.03136014938354492, 0.008316656574606895, 0.021675802767276764, 0.006541423033922911, -0.018843719735741615, 0.02716037631034851, 0.014353830367326736, -0.01391865685582161, 0.012792730703949928, -0.02157909795641899, 0.06868840008974075, 0.00808870792388916, -0.025917021557688713, 0.014229495078325272, 0.025378234684467316, -0.015307068824768066, -0.10322600603103638, -0.03055887669324875, 0.007487753871828318, -0.02052915468811989, -0.01833256334066391, -0.0014963418943807483, -0.005526017397642136, 0.031525928527116776, -0.04277137666940689, 0.03525599092245102, -0.029729973524808884, -0.013462760485708714, 0.0009877756237983704, -0.0006933425320312381, 0.004144513048231602, -0.004710929933935404, -0.013379869982600212, 0.029370782896876335, -0.011169462464749813, 0.039013683795928955, 0.004500250332057476, -0.012108885683119297, 0.016191231086850166, 0.02529534511268139, -0.013538742437958717, 0.015016952529549599, -0.012571689672768116, 0.023444129154086113, 0.006164963357150555, 0.0023088392335921526, 0.012979233637452126, -0.01597019098699093, -0.0006372188800014555, -0.011190185323357582, -0.011065850034356117, 0.0030013183131814003, -0.0199627373367548, -0.009180096909403801, 0.014699206687510014, -0.02133042737841606, 0.005291161593049765, -0.009877756237983704, 0.03694142773747444, -0.010354375466704369, -0.005180641543120146, -0.0019099297933280468, -0.0036886166781187057, 0.03224431350827217, 0.0010188594460487366, -0.005197910126298666, -0.03829530254006386, -0.02023903839290142, -0.006703749764710665, -0.002702567959204316, 0.0409754179418087, -0.017213543877005577, 0.03453760966658592, -0.0003058736911043525, 0.019023315981030464, 0.008648217655718327, 0.00779859209433198, 0.0018408545292913914, -0.0014687118818983436, 0.04064385965466499, 0.010989867150783539, 0.0007602591067552567, -0.028818180784583092, -0.00464530847966671, -0.006382550112903118, -0.02709130011498928, -0.024576961994171143, -0.013594003394246101, -0.012385186739265919, -0.014782097190618515, -0.03522836044430733, -0.02620713785290718, 0.01529325358569622, 0.003923472482711077, -0.004793819971382618, 0.007432493381202221, -0.027643902227282524, -0.017669441178441048, -0.007522291503846645, -0.03578096255660057, 0.018028631806373596, 0.029785234481096268, 0.0017804137896746397, -0.004586594644933939, 0.01882990449666977, -0.03323899582028389, 0.01310356892645359, 0.012958510778844357, 0.0002730629639700055, -0.022932972759008408, 0.013780506327748299, 0.04072674736380577, 0.004151420667767525, -0.006468894425779581, -0.0008625767659395933, 0.003011679509654641, -0.02804453857243061, -0.009629085659980774, -0.03323899582028389, 0.0122746666893363, 0.026372918859124184, -0.02059823088347912, 0.01271674782037735, -0.02783731371164322, -0.01642608642578125, 0.0041272444650530815, 0.006627767346799374, 0.014878802001476288, -0.034178417176008224, 0.014367645606398582, -0.010596138425171375, -0.01291015837341547, -0.019299617037177086, -0.021800139918923378, -0.0015913203824311495, -0.04069912061095238, -0.008731107227504253, 0.020294299349188805, 0.0012070894008502364, 0.019133836030960083, 0.007929835468530655, -0.00164053647313267, -0.03351529687643051, -0.0064585329964756966, -0.023609910160303116, 0.022767191752791405, -0.004969961941242218, -0.0370795764029026, 0.018498344346880913, -0.03591911494731903, 0.0011846399866044521, -0.002434901427477598, 0.012260851450264454, -0.006078619044274092, -0.0013737333938479424, 0.010078074410557747, 0.009863940998911858, 0.04235692322254181, -0.02518482506275177, -0.053602371364831924, -0.004997591953724623, -0.03229957073926926, -0.019023315981030464, -0.009946831502020359, -0.005843763705343008, -0.015707705169916153, 0.01635701209306717, 0.010948422364890575, 0.023692799732089043, 0.028845811262726784, -0.022615225985646248, -0.02073638141155243, -0.015431404113769531, -0.01008498203009367, -0.0022518520709127188, 0.037880849093198776, -0.0031774600502103567, -0.00030803229310549796, 0.03627830371260643, 0.015113658271729946, -0.012350649572908878, -0.02575124241411686, 0.026966964825987816, -0.02275337651371956, -0.034206047654151917, 0.01851215772330761, 0.027422862127423286, -0.02307112328708172, -0.004265394993126392, 0.007349603343755007, 0.015762964263558388, 0.027491936460137367, 0.006230584811419249, -0.006613952107727528, -0.00041596233495511115, -0.025847947224974632, -0.010699751786887646, 0.02659395895898342, -0.002201772527769208, -0.028237950056791306, -0.0006730516906827688, 0.012350649572908878, 0.02627621404826641, 0.0019997276831418276, 0.009332061745226383, 0.015514293685555458, 0.025557830929756165, -0.006130425725132227, -0.02200736477971077, -0.009028131142258644, -0.025847947224974632, 0.007273620460182428, 0.004147966857999563, -0.017227359116077423, -0.011818770319223404, 0.0031550105195492506, 0.01188784558326006, 0.010982959531247616, 0.01949302665889263, 0.014270939864218235, 0.03094569779932499, -0.038129519671201706, -0.001932379207573831, 0.021523838862776756, -0.013386777602136135, -0.00588175468146801, -0.001998000778257847, 0.011715156957507133, -0.007929835468530655, -0.004572779405862093, -0.0399254746735096, 0.0119223827496171, -0.00844099186360836, 0.0038060445804148912, -0.010886254720389843, -0.02620713785290718, 0.0030324021354317665, 0.02189684472978115, 0.020391004160046577, 0.008454807102680206, 0.030614137649536133, -0.0008021359681151807, 0.013980824500322342, 0.018525972962379456, 0.011604636907577515, -0.015735335648059845, -0.0045831408351659775, -0.02289152704179287, 0.0008029994205571711, 0.008392639458179474, -0.0099813686683774, -0.021731063723564148, 0.00646544061601162, -0.02532297559082508, -0.0022363101597875357, 0.006479255389422178, 0.006727926433086395, 0.05807844549417496, 0.032548241317272186, -0.0160668957978487, 0.0019271986093372107, 0.0007352193351835012, 0.007467031013220549, -0.010575415566563606, 0.0031083847861737013, -0.013075939379632473, -0.031415410339832306, 0.021703433245420456, -0.0023761875927448273, -0.0003991252451669425, -0.018456898629665375, 0.005325699225068092, 0.03437183052301407, -0.040257036685943604, 0.0052151791751384735, -0.0012813452631235123, -0.027326157316565514, 0.0005707339732907712, 0.002697387244552374, 0.017959557473659515, -0.021523838862776756, -0.024038176983594894, -0.001998000778257847, 0.022449446842074394, 0.005325699225068092, 0.00310493097640574, -0.01822204329073429, 0.029729973524808884, 0.004883618094027042, -0.02119227685034275, -0.0143952751532197, 0.0007365145138464868, 0.0353112518787384, -0.00588175468146801, -0.03688616678118706, 0.01869175396859646, 0.02119227685034275, -0.0058334022760391235, 0.005204817745834589, -0.030779916793107986, -0.05401682108640671, 0.009256078861653805, 0.015749149024486542, -0.013504205271601677, -0.011818770319223404, -0.017033949494361877]"
The Unbearable Lightness of Horizontal Scaling,The Unbearable Lightness of Horizontal Scaling,"## <a name=""_iq5vgek6h5kg""></a>The challenge  When speaking with technical leaders and architects about the vertical scaling pattern of Dragonfly, I often encounter an initial level of skepticism: while teams managing Redis on a large scale often face difficulties due to high maintenance overhead, not everyone initially grasps how Dragonfly's multi-threading and vertical scaling capabilities can address their production issues and lower their costs.  Their argument often goes as follows:  _""It's impressive that you can achieve 1M QPS on a single instance, but I can simply deploy 32 single CPU VMs in cluster mode and attain even greater throughput. In fact, your single-node architecture is inherently limited, while horizontal scalability is boundless""_  This argument isnt wrong. Vertical scaling will never be entirely linear, as some effort must be expended to coordinate threads, and horizontal scaling can indeed achieve higher throughput using a comparable number of CPUs. Furthermore, horizontal scaling is infinite, while vertical scaling is bounded. In fact, when dealing with massive instance sizes (64 CPUs or more), its scaling efficiency tends to decline rapidly as server networking constraints are reached.  However this argument focuses on a single metric - throughput. What it does not consider is the effect of horizontal scaling on cluster reliability. Moreover, the throughput metrics they were touting depend on certain assumptions about cluster performance that dont always hold. In this blog post, I will lay out some of the problems with scaling horizontally that often fly under the radar, thus giving horizontal scaling a sheen of invincibility and vertical scaling a bad rap.  ## <a name=""_hh4t90diwq5g""></a>Hidden hurdles of horizontal scaling  Before we dive deep into the analysis of horizontal scaling, you may find it useful to read my other blog post about [memory-bounded workloads](https://www.dragonflydb.io/blog/redis-analysis-part-1-threading-model).  (TLDR: For memory-bounded workloads, vertical scaling saves memory because we do not need to keep over-provisioning margins as large as for multi-shard clusters)  Datastores operate as stateful clusters. To retrieve a key \{Y\}, one must access shard X, which means the cluster capacity is compartmentalized among shards. A stateful system is available when all its shards are available together. This means that every single shard overload can independently render the whole cluster unavailable.  This differs from stateless systems, such as web frontends, where all nodes are interchangeable. If a node goes offline in these systems, the traffic is diverted to other nodes, leading to genuine pooling of cluster capacity.  Below we discuss how decreasing node size while increasing cluster size leads to inefficiencies and higher chances of a cluster unavailability.  **Bigger clusters are more fragile**  In the world of production systems, failures are an inherent possibility. Whether it's a host failure, changes in the production environment, sudden traffic spikes, or a software bug, no system is immune to these challenges. This means that we should design our systems with failure in mind and with such a decision framework we will reach an inevitable outcome: _The more nodes in the cluster, the higher the chances of one of them to fail_.  Lets define $$P_{f}$$ as node failure probability, then the probability of node liveness is represented by $$1-P_{f}$$. As we scale up the cluster by increasing the number of shards (n), the overall cluster liveness can be computed as $$(1-P_{f})^{n}$$. Hence, the availability of the cluster decreases exponentially as the cluster size grows. To be fair, we assume that we operate on a properly designed system working in a stable environment. In such cases, the value of $$P_{f}$$ tends to be very small. Consequently, we can make an approximation and represent $$(1-P_{f})^{n}$$ as $$(1-nP_{f})$$. However, even with this approximation, it is evident that cluster availability decreases linearly with respect to the cluster size.  **Your node capacity must be larger than you think**  ![Diagram 1](/assets/blog/the-unbearable-lightness-of-horizontal-scaling/diagram-1.png)  When it comes to managing horizontally scalable clusters in production, one common observation is that the load on each server is rarely uniform. Some servers may be heavily overloaded, reaching 90% or higher utilization, while others may operate at a more relaxed 50% capacity. Additionally, the servers experiencing the highest and lowest loads can change over time. This variation is a direct result of how the load is distributed across cluster shards, especially in stateful systems where requests are directed to the servers hosting the relevant data. Uneven data distribution patterns can even lead to the emergence of hot keys, exacerbating the load imbalance. To handle potential load spikes effectively, it becomes necessary to provision each shard based on its maximum expected load, _with larger margins of over-provisioning for smaller nodes._  Lets back up this claim with math. Suppose we use a single server sustaining 1M requests per second, where each request uses on average 0.1ms of CPU time. The load on the server is $$L=1000000*0.0001=100$$. The classical [queuing theory](https://www.networkpages.nl/the-golden-rule-of-staffing-in-contact-centers/) says that we must provision the server to support $$L + (L)$$ or have 10% margin in this case. Now assume that instead of using a single server you provision 100 shards cluster. Each shard will sustain 10K qps on average (100 times less) and its load will be $$L_{\text{shard}} = 10000 \times 0.0001 = 1$$ However, for a robust and smooth experience we would need to provision each shard for $$L_{\text{shard}} + (L_{\text{shard}}) = 2$$, in other words, we would need 100% margin!  **You dont get as much throughput per node as you think, due to cloud over-commit**  ![Diagram 2](/assets/blog/the-unbearable-lightness-of-horizontal-scaling/diagram-2.png)  When we allocate a small single-CPU VM in the cloud, we do not get a guaranteed throughput capacity. Instead, we share the resources between all VMs on that server. The cloud may temporarily provide us with more network bandwidth if the host is under-utilized. However, this throughput is not guaranteed. Once a noisy neighbor hops on the host, it may take some of the bandwidth from our VM. And as you can see the difference between the best case and the worst-case is huge.  We performed the following experiment to prove it:  1. we reserved a _m5.24xlarge_ host. 1. we deployed a single `m5.large` VM with 2-vcpu into our reserved host and launched a single-threaded Redis server there. Redis-server reached 153K qps on it. 1. Then, we added another 47 _m5.large_ VMs running a Redis server into the same host and sent traffic to all of them at the same time.  > And here is the interesting part. The traffic to original redis-server went down > from 153K qps to 18.5K qps - a staggering 8.3 times reduction! > The overall throughput capacity of all Redis servers on the host was 890K qps and not 7.3M, as one could expect interpolating the result from the first experiment. And by the way, when we load tested a single Dragonfly running on all the resources of _m5.24xlarge_, it reached 1M > qps, which is consistent with what 48 Redis servers achieved on that host.  To summarize these three points, horizontal scaling is an important technique to reach highly scalable workloads for distributed systems. However, scaling out horizontally with small instances may cause instability in production environments, and eventually much higher infrastructure costs due to aggressive over-provisioning of node capacities.  ### <a name=""_ijyi77p4vtgy""></a>Scaling vertically with Dragonfly  Dragonfly is a drop-in Redis replacement that, unlike Redis, scales vertically. Workloads of millions of qps or up to 1TB of data can run on a single Dragonfly instance on all the major clouds.  To the best of our knowledge, Dragonfly is the only cost-efficient and well maintained source-available technology that provides vertical scale out of the box. A single Dragonfly instance is as powerful as a cluster of Redis instances, more predictable in terms of load and more cost-effective than a managed Redis service. By deploying a [community edition](https://github.com/dragonflydb/dragonfly) Dragonfly on the right instance type on your cloud of choice, you can potentially reduce infrastructure costs by a factor of 2-3 compared to alternatives.  [DragonflyDB Cloud](https://www.dragonflydb.io/cloud) (our managed service) will support horizontally scalable clusters of any size. DragonflyDB Cloud is designed to provide the most reliable and cost-efficient in-memory service in the world. ","[-0.008070845156908035, -0.004940210375934839, 0.004995254799723625, -0.020049823448061943, 0.01327939610928297, 0.017228811979293823, -0.02382034622132778, 0.002760807052254677, -0.02544414810836315, -0.027714718133211136, -0.0008518938557244837, 0.008229097351431847, -0.001550696324557066, -0.017916863784193993, 0.006268150173127651, 0.018659958615899086, 0.023627690970897675, -0.006309433374553919, 0.017971906810998917, -0.018040712922811508, -0.013272515498101711, -0.013974327594041824, -0.010183163918554783, -0.0011378653580322862, -0.040705133229494095, -0.0032562040723860264, 0.033439308404922485, -0.014861914329230785, -0.007912592962384224, 0.01948562078177929, 0.02373778074979782, -0.014146341010928154, -0.003522824263200164, -0.0009520914172753692, -0.013300037011504173, -0.004857644438743591, 0.02006358467042446, -0.0011585068423300982, 0.018081996589899063, -0.00858000386506319, 0.03211824968457222, -0.012357406318187714, -0.007086931262165308, -0.018742525950074196, -0.020875485613942146, 0.013430766761302948, 0.005961967166513205, -0.02972382865846157, 0.011160196736454964, -0.03222833573818207, 0.0266413576900959, 0.021205749362707138, -0.030632056295871735, 0.01989845186471939, 0.0018044153694063425, 0.01217163261026144, 0.0026954421773552895, 0.0046581095084548, 0.026434943079948425, -0.010953781194984913, 0.007768102455884218, 0.027467019855976105, -0.0018973022233694792, 0.016554521396756172, -0.018137039616703987, -0.005353041458874941, 0.006426401901990175, -0.040870264172554016, 0.01469678245484829, -0.021233271807432175, 0.025320298969745636, 0.04791591316461563, -0.006529609672725201, -0.013355081900954247, 0.0024838661774992943, -0.017228811979293823, 0.007699297275394201, -0.010857454501092434, -0.0053255194798111916, -0.0016960471402853727, 0.0006325774593278766, 0.004365687258541584, -0.005504412576556206, 0.015921514481306076, -0.0145178884267807, 0.024797379970550537, -0.036163993179798126, 0.004276240710169077, 0.0064711254090070724, 0.019251683726906776, -0.006550251040607691, 0.004073265474289656, -0.002709203166887164, 0.011070750653743744, 0.00293798022903502, -0.007320868782699108, 0.0017553915968164802, 0.0034798209089785814, 0.000738795381039381, 0.008167172782123089, -0.027274364605545998, 0.0030153861735016108, -0.022678181529045105, -0.01718752831220627, -0.028512857854366302, -0.02357264794409275, 0.009790974669158459, -0.007437837775796652, 0.00930933840572834, 0.004496417008340359, -0.019760841503739357, 0.019526904448866844, 0.018907658755779266, -0.013341320678591728, 0.008063964545726776, -0.007774983067065477, 0.02537534199655056, -0.01810951717197895, 0.015384833328425884, -0.008903387933969498, 0.04345734044909477, 0.0016496037133038044, 0.011063870042562485, -0.030549490824341774, 0.011105152778327465, -0.011628071777522564, -0.006013570819050074, -0.005335839930921793, -0.00028812160599045455, -0.010871214792132378, 0.015233462676405907, 0.028980733826756477, -0.008958431892096996, -0.02732940949499607, -0.012797759845852852, -0.01845354400575161, -0.009508873336017132, -0.019843408837914467, 0.0019833086989820004, -0.025058839470148087, -0.00952263455837965, 0.01589399203658104, -0.013341320678591728, -0.028898166492581367, -6.724629201926291e-05, 0.012997294776141644, -0.006054854020476341, 0.024412071332335472, -0.010616635903716087, -0.019155357033014297, -0.004221196752041578, -0.031127454712986946, 0.007300227414816618, 0.005428727250546217, 0.024646008387207985, 0.0324760340154171, -0.010871214792132378, 0.015219701454043388, -0.008958431892096996, -0.009185489267110825, 0.012082185596227646, 0.03065957874059677, -0.015907753258943558, 0.005986048839986324, 0.009226772002875805, 0.03423744812607765, 0.011325329542160034, -0.015260984189808369, 0.007864429615437984, -0.019884690642356873, 0.0006859014392830431, 0.05077820643782616, -0.028430292382836342, 0.019678276032209396, 0.013547736220061779, 0.011992739513516426, 0.0032458833884447813, 0.008958431892096996, -0.009687766432762146, -0.028237637132406235, 0.00939878448843956, -0.004551461432129145, 0.01786181889474392, 0.023724019527435303, -0.011559266597032547, -0.0011180838337168097, -0.003345650853589177, -0.011848248541355133, 0.013272515498101711, -0.009075400419533253, -0.006171823013573885, 0.0061133382841944695, -0.02332494966685772, -0.01640314981341362, -0.6217784881591797, -0.009123563766479492, 0.0035744281485676765, -0.030962321907281876, 0.012089066207408905, -0.001315038651227951, 0.01656828261911869, 0.013602780178189278, -0.006515848450362682, -0.0027384452987462282, -0.0016900267219170928, -0.00023673275427427143, -0.0033232891000807285, 0.0018147360533475876, -0.02878807857632637, -0.004812920931726694, 0.008187813684344292, -0.009440068155527115, -0.013705987483263016, 0.005353041458874941, -0.038751065731048584, 0.026668880134820938, 0.0018525789491832256, 0.020999334752559662, -0.014036252163350582, 0.0023049728479236364, 0.0036225917283445597, -0.0036948369815945625, -0.00674634613096714, 0.018673719838261604, -0.023379992693662643, 0.022141501307487488, 0.02384786866605282, -0.009233652614057064, 0.05157634615898132, -0.006391999311745167, -0.03872354328632355, 0.03005409426987171, -0.001224731793627143, 0.03709974139928818, -0.020614026114344597, -0.004585864022374153, 0.0276871956884861, 0.021219510585069656, -0.010004269890487194, 0.012839042581617832, 0.008277260698378086, -0.01564629375934601, -0.00789883267134428, -0.010561591945588589, -0.0042108758352696896, -0.02015991136431694, 0.007850668393075466, 0.007602970115840435, 0.00399413937702775, -0.013134905137121677, 0.026517508551478386, -0.022334154695272446, 0.006047973409295082, -0.006846113596111536, 0.01682974211871624, -0.0016100407810881734, -0.014187623746693134, -0.019430577754974365, -0.012254199013113976, 0.00999050959944725, -0.004565222188830376, -0.02724684402346611, 0.006849553436040878, -0.019705798476934433, 0.02357264794409275, -0.005160387139767408, 0.013609660789370537, -0.017710447311401367, -0.005211990792304277, 0.0060617346316576, 0.04590680077672005, -0.004599624779075384, 0.0015618770848959684, 0.025815695524215698, 0.012109708040952682, -0.01520594023168087, -0.02442583255469799, -0.002084796316921711, 0.033274173736572266, 0.0009727329597808421, -0.012832161970436573, -0.004819801542907953, 0.0014664100017398596, 0.008985953405499458, 0.008167172782123089, 0.021054379642009735, -0.011669355444610119, -0.04067761078476906, 0.013919283635914326, 0.03407231345772743, -0.018921418115496635, -0.008807060308754444, 0.017366422340273857, -0.020779158920049667, -0.013423887081444263, -0.028512857854366302, 0.0023170136846601963, 0.013437647372484207, 0.031044887378811836, -0.003091071732342243, -0.02006358467042446, -0.006526169367134571, 0.037897881120443344, 0.003142675617709756, 0.019251683726906776, -0.004661549348384142, -0.012797759845852852, 0.0016599245136603713, 0.007933234795928001, -0.020903008058667183, 0.04015469178557396, -0.018508587032556534, -0.0019953495357185602, -0.003966617397964001, 0.008352946490049362, 0.0007413756102323532, 0.015563727356493473, -0.00033176987199112773, -0.0024804261047393084, 0.011456059291958809, -0.00026984524447470903, -0.013499571941792965, 0.004276240710169077, 0.017751730978488922, -0.0029035776387900114, -0.02724684402346611, 0.0234212763607502, -0.01234364602714777, 0.04664989933371544, 0.0006940720486454666, 0.027233082801103592, 0.00914420560002327, 0.0051431856118142605, -0.034540191292762756, 0.012976652942597866, -0.011339090764522552, 0.014985763467848301, 0.002189724240452051, -0.018329694867134094, -0.008125889115035534, -0.0338246151804924, -0.0031667575240135193, 0.00816029217094183, -0.014504127204418182, -0.015921514481306076, -0.009426306933164597, -0.0004371277755126357, 0.018481066450476646, -0.010162522085011005, 0.02271946333348751, 0.015357311815023422, -0.03426497057080269, 0.0001293321984121576, -0.030714623630046844, -0.010630397126078606, 0.023297427222132683, -0.028980733826756477, 0.0007985698757693172, -0.03220081329345703, -0.029366042464971542, -0.013905522413551807, 0.015343550592660904, -0.011882650665938854, -0.021384643390774727, -0.02212774008512497, -0.023187339305877686, 0.02271946333348751, 0.007293346803635359, -0.003247603541240096, -0.015838947147130966, 0.002143280813470483, 0.008222216740250587, 0.0011645273771137, -0.0024477436672896147, 0.008985953405499458, 0.02818259410560131, -0.0054768905974924564, -0.0135821383446455, 0.04051247984170914, 0.016169212758541107, 0.01725633442401886, 0.010967542417347431, 0.006529609672725201, 0.018412260338664055, -0.00020845813560299575, 0.03308152034878731, -0.014325234107673168, -0.006976843345910311, -0.004950531292706728, -0.016678370535373688, -0.0004386328801047057, 0.014160102233290672, -0.015453638508915901, 0.021976368501782417, 0.015123373828828335, 0.005793394520878792, 0.020710352808237076, -0.013355081900954247, -0.010176283307373524, -0.023091010749340057, -0.0053564817644655704, -0.0025629922747612, 0.022444242611527443, 0.002865734975785017, 0.011325329542160034, 0.008951551280915737, 0.002580193569883704, -0.033687006682157516, -0.015123373828828335, 0.04442061111330986, -0.015384833328425884, -0.01098130363970995, 0.0006712803151458502, 0.007582328747957945, -0.008229097351431847, 0.004778518341481686, 0.011387254111468792, 0.012790879234671593, 0.0073346300050616264, -0.007224541623145342, -0.010754246264696121, 0.024467114359140396, 0.007953876629471779, -0.020627787336707115, -0.011538625694811344, 0.024632247164845467, 0.01422890741378069, -0.00020813560695387423, 0.03426497057080269, 0.02350384183228016, 0.025155166164040565, 0.0007830887334421277, 0.0032837262842804193, -0.020875485613942146, 0.03514567390084267, 0.004286561626940966, -0.0014612495433539152, -0.009983628988265991, 0.01718752831220627, 0.015549966134130955, 0.013547736220061779, -0.0033628521487116814, -0.00349014182575047, -0.005758991930633783, -0.009364382363855839, -0.003073870437219739, -0.0017313098069280386, -0.018907658755779266, 0.020104868337512016, 0.002399579854682088, 0.0028519737534224987, 0.001732169883325696, 0.01947185955941677, 0.0017313098069280386, 0.0011387254344299436, 0.02826515957713127, 0.03588877245783806, 0.003543465631082654, 0.027700956910848618, -0.009508873336017132, -0.004217756446450949, 0.00561794126406312, -0.013878000900149345, -0.010176283307373524, 0.004166152328252792, -0.023338710889220238, -0.0008269519894383848, -0.031815506517887115, -0.005304877646267414, -0.00515006622299552, 0.001868060091510415, 0.003072150284424424, -0.0228983573615551, 0.027976177632808685, -0.004458574578166008, -0.024315742775797844, 0.007203900255262852, -0.0001808285596780479, 0.0023049728479236364, -0.043787602335214615, -0.010313893668353558, 0.012027141638100147, 0.026889055967330933, 0.012529419735074043, 0.02741197496652603, 0.002532029990106821, -0.014600454829633236, -0.0033748929854482412, -0.008167172782123089, 0.0008665149798616767, 0.04945714771747589, -0.002416781149804592, -0.02170114777982235, -0.010754246264696121, 0.0190452691167593, 0.0057658725418150425, -0.028237637132406235, -0.006797949783504009, 0.04282433167099953, -0.01400873064994812, -0.012247318401932716, -0.02629733271896839, 0.017146246507763863, -0.0008979073609225452, -0.008332304656505585, -0.03751257434487343, -0.03432001546025276, -0.001525754458270967, -0.0004807760415133089, -0.005373682826757431, -0.01724257320165634, 0.0041351900435984135, 0.05622757598757744, 0.0032562040723860264, -0.012515658512711525, -0.017380183562636375, -0.015219701454043388, -0.005900042597204447, 0.04841130971908569, 0.017022397369146347, -0.008325424045324326, 0.0017330299597233534, -0.023435037583112717, -0.004355366807430983, 0.0038909318391233683, -0.04111796244978905, 0.038475845009088516, -0.005101902410387993, 0.0018749405862763524, -0.011366612277925014, 0.013678465969860554, -0.0041730329394340515, 0.00681515084579587, 0.023256143555045128, -0.029366042464971542, -0.0372648760676384, -0.025347821414470673, 0.011160196736454964, -0.011352851055562496, -0.00017007775022648275, 0.0351731963455677, 0.026201004162430763, 0.051796525716781616, 0.03811805695295334, 0.014338995330035686, -0.012116588652133942, 0.012316123582422733, -0.03167789429426193, -0.01166247483342886, 0.0033387704752385616, 0.010898737236857414, 0.022196544334292412, -0.000434547575423494, 0.018522348254919052, -0.022430481389164925, -0.01187577098608017, -0.003660434391349554, -0.0044241719879209995, 0.0025698726531118155, 0.016843503341078758, 0.0014801709912717342, 0.004038862884044647, 0.032668691128492355, -0.019540665671229362, -0.00961208064109087, 0.012095946818590164, -0.030439402908086777, -0.005387444049119949, 0.034980542957782745, -0.0046890717931091785, -0.04194362461566925, -0.012116588652133942, -0.0027384452987462282, 0.006994044408202171, -0.004056063946336508, -0.014504127204418182, -0.009061639197170734, -0.03561355173587799, -0.036521777510643005, -0.0038874915335327387, -0.012054664082825184, -0.007293346803635359, -0.014036252163350582, -0.005573217757046223, -0.010417100973427296, 0.0010114358738064766, -0.029503652825951576, -0.010107478126883507, -0.03437505662441254, -0.0335218720138073, -0.0418335385620594, 0.01127716526389122, 0.018604915589094162, 0.00373612018302083, 0.021412165835499763, 0.01647195592522621, -0.016334345564246178, 0.016513237729668617, -0.003104832721874118, -0.0022120859939604998, -0.013878000900149345, -0.032916389405727386, -0.03974185883998871, 0.011456059291958809, -0.010313893668353558, -0.01263950765132904, -0.018852613866329193, -0.014641737565398216, 0.01681598089635372, 0.012770237401127815, 0.01490319799631834, 0.004785398952662945, 0.00630255276337266, 0.010492786765098572, 0.019843408837914467, 0.01810951717197895, 0.009667124599218369, -0.04409034550189972, 0.00725894421339035, -0.010162522085011005, -0.008786418475210667, -0.01999477855861187, 0.011421656236052513, -0.009515753947198391, 0.006254388950765133, -0.008497437462210655, -0.007602970115840435, -0.035393375903367996, 0.013004175387322903, -0.017820537090301514, -0.0015352151822298765, 0.002631797455251217, 0.016127929091453552, -0.012467495165765285, 0.008903387933969498, 0.010816170834004879, -0.0001522314123576507, -0.002702322555705905, 0.028733035549521446, -0.007596089504659176, 0.04274176433682442, 0.008401109836995602, -0.016169212758541107, 0.022444242611527443, 0.014462844468653202, -0.020641548559069633, -0.03850336745381355, -0.004021661356091499, 0.01707744039595127, 0.005893161986023188, 0.023875391110777855, -0.028168832883238792, -0.028155071660876274, -0.0030360277742147446, 0.00011750631529139355, -0.0022464883513748646, -0.004510178230702877, 0.0003184388915542513, -0.014325234107673168, 0.002987863961607218, 0.016004079952836037, -0.029283475130796432, -0.006013570819050074, -0.02365521341562271, -0.0324760340154171, 0.01991221308708191, 0.015605010092258453, 0.010781768709421158, -0.015219701454043388, -0.03360443934798241, -0.00960520002990961, -0.02845781482756138, -0.00563858263194561, -0.02870551310479641, 0.01092625968158245, -0.015563727356493473, 0.028292682021856308, 0.004049183800816536, 0.041035398840904236, 0.03418240323662758, 0.009653364308178425, 0.023366231471300125, -0.00957079790532589, -0.02247176505625248, 0.004867964889854193, 0.001742490683682263, -0.010836812667548656, 0.002846813527867198, 0.01751779392361641, 0.009729049168527126, -0.013444527983665466, -0.006808270700275898, 0.007389673963189125, 0.017118724063038826, -0.016802219673991203, -0.011421656236052513, -0.0514112152159214, -0.03222833573818207, -0.0041351900435984135, 0.009405665099620819, -0.0021260795183479786, 0.00023243243049364537, -0.018577393144369125, 0.0006123658968135715, 0.03853088989853859, -0.03390718251466751, 0.03597133606672287, 0.009178608655929565, 0.02775600180029869, -0.027879850938916206, -0.0025784734170883894, 0.00037197789060883224, 0.006312873214483261, -0.03825566917657852, -0.01051342859864235, -0.027577107772231102, -0.0210268571972847, 0.038228146731853485, 0.018384737893939018, 0.011676236055791378, 0.010967542417347431, 0.01604536361992359, 0.007162617053836584, 0.0035159436520189047, -0.01524722296744585, 0.002506227931007743, 0.010141880251467228, -0.026159722357988358, -0.009729049168527126, -0.04692512005567551, -0.018426021561026573, -0.029255954548716545, -0.02042137086391449, 0.0145178884267807, 0.0032527639996260405, 0.009302457794547081, -0.012880326248705387, -0.007651133928447962, 0.021577298641204834, 0.01524722296744585, 0.026077155023813248, -0.010437742806971073, 0.020958051085472107, 0.028677990660071373, 0.009213010780513287, -0.006261269561946392, -0.02434326522052288, 0.022279109805822372, -0.02032504417002201, 0.021549776196479797, 0.03707221895456314, -0.023861629888415337, 0.0014156661927700043, 3.235992699046619e-05, -0.03456771373748779, 0.008683211170136929, -0.04612698033452034, 0.002858854364603758, 0.016210496425628662, -0.022058933973312378, -0.021742429584264755, -0.01380231510847807, -0.011930814944207668, 0.02265065908432007, -0.02999904938042164, 0.02306349016726017, 0.011366612277925014, 0.002110598376020789, -0.010637277737259865, 0.015522443689405918, 0.002513108542189002, 0.03275125473737717, -0.026118438690900803, 0.023531364277005196, -0.022361677139997482, 0.011689996346831322, -0.024728573858737946, -0.019857168197631836, 0.008119008503854275, 0.015508683398365974, -0.022857073694467545, 0.0005599019932560623, 0.016430672258138657, 0.021412165835499763, 0.007369032595306635, 0.005267034750431776, -0.02084796316921711, 0.028980733826756477, -0.008868984878063202, 0.009880420751869678, 0.0013305197935551405, 0.008779538795351982, 0.01401561126112938, -0.011332210153341293, -0.02101309597492218, 0.00564202293753624, -8.675900608068332e-05, -0.014490366913378239, 0.01905902847647667, -0.01375415176153183, -0.001790654263459146, 0.008235977962613106, -0.002318733837455511, -0.0186324380338192, -0.013134905137121677, -0.012054664082825184, 0.022169021889567375, -0.02947613038122654, -0.009020356461405754, 0.0107198441401124, -0.00516726728528738, 0.010121239349246025, -0.0024219416081905365, -0.012412451207637787, -0.010011150501668453, 0.031072409823536873, 0.0007766382186673582, 0.023985479027032852, 0.03459523245692253, -0.017572836950421333, -0.028210114687681198, 0.01751779392361641, -0.019526904448866844, -0.0018663399387151003, 0.02094428986310959, -0.035751160234212875, -0.020999334752559662, -0.024797379970550537, 0.002045233268290758, 0.01735266111791134, -0.030824711546301842, 0.005349601153284311, 0.012474375776946545, 0.024412071332335472, 0.016210496425628662, -0.024205654859542847, -0.006429842207580805, 0.019939735531806946, -0.01605912484228611, -0.004534259904175997, 0.022967161610722542, -0.0054768905974924564, -0.026723923161625862, -0.010479025542736053, -0.003963177092373371, -0.023462560027837753, -0.02170114777982235, -0.018481066450476646, -0.007809385657310486, 0.014820631593465805, -0.01827464997768402, 0.0012746155261993408, -0.003247603541240096, -0.025912022218108177, -0.030549490824341774, 0.01666460931301117, -0.009846018627285957, 0.02060026489198208, -0.0013098781928420067, -0.006639698054641485, 0.027879850938916206, 0.014614216051995754, -0.004861084744334221, -0.019540665671229362, -0.007596089504659176, -0.013637182302772999, -0.03665938973426819, -0.034044794738292694, -0.01564629375934601, 0.04012716934084892, 0.018384737893939018, -0.008284141309559345, -0.010678560473024845, -0.009935464709997177, -0.04436556622385979, -0.028210114687681198, -0.003787724068388343, -0.006127099506556988, 0.02931099757552147, 0.017380183562636375, 0.017751730978488922, 0.023641452193260193, 0.01383671723306179, 0.02135712094604969, -0.014105057343840599, -0.0026180362328886986, -0.0290357768535614, -0.0233111884444952, 0.01260510552674532, -0.008807060308754444, -0.03533833101391792, -0.024990033358335495, -0.009419426321983337, 0.005968847777694464, -0.006426401901990175, 0.022017650306224823, 0.008057083934545517, 0.012735835276544094, -0.016031602397561073, -7.364302291534841e-05, -0.0063644773326814175, -0.004561781883239746, 0.019017746672034264, -0.030907277017831802, -0.008552481420338154, 0.020008539780974388, -0.017022397369146347, -0.009068519808351994, 0.005366802681237459, 0.01709120161831379, 0.000462284660898149, -0.009577678516507149, -0.023379992693662643, -0.005648903548717499, 0.006956201512366533, 0.01118771918118, 0.013217471539974213, 0.0072658248245716095, 0.020779158920049667, 0.03101736679673195, -0.0071075730957090855, -0.001550696324557066, 0.010417100973427296, 0.010279490612447262, -0.02639365941286087, 0.013974327594041824, 0.0348704531788826, -0.019003985449671745, 0.0016650848556309938, -0.013361961580812931, 0.008139650337398052, -0.004455134272575378, 0.0024804261047393084, -0.014256428927183151, -0.021659864112734795, -0.011366612277925014, 0.006195904687047005, 0.0034884216729551554, -0.00794699601829052, -0.0121785132214427, 0.008174053393304348, -0.0071970196440815926, -0.021150706335902214, 0.0009314498747698963, 0.023379992693662643, -0.009550156071782112, 0.00815341155976057, 0.022444242611527443, -0.008999714627861977, -0.026090916246175766, 0.0006497787544503808, 0.021081900224089622, -0.0010294972453266382, 0.0026163163129240274, 0.2140115648508072, 0.01290096715092659, -0.0027160837780684233, 0.03547593951225281, -0.006312873214483261, 0.00966024398803711, 0.014559172093868256, -0.00721766147762537, -0.010472144931554794, 0.015412355773150921, -0.00465466920286417, -0.0005233492702245712, 0.0034471384715288877, -0.006154621485620737, 0.0187838077545166, -0.004823241848498583, -0.02247176505625248, -0.039163898676633835, 0.0017502312548458576, -0.002659319434314966, -0.009281815961003304, -0.004974612966179848, -0.026971623301506042, -0.010107478126883507, 0.02033880539238453, -0.012508777901530266, -0.008359827101230621, 0.005951646249741316, 0.009281815961003304, 0.024632247164845467, -0.010912498459219933, -0.008724493905901909, 0.025223972275853157, 0.0015180138871073723, -0.0003790734335780144, -0.010107478126883507, 0.026283571496605873, -0.022925879806280136, 0.01102258637547493, 0.0061890240758657455, 0.03440257906913757, 0.0018732204334810376, 0.028843123465776443, -0.014118818566203117, 0.015494922176003456, -0.011325329542160034, -0.005814035888761282, 0.008318543434143066, -0.002779728500172496, 0.017270095646381378, -0.004451693966984749, 0.011201480403542519, 0.017559077590703964, 0.026379898190498352, -0.00956391729414463, 0.0026558791287243366, 0.0033817735966295004, -0.0031443957705050707, -0.01717376708984375, 0.022967161610722542, -0.004747556056827307, 0.013657824136316776, 0.007651133928447962, -0.007561686914414167, -0.027962416410446167, 0.017971906810998917, -0.030989844352006912, 0.0324760340154171, -0.00512254424393177, -0.004166152328252792, -0.013822956942021847, -0.01499952469021082, -0.023118533194065094, 0.00676698749884963, -0.013829837553203106, -0.024384548887610435, 0.012522539123892784, 0.0029500212986022234, 0.021549776196479797, 0.02931099757552147, -0.0074240765534341335, -0.007534164935350418, -0.0019506262615323067, 0.010685441084206104, 0.0056729852221906185, -0.018219606950879097, 0.031127454712986946, -0.007547926157712936, -0.027618391439318657, -0.02811378799378872, 0.003113433485850692, -0.0026748005766421556, -0.02450839802622795, -0.013478931039571762, 0.021990129724144936, -0.0045067379251122475, -0.0016014401335269213, 0.01768292672932148, -0.006584653630852699, -0.03773275017738342, -0.03346683084964752, 0.03919141739606857, 0.0329989530146122, -0.0019523464143276215, -0.003462619613856077, 0.017793014645576477, -0.012660149484872818, 0.014063774608075619, -0.014407800510525703, -0.025856979191303253, -0.008297902531921864, -0.021756190806627274, 0.022485526278614998, -0.007073170505464077, 0.021302077919244766, 0.02322862111032009, 0.003588189138099551, -0.017834298312664032, 0.0038186863530427217, 0.021136945113539696, -0.001116363680921495, -0.02555423602461815, 0.04026477783918381, 0.016609566286206245, -0.022182783111929893, -0.044640786945819855, -0.036852043122053146, 0.0243570264428854, -0.016004079952836037, -0.03145771846175194, 0.015150896273553371, -0.03649425506591797, 0.0079882787540555, -0.02854038029909134, 0.01076800748705864, 0.024893706664443016, 0.0005267895176075399, -0.027136754244565964, -0.012570702470839024, -0.02093053050339222, -0.003357691690325737, 0.014063774608075619, 0.0219626072794199, 0.0093162190169096, 0.016279300674796104, -0.01870124228298664, -0.0010191764449700713, 0.006921798922121525, 0.010375818237662315, -0.03605390340089798, -0.009302457794547081, 0.019279206171631813, -0.004867964889854193, 0.0018852613866329193, -3.351564009790309e-05, -0.002258529420942068, 0.013609660789370537, -0.006777308415621519, 0.004592744633555412, 0.005194789730012417, -0.05364050343632698, 0.00987354014068842, 0.013781673274934292, -0.015563727356493473, -0.0051810285076498985, -0.0327787771821022, -0.1750403195619583, 0.001800975063815713, 0.011132675223052502, -0.007066289894282818, 0.031044887378811836, 0.010527189821004868, 0.03418240323662758, -0.0028485336806625128, -0.021935084834694862, 0.0163893885910511, -0.004482656251639128, 0.0015807985328137875, -0.02604963257908821, -0.018302172422409058, 0.010430862195789814, 0.002064154716208577, -0.01835721731185913, 0.01802695170044899, 0.029338520020246506, 0.008215336129069328, 0.0386134572327137, -0.031402673572301865, 0.009034117683768272, -0.012577583082020283, 0.014655498787760735, -0.016595805063843727, -0.015260984189808369, -0.002406460465863347, 0.02314605563879013, -0.017531555145978928, -0.014614216051995754, -0.00469595193862915, 0.032255858182907104, -0.00024640848278068006, 0.030439402908086777, 0.006498647388070822, -0.00012180663179606199, 0.025953305885195732, -0.014972003176808357, 0.030274270102381706, 0.03459523245692253, 0.023531364277005196, 0.016210496425628662, -0.0011034627677872777, 0.0093919038772583, 0.031154977157711983, -0.02486618421971798, -0.024040522053837776, -0.0004003600333817303, 0.024962512776255608, 0.016540760174393654, -0.0074240765534341335, 0.01285968441516161, 0.0005521614220924675, -0.0049986946396529675, -0.008524958975613117, 0.018384737893939018, 0.029586218297481537, 0.019664514809846878, -0.01751779392361641, 0.004840442910790443, 0.0005087281460873783, 0.003570987842977047, -0.0059241242706775665, 0.007444718386977911, -0.0286229457706213, -0.016444433480501175, 0.02494875155389309, -0.026366136968135834, 0.007148856297135353, -0.009756571613252163, -0.0062199863605201244, 0.004376008175313473, 0.031044887378811836, -0.0025784734170883894, 0.022141501307487488, -0.006908038165420294, 0.011373492889106274, 0.021412165835499763, -0.01692606881260872, 0.001976428320631385, 0.01914159581065178, -0.020435132086277008, 0.014201384969055653, -0.02598082832992077, -0.0049539715982973576, -0.0012978373561054468, -0.0015549965901300311, 0.0018835412338376045, 0.007190139032900333, 0.042328935116529465, -0.036163993179798126, 0.004265919793397188, -0.009701527655124664, -0.005611060652881861, 0.002769407583400607, 0.01912783458828926, -0.01327939610928297, 0.013740390539169312, 0.00677042780444026, -0.0046512288972735405, 0.013637182302772999, -0.02980639599263668, -0.0021931645460426807, 0.006870195269584656, 0.0333016961812973, -0.0014535089721903205, 0.0174352265894413, 0.043347250670194626, -0.0050227767787873745, -0.02203141152858734, 0.013692227192223072, 0.021714909002184868, 0.03209072723984718, -0.00013492262223735452, 0.02160481922328472, 0.02211397886276245, -0.01819208450615406, 0.015605010092258453, -0.010733605362474918, 0.0770067349076271, 0.00725894421339035, -0.021288316696882248, 0.02304972894489765, 0.03836575523018837, -0.01897646300494671, -0.12241814285516739, -0.011820726096630096, 0.020146150141954422, 0.009687766432762146, -0.017641643062233925, 0.003416176186874509, -0.006784188561141491, 0.025058839470148087, -0.05509917065501213, 0.019017746672034264, -0.027866089716553688, -0.015288506634533405, -0.0014148061163723469, -0.0014268469531089067, -0.0013236392987892032, 0.0036638746969401836, 0.00676698749884963, 0.01431147288531065, 0.0026834013406187296, 0.040182214230298996, 0.019100312143564224, -0.006096137221902609, 0.016871025785803795, -0.004221196752041578, -0.011545505374670029, 0.008449273183941841, -0.00794011540710926, 0.008050203323364258, 0.014655498787760735, -0.005077820736914873, 0.032586123794317245, -0.011552385985851288, 0.012873445637524128, -0.007541045546531677, -0.005270475056022406, -0.00768553651869297, -0.012536300346255302, -0.0037946044467389584, 0.02837524749338627, -0.0057658725418150425, -0.011607430875301361, 0.0021277996711432934, 0.02555423602461815, -0.014421561732888222, -0.0017330299597233534, 0.015907753258943558, -0.0022344475146383047, 0.02322862111032009, 0.009887301363050938, -0.011407895013689995, -0.020297521725296974, 0.012144111096858978, -0.02161858044564724, -0.009164847433567047, 0.02204517275094986, -0.02922843210399151, 0.02280203066766262, 0.007369032595306635, 0.0010570192243903875, 0.002258529420942068, -0.0057280296459794044, -0.0019231041660532355, -0.0075685675255954266, 0.020627787336707115, 0.01191705372184515, -0.011820726096630096, -0.006956201512366533, -0.006643138360232115, -0.01622425578534603, -0.029944006353616714, -0.009962987154722214, 0.01546739973127842, -0.014407800510525703, 0.01196521706879139, -0.026682641357183456, -0.0039769383147358894, -0.01349269226193428, -0.002631797455251217, 0.0010217566741630435, 0.012453733943402767, -0.018137039616703987, -0.003570987842977047, 0.015178417786955833, -0.03008161671459675, 0.013203710317611694, 0.013933044858276844, 0.036521777510643005, -0.011180838569998741, 0.010754246264696121, -0.017724208533763885, -0.019499382004141808, -0.0042418381199240685, 0.00627503078430891, -0.03239347040653229, 0.0008484536083415151, 0.01306609995663166, -0.00888274610042572, 0.0026197563856840134, 0.003335330169647932, 0.02461848594248295, -0.044200435280799866, -0.006450483575463295, -0.040622565895318985, 0.007086931262165308, 0.0032132009509950876, -0.004874845501035452, 0.009708408266305923, -0.015494922176003456, -0.016072886064648628, -0.020696591585874557, -0.009130444377660751, 0.00012664450332522392, -0.01630682311952114, 0.008497437462210655, -0.0055009727366268635, -0.0178480576723814, -0.01581142656505108, -0.02307725138962269, 0.004978053271770477, -0.02391667291522026, 0.0012445133179426193, 0.023902911692857742, -0.00653649028390646, 0.008002039976418018, 0.011146435514092445, 0.01989845186471939, -0.02629733271896839, -0.013093621470034122, -0.0024907467886805534, 0.02726060338318348, 0.004197114612907171, -0.0026266369968652725, 0.001525754458270967, -0.030219225212931633, -0.0012513938127085567, 0.023724019527435303, -0.0035675475373864174, 0.018247127532958984, 0.010004269890487194, 0.011359731666743755, 0.009708408266305923, 0.008800179697573185, -0.015274745412170887, -0.03723735362291336, 0.02058650366961956, 0.002494187094271183, -0.02188003994524479, 0.008552481420338154, -0.0010363777400925756, -0.002710923319682479, 0.03145771846175194, 0.019774602726101875, 0.01809575781226158, 0.014283951371908188, -0.01238492876291275, -0.021907562389969826, -0.0051294248551130295, -0.011586789041757584, -0.0003689676814246923, 0.014160102233290672, -0.004740675445646048, -0.013774792663753033, 0.022857073694467545, 0.005972288083285093, 0.003080751048400998, -0.03170541673898697, 0.013079861178994179, -0.016857264563441277, -0.02732940949499607, 0.005975727923214436, -0.009715288877487183, -0.02101309597492218, -0.01076112687587738, -0.003918454051017761, 0.007623611483722925, 0.008868984878063202, -0.016719654202461243, 0.004369127564132214, -0.007066289894282818, 0.013527094386518002, -0.016719654202461243, 0.0023858188651502132, -0.005463129840791225, -0.03743000701069832, 0.004458574578166008, 0.000506147975102067, 0.025912022218108177, 0.007644253317266703, -0.014820631593465805, 0.024480875581502914, 0.026889055967330933, 0.009921704418957233, 0.01186889037489891, -0.002760807052254677, -0.019857168197631836, -0.006570892874151468, 0.02706794999539852, -0.0009090881794691086, -0.013692227192223072, 0.006354156415909529, 0.010884976014494896, 0.030962321907281876, 0.01093314029276371, 0.018260888755321503, 0.01422890741378069, -0.0033439307007938623, 0.007616731338202953, 0.018893897533416748, 0.009956106543540955, -0.0016143410466611385, 0.0012737555662170053, 0.006385118700563908, -0.02988896146416664, -0.015921514481306076, 0.01716000773012638, 0.0262285266071558, -0.0001946971024153754, 0.018522348254919052, 0.0009383303695358336, -0.030219225212931633, -0.009261174127459526, 0.028815601021051407, 0.004059504251927137, -0.0003089781675953418, 0.025072600692510605, -0.007313988637179136, 0.0145729323849082, 0.026971623301506042, 0.016939830034971237, 0.004737235140055418, -0.011806965805590153, -0.011098272167146206, 0.020380089059472084, 0.008270380087196827, 0.00914420560002327, -0.007596089504659176, -0.002554391510784626, -0.034209925681352615, -0.017710447311401367, 0.015921514481306076, 0.009694647043943405, 0.08625414967536926, 0.005607620347291231, -0.027879850938916206, -0.00771305849775672, -0.03371452912688255, 0.004499857313930988, 0.0045961844734847546, 0.015605010092258453, -0.01233676541596651, -0.04838378727436066, 0.043182119727134705, -0.002160482108592987, -0.029696306213736534, -0.020806679502129555, -7.514813478337601e-05, 0.021811235696077347, -0.009584559127688408, 0.0093919038772583, -0.0006170962587930262, -0.016857264563441277, 0.0276871956884861, -0.0190452691167593, 0.0169123075902462, -0.02280203066766262, -0.018164562061429024, 0.00013395505084190518, 0.028815601021051407, 0.001575638190843165, -0.005545695777982473, -0.02783856727182865, 0.015673816204071045, -0.005012455862015486, -0.04329220578074455, -0.012206035666167736, 2.9779732358292677e-05, 0.015439878217875957, 0.0059241242706775665, -0.01401561126112938, 0.011765682138502598, 0.022402960807085037, -0.0045445808209478855, 0.004310643300414085, -0.01930672861635685, -0.019513143226504326, 0.008318543434143066, 0.00034123059595003724, 0.0032080404926091433, -0.02648998610675335, -0.025843217968940735]"
Running the Feast Feature Store with Dragonfly,Running the Feast Feature Store with Dragonfly,"## A brief introduction to Feast  [Feast](https://github.com/feast-dev/feast) stands as an exceptional open-source feature store, revolutionizing the efficient management and uninterrupted serving of machine learning (ML) features for real-time applications. At its core, Feast offers a sophisticated interface for storing, discovering, and accessing featuresthe individual measurable properties or characteristics of data essential for ML modeling. Operating on a distributed architecture, Feast harmoniously integrates several pivotal components, including the Feast Registry, Stream Processor, Batch Materialization Engine, and Stores.  Facilitating both offline and online storage paradigms, Feast enables comprehensive time-series analysis by harnessing historical feature values stored in data sources. For real-time responsiveness, Feast leverages online stores, ensuring features are served at remarkably low latencies. With a simple `feast materialize` command, feature values flow from data sources to the online store, empowering your ML applications with unparalleled agility and performance.  One of the online stores supported by Feast is Redis. In this blog post, we will explore how to use Dragonfly as a drop-in replacement for Redis as an online store for Feast.  ## In-memory online stores  One of the most critical factors determining the success of a feature store is its ability to serve features at low latency. High latency can severely impact model performance and the user experience, leading to delayed predictions and suboptimal outcomes.  In-memory data stores offer a substantial advantage in terms of low-latency feature serving. By storing data directly in memory, they eliminate the need for disk I/O operations, which are often a bottleneck in retrieving data from traditional storage systems. With data residing in RAM, in-memory data stores rapidly retrieve and serve features, resulting in near-instantaneous response times.  The significance of low-latency feature serving provided by in-memory data stores cannot be overstated. It empowers machine learning models to access necessary features swiftly, allowing for more efficient and timely predictions or inferences. Whether it's delivering personalized recommendations, making instant decisions, or powering real-time analytics, in-memory data stores ensure quick access to features, contributing to improved model performance and elevated user satisfaction.  ## Meet Dragonfly  Dragonfly, a cutting-edge in-memory data store, distinguishes itself with novel algorithms and data structures integrated into a multi-threaded, share-nothing architecture.  Its hardware efficiency allows Dragonfly to thrive across diverse machine configurationsrunning a single node on an 8GB machine or vertically scaling to colossal 1TB machines with 64 cores. This versatility not only delivers substantial infrastructure cost savings but also streamlines architectural complexity.  Another true marvel lies in Dragonfly's exceptional API compatibility, effortlessly serving as a drop-in replacement for Redis not only in Feast but also in many other scenarios. As of version 1.6.2, Dragonfly boasts an impressive implementation of over 200 Redis commands, covering the vast majority of use cases, including support for the Hash data structure relied upon by Feast for storing feature values.  With Dragonfly's impressive blend of compatibility, efficiency, and comprehensive features, we embark on an exploration of its immense benefits to Feast as an online feature store, unlocking new dimensions of performance and scalability.  ## Running Feast with Dragonfly: a hands-on guide  In this section, we will go through some hands-on steps to demonstrate how to run Feast with Dragonfly seamlessly. This tutorial is highly inspired by the [official Feast documentation](https://docs.feast.dev/getting-started/quickstart), with the emphasis on integrating Dragonfly as an online store for Feast.  ### 1. Prerequisites  Make sure `Python` and `pip` are installed on your platform. Then, we can install the Feast SDK and CLI:  ```bash pip install feast ```  In order to use Dragonfly as the online store, we will need to install the `redis` extra:  ```bash pip install 'feast[redis]' ```  ### 2. Create a feature repository  To start, we can use the `feast` CLI to bootstrap a new feature repository.  ```bash feast init feast_dragonfly cd feast_dragonfly/feature_repo ```  A [Feast feature repository](https://docs.feast.dev/reference/feature-repository) consists of  - A collection of Python files containing feature declarations. - A `feature_store.yaml` file containing infrastructural configuration. - A `.feastignore` file containing paths in the feature repository to ignore.  We are interested in the `feature_store.yaml` file since it contains the configuration of infrastructure, such as the online store, for Feast. Update the `feature_store.yaml` file with the following content:  ```yaml project: feast_dragonfly registry: data/registry.db provider: local online_store: type: redis connection_string: ""localhost:6379"" ```  ### 3. Start Dragonfly  There are several options available to [get Dragonfly up and running quickly](https://www.dragonflydb.io/docs/getting-started), we will be using Docker for this tutorial:  ```bash docker run --network=host --ulimit memlock=-1 docker.dragonflydb.io/dragonflydb/dragonfly ```  Integrating Dragonfly as an online store in Feast is astonishingly straightforward without a hitch. Instead of running a Redis instance locally, we effortlessly initiated Dragonfly. In the provided `feature_store.yaml` configuration file, we directed Feast to utilize the online store, pointing to `localhost:6379`, which aligns with Dragonfly's default running configuration.  The beauty of this transition lies in the ease of implementationit doesn't require a single change in Feast's core configuration. We merely directed Feast to use Dragonfly, and that's all it took! From this point onward, the tutorial continues as a typical Feast guide, empowering you to explore its vast capabilities.  ### 4. Register feature definitions and deploy the feature store  Within the same `feast_dragonfly/feature_repo` directory, use the following command:  ```bash feast apply ```  The `apply` command scans Python files in the current directory (`example_repo.py` in this case) for feature view and entity definitions, registers the objects, and deploys the infrastructure. We should see the following output upon success:  ```text .... Created entity driver Created feature view driver_hourly_stats_fresh Created feature view driver_hourly_stats Created on demand feature view transformed_conv_rate Created on demand feature view transformed_conv_rate_fresh Created feature service driver_activity_v1 Created feature service driver_activity_v3 Created feature service driver_activity_v2 ```  ### 5. Generate training data  Save the code below as `generate_training_data.py`:  ```python from datetime import datetime import pandas as pd  from feast import FeatureStore  # Note: see https://docs.feast.dev/getting-started/concepts/feature-retrieval for # more details on how to retrieve for all entities in the offline store instead entity_df = pd.DataFrame.from_dict( { # entity's join key -> entity values ""driver_id"": [1001, 1002, 1003], # ""event_timestamp"" (reserved key) -> timestamps ""event_timestamp"": [ datetime(2021, 4, 12, 10, 59, 42), datetime(2021, 4, 12, 8, 12, 10), datetime(2021, 4, 12, 16, 40, 26), ], # (optional) label name -> label values. Feast does not process these ""label_driver_reported_satisfaction"": [1, 5, 3], # values we're using for an on-demand transformation ""val_to_add"": [1, 2, 3], ""val_to_add_2"": [10, 20, 30], } )  store = FeatureStore(repo_path=""."")  training_df = store.get_historical_features( entity_df=entity_df, features=[ ""driver_hourly_stats:conv_rate"", ""driver_hourly_stats:acc_rate"", ""driver_hourly_stats:avg_daily_trips"", ""transformed_conv_rate:conv_rate_plus_val1"", ""transformed_conv_rate:conv_rate_plus_val2"", ], ).to_df()  print(""----- Feature schema -----\n"") print(training_df.info())  print() print(""----- Example features -----\n"") print(training_df.head()) ```   To generate training data, run:  ```bash python generate_training_data.py ```  ### 6. Ingest batch features into the online store  Next, we serialize the latest values of features since the beginning of time to prepare for serving:  ```bash feast materialize-incremental $(date -u +""%Y-%m-%dT%H:%M:%S"") ```  When feature data is stored using Dragonfly as the online store, Feast utilizes the Hash data structure to store a two-level map. The first level of the map contains the Feast project name and entity key. The entity key is composed of entity names and values. The second level key (i.e., `field` of the Hash) contains the feature table name and the feature name, and the Hash `value` contains the feature value. Feel free to connect to the local Dragonfly instance using `redis-cli` if you want to learn more about how Feast stores features in Dragonfly.  ### 7. Fetching feature vectors for inference  At inference time, we need to quickly read the latest feature values for different drivers (which otherwise might have existed only in batch sources) from the online feature store using `get_online_features()`. Save the script below as `fetch_feature_vectors.py`:  ```python from pprint import pprint from feast import FeatureStore  store = FeatureStore(repo_path=""."")  feature_vector = store.get_online_features( features=[ ""driver_hourly_stats:conv_rate"", ""driver_hourly_stats:acc_rate"", ""driver_hourly_stats:avg_daily_trips"", ], entity_rows=[ # {join_key: entity_value} {""driver_id"": 1004}, {""driver_id"": 1005}, ], ).to_dict()  pprint(feature_vector) ```  To fetch feature vectors, run:  ```bash python fetch_feature_vectors.py ```  We should see output similar to the following:  ```python { 'acc_rate': [0.1056235060095787, 0.7656288146972656], 'avg_daily_trips': [521, 45], 'conv_rate': [0.24400927126407623, 0.48361605405807495], 'driver_id': [1004, 1005] } ```  ## Conclusion  In this blog post, we witnessed the effortless integration of Dragonfly as an online store for Feast. By simply directing Feast to use Dragonfly, we embraced a modern in-memory data store capable of swift feature serving.  Our primary focus in the tutorial above was on the Redis command compatibility of Dragonfly. However, Dragonfly's capabilities go beyond mere protocol and command compatibility. Whether deployed on small instances or powering large-scale machines, Dragonfly's versatility shines, offering unmatched hardware efficiency that reduces infrastructure costs and complexity. To delve deeper into Dragonfly's hardware efficiency, please explore [this dedicated blog post](scaling-performance-redis-vs-dragonfly) on scaling and performance comparisons.  Our [command reference](https://www.dragonflydb.io/docs/category/command-reference) and [documentation](https://www.dragonflydb.io/docs) provide an extensive resource to gain a comprehensive understanding of Dragonfly's full spectrum of capabilities.  At our core, we are dedicated to fostering a thriving open-source community. As passionate supporters of cutting-edge technology, our team is actively working with more open-source projects to ensure streamlined integration with Dragonfly. By extending our reach and engaging in collaborative efforts, we aim to empower diverse ecosystems with the unmatched efficiency of Dragonfly. Stay tuned for more Dragonfly integrations by subscribing to our newsletter and joining our social media channels below!","[-0.01776963286101818, -0.0018324492266401649, -0.005460239481180906, -0.0015276301419362426, 0.018759191036224365, -0.00890602171421051, -0.011556623503565788, -0.0024703608360141516, -0.01840577833354473, -0.02759453095495701, 0.0038910831790417433, 0.006711323279887438, -0.023947302252054214, -0.01542296726256609, -0.0029174289666116238, -0.003760320134460926, 0.0033344568219035864, -0.012835980392992496, 0.0017697183648124337, -0.01559260580688715, 0.013344896025955677, -0.004258633125573397, -0.008955499157309532, 0.014716139994561672, -0.024837905541062355, 0.0030269871931523085, 0.012991482391953468, -0.0028626497369259596, -0.004976063035428524, 0.029064731672406197, 0.026096057146787643, -0.03008256107568741, 0.0077821663580834866, 0.013867948204278946, -0.01499887090176344, -0.0033839347306638956, 0.002768995240330696, -0.019013648852705956, 0.025799188762903214, 0.0020568668842315674, 0.03333396837115288, -0.01489991508424282, -0.002281284425407648, -0.004339918494224548, -0.014631320722401142, -0.006400319281965494, 0.012729955837130547, -0.029601918533444405, 0.013867948204278946, 0.0008071081829257309, 0.018335094675421715, 0.011167868040502071, -0.008354696445167065, 0.021954050287604332, 0.008856543339788914, 0.021954050287604332, -0.009351322427392006, 0.009718872606754303, 0.010439836420118809, -0.0050750188529491425, -0.011422325856983662, 0.023353567346930504, -0.021925777196884155, -0.004523693583905697, -0.006368512287735939, -5.406123091233894e-05, -0.005661685019731522, -0.006167066749185324, 0.001957911066710949, 0.004947789944708347, 0.03469107300043106, 0.0357937254011631, 0.011577827855944633, 0.007478230632841587, 0.02659083530306816, -0.0249368604272604, 0.011330438777804375, 0.0017935738433152437, 0.013811402022838593, 0.012694614939391613, 0.005541524384170771, 0.012772365473210812, -0.016002565622329712, 0.0382252112030983, -0.008305219002068043, 0.026152603328227997, -0.01974874921143055, 0.011549554765224457, -0.0012837747344747186, 0.01373365055769682, -0.004127870313823223, 0.0011212044628337026, -0.0066724480129778385, 0.020837264135479927, -0.011895900592207909, 0.00019824290939141065, -0.0015912444796413183, 0.006612367462366819, 0.011040639132261276, -0.01137284841388464, -0.008262809365987778, 0.013684173114597797, -0.02291533537209034, -0.010962888598442078, -0.01962152123451233, -0.0031365451868623495, 0.020738307386636734, -0.020413167774677277, 0.008086102083325386, 0.022010596469044685, -0.022759832441806793, 0.028598224744200706, 0.0183209590613842, -0.017529312521219254, -0.012143289670348167, -0.009980399161577225, 0.011471804231405258, -0.016398388892412186, -0.00487357284873724, 0.005446102935820818, 0.0324009545147419, 0.017953408882021904, 0.006290761288255453, -0.024965133517980576, -0.006736062467098236, 0.011379916220903397, -0.001301445416174829, -0.012164494954049587, 0.0017255416605621576, -0.014115337282419205, 0.026732200756669044, 0.012524976395070553, 0.010347949340939522, -0.019904252141714096, -0.041674528270959854, 0.012850116938352585, -0.006156464107334614, -0.004474215675145388, -0.01048931386321783, -0.004933653399348259, 0.01084979623556137, 0.009096864610910416, -0.03452143445611, -0.030959026888012886, -0.0370660126209259, 0.001118553918786347, 0.003604818368330598, 0.0021257824264466763, 0.012744092382490635, -0.014369795098900795, 0.030054287984967232, -0.030648022890090942, -0.018999513238668442, 0.011867627501487732, 0.019395336508750916, 0.0136346947401762, 0.012249314226210117, 0.005036143120378256, 0.00882120244204998, -0.004721605218946934, 0.013472124934196472, 0.03443661704659462, -0.0053047374822199345, -0.011620237492024899, 0.014051723293960094, 0.021049311384558678, 0.0057394360192120075, -0.03638745844364166, -0.020356621593236923, -0.01205140259116888, 0.01034088060259819, 0.02848513238132, -0.03172240033745766, 0.02561541460454464, 0.01611565798521042, 0.019381199032068253, 0.010828590951859951, 0.019423609599471092, -0.034577980637550354, -0.024116940796375275, 0.015762245282530785, 0.004516625311225653, 0.02000320702791214, 0.007057668641209602, 0.0013942164368927479, -0.010036945343017578, -0.018391640856862068, -0.0023926098365336657, 0.007683210540562868, -0.008418310433626175, -0.014574775472283363, -0.00957750715315342, 0.0012484333710744977, -0.01819372922182083, -0.6043654680252075, 0.0006348190945573151, 0.020582806318998337, -0.04797942563891411, -0.020201118662953377, -0.001137108076363802, 0.02561541460454464, -0.004848834127187729, 0.009775418788194656, -0.006983452010899782, -0.020073890686035156, -0.02063935250043869, -0.002565782517194748, -0.01084272749722004, -0.028668908402323723, -0.0018872283399105072, -0.005615741480141878, -0.025940554216504097, 0.002452690154314041, 0.022759832441806793, -0.035426173359155655, 0.04523693397641182, -0.006990520283579826, 0.02789139747619629, -0.024300716817378998, 0.010955819860100746, -0.014207225292921066, 0.015154372900724411, 0.015027143992483616, 0.009711804799735546, -0.03305123746395111, 0.023141520097851753, 0.03186376765370369, 0.015620878897607327, 0.05462360009551048, -0.001044337055645883, -0.019819432869553566, 0.026958385482430458, -0.006849154829978943, 0.04662231728434563, 0.011994856409728527, 0.007732688449323177, 0.03915822133421898, 0.02206714265048504, -0.0018978307489305735, -0.02123308554291725, -0.0011857025092467666, 0.008086102083325386, -0.006880961824208498, -0.006852688733488321, -0.004926585126668215, -0.006707789376378059, -0.0038946173153817654, -0.007018793374300003, 0.011379916220903397, 5.42545021744445e-05, 0.052559662610292435, -0.026322241872549057, 0.006895098369568586, 0.0008897186489775777, 0.01759999431669712, -0.0038274687249213457, -0.0032955813221633434, -0.01188176404684782, -0.04190070927143097, -0.003573011141270399, 0.015804653987288475, -0.01583292707800865, 0.012355337850749493, -0.02793380804359913, 0.02599710039794445, 0.0015099594602361321, 0.005562729202210903, 0.000622891413513571, 0.01700625941157341, 0.020992765203118324, 0.030987299978733063, 0.01048931386321783, 0.0027000794652849436, 0.024413809180259705, 0.03488898649811745, 0.004647388122975826, -0.010616542771458626, -0.008206263184547424, -0.004460079129785299, 0.017246581614017487, -0.023141520097851753, -0.011938310228288174, 0.010418632067739964, 0.002403212245553732, 0.018391640856862068, 0.03076111525297165, -0.01550778653472662, -0.03381460905075073, 0.04933653399348259, 0.031298305839300156, -0.008835338987410069, -0.007612527813762426, -0.014786822721362114, -0.028541678562760353, 0.0020250596571713686, -0.029517099261283875, 0.012461362406611443, 0.013479192741215229, 0.01508369017392397, 0.02193991281092167, -0.032853323966264725, 0.014461683109402657, 0.007725620176643133, -0.0257850531488657, 0.0013783128233626485, -0.016568027436733246, -0.01789686270058155, -0.018335094675421715, 0.005396625027060509, -0.02903645858168602, 0.016893167048692703, -0.0022159030195325613, 0.0063048978336155415, -0.0054567051120102406, 0.0052517252042889595, 0.0023855415638536215, 0.0070753395557403564, 0.016511481255292892, 0.012440157122910023, 0.012362406589090824, -0.01966392993927002, -0.019423609599471092, -0.005004336126148701, 0.029771557077765465, 0.03613300248980522, -0.029517099261283875, 0.011167868040502071, -0.005926745478063822, 0.019183287397027016, -0.01017124205827713, 0.007704415358603001, 0.002410280518233776, 0.014574775472283363, -0.02831549383699894, 0.0038133321795612574, 0.010750840418040752, 0.024343125522136688, -0.03307950869202614, -0.04402119293808937, 0.011917104944586754, 0.003231966868042946, 0.007464094087481499, 0.004940721672028303, -0.01915501430630684, -0.015889473259449005, -0.01987597905099392, -0.005548592656850815, 0.008856543339788914, 0.008552608080208302, 0.008467788808047771, -0.021176539361476898, -0.026322241872549057, -0.016228750348091125, -0.020328348502516747, -0.00816385354846716, 0.02680288441479206, -0.024286579340696335, 0.00424096267670393, -0.030902480706572533, -0.02380593679845333, -0.012122085317969322, 0.016596300527453423, -0.03076111525297165, -0.03658537194132805, 0.0030570272356271744, -0.02731180004775524, 0.02414521388709545, 0.024244170635938644, -0.0025127704720944166, -0.0021487544290721416, -0.018009955063462257, 0.0004841765621677041, -0.017373809590935707, -0.011910037137567997, 0.023862482979893684, 0.013875016011297703, -0.01373365055769682, -0.019508428871631622, 0.02840031310915947, 0.0014958229148760438, 0.01641252636909485, 0.02937573380768299, -0.018844010308384895, 0.015479513444006443, 0.003802729770541191, 0.01188176404684782, 0.009167547337710857, -0.014716139994561672, -0.010411563329398632, 0.007789234630763531, -0.018462324514985085, 0.0076973470859229565, -0.015847064554691315, 0.026011237874627113, 0.004014777950942516, 0.011613169685006142, 0.007107146549969912, 3.553462738636881e-05, -0.01533814799040556, -0.008390037342905998, 0.013203530572354794, -0.018349232152104378, 0.004795821849256754, -0.0012970278039574623, 0.01443341001868248, -0.008658631704747677, -0.02013043686747551, -0.022053005173802376, 0.016638711094856262, 0.03132657706737518, -0.005993893835693598, -0.008898952975869179, -0.011153731495141983, 0.0002785340475384146, -0.001656626001931727, -0.0070223272778093815, -0.0034563846420496702, 0.010878069326281548, 0.015182645991444588, -0.0029138948302716017, -0.0008839756483212113, 0.03401251882314682, 0.019974933937191963, -0.029743283987045288, 0.003436946775764227, 0.03330569341778755, 0.014030518010258675, -0.006177668925374746, 0.02321220189332962, 0.006587628740817308, 0.011634374037384987, -0.025332683697342873, 0.019989071413874626, -0.03616127371788025, 0.016568027436733246, 0.01873091794550419, 0.02189750410616398, -0.024456217885017395, 0.013896221294999123, 0.01620047725737095, -0.013168188743293285, 0.009195820428431034, -0.01853300631046295, 0.005067950580269098, -0.012058470398187637, 0.004983131308108568, -0.004767548758536577, 0.01068015769124031, -5.602157034445554e-05, -0.01574810780584812, -0.007061203010380268, 0.0025905214715749025, 0.008439515717327595, 0.015437103807926178, 0.014235498383641243, 0.001443694345653057, 0.013457988388836384, 0.010828590951859951, 0.02021525613963604, 0.007195500191301107, 0.01983356848359108, -0.0181089099496603, -0.014914051629602909, -0.020568668842315674, -0.006230681203305721, -0.02410280518233776, -0.009725941345095634, -0.017402082681655884, 0.012927867472171783, 0.00614939583465457, 0.0014092365745455027, 0.029347460716962814, -0.01970634050667286, 0.03127003088593483, 0.004566103219985962, -0.03545444831252098, 0.016638711094856262, 0.008453652262687683, 0.014546502381563187, -0.020102163776755333, -0.018971240147948265, 0.03237268328666687, 0.010920478962361813, -0.00505381403490901, 0.01653975434601307, 0.011153731495141983, -0.032853323966264725, -0.010828590951859951, -0.007043532095849514, 0.010319676250219345, 0.04933653399348259, -0.008107307367026806, 0.006725459825247526, 0.012857184745371342, -0.016059111803770065, 0.016469072550535202, -0.015069553628563881, -0.027792442589998245, 0.05419950187206268, -0.026901839300990105, -0.020794853568077087, -0.02136031538248062, 0.01717589795589447, -0.00559100229293108, -0.010750840418040752, -0.010687225498259068, -0.005361283663660288, -0.04529348015785217, 0.01983356848359108, 0.00505381403490901, -0.018702644854784012, 0.020017344504594803, 0.031128665432333946, 0.007838713005185127, -0.0005358632770366967, -0.011832285672426224, 0.010347949340939522, 0.0021681920625269413, 0.05337958410382271, 0.01632770709693432, 0.015324011445045471, -0.0035323684569448233, -0.02595469169318676, 0.0010787948267534375, -0.023367704823613167, -0.01508369017392397, -0.002677107695490122, 0.00043558221659623086, -0.005099757574498653, -0.012362406589090824, -0.005290600936859846, 0.005269396118819714, 0.007563049905002117, -0.0010929313721135259, -0.004035982768982649, -0.037546657025814056, -0.011189073324203491, 0.005972689017653465, 0.0017812043661251664, -0.023919029161334038, 0.02731180004775524, 0.021869231015443802, 0.0403456911444664, 0.023325294256210327, 0.01827854849398136, 0.019607383757829666, -0.004396464675664902, -0.018787464126944542, -0.005025540944188833, -0.009358391165733337, 0.016257023438811302, 0.020879672840237617, -0.011507145129144192, 0.0166245736181736, -0.01704866997897625, -0.025163045153021812, -5.5165648518595845e-05, 0.010319676250219345, 0.01966392993927002, -0.0036648984532803297, -0.012602726928889751, 0.00235196715220809, -0.001970280660316348, 0.001297911279834807, -0.006580560468137264, 0.030280472710728645, -0.045774124562740326, -0.005778311751782894, 0.02131790481507778, -0.005566263571381569, -0.013606421649456024, 0.0033114850521087646, -0.0014534132787957788, -0.0005058231763541698, 0.016822485253214836, 0.0023378306068480015, 0.007527708541601896, -0.04812078922986984, -0.011344575323164463, -0.005548592656850815, -0.010461040772497654, 0.004046585410833359, -0.005318874027580023, 0.019338790327310562, -0.03059147670865059, -0.017161762341856956, -0.028796136379241943, 0.007902326993644238, -0.028852682560682297, -0.039271313697099686, -0.05227693170309067, -0.001426907256245613, 0.019056059420108795, 0.011563691310584545, -7.775098492857069e-05, 0.009351322427392006, -0.015437103807926178, -0.004746343940496445, 0.004195018671452999, -0.00837590079754591, -0.002003854839131236, -0.050156451761722565, -0.03460625559091568, 0.002533975290134549, -0.02068176120519638, -0.012426020577549934, -0.009994535706937313, -0.004947789944708347, 0.011280960403382778, 0.019395336508750916, 0.021332042291760445, 0.003231966868042946, 0.004771083127707243, 0.023353567346930504, 0.013019755482673645, -0.010227788239717484, 0.01194537803530693, -0.01759999431669712, 0.021303769201040268, 0.00922409351915121, -0.019098468124866486, -0.017840316519141197, -0.014970597811043262, -0.008382969535887241, 0.004149075131863356, -0.007170761004090309, 0.0035394367296248674, -0.008298150263726711, 0.010687225498259068, -0.016384253278374672, 0.001425140188075602, 0.012772365473210812, 0.02895163930952549, -0.0003916264104191214, 0.0008504013530910015, 0.02164304628968239, -0.011408189311623573, 0.0010805618949234486, 0.025855734944343567, -0.007775098085403442, 0.03836657479405403, 0.02068176120519638, -0.0015832927310839295, 0.041080791503190994, -0.00311710755340755, -0.007725620176643133, -0.03135485202074051, -0.012376543134450912, 0.028386177495121956, 0.018759191036224365, 0.013705377466976643, -0.006640640553086996, -0.020794853568077087, -0.025671960785984993, -0.017910998314619064, -0.00940786860883236, -0.003444015048444271, -0.012440157122910023, -0.02988464944064617, -0.019084332510828972, -0.007329796906560659, -0.0006957829464226961, -0.0026647381018847227, -0.026308104395866394, -0.009308912791311741, -0.006506343372166157, 6.63754835841246e-05, 0.00017803207447286695, -0.015479513444006443, -0.024258306249976158, -0.0014578308910131454, -0.00888481643050909, -0.020399030297994614, -0.002595822559669614, -0.003042890690267086, -0.007195500191301107, 0.02506409026682377, 0.022137824445962906, 0.0474422350525856, 0.02750971168279648, 0.018250275403261185, 0.015818791463971138, -0.01907019503414631, -0.01679421216249466, -0.013995177112519741, -0.004205621313303709, 0.015719834715127945, -0.029488826170563698, 0.0157763808965683, 0.012263450771570206, 0.0007814857526682317, 0.000979839125648141, 0.003316786140203476, 0.005417829845100641, -0.0010381523752585053, -0.026986658573150635, -0.03401251882314682, -0.03768802061676979, -0.028386177495121956, 0.022477101534605026, -0.015239192172884941, 0.02999774180352688, -0.02729766257107258, 0.0013332526432350278, 0.04028914496302605, -0.016143931075930595, 0.0203848946839571, 0.01473027653992176, 0.023056700825691223, -0.022166097536683083, 0.025134772062301636, 0.008496061898767948, -0.025078225880861282, -0.023056700825691223, -0.0007222889689728618, -0.034747619181871414, -0.02721284329891205, 0.015564332716166973, 0.021204812452197075, 0.0193246528506279, 0.017698951065540314, 0.007103612646460533, -0.01928224414587021, 0.020031480118632317, -0.004530761856585741, 0.00805782899260521, 0.0011273892596364021, -0.02946055307984352, -0.032005131244659424, -0.02937573380768299, -0.025262000039219856, -0.006700721103698015, -0.015069553628563881, 0.01632770709693432, -0.004771083127707243, 0.02646360732614994, 0.002323694061487913, -0.012008992955088615, -0.0033963043242692947, 0.00015837345563340932, 0.03454970940947533, -0.0133166229352355, 0.030110834166407585, 0.019437745213508606, 0.01194537803530693, -0.03596336394548416, 0.01034088060259819, 0.0009886744664981961, -0.01645493507385254, 0.005276464391499758, 0.01844818703830242, -0.03265541419386864, -0.026407061144709587, 0.006976383738219738, -0.008488993160426617, -0.02435726299881935, -0.03316432982683182, 0.030450111255049706, 0.009966262616217136, 0.015324011445045471, -0.01949429139494896, 0.0029421679209917784, -0.004283372312784195, 0.02852754294872284, -0.024116940796375275, 0.010439836420118809, 0.01866023615002632, -0.0027848987374454737, -0.003039356553927064, -0.0036578301806002855, 0.010871000587940216, 0.02991292253136635, -0.005583934020251036, 0.01152128167450428, -0.0021717261988669634, 0.023904893547296524, -0.011669715866446495, -0.0034775894600898027, 0.0045519666746258736, 0.020695898681879044, -0.009634053334593773, -0.002366103697568178, 0.022010596469044685, -0.004862970672547817, -0.002475661924108863, -0.0005689958343282342, 0.007156624458730221, 0.034210432320833206, -0.018335094675421715, -0.007824576459825039, 0.015126099810004234, 0.021204812452197075, -0.002723051467910409, -0.02714216150343418, -0.012044333852827549, 0.014200156554579735, 0.01776963286101818, -0.01881573721766472, -0.010044013150036335, -0.03765974938869476, -0.01065895240753889, 0.011217346414923668, 0.0002719075419008732, -0.025643687695264816, -0.010411563329398632, -0.024201760068535805, 0.03008256107568741, -0.03873412683606148, -0.02227918989956379, 0.011634374037384987, -0.019593248143792152, 0.02004561759531498, 0.030450111255049706, 0.009725941345095634, -0.01019244734197855, 0.0399215966463089, -0.028838546946644783, 0.000998393283225596, 0.013776060193777084, -0.009895579889416695, -0.028895093128085136, 0.012927867472171783, -0.02722698077559471, -0.00408192677423358, 0.010390358977019787, -0.013853811658918858, -0.036019910126924515, -0.03350360319018364, 0.015366421081125736, 0.014702003449201584, 0.001800642115995288, -0.010150037705898285, 0.00797300972044468, 0.007725620176643133, 0.01658216491341591, 0.006251886021345854, -0.017444493249058723, 0.015479513444006443, -0.02072417177259922, -0.02215196192264557, 0.01683662086725235, -0.0005990359932184219, 0.003982970956712961, -0.0024774291086941957, 0.007085941731929779, -0.00398650486022234, -0.03412561118602753, 0.000861445558257401, -0.035171717405319214, 0.023989712819457054, 0.0002719075419008732, 0.01213622186332941, -0.0018713247263804078, -0.025671960785984993, -0.015818791463971138, 0.006591162644326687, -0.018292685970664024, -0.002959838602691889, 0.03443661704659462, -0.010263130068778992, 0.018052363768219948, 0.006202408112585545, 0.00798007845878601, 0.008234536275267601, -0.018080636858940125, -0.009259435348212719, -0.021247223019599915, -0.024724813178181648, -0.03237268328666687, 0.05818600952625275, 0.017246581614017487, -0.026703927665948868, -0.016511481255292892, 0.0038557418156415224, -0.034238703548908234, -0.0066971867345273495, -0.003482890548184514, 0.001247549895197153, 0.017331400886178017, -0.006933974102139473, -0.007803371176123619, 0.014079996384680271, -0.003163051325827837, 0.007287387736141682, -0.0086303586140275, 0.022378146648406982, -0.017826179042458534, -0.030534930527210236, 0.02963019162416458, -0.014716139994561672, -0.03237268328666687, -0.02144513465464115, -0.005679355934262276, -0.01076497696340084, 0.027170434594154358, 0.0018306821584701538, -0.029262641444802284, 0.011535418219864368, -0.011259756051003933, -0.00027963847969658673, 0.009973330423235893, 0.020922081544995308, 0.022137824445962906, -0.027029069140553474, -0.014631320722401142, 0.02151581645011902, -0.008241604082286358, -0.028979912400245667, -0.01823613978922367, 0.0009930920787155628, -0.006700721103698015, -0.00252160569652915, -0.025629550218582153, -0.008764656260609627, 0.0017493971390649676, 0.01137284841388464, 0.00787405390292406, -0.0038628100883215666, 0.0009780720574781299, 0.030280472710728645, -0.00458023976534605, -0.018391640856862068, -0.029517099261283875, 0.0051845768466591835, -0.021628908812999725, 0.02818826586008072, -0.019253971055150032, -0.009358391165733337, 0.013896221294999123, -0.018971240147948265, 0.011167868040502071, 0.0042515648528933525, -0.0032142961863428354, -0.013288349844515324, -0.006297829560935497, -0.029319187626242638, -8.614455146016553e-05, -0.0015134935965761542, -0.01381846982985735, -0.00899084098637104, 0.014504092745482922, 0.011577827855944633, -0.019861841574311256, -0.005492046475410461, 0.021473407745361328, 0.005880801472812891, -0.012447225861251354, 0.028880955651402473, -0.012920799665153027, -0.027580393478274345, 0.012949072755873203, 0.006311966106295586, -0.013344896025955677, 0.000631284958217293, 0.2195122241973877, -0.010750840418040752, -0.010128832422196865, 0.041589707136154175, 0.010432768613100052, 0.024201760068535805, 0.023862482979893684, -0.00337156536988914, -0.012079675681889057, 0.004028914496302605, -0.004555500578135252, -0.011408189311623573, -0.025601277127861977, -0.0014127707108855247, 0.01464545726776123, -0.00024407623277511448, -0.01473027653992176, -0.03831002861261368, -0.012744092382490635, -0.011330438777804375, 0.01111839059740305, -0.0278489887714386, -0.025092361494898796, 0.002051565796136856, 0.02684529311954975, -0.022632604464888573, 0.0020338951144367456, 0.0030322882812470198, -0.004795821849256754, 0.004753412213176489, 0.001223694416694343, 0.010475177317857742, -0.004488352220505476, 0.02476722188293934, -0.023820074275135994, 0.0014958229148760438, 0.02021525613963604, -0.006757267285138369, 0.003094135783612728, -0.0068173473700881, 0.0026612039655447006, -0.024286579340696335, 0.0110123660415411, 0.0072273071855306625, -0.005106825847178698, -0.007704415358603001, -0.0017979914555326104, 0.014702003449201584, 0.014249634929001331, 0.008050761185586452, -0.036019910126924515, -0.01051051914691925, -0.0023060233797878027, 0.020540395751595497, -3.3104908652603626e-05, -0.010065218433737755, -0.004262167494744062, 0.0127865020185709, 0.01679421216249466, -0.0019879513420164585, -0.010934615507721901, 0.030789388343691826, -0.009966262616217136, 0.00974714569747448, -0.043314363807439804, 0.008086102083325386, -0.05258793756365776, 0.044671472162008286, 0.01594601944088936, 0.0033892360515892506, -0.0037709225434809923, -0.015196782536804676, -0.01776963286101818, -0.003235501004382968, -0.01764240488409996, -0.03958231955766678, 0.004795821849256754, -0.015027143992483616, 0.03797075152397156, 0.0565461702644825, -0.00022342363081406802, -0.0037461835891008377, -0.024569310247898102, 0.01312577910721302, -0.005919677205383778, -0.01940947212278843, 0.03862103447318077, -0.011464735493063927, -0.03406906500458717, -0.02831549383699894, -0.0007024094229564071, -0.012744092382490635, -0.031976860016584396, -0.02097862772643566, 0.016596300527453423, -0.009386664256453514, 0.0008287547971121967, 0.03330569341778755, -0.007513571996241808, -0.02410280518233776, -0.0461699478328228, 0.04255099222064018, 0.037999026477336884, 0.016893167048692703, -0.02119067683815956, 0.010715498588979244, -0.026562562212347984, 0.029743283987045288, 0.021954050287604332, -0.0017273087287321687, 0.010694294236600399, -0.03364497050642967, 0.0028326096944510937, -0.010241924785077572, -0.013945698738098145, 0.001915501430630684, 0.006675981916487217, -0.01068015769124031, 0.02448449097573757, -0.005877267569303513, -0.012072606943547726, -0.01670939289033413, 0.013500398024916649, 0.0025021680630743504, -0.040741514414548874, -0.014885778538882732, -0.019140878692269325, -0.005322407931089401, -0.018702644854784012, -0.011768671683967113, 0.017260717228055, -0.01768481358885765, 0.02134617790579796, -0.03169412910938263, -0.015437103807926178, 0.00985317025333643, 0.0017882726388052106, -0.003198392689228058, -0.015394694171845913, -0.021473407745361328, -0.021218949928879738, 0.006354375742375851, 0.03734874352812767, 0.013613490387797356, -0.010524655692279339, -0.019098468124866486, 0.008432446978986263, -0.014914051629602909, 0.006170600652694702, -0.014857505448162556, -0.011019434779882431, 0.019013648852705956, 0.016822485253214836, -0.0048594363033771515, 0.012744092382490635, -0.014687866903841496, 0.01169092021882534, -0.005205781664699316, -0.0011070679174736142, -3.346384619362652e-05, -0.05507596954703331, -0.007520640268921852, 0.013161120936274529, 0.006651243194937706, -0.00576064083725214, -0.01857541687786579, -0.18083465099334717, 0.012277587316930294, 0.009930920787155628, -0.02342425100505352, 0.03771629557013512, 0.003841605270281434, 0.044586654752492905, -0.012249314226210117, -0.011401121504604816, 0.01365590002387762, 0.0037885932251811028, 0.008354696445167065, -0.04339918494224548, -0.03333396837115288, 0.008962567895650864, 0.03257059305906296, -0.009718872606754303, -0.0059974282048642635, 0.030563203617930412, 0.026265695691108704, 0.03966713696718216, -0.027340073138475418, -0.0005354215390980244, -0.007916463539004326, 0.01002280879765749, -0.014631320722401142, 0.011669715866446495, 0.004237428307533264, -0.015394694171845913, -0.025417502969503403, -0.002035662066191435, 0.0015709232538938522, 0.03279677778482437, -0.014504092745482922, 0.03322087600827217, -0.014369795098900795, 0.035426173359155655, -0.0019031319534406066, -0.009634053334593773, 0.03726392611861229, 0.028640635311603546, 0.03347533196210861, -0.010482246056199074, -0.006375580560415983, 0.019310517236590385, 0.00807903427630663, -0.01373365055769682, 0.0063720461912453175, 0.004894777666777372, 0.010015740059316158, 0.040034689009189606, -0.003838071133941412, -0.00630843173712492, 0.0001584838901180774, -0.004219757858663797, 0.007322728633880615, -0.007987146265804768, 0.01321059837937355, 0.03288159891963005, -0.02709975093603134, 0.01815132051706314, -0.01991838775575161, 0.017373809590935707, 0.0038946173153817654, 0.0075771864503622055, -0.013620558194816113, -0.021035173907876015, 0.0007306825136765838, -0.0249368604272604, 0.002797268331050873, 0.005403693299740553, 0.009132206439971924, 0.007591322995722294, 0.028202401474118233, -0.003046424826607108, 0.006266022566705942, -0.010355017147958279, -0.005120962392538786, 0.028386177495121956, -0.020879672840237617, -0.008107307367026806, 0.03194858506321907, -0.02946055307984352, 0.002567549468949437, 0.016002565622329712, -0.016101522371172905, -0.014391000382602215, 0.002638232195749879, -0.01713348925113678, 0.013670036569237709, 0.03647227957844734, -0.01076497696340084, -0.0014110036427155137, 0.010482246056199074, 0.0006533733103424311, 0.03486071154475212, 0.015394694171845913, 0.00449542049318552, 0.018123047426342964, 0.014574775472283363, 0.017826179042458534, 0.016483208164572716, -0.018518870696425438, 0.00993798952549696, 0.013168188743293285, 0.023198066279292107, -0.025205453857779503, 0.012143289670348167, 0.03008256107568741, -0.007230841554701328, -0.018179593607783318, 0.03853621333837509, 0.0311852116137743, 0.005894938018172979, 0.0072273071855306625, 0.04371018707752228, 0.003133011283352971, -0.0037673884071409702, 0.016992123797535896, -0.02169959247112274, 0.039695411920547485, 0.0028714851941913366, 0.010814454406499863, 0.05335130915045738, -0.013931562192738056, -0.022123688831925392, -0.10585442930459976, -0.032174769788980484, -0.0037744566798210144, 0.007478230632841587, -0.031637582927942276, -0.013373169116675854, 0.008326423354446888, 0.030110834166407585, -0.053577493876218796, 0.011323370039463043, -0.0023749391548335552, -0.015536059625446796, -0.0037320470437407494, 0.009118069894611835, -0.005785380024462938, 0.014829232357442379, 0.008156784810125828, -0.0012024895986542106, -0.002714216010645032, 0.02185509353876114, 0.008792929351329803, 0.00018244974489789456, -6.088100690249121e-06, 0.0043893964029848576, 0.0063048978336155415, 0.016723528504371643, 0.004562568850815296, 0.00833349209278822, -0.004548432305455208, 0.022095415741205215, 0.030619749799370766, -0.010559996590018272, 0.01263806875795126, 0.013196461834013462, 0.005679355934262276, -0.019635656848549843, -0.007605459541082382, 0.022166097536683083, 0.006958712823688984, -0.048431795090436935, 0.0004444175574462861, -0.013973971828818321, 0.0019243367714807391, -0.0019402403850108385, -0.010736703872680664, 0.015762245282530785, -0.026746338233351707, 0.0047392756678164005, 0.017486901953816414, -0.018801601603627205, 0.00041062236414290965, -0.016059111803770065, -0.04048705846071243, -0.0038274687249213457, 0.0072379098273813725, -0.003806263906881213, -0.000175160588696599, 0.0026859429199248552, -0.015804653987288475, -0.020073890686035156, -0.004449476487934589, 0.0026240956503897905, -0.016553891822695732, 0.032514046877622604, -0.014341522008180618, 0.015210919082164764, -0.03398424759507179, -0.013981040567159653, -0.0030676296446472406, -0.00932304933667183, -0.0038557418156415224, 0.011839354410767555, -0.010312607511878014, 0.007287387736141682, -0.016949713230133057, 0.007958873175084591, 0.017204171046614647, 0.0004753412213176489, -0.000511124380864203, -0.005209316033869982, -0.02206714265048504, -0.009351322427392006, -0.004657990764826536, -0.027424892410635948, 0.0012281121453270316, 0.01460304856300354, 0.0403456911444664, -0.0139244943857193, 0.011415258049964905, -0.05190938338637352, -0.018165456131100655, 0.004940721672028303, 0.010531723499298096, -0.01907019503414631, -0.02185509353876114, 0.024328989908099174, -0.021628908812999725, 0.007149556186050177, 0.01579051837325096, 0.03726392611861229, -0.025601277127861977, 0.00775389326736331, -0.0674595758318901, 0.004506022669374943, -0.011471804231405258, -0.02586987242102623, 0.018222002312541008, -0.030026014894247055, -0.01109718531370163, -0.018759191036224365, 0.008213330991566181, 0.006856223102658987, -0.014970597811043262, 0.0014905217103660107, -0.009436141699552536, -0.026152603328227997, -0.003675500862300396, -0.01890055648982525, 0.010807386599481106, -0.0032142961863428354, 0.0013279514387249947, 0.023735255002975464, 0.011754535138607025, -0.00896963570266962, 0.009464414790272713, -0.005036143120378256, -0.04453010857105255, -0.009040318429470062, 0.0035818463657051325, 0.034210432320833206, 0.007803371176123619, -0.019989071413874626, 0.006181203294545412, -0.019974933937191963, -0.0015073087997734547, 0.0230849739164114, 0.011952446773648262, -0.016864893957972527, -0.012348270043730736, -0.002277750289067626, 0.0007324495818465948, 0.002044497523456812, -0.009535097517073154, -0.019423609599471092, 0.012602726928889751, -0.016992123797535896, -0.007909395731985569, -0.007909395731985569, 0.021204812452197075, -0.006209476385265589, 0.03194858506321907, 0.014843368902802467, 0.02991292253136635, 0.012093812227249146, -0.014475819654762745, -0.018787464126944542, 0.003242569277063012, -0.002048031659796834, 0.0031100392807275057, 0.01221397239714861, 0.002404979197308421, -0.014171883463859558, 0.017486901953816414, -0.0050432113930583, 0.009146342985332012, -0.011747466400265694, 0.0031383123714476824, -0.022887062281370163, -0.02954537235200405, -0.004244496580213308, -0.004735741764307022, 0.0015320477541536093, -0.01525332871824503, -0.001656626001931727, 0.010955819860100746, -0.013253008015453815, 0.024173486977815628, 0.0006926905480213463, -0.015408830717206001, -0.006675981916487217, 0.0021434531081467867, 0.028725454583764076, 0.018716782331466675, -0.026817020028829575, -0.020526260137557983, 0.015818791463971138, 0.038253482431173325, 0.022053005173802376, -0.006750199012458324, -0.006463933736085892, 0.027495574206113815, -0.014687866903841496, -0.013245940208435059, 0.014772686176002026, 0.014829232357442379, 0.0092382300645113, 0.010397426784038544, -0.005368351936340332, 0.0036861032713204622, 0.018999513238668442, 0.0028750193305313587, 0.024668266996741295, 0.011217346414923668, 0.01641252636909485, 0.018518870696425438, -0.023537343367934227, -0.003654296277090907, 0.0062377494759857655, -0.002085139974951744, 0.011811081320047379, 0.001920802635140717, 0.02523372694849968, -0.006495741195976734, 0.011075980961322784, -0.02903645858168602, 0.026265695691108704, -0.005364817567169666, 0.005566263571381569, 0.013168188743293285, -0.015196782536804676, -0.012397747486829758, 0.017105216160416603, -0.007951805368065834, 0.012828911654651165, 0.03975195810198784, -0.0048594363033771515, 0.03313605487346649, 0.02688770368695259, 0.016850758343935013, -0.002846746239811182, -0.005124496761709452, -0.004947789944708347, -0.014716139994561672, 0.009733009152114391, -0.02338184043765068, -0.014800959266722202, 0.004824094939976931, -0.011726262047886848, 0.0045767053961753845, 0.025389229878783226, -0.011167868040502071, 0.08080447465181351, 0.015677426010370255, -0.02574264258146286, -0.014843368902802467, -0.030959026888012886, 0.014928188174962997, -0.005810118746012449, 0.011683852411806583, -0.022123688831925392, -0.02729766257107258, 0.022349873557686806, -0.012970277108252048, -0.03299469128251076, -0.023268748074769974, 0.0012767064617946744, -0.008043692447245121, -0.02114826627075672, 0.01103357132524252, -0.006407387554645538, -0.0031948585528880358, 0.015465376898646355, 0.002169959247112274, 0.03160930797457695, -0.013747787103056908, -0.031637582927942276, 0.025332683697342873, 0.021388588473200798, 0.003290280234068632, 0.00016996983322314918, -0.04461492598056793, 0.027947943657636642, 0.0069127692840993404, -0.025728506967425346, -0.0017944573191925883, 0.01579051837325096, 0.03299469128251076, 0.008418310433626175, -0.02612433023750782, 0.018631963059306145, 0.035680633038282394, -0.005654616747051477, -0.009612848982214928, -0.02620914950966835, -0.02946055307984352, 0.01612979546189308, 0.0016610437305644155, -0.004025380592793226, -0.01721830852329731, -0.020695898681879044]"
Leveraging the power of Lua scripting with Dragonfly,Leveraging the power of Lua scripting with Dragonfly,"  ## Introduction  Developers often turn to Lua scripting in order to add rate-limiting, custom data types, or intricate transactional logic to Redis. But while Redis lightning fast data operations and Luas flexibility make for a formidable combination, there are still limitations.  Among these challenges are issues related to long-running scripts blocking the data store and constraints on non-atomic script execution, all of which can impact the performance and scalability of applications relying on Redis. Additionally, Rediss single-threaded architecture and its approach to horizontal scaling introduce difficulties, particularly when executing Lua scripts across a distributed data environment.  That's where Dragonfly comes in. Its a drop-in replacement for Redis that not only preserves the strengths of Lua scripting but also addresses some of these key challenges, thanks to its vertically scalable, multi-threaded, asynchronous architecture. In this blog post we will explore where Redis falls short when it comes to Lua scripting, and how Dragonfly offers a superior experience.   ### 1. Dragonflys multi-threaded, asynchronous architecture provides better performance for long running and/or computationally-heavy scripts  Redis operates in a single-threaded manner, meaning it processes one operation at a time. This becomes a bottleneck when executing long-running or computationally heavy Lua scripts, as they can block other operations until completion.  Dragonfly, on the other hand, is constructed around a multi-threaded, asynchronous architecture. This approach provides several advantages. First, it promotes higher throughput due to parallel processing. Second, it allows multiple script execution units to run concurrently, which is particularly beneficial for computationally intensive scripts, such as those computing hashes or aggregating values.  Furthermore, Dragonfly supports asynchronicity, meaning regular commands can be mixed with commands from an already running script as long as the script's atomicity is preserved. This keeps Dragonfly available for incoming requests even while a script is executing.  To illustrate this, let's consider a simple Lua script that pushes values into a list:   ```lua local n = tonumber(ARGV[1]) for i = 1, n do redis.call('LPUSH', KEYS[1], i) end ```  We can run this script on a Dragonfly instance with only a single core. If the argument is large enough, it will take quite some time. Yet the instance is fully responsive and can handle commands.   ### 2. Dragonfly offers special optimizations for write-heavy scripts  Lua scripts are often used to insert or update many values at once. In those cases they usually issue many simple sequential write commands. If their output is discarded - i.e. not stored in variables or used inside conditions in the script - then there is great potential for parallelization.  Dragonfly, in its recent versions, introduces optimizations for this exact scenario. It is capable of executing all the write commands in parallel as long as they do not influence the overall execution flow of the script. This feature enhances performance by utilizing multi-threading. It can be enabled by passing the following flag: `lua_auto_async=true`.  Take, for example, a script that pushes values from a JSON array to multiple lists and trims these lists if they become too long. We test this script in both Redis and Dragonfly using a single connection on a single thread to ensure that there is no interference from multiple scripts running simultaneously.   ```lua local messages = cjson.decode(ARGV[1]) for _, key in ipairs(KEYS) do for _, message in ipairs(messages) do redis.pcall(""LPUSH"", key, message) redis.pcall(""LTRIM"", key, 0, 50) end end return ""OK"" ```  Our benchmark results show that Dragonfly is around 35% faster than Redis for executing sequential commands from a single connection, highlighting its effective use of parallelization.   ``` memtier_benchmark --command=""EVALSHA {sha} 5 l1 l2 l3 l4 l5 '[1,2,3,4,5]'"" --hide-histogram --test-time=5 --distinct-client-seed -t 1 -c 1 --pipeline 5 ``` |       |  | | ----------- | ----------- | | Dragonfly      | 16k QPS       | | Redis   | 12k QPS        |  Moreover, when we run the benchmark allowing multiple scripts to execute in parallel from 4 threads, Dragonfly demonstrates almost triple the performance compared to Redis. It's capable of effectively handling more than 2 million operations per second on an instance running on only 4 cores (40k invocations per second, each perform 50 operations).   ``` memtier_benchmark --command=""EVALSHA {sha} 5 __key__ __key__ __key__ __key__ __key__ '[1,2,3,4,5]'"" --hide-histogram --test-time=5 --distinct-client-seed -t 4 -c 50 --pipeline 5 ``` |       |  | | ----------- | ----------- | | Dragonfly      | 41.5k QPS       | | Redis   | 14.5k QPS        |  This implies that Dragonfly scales more efficiently compared to Redis. Its architecture leverages multi-threading, making it well-suited for high-throughput use cases, while Redis' single-threaded nature might limit its scalability in similar scenarios.  ### 3. Dragonfly allows you to scale Lua scripts vertically  Redis supports only horizontal scaling with Redis Cluster. The absence of vertical scaling brings its own set of challenges when running Lua scripts. When you're using a cluster, data is distributed across multiple nodes based on a hash slot mechanism, which means different keys may reside on different nodes.  In Redis, Lua scripts are executed atomically. This means that a script is a single, indivisible operation which runs from start to finish without any other operation interrupting it. When you're using a cluster, this atomicity is preserved, but with a key limitation: a single Lua script cannot operate on keys that are stored on multiple nodes.  **This means that when you're writing Lua scripts for a Redis Cluster, you have to ensure that all keys used in a single Lua script are located on the same node.** In practice, this usually means you have to use a concept called ""hash tags"" to ensure certain keys end up on the same node. Yet it many cases, when the data is only loosely interconnected and different access patterns are used in the application, correctly assigning hash tags to all keys might be simply impossible  This also means that script-heavy systems tend to scale more effectively vertically than horizontally. Vertical scaling allows every script to access all keys fully.  Let's examine a specific example. Suppose we run a game development company, and we store leaderboards for different game rooms in our datastore. Our anti-cheat team develops a new heuristic that needs to quickly identify users who made it into the top 10 in at least half of a particular set of game rooms. These suspicious users need to be stored in a separate set, frequently accessed by our anti-cheat software.  If we use a cluster, then our script needs to execute on all nodes. The results of that script (suspicious users for each node) are sent back to the application, which then aggregates them into a final set of suspicious users.  With Dragonfly, we can conduct the entire operation with a single operation, removing the need for costly round trips between our application and multiple nodes.    ![diagram](/assets/blog/leveraging-power-of-lua-scripting/diagram.png)    ### 4. Dragonfly offers a way to run Lua scripts non-atomically  Lua scripts run atomically by default, meaning that each operation is executed in one uninterrupted sequence without any other command being able to interleave. This is crucial when executing Lua scripts that require atomic execution for consistency. However, it can pose challenges when you want to use scripts just to decrease network round trips without actually needing atomicity for the entire script.  For instance, suppose you need to compute a live metric on all recently active users whose profiles are cached in the datastore. If atomicity is enforced while the script calculates this metric, it would block all access to user profiles, potentially causing significant slowdowns in your application. Yet the metric doesnt need to be exact, meaning it can run in a non isolated state where user profiles are constantly updated. A potential solution would be calculating the metric in the application by querying the datastore for user profiles with pipelined requests. However if the metric is quick to compute and the user profiles are large, our approach would produce lots of unneeded and excessive traffic.  **Dragonfly presents a solution to this problem by offering the ability to run scripts non-atomically. It means that other commands can interleave with a scripts commands even if they access the same keys. The scripts execution becomes analogous to a series of pipelined commands, only that it's not produced by a client, but the script itself.**  Here's how it works: Dragonfly provides specific script flags such as:    * ""disable-atomicity"" allows non-atomic execution * ""allow-undeclared-keys"" permits the script to access undeclared keys.  (Note that accessing undeclared keys is generally discouraged by Redis and is disabled by default in Dragonfly, due to its unpredictable behavior in a multi-threaded asynchronous environment.)  Here's a simple Lua script example which computes metrics for an anticheat team:  ```lua #!lua flags=disable-atomicity,allow-undeclared-keys local cursor = ""0"" repeat local result = redis.call(""SCAN"", cursor, ""MATCH"", ""user:*"") cursor = result[1] for _, user in ipairs(result[2]) do process_stats(user) end until cursor == ""0"" ```  Even if this script takes a few seconds to execute, user profiles remain fully accessible, and the cache continues to operate normally, with only a slight reduction in throughput.   ### 5. Dragonfly can be configured so that certain keys are not evictable  When Redis is used as a cache, it implements an eviction policy: data that isnt accessed frequently is automatically removed to free up memory for new or more frequently accessed data. This eviction strategy is efficient; however, it creates a problem when you want to store auxiliary data that may not be accessed often but is still important and needs to be readily accessible.  For instance, lets say that you have a Lua script that calculates debug metrics running on Redis once a day. The output metrics are infrequently accessed and therefore subject to eviction. On the other hand, you dont want to have to store them in a separate database or datastore - ideally you can store the debug metrics in the cache itself.  In a scenario like this, Dragonfly offers significantly more control than Redis. It provides a ``STICK key [keys]`` command that makes certain keys not evictable.  To go back to our example, we can write a simple Lua script that will calculate the debug metrics, and to make the result not evictable, we use the ``STICK`` option of the ``SET`` command.   ```lua local result = calc_metric() redis.call('SET', 'last-metric', result, 'STICK') ```   ### Conclusion  As we've explored, Dragonfly provides you with the tools to mitigate common issues encountered with Redis and Lua scripting, whether it's handling long-running scripts, executing large numbers of write commands efficiently, providing better scalability options, or offering the ability to run non-atomic scripts. You can try Dragonfly today by viewing our docs or checking out the Dragonfly project on Github.","[-0.01408118661493063, -0.0015116978902369738, -0.0021275749895721674, -0.024733057245612144, 0.008139373734593391, 0.004955010022968054, -0.026608683168888092, 0.0004186038568150252, -0.016460711136460304, -0.04047991335391998, 0.01130274124443531, 0.0031266252044588327, -0.0062147583812475204, -0.010861829854547977, -0.002563237911090255, 0.02165367268025875, 0.010574886575341225, -0.027742456644773483, 0.018588285893201828, -0.016166768968105316, 0.009168168529868126, -0.012387524358928204, -0.017090585082769394, -0.004857029300183058, -0.038884229958057404, 0.0076634688302874565, 0.013927217572927475, -0.012513499706983566, -0.006942612584680319, 0.028274349868297577, 0.027938418090343475, -0.013318338431417942, 0.0017426518024876714, 0.009455110877752304, -0.03549690544605255, -0.011169767938554287, -0.003527295310050249, 0.0013804741902276874, 0.013570288196206093, 0.013339335098862648, 0.046694669872522354, -0.008790243417024612, -0.00939912162721157, -0.032109584659338, -0.015956811606884003, 0.026342736557126045, 0.014991004951298237, -0.02355729229748249, -0.0018231357680633664, -0.023277349770069122, 0.007712458726018667, 0.026482708752155304, -0.02277345024049282, 0.0055603887885808945, 0.013822237960994244, 0.004003200214356184, 0.024411123245954514, -0.0055848839692771435, 0.012821437790989876, -0.015046993270516396, 0.0032456014305353165, 0.039724063128232956, -0.013899222947657108, 0.005948811303824186, -0.004440612625330687, 0.0070335944183170795, -0.009721057489514351, -0.014557091519236565, 0.008013398386538029, -0.011750652454793453, 0.003285843413323164, 0.01970806159079075, 0.004538593348115683, -0.002334033604711294, 0.0429714135825634, -0.03306139260530472, 0.014487105421721935, -0.009315138682723045, 0.013941214419901371, -0.004811538383364677, 0.005115977954119444, 0.015648873522877693, -0.01863027736544609, 0.030010003596544266, 0.0050214966759085655, 0.03644871711730957, -0.015830837190151215, 0.008069387637078762, -0.015130976215004921, 0.0029446615371853113, -0.006092282477766275, 0.0008092133211903274, 0.018168369308114052, 0.01847630739212036, 0.008811239153146744, -0.010357930324971676, -0.0025159972719848156, 0.007537493947893381, -0.01620876044034958, -0.003670766483992338, -0.01970806159079075, 0.008405320346355438, -0.008167368359863758, -0.02023995667695999, -0.020337935537099838, -0.005308439489454031, 0.01637672819197178, -0.01431913860142231, 0.026538698002696037, -0.003333084052428603, -0.03294941782951355, 0.028218362480401993, 0.022073589265346527, -0.005805340129882097, -0.007089583203196526, -0.00024254528398159891, 0.037176571786403656, -0.00979104358702898, -0.007163068745285273, -0.009623076766729355, 0.03950010612607002, 0.009931015782058239, 0.030149975791573524, -0.011589684523642063, 0.021835636347532272, -0.0050704870373010635, 0.004227155353873968, -0.0062462519854307175, 0.01233853492885828, -0.009994002990424633, 0.019176168367266655, 0.01795841194689274, 0.0104909036308527, -0.014837034977972507, -0.020085986703634262, -0.013486305251717567, -0.02782643958926201, -0.006652170792222023, -0.021387726068496704, -0.004496601410210133, 0.010896822437644005, 0.003035643370822072, -0.03994801640510559, -0.015550892800092697, -0.0203799270093441, 0.019008202478289604, 0.008881225250661373, -0.0016796643612906337, 0.007754450663924217, -0.023935217410326004, 0.0018301343079656363, -0.025558892637491226, -0.0008061514236032963, 0.0055288951843976974, 0.0006867377669550478, 0.013864229433238506, -0.015648873522877693, 0.005878825206309557, -0.02050590328872204, -0.008776246570050716, 0.013703261502087116, 0.02754649519920349, -0.010021997615695, -0.0012326287105679512, 0.003873725887387991, 0.022955413907766342, 0.0038562293630093336, -0.027112582698464394, 0.0021363231353461742, -0.011288744397461414, 0.005651370622217655, 0.04644272103905678, -0.020407922565937042, 0.02833033911883831, -0.014991004951298237, 0.024117181077599525, -0.004398621153086424, 0.004923516418784857, 0.006648671347647905, -0.0031056294683367014, 0.03712058439850807, -0.005283944308757782, 0.007537493947893381, 0.030625879764556885, -0.01702059991657734, -4.797869223693851e-06, -0.015382925979793072, 0.0004465982783585787, 0.007460509426891804, -0.012051591649651527, -0.019680067896842957, 0.014809041284024715, -0.013647273182868958, -0.035272952169179916, -0.5979605317115784, -0.0028799246065318584, -0.009196162223815918, -0.04045191779732704, -0.006536693777889013, -0.017608482390642166, 0.008594282902777195, 0.015578887425363064, -0.017062591388821602, 0.0042411526665091515, -0.002197560854256153, -0.006942612584680319, 0.015508901327848434, -0.011806640774011612, -0.03308938816189766, -0.001614927314221859, -0.003119626548141241, -0.011085784994065762, -0.025838837027549744, 0.008447311818599701, -0.03726055473089218, 0.04005999490618706, 0.015298943035304546, -0.0020925819408148527, -0.00216956646181643, 0.002531744074076414, 0.006109779234975576, 0.017118578776717186, 0.00937812589108944, 0.02848430909216404, -0.03770846500992775, 0.018742255866527557, 0.009812039323151112, -0.00473105488345027, 0.04963408410549164, -0.003558788914233446, -0.019694065675139427, 0.024621080607175827, 0.009448111988604069, 0.0286242812871933, -0.008377325721085072, -0.008300341665744781, 0.03513298183679581, 0.008384324610233307, 0.0057388534769415855, -0.01812637783586979, 0.019512102007865906, -0.01043491531163454, 0.006473706569522619, -0.007215558085590601, -0.00252824486233294, -0.008447311818599701, -0.0025439916644245386, -0.011540694162249565, -0.0006101905601099133, -0.01685263216495514, 0.030065992847085, -0.03871626406908035, 0.014032196253538132, -0.010245952755212784, 0.0011923867277801037, 0.0104909036308527, -0.010497902520000935, 0.002697960939258337, -0.02611878141760826, -0.010406920686364174, -0.020771849900484085, -0.010826836340129375, 0.004475605674088001, -0.02942212112247944, 0.04221556335687637, -0.014298142865300179, 0.017860431224107742, -0.00820935983210802, 0.004976005759090185, 0.021555693820118904, 0.03742852061986923, 0.012240554206073284, 0.00037114458973519504, 0.010546892881393433, 0.012023597955703735, -0.007215558085590601, -0.021681668236851692, -0.02180764265358448, 0.029478110373020172, 0.004839533008635044, -0.012345532886683941, -0.013318338431417942, 0.010959809646010399, 0.025236956775188446, 0.003119626548141241, 0.042243558913469315, -0.015830837190151215, -0.024145174771547318, 0.01735653169453144, 0.01828034780919552, -0.025866830721497536, -0.010966808535158634, -0.004654069896787405, -0.029842037707567215, -0.02084183506667614, -0.027574490755796432, -0.01987602934241295, -0.009728056378662586, 0.01704859361052513, -0.0075025008991360664, -0.02130374312400818, -0.017776448279619217, 0.03944411873817444, -0.01577484793961048, 0.0030776350758969784, -0.012618478387594223, -0.012310540303587914, 0.0017732706619426608, 0.018028397113084793, -0.03070986457169056, 0.0259088221937418, -0.026860632002353668, 0.027560492977499962, -0.035552896559238434, -0.01685263216495514, 0.009406120516359806, 0.008314338512718678, -0.0009885524632409215, 0.014669069088995457, 0.006274246145039797, 0.0015624378575012088, -0.014186165295541286, -0.005903320387005806, 0.00230778893455863, 0.007523496635258198, -0.023179369047284126, 0.02035193331539631, -0.015480906702578068, 0.043671272695064545, -0.012702462263405323, 0.004370626527816057, -0.0036357734352350235, 0.02817636914551258, -0.024397125467658043, -0.002145071281120181, 0.003975205589085817, 0.010091983713209629, -0.011449712328612804, -0.02386523224413395, -0.023445315659046173, -0.015872828662395477, -0.0007790318340994418, 0.011834635399281979, -0.007096582092344761, -0.01009898167103529, -0.0163907241076231, 0.010686865076422691, 0.010721857659518719, -0.019778048619627953, 0.014361130073666573, -0.013080386444926262, -0.034629080444574356, 0.007145572453737259, -0.023501304909586906, -0.011974607594311237, 0.03798840939998627, -0.007215558085590601, 0.012212559580802917, -0.03801640495657921, -0.01811238005757332, -0.01471106056123972, 0.021583687514066696, -0.01320636086165905, -0.023011401295661926, -0.014375127851963043, -0.023165371268987656, 0.015830837190151215, 0.005066987592726946, -0.002563237911090255, -0.009364129044115543, -0.008321337401866913, 0.016922619193792343, -0.002281544031575322, -0.004115177784115076, -0.0022395525593310595, 0.02495701238512993, 0.0017548993928357959, -0.020141975954174995, 0.0298980250954628, 0.004650570917874575, 0.014767049811780453, -0.0021275749895721674, -0.005150971002876759, 0.03135373443365097, 0.00719456234946847, 0.03868826851248741, -0.02978604845702648, -0.029674069955945015, -0.005945311859250069, -0.005934813991189003, 0.003030394436791539, 0.008895223028957844, -0.004685563966631889, 0.03306139260530472, 0.016446713358163834, -0.011274747550487518, 0.007250551134347916, -0.016488704830408096, -0.018378328531980515, -0.010889824479818344, -0.0014609580393880606, 0.00482203671708703, 0.027924420312047005, -0.02053389698266983, 0.0033558295108377934, 0.0006346856825985014, -0.010217958129942417, -0.009413119405508041, -0.006249751430004835, 0.035552896559238434, -0.011239754036068916, -0.008944212459027767, 0.0022395525593310595, 0.004832534585148096, 0.005990802776068449, 0.012009600177407265, 0.0010480405762791634, 0.008076386526226997, 0.00011192294914508238, 0.0032508503645658493, -0.009812039323151112, 0.03768046945333481, -0.0012063839239999652, -0.03815637528896332, 0.005269946996122599, 0.014627077616751194, -0.007023096550256014, -0.0033558295108377934, 0.03227755054831505, 0.02564287558197975, 0.03250150755047798, -0.018224358558654785, 0.010658870451152325, -0.034125182777643204, 0.015942813828587532, 0.007257550023496151, 0.009833035059273243, -0.023025399073958397, 0.021737655624747276, 0.018224358558654785, 0.04154369980096817, 0.007859429344534874, -0.026468710973858833, 0.010224957019090652, -0.02228354662656784, 0.0013673517387360334, -0.012128576636314392, -0.0015860580606386065, 0.003789742710068822, -0.007488503586500883, 0.01224755309522152, 0.021093785762786865, 0.031297747045755386, 0.030933819711208344, -0.005266447551548481, 0.010399921797215939, 0.00017310603288933635, 0.013507300987839699, 0.02771446295082569, -0.005637373775243759, -0.0021853132639080286, -0.02452309988439083, -0.011379726231098175, 0.003198361024260521, 0.0038212365470826626, -0.035748858004808426, -0.009133175015449524, -0.040675871074199677, 0.031913623213768005, -0.010749852284789085, -0.004055689554661512, 0.01200260128825903, -0.012765449471771717, 0.0018143875058740377, 0.01336033083498478, -0.03180164471268654, 0.018896223977208138, -0.008944212459027767, -0.010875826701521873, -0.03712058439850807, -0.02039392478764057, 0.03933214023709297, 0.01232453715056181, 0.0025492405984550714, 0.013647273182868958, 0.0015405671438202262, 0.007103580515831709, 0.00021083287720102817, 0.013843233697116375, 0.0021730659063905478, 0.06074786186218262, -0.00923115573823452, -0.007047591730952263, -0.02464907430112362, 0.014935015700757504, 0.025544896721839905, -0.030429920181632042, -0.024719061329960823, 0.05694062262773514, 0.002778444904834032, -0.012156571261584759, -0.018854232504963875, 0.02371126227080822, 0.01137272734194994, -0.0015843084547668695, -0.03451710194349289, -0.02261948026716709, -0.03308938816189766, 0.022787446156144142, 0.01622275821864605, -0.015620878897607327, -0.0034608084242790937, 0.020015999674797058, 0.02225555293262005, -0.03023395873606205, -0.021037796512246132, -0.013122377917170525, 0.004944512154906988, 0.043027400970458984, 0.014417119324207306, 0.009434115141630173, 0.0007680965354666114, -0.04056389629840851, 0.0015668119303882122, -0.011428716592490673, -0.026188766583800316, 0.04218757152557373, -0.0019053693395107985, 0.004937513265758753, -0.016138775274157524, 0.00907018780708313, 0.0075654881075024605, 0.0010856580920517445, 0.027924420312047005, -0.028862232342362404, -0.03409718722105026, -0.01083383522927761, 0.0007650346378795803, 0.018336337059736252, 0.0005948811303824186, 0.028246356174349785, 0.017636476084589958, 0.03264147788286209, 0.023319341242313385, 0.01958208717405796, -0.006085284054279327, -0.01032993569970131, -0.008076386526226997, -0.028064392507076263, -0.005231454502791166, 0.001766272122040391, 0.046834640204906464, -0.019680067896842957, 0.026650674641132355, 0.020925818011164665, -0.02372526004910469, 0.006505200173705816, 0.012765449471771717, 0.012135575525462627, 0.020757852122187614, 0.014193164184689522, 0.007107079960405827, 0.01552289817482233, -0.017286546528339386, -0.015578887425363064, 0.027910422533750534, -0.04523896053433418, 0.01176464930176735, 0.04269146919250488, -0.026174770668148994, -0.028106383979320526, -0.003508049063384533, 0.006648671347647905, -0.005945311859250069, 0.025236956775188446, -0.00025457414449192584, 0.007775446400046349, -0.041599687188863754, -0.010798842646181583, 0.004818537272512913, -0.01846231147646904, -0.012709460221230984, -0.012317539192736149, -0.002138072857633233, -0.013724258169531822, 0.012744453735649586, -0.013738255016505718, -0.014613079838454723, -0.017776448279619217, -0.02721056342124939, -0.029646076261997223, 0.010931815952062607, 0.03451710194349289, 0.021723659709095955, 0.01972205936908722, 0.01623675599694252, -0.0006539318128488958, 0.004594582132995129, -0.007754450663924217, -0.011106780730187893, 0.00914717186242342, -0.02357129007577896, -0.023655273020267487, -0.002694461727514863, 0.007110579404979944, -0.0024600084871053696, -0.02004399523139, 0.009042193181812763, 0.023445315659046173, 0.010665868408977985, 0.028218362480401993, -0.00020536521333269775, 0.009441113099455833, -0.008811239153146744, 0.026174770668148994, 0.03479704633355141, 0.023333337157964706, -0.039696067571640015, 0.016264749690890312, -0.010938813909888268, -0.004062688443809748, -0.019638076424598694, -0.011120777577161789, -0.0305698923766613, 0.021919619292020798, 0.013416319154202938, 0.001805639243684709, -0.03154969587922096, 0.013892224058508873, -0.0017758951289579272, 0.002951660193502903, 0.020939815789461136, 0.04913018271327019, 0.006424716208130121, -0.005049490835517645, 0.012135575525462627, -0.016264749690890312, -0.020281948149204254, 0.025544896721839905, -0.02513897605240345, 0.006151770707219839, 0.033845238387584686, -0.002477505011484027, 0.01257648691534996, 0.038744259625673294, -0.03798840939998627, -0.013010400347411633, 0.0055218967609107494, 0.013654272072017193, 0.025824839249253273, 0.009315138682723045, -0.026216762140393257, -0.011442713439464569, -0.013010400347411633, -0.026706663891673088, -0.010203961282968521, -0.014221158809959888, 0.0115476930513978, -0.011218758299946785, -0.0018878728151321411, 0.013913219794631004, -0.03247351199388504, 0.004332134500145912, -0.023991206660866737, -0.036196768283843994, 0.016432717442512512, 0.020799843594431877, 0.011379726231098175, -0.015984805300831795, -0.02785443514585495, -0.008776246570050716, -0.0229274183511734, -2.182962271035649e-05, -0.011078786104917526, 0.01422815676778555, -0.012625477276742458, 0.02690262533724308, 0.0038877232000231743, 0.048794250935316086, 0.03790442645549774, 0.005619877018034458, 0.014004201628267765, 0.00017748016398400068, 0.002636723220348358, 0.002419766504317522, 0.005000500939786434, -0.007439513690769672, -0.012170568108558655, 0.014683065935969353, 0.014501102268695831, -0.009035194292664528, -0.02197560854256153, -0.006750151049345732, 0.01766446977853775, -0.02021196112036705, -0.01780444197356701, -0.03280944377183914, -0.0298980250954628, -0.009546092711389065, 0.02894621528685093, -0.0009001951548270881, 0.001292116823606193, -0.015998803079128265, -0.014599082991480827, 0.021681668236851692, -0.020085986703634262, 0.021387726068496704, 0.007922416552901268, 0.01025994960218668, -0.0057738465256989, 0.0007886548992246389, -0.0029621580615639687, 0.014781046658754349, -0.017272548750042915, -0.01408118661493063, -0.02527894824743271, -0.0205478947609663, 0.018686266615986824, 0.028610283508896828, 0.002010348252952099, 0.012072587385773659, -0.005556889809668064, -0.016936615109443665, 0.005931315012276173, -0.013402322307229042, 0.023347334936261177, 0.0035482910461723804, -0.02002999745309353, -0.003842232283204794, -0.040031999349594116, -0.019442114979028702, -0.03658868744969368, 0.002650720300152898, 0.017412520945072174, 0.011512699536979198, 0.00608178460970521, 0.015690864995121956, -0.011561689898371696, 0.01074285339564085, -0.010777846910059452, 0.030793847516179085, -0.0035780351608991623, 0.011162769980728626, 0.025096984580159187, 0.004426615312695503, -0.005661868490278721, -0.03180164471268654, 0.03070986457169056, -0.031885627657175064, 0.010014998726546764, 0.03406919166445732, -0.010042993351817131, -0.006998601369559765, -0.008657270111143589, -0.007691462989896536, -0.005605879705399275, -0.04168367013335228, 0.008489303290843964, 0.021709661930799484, -0.011708660051226616, -0.027756454423069954, -0.00995201151818037, -0.024439116939902306, 0.0026262253522872925, -0.028372330591082573, 0.02261948026716709, 0.01703459583222866, 0.0023707763757556677, -0.024033198133111, 0.02911418303847313, 0.011309740133583546, 0.02561488188803196, -0.006925116293132305, 0.02719656564295292, -0.023963211104273796, 0.009371127933263779, -0.021093785762786865, -0.010336934588849545, 0.015116979368031025, 0.02866627275943756, 0.0006867377669550478, -0.006557689514011145, 0.0203799270093441, 0.003971706610172987, 0.022689465433359146, -0.008419318124651909, -0.0011337734758853912, 0.03163367882370949, -0.022829437628388405, 0.01956808939576149, 0.007215558085590601, -0.0028186868876218796, 0.004839533008635044, -0.012429516762495041, -0.027952414005994797, 0.010392922908067703, -0.012604481540620327, 0.002453009830787778, 0.007943413220345974, -0.018504302948713303, -0.006102780811488628, 0.007404520642012358, -0.006319737061858177, -0.020141975954174995, -0.007642473094165325, -0.013738255016505718, 0.013822237960994244, -0.022353533655405045, -7.053278386592865e-05, 0.009014198556542397, 0.008300341665744781, 0.0062952423468232155, 0.015088984742760658, 0.0015641874633729458, -0.0017470258753746748, 0.031297747045755386, 0.004080184735357761, 0.029198165982961655, 0.029310142621397972, -0.009021197445690632, -0.003996201325207949, 0.010700861923396587, -0.002034843433648348, -0.025516901165246964, 0.01718856580555439, -0.027896426618099213, -0.036196768283843994, -0.010819838382303715, -0.0037722461856901646, -0.011204761452972889, -0.016278747469186783, -0.0026017301715910435, 0.0191061832010746, 0.0019316140096634626, 0.008328336291015148, -0.026706663891673088, -0.009896022267639637, 0.014151172712445259, -0.0230953861027956, 0.004094182047992945, 0.013780246488749981, 0.014116179198026657, -0.0021030798088759184, -0.010861829854547977, -0.00308463373221457, -0.02082783915102482, -0.015060991048812866, -0.0036357734352350235, -0.005679365247488022, 0.006869127508252859, -0.01327634695917368, -0.00405918899923563, 0.0007619727402925491, -0.03457309305667877, -0.021611681208014488, 0.023347334936261177, -0.01989002525806427, 0.014207161031663418, 0.01232453715056181, 0.006102780811488628, 0.0114637091755867, 0.017580486834049225, 0.00306188827380538, -0.007163068745285273, -0.0027749454602599144, -0.01924615353345871, -0.05285343900322914, -0.013031396083533764, -0.01938612572848797, 0.04630274698138237, 0.015620878897607327, 0.007264548446983099, -0.004426615312695503, -0.0035727862268686295, -0.04949411004781723, -0.0026069791056215763, -0.01027394738048315, 0.012814439833164215, 0.021359732374548912, 0.002876425161957741, 0.03496501222252846, 0.018266350030899048, 0.014375127851963043, 0.01218456495553255, -0.02978604845702648, 0.0003814238007180393, -0.00679914141073823, -0.007236553821712732, 0.02911418303847313, 0.007369527593255043, -0.03801640495657921, -0.022493505850434303, -0.0035290447995066643, -0.00489552179351449, -0.00033505805185995996, 0.012856431305408478, -0.013248353265225887, 0.021121779456734657, -0.01877024956047535, 0.013584285974502563, -0.0038282349705696106, -0.012905421666800976, 0.004787043668329716, -0.026944616809487343, -0.0050109988078475, 0.016502702608704567, -0.007880425080657005, -0.014697063714265823, -0.005759849213063717, 0.0016123028472065926, 0.0022045595105737448, 0.00874825194478035, -0.002423265716060996, -0.0007409769459627569, 0.011799641884863377, -0.020099984481930733, 0.003567537060007453, -0.004437113180756569, 0.03516097366809845, 0.04070386663079262, -0.021401723846793175, -0.008685264736413956, -0.006743152625858784, 0.0063092391937971115, -0.02450910210609436, 0.0010839083697646856, 0.010630875825881958, 0.009476106613874435, 0.003397820983082056, -0.009784044697880745, 0.016754651442170143, 0.002914917655289173, -0.0011713909916579723, -0.013843233697116375, -0.01861627958714962, -0.02754649519920349, 0.01496301032602787, -0.025054993107914925, -0.010861829854547977, -0.024705063551664352, 0.022339535877108574, 0.018574288114905357, -0.0115476930513978, -0.012723457999527454, 0.02182164043188095, -0.020323939621448517, 0.015676867216825485, 0.01671265996992588, 0.003614777699112892, -0.03392922133207321, 0.011575686745345592, 0.008573287166655064, -0.01973605714738369, -0.01385023258626461, 0.20122379064559937, 0.0114637091755867, 0.011596682481467724, 0.042243558913469315, -0.005679365247488022, 0.021037796512246132, 0.018896223977208138, -0.010161969810724258, -0.015410920605063438, 0.01471106056123972, 0.002589482581242919, -0.01192561723291874, -0.0018318839138373733, -0.004307639319449663, -0.008244352415204048, -0.00763547420501709, -0.013556291349232197, -0.021863631904125214, 0.0050704870373010635, -0.014879027381539345, -0.004034693818539381, -0.009252151474356651, -0.03899620845913887, -0.007327535655349493, 0.022997405380010605, -0.012401522137224674, 0.013304341584444046, -0.015956811606884003, 0.013514299876987934, 0.01767846755683422, -0.010616878978908062, -0.017426518723368645, -0.005959309171885252, 0.010238953866064548, -0.0044581093825399876, -0.011953611858189106, 0.03608478978276253, -0.02036593109369278, 0.01011297944933176, -0.0030163973569869995, 0.015578887425363064, -0.01489302422851324, 0.02245151437819004, -0.0245370976626873, 0.019974008202552795, -0.03132573887705803, -0.0021538196597248316, -0.004111678339540958, -0.010728856548666954, 0.013507300987839699, -0.01896621100604534, 0.004629575181752443, 0.01489302422851324, 0.03216557204723358, 0.0020260950550436974, 0.005462408531457186, -0.00013133313041180372, -5.7465080317342654e-05, 0.016362730413675308, 0.029534099623560905, -0.011610680259764194, 0.017314540222287178, 0.0020925819408148527, -0.011974607594311237, -0.04313937947154045, 0.012660469859838486, -0.04789843037724495, 0.04641472548246384, 0.0023270349483937025, -0.0041921623051166534, -0.023179369047284126, -0.037820443511009216, -0.01863027736544609, 0.011589684523642063, -0.01489302422851324, -0.031269751489162445, 0.006802640855312347, -0.010063989087939262, 0.013241354376077652, 0.01289842277765274, -0.00512997480109334, -0.02784043736755848, -0.007341532967984676, 0.010301942005753517, -0.012555491179227829, -0.008468307554721832, 0.021219760179519653, -0.02512498013675213, -0.02688862755894661, -0.022171569988131523, -0.00605379045009613, -0.019176168367266655, -0.023473309352993965, -0.010980806313455105, 0.011617678217589855, -0.018168369308114052, 0.008314338512718678, 0.013668268918991089, -0.01879824325442314, -0.02448110841214657, -0.04008799046278, 0.07480105012655258, 0.012772448360919952, 0.00042603988549672067, -0.027966411784291267, 0.007950411178171635, -0.0343211404979229, 0.006533194798976183, -0.0011232756078243256, -0.007579485420137644, 0.0030496406834572554, -0.039556097239255905, 0.01162467710673809, -0.02340332418680191, 0.016348732635378838, 0.007628475781530142, 0.012870428152382374, -0.016194764524698257, 0.022409522905945778, 0.006767647806555033, 0.003940212540328503, -0.0174965038895607, 0.014445113949477673, 0.0018966210773214698, -0.03182964026927948, -0.025516901165246964, -0.033649276942014694, 0.008412319235503674, 0.0001231316418852657, -0.011078786104917526, 0.01795841194689274, -0.03958408907055855, 0.011631675995886326, -0.0324455164372921, -0.013514299876987934, 0.007992402650415897, 0.0008223357144743204, -0.02449510619044304, -0.0001890715939225629, -0.02133173681795597, -0.014613079838454723, 0.038296349346637726, 0.03852030262351036, -0.0038037400227040052, 0.01703459583222866, -0.016432717442512512, -0.0012335035717114806, 0.01074285339564085, 0.01654469408094883, -0.02354329638183117, -0.022367531433701515, 0.012527496553957462, 0.011155771091580391, 0.010371927171945572, 0.004181664437055588, -0.012212559580802917, 0.015830837190151215, 0.005301440600305796, 0.01043491531163454, -0.003210608381778002, -0.05526096001267433, 0.010518898256123066, 0.003709258744493127, -0.005623376462608576, -0.009672067128121853, -0.032221563160419464, -0.17793244123458862, 0.012359530664980412, 0.006851630751043558, -0.03275345638394356, 0.03496501222252846, 0.0015554392011836171, 0.0225914865732193, -0.003028644947335124, -0.013647273182868958, 0.011036794632673264, -0.008811239153146744, -0.0011958860559388995, -0.05089383199810982, -0.042243558913469315, 0.00524545181542635, 0.0019928517285734415, -0.0026384727098047733, 0.0191061832010746, 0.04358728975057602, 0.004962008446455002, 0.023011401295661926, -0.029478110373020172, 3.195162321389944e-07, 0.0020733356941491365, 0.026678670197725296, -0.007320537231862545, -0.0017487755976617336, -0.018910221755504608, 0.0017636476550251245, -0.0191061832010746, -0.016278747469186783, 0.003940212540328503, 0.019652072340250015, -0.010483904741704464, 0.018812241032719612, 0.019036196172237396, 0.017412520945072174, 0.023487307131290436, -0.012779446318745613, 0.028232358396053314, 0.03342531993985176, 0.04255149886012077, -0.004031194373965263, -0.006046791560947895, 0.024117181077599525, 0.0429714135825634, 0.00010831429244717583, -0.016964610666036606, 0.009049192070960999, 0.011960609816014767, 0.047534503042697906, -0.005763348191976547, -0.002500250469893217, -0.005840333178639412, 0.00728554418310523, -0.012170568108558655, -0.00034883656189776957, 0.0129544110968709, 0.013374327681958675, -0.00763547420501709, 0.010602881200611591, -0.02866627275943756, 0.0006793017382733524, 0.005931315012276173, 0.014291144907474518, -0.02467706985771656, -0.005486903712153435, 0.024075189605355263, -0.0245370976626873, 0.013507300987839699, -0.018210360780358315, 0.0032998407259583473, 0.00165254482999444, -0.001167016802355647, 0.008314338512718678, 0.0077264560386538506, -0.013626277446746826, 0.018868230283260345, 0.010294943116605282, -0.0009763049311004579, -0.0017951412592083216, 0.011645672842860222, -0.014186165295541286, -0.011344732716679573, -0.002834433689713478, 0.0038212365470826626, 0.012961409986019135, 0.007215558085590601, -0.0017172818770632148, 0.004111678339540958, 0.038744259625673294, -0.024915020912885666, 0.007964408956468105, -0.01863027736544609, -0.002421516226604581, 0.016488704830408096, 0.039220161736011505, -0.004738053306937218, 0.04663868248462677, 0.00914017390459776, -0.0007002975908108056, -0.0063267359510064125, -0.0075584896840155125, -0.02051989920437336, 0.006060788873583078, 0.028274349868297577, -0.02289942465722561, 0.014431116171181202, 0.04011598601937294, -0.003394321771338582, -0.04708659276366234, 0.03664467856287956, 0.020925818011164665, 0.042411524802446365, -0.022633478045463562, 0.02978604845702648, 0.015438915230333805, -0.005654870066791773, 0.01361927855759859, -0.008671266958117485, 0.06713058799505234, 0.011806640774011612, -0.0076074800454080105, 0.0245370976626873, 0.013843233697116375, -0.01941412128508091, -0.11052192002534866, -0.038408324122428894, 0.012205561622977257, -0.004647071473300457, -0.017286546528339386, 0.008006400428712368, 0.005780844949185848, 0.03857629373669624, -0.01431214064359665, 0.018042394891381264, -0.021429717540740967, -0.003926215693354607, 0.0029919021762907505, -0.002622725907713175, -0.0031913623679429293, 0.006386224180459976, -0.00867826584726572, 0.0006626800750382245, 0.0015221958747133613, 0.02863827720284462, 0.03118576854467392, -0.0017286546062678099, 0.006267247721552849, 0.009126176126301289, -0.03185763582587242, 0.017244555056095123, -0.0009369378094561398, 0.012037594802677631, 0.012884425930678844, 0.013535295613110065, 0.023445315659046173, 0.010875826701521873, 0.005213958211243153, -0.012443513609468937, -0.008741253055632114, -0.02592281997203827, -0.014809041284024715, 0.02530694380402565, 0.026510702446103096, -0.023123379796743393, -0.006967107765376568, 0.015172968618571758, 0.007376526016741991, 0.013262350112199783, -0.0076144784688949585, -0.004213158041238785, -0.012597482651472092, 0.015466909855604172, 0.011155771091580391, -0.022395525127649307, -0.021079787984490395, -0.01176464930176735, -0.025362933054566383, -0.0022133076563477516, 0.03392922133207321, -0.03370526432991028, 0.025866830721497536, 0.01896621100604534, -0.005777345504611731, 0.00011744528455892578, 0.003919216804206371, -0.005794842261821032, 0.0004759049043059349, 0.022563491016626358, 0.010280945338308811, 0.01535493228584528, -0.0042726462706923485, 0.007005600258708, 0.02119176648557186, -0.008916218765079975, -0.013563290238380432, 0.01878424733877182, -0.026328738778829575, 0.00767746614292264, -0.029198165982961655, 0.010231955908238888, -0.010140974074602127, -0.016446713358163834, -0.0013594783376902342, -0.0009106930228881538, -0.025054993107914925, -0.00139272166416049, 0.011106780730187893, -0.029982009902596474, 0.008776246570050716, 0.024789046496152878, 0.011890623718500137, -0.0015099482843652368, 0.037036601454019547, -0.028890227898955345, -0.011680666357278824, -0.0038072392344474792, -0.0068831248208880424, -0.01720256358385086, -0.004563088063150644, 0.002921916078776121, -0.006774646230041981, 0.014697063714265823, 0.01438912469893694, 0.01864427514374256, -0.028442317619919777, -0.008230355568230152, -0.0547010712325573, -0.006596182007342577, 0.028302345424890518, -0.014921018853783607, 0.022395525127649307, -0.048150379210710526, -0.016824638471007347, -0.025432918220758438, -0.0015738105867058039, -0.020002003759145737, -0.012233555316925049, -0.0028554294258356094, -0.03152170032262802, -0.025250954553484917, -0.020015999674797058, -0.02690262533724308, -0.005283944308757782, -0.013556291349232197, 0.0055848839692771435, 0.022353533655405045, 0.0004772171378135681, -0.0077194576151669025, -0.0010506650432944298, -0.00744651211425662, -0.006834134459495544, -0.02400520257651806, 0.0009325636783614755, 0.023613281548023224, -0.004853530321270227, -0.021765651181340218, 0.008419318124651909, -0.019974008202552795, -0.00153094413690269, -0.0034940517507493496, 0.0032176070380955935, 0.015942813828587532, 0.00907018780708313, 0.007271546870470047, 0.011127776466310024, 0.013899222947657108, -0.003009398700669408, -0.029086187481880188, 0.014669069088995457, -0.004080184735357761, -0.016348732635378838, -0.0018843734869733453, -0.006851630751043558, -0.002400520257651806, 0.03440512716770172, 0.005742352455854416, 0.0343211404979229, 0.003947211429476738, -0.027434518560767174, -0.025586888194084167, -0.0012833685614168644, -0.023641277104616165, 0.022549495100975037, -0.0013682265998795629, -0.028064392507076263, -0.005105480086058378, 0.021877627819776535, 0.0005808839341625571, 0.002257049083709717, -0.04120776802301407, 0.02051989920437336, -0.028372330591082573, -0.04801040515303612, -0.00552539573982358, 0.001299115363508463, 0.003597281174734235, -0.03563687950372696, -0.007523496635258198, 0.02800840325653553, 0.001144271343946457, 0.027322540059685707, -0.0068831248208880424, -0.010721857659518719, 0.012261549942195415, -0.01783243753015995, -0.001028794446028769, 0.005360928829759359, -0.044147178530693054, -0.005903320387005806, 0.007208559662103653, 0.02261948026716709, -0.003947211429476738, -0.012695463374257088, 0.03773646056652069, 0.009098182432353497, 0.0075654881075024605, -0.0150329964235425, -0.006652170792222023, -0.005364428274333477, -0.005619877018034458, 0.015368929132819176, 0.01153369527310133, -0.016306741163134575, 0.024397125467658043, 0.025684867054224014, 0.0004299765860196203, 0.0010646622395142913, 0.004160668700933456, 0.016950612887740135, -0.0016507951077073812, -0.0026314742863178253, 0.012856431305408478, 0.005556889809668064, 0.0038352336268872023, 0.028582289814949036, 0.005787843372672796, -0.0009666818659752607, -0.027420520782470703, -0.010630875825881958, 0.033509302884340286, -0.0013262350112199783, 0.02306739054620266, 0.013255351223051548, -0.009084184654057026, -0.001321860821917653, 0.02767247147858143, 0.0014180915895849466, 0.01829434372484684, 0.03849230706691742, -0.001667416887357831, 0.0149490125477314, 0.03418117016553879, 0.005304940044879913, -0.005717857275158167, 0.0031878629233688116, -0.008083384484052658, 0.02561488188803196, 0.007089583203196526, -0.031773652881383896, -0.009868028573691845, 0.007572486996650696, -0.019694065675139427, -0.016978606581687927, 0.02134573459625244, 0.0035430421121418476, 0.08739853650331497, 0.02592281997203827, -0.04137573391199112, -0.01657268777489662, -0.0225914865732193, 0.01795841194689274, -0.012814439833164215, 0.009224156849086285, -0.018406322225928307, -0.035272952169179916, 0.01620876044034958, -0.016152773052453995, -0.0189382154494524, -0.045266956090927124, 0.004153670277446508, 0.01018296554684639, -0.007425516378134489, 0.01640472188591957, -0.009749052114784718, -0.01051189936697483, 0.028526300564408302, 0.0025124980602413416, 0.002951660193502903, -0.026454713195562363, -0.018238356336951256, 0.0016831636894494295, 0.011883625760674477, 0.001308738486841321, -0.0042656478472054005, -0.03518896922469139, 0.001950860139913857, -0.011267748661339283, 0.0008525171433575451, -0.0021048295311629772, -0.0017916420474648476, 0.026860632002353668, 0.003719756845384836, -0.010021997615695, 0.022003604099154472, 0.026860632002353668, 0.0042726462706923485, 0.003698760876432061, -0.009903021156787872, -0.014018199406564236, 0.008020397275686264, 0.012891423888504505, -0.009287144057452679, -0.019456112757325172, -0.040843840688467026]"
Running BullMQ with Dragonfly,Running BullMQ with Dragonfly,"## Introduction  [BullMQ](https://github.com/taskforcesh/bullmq) is a lightweight, robust, and fast Node.js library for creating and processing background jobs by sending messages using queues. BullMQ is easy to use, but it is also highly configurable and comes with powerful advanced features. As a trusted message queue system with a powerful feature set, BullMQ is adept at managing tasks like video transcoding, image processing, email sending, data ETL (extract, transform, load) tasks, and many more. BullMQ is used by developers in many industries, such as e-commerce, social media, advertising, and online gaming.  ---  ## Announcing Dragonfly's Full Compatibility with BullMQ  BullMQ was originally developed to use Redis as its primary data store. It also makes very heavy use of server-side Lua scripts. As many of our readers and community members already know, Dragonfly is a drop-in Redis replacement that is optimized for high-traffic, low-latency applications.  **After working closely with the BullMQ team and the community, we are excited to announce that Dragonfly is now fully compatible with BullMQ.**  ![logos](/assets/blog/running-bullmq-with-dragonfly-part-1-announcement/logos.png)  ### Choosing Dragonfly over Redis for BullMQ  Redis, while well-known for its speed and efficiency, does have some limitations while being used as the backing store for BullMQ under heavy load, most notably due to its single-threaded nature. This design choice restricts performance capabilities when dealing with a single Redis instance. While Redis Cluster can indeed scale its performance, it increases the complexity in infrastructure design, deployment, and maintenance.  By running BullMQ with Dragonfly, developers get:  - **Infrastructure Simplification**: Avoid the complexity of managing a cluster setup. With Dragonfly, you get the power to handle heavy workloads on a single instance. - **Ultra-Performance & High-Throughput**: Leveraging its advanced multi-threaded architecture, Dragonfly ensures operation performance and high throughput. - **Memory Efficiency**: Dragonfly's design ensures up to 30% less memory consumption, which can translate to tangible savings, especially for larger deployments. - **Hardware Cost Reduction**: By maximizing the utility of each server, Dragonfly can lead to dramatic reductions in operational costs, with potential savings ranging from 50% up to 80%. - **Latest Lua Engine**: Dragonfly comes with the latest Lua 5.4 engine, which is up to 2x faster than the Lua 5.1 engine used by Redis.  In essence, by transitioning the backing store of BullMQ from Redis to Dragonfly, developers and organizations can reap the benefits of enhanced performance, simpler infrastructure, and significant cost reductions, all while maintaining the familiar functionalities of BullMQ.  ### Benchmark Results  Without further ado, let's take a look at the benchmark results of BullMQ with Dragonfly as the backing store. We've conducted comprehensive benchmarks to lay bare the performance differentials between Dragonfly and Redis in the context of BullMQ. Note that in the benchmark illustrations below, **Dragonfly 1T** means running Dragonfly with a single thread, and **Dragonfly 4T** means running Dragonfly with four threads, so on and so forth. Here's a concise breakdown:  ![benchmark-queues-1](/assets/blog/running-bullmq-with-dragonfly-part-1-announcement/benchmark-queues-1.png)  In the benchmark above, we evaluated the simplest scenario where only a single queue is used. Under this setup, Dragonfly performs either on par with or marginally surpasses Redis. However, increasing the number of threads for Dragonfly in this case actually decreases the performance.  Real-world applications rarely use a single queue. A more representative setup involves producing to and consuming from multiple queues concurrently. When we tested such a scenario, Dragonfly's advantages became more pronounced, as shown below when deploying 16 queues.  ![benchmark-queues-16](/assets/blog/running-bullmq-with-dragonfly-part-1-announcement/benchmark-queues-16.png)  When operating on a multi-core machine, the Dragonfly instance showcases great improvements in performance, which demonstrates the benefits of Dragonfly's advanced multi-threaded share-nothing architecture: Multiple queues can be distributed across multiple Dragonfly threads; each BullMQ queue is exclusively owned by a single thread, and accessing multiple queues could be done in parallel.  Venturing further into our benchmarks, we also scaled up to a scenario with 64 queues. While not many applications need 64 queues in practice, this experiment is instructive and provides an illustrative result of what Dragonfly is currently capable of achieving.  ![benchmark-queues-64](/assets/blog/running-bullmq-with-dragonfly-part-1-announcement/benchmark-queues-64.png)  ---  ## Running BullMQ with Dragonfly  Now that we've seen the benchmark results, let's dive into the details of how to run BullMQ with Dragonfly. For more details and the most up-to-date information, you can always find the latest instructions in our newly released [integrations documentation](https://www.dragonflydb.io/docs/integrations/bullmq). Since Dragonfly distributes queues across multiple Dragonfly threads, there are a few steps we need to follow in order to achieve the best performance.  ### 1. Emulated Cluster Mode & Hashtag Locking  Run Dragonfly with the following flags:  ```bash ./dragonfly --cluster_mode=emulated --lock_on_hashtags ```  - `--cluster_mode=emulated` lets Dragonfly emulate a Redis Cluster on a single instance. - `--lock_on_hashtags` enables hashtag locking.  A hashtag is a substring in a key name. If the key contains a `{...}` pattern, only the substring between `{` and `}` is hashed in order to determine which Dragonfly thread owns the key. Thus, keys with the same hashtag will be assigned to the same Dragonfly thread. And keys with different hashtags will very likely be assigned to different Dragonfly threads.  ### 2. Install BullMQ & Choose Queue Names  In your Node.js application, install BullMQ with the following commands, based on your package manager:  ```bash # NPM npm install bullmq  # Yarn yarn add bullmq  # PNPM pnpm add bullmq ```  To use a hashtag in a queue name, you can initialize a queue using one of the following methods:  ```javascript import { Queue } from 'bullmq';  const queue1 = new Queue(""{myqueue}"");  const queue2 = new Queue(""myqueue"", { prefix: ""{myprefix}"", }); ```  Either by using a hashtag directly in the queue name or by specifying a prefix that contains a hashtag, the queue will be assigned to a Dragonfly thread based on the hashtag substring. Note that hashtags should not be confused with JavaScript [template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals). The curly braces need to be present in the queue name in order to be recognized as a hashtag by Dragonfly.  To achieve superior performance for your application, consider using a larger number of queues with different hashtags. By distributing the queues across distinct Dragonfly threads, you can optimize the utilization of multiple threads of Dragonfly. This is also known as **thread balancing** in Dragonfly.  However, if you have queue dependencies, especially in a parent-child relationship, it's important to use the same hashtag for them. This ensures that both queues are processed within the same Dragonfly thread and maintains the **integrity of the dependencies**.  ### 3. Start Your Dragonfly/BullMQ Journey  With the above steps, you are now ready to start your Dragonfly/BullMQ journey. For instance, you can start sending messages (or jobs) to a queue and start processing them with a worker.  ```javascript // client_connection.js  import Redis from ""ioredis"";  const connection = new Redis({ host: ""dragonfly-host"", // Your Dragonfly host. port: 6379,             // Your Dragonfly port number. }); ```  ```javascript // producer.js  import { Queue } from ""bullmq"";  const queue = new Queue( ""{my_email_queue}"", { connection }, // Reuse the connection instance. ); queue.add(""my_email_job"", { userId: ""user-123"", emailId: ""weekly-newsletter"" }); ```  ```javascript // worker.js  import { Worker } from ""bullmq"";  const worker = new Worker( ""{my_email_queue}"", async (job) => { if (job.name === ""my_email_job"") { await sendEmail(job.data.userId, job.data.emailId); } }, { connection }, // Reuse the connection instance. ); ```  Above is a basic setup for running BullMQ with Dragonfly. As long as the connection is established with a Dragonfly server instance, you can use BullMQ as usual. Keep in mind that it is crucial to plan your queue names and hashtags carefully to fully utilize the performance gains of Dragonfly. For more details around BullMQ **Queues**, **Workers**, **Jobs**, and **Flows**, please refer to the [BullMQ documentation](https://docs.bullmq.io/).  Note that now we have a Dragonfly instance running for BullMQ. Depending on how heavy the application workload is, we may still use this Dragonfly instance with its ordinary API as a general-purpose in-memory data store, such as a caching layer or a session store. Mixed usage of Dragonfly is possible, but we should also plan the hardware resources carefully.  ---  ## Conclusion  The integration between Dragonfly and BullMQ allows Node developers to run their BullMQ jobs using the most powerful in-memory data store on the market. In a [future blog post](https://www.dragonflydb.io//blog/running-bullmq-with-dragonfly-part-2-optimization), we will share the journey of how we worked with the BullMQ team to achieve this integration, as well as our continuous optimization efforts to further improve the performance of BullMQ with Dragonfly.  Dragonfly is committed to embracing the open-source community and broadening the ecosystem. More SDKs and integrations will be tested with Dragonfly and released in the future. As always, [start trying Dragonfly in minutes](https://www.dragonflydb.io/docs/getting-started), and happy coding!  ---  ## Appendix - Useful Resources  - Our Dragonfly/BullMQ integration documentation can be found [here](https://www.dragonflydb.io/docs/integrations/bullmq). - The announcement from BullMQ can be found [here](https://bullmq.io/news/101023/dragonfly-compatibility/). - Read the comprehensive documentation of BullMQ [here](https://docs.bullmq.io/). - Benchmark results were obtained using [this tool](https://github.com/taskforcesh/bullmq-concurrent-bench) with Dragonfly/Redis running on AWS `c7i.2xlarge` and BullMQ running on AWS `c7i.16xlarge`. Note that we used a smaller instance for Dragonfly/Redis and a larger instance for BullMQ to ensure that the bottleneck is not on the BullMQ side as we are benchmarking Dragonfly/Redis.  ```bash node bullmq-concurrent-bench/index.js -h $SERVER_IP -c 100 -d 10 -r 8 -w 8 -q $NUM_QUEUES ```","[-0.028113247826695442, 0.010191052220761776, -0.02562522515654564, -0.014084737747907639, -0.0017948552267625928, 0.019327858462929726, -0.017149081453680992, -0.01150534674525261, -0.018765592947602272, -0.02465531975030899, -0.0006654933094978333, -0.016474364325404167, -0.013564642518758774, -0.01156157348304987, -0.007119680289179087, -0.0010059272171929479, 0.008490201085805893, -0.019665217027068138, 0.0028868792578577995, -0.018301725387573242, 0.011301525868475437, 0.010352703742682934, -0.018751537427306175, 0.007239161524921656, -0.017149081453680992, 0.021253615617752075, 0.02492239512503147, -0.004111562389880419, -0.013142943382263184, 0.01938408426940441, 0.010401901789009571, 0.005460998509079218, -0.021183332428336143, 0.0036687790416181087, -0.018217384815216064, -0.020860031247138977, 0.018048705533146858, 0.013838746584951878, 0.020072858780622482, 0.013065632432699203, 0.03376401215791702, -0.00775925675407052, 0.009073550812900066, -0.021337956190109253, -0.0473145954310894, 0.009959118440747261, 0.007843595929443836, -0.026862209662795067, 0.019763613119721413, -0.018793705850839615, 0.01608077809214592, 0.013079688884317875, -0.021141162142157555, 0.012046527117490768, -0.004104534164071083, 0.002763883676379919, -0.0021805339492857456, 0.013037518598139286, 0.015265493653714657, -0.0063184527680277824, 0.004477034788578749, 0.021703427657485008, -0.017472384497523308, -0.006234112661331892, -0.0006162951467558742, -0.0030608298256993294, -0.019215404987335205, -0.011863790452480316, 0.001943328301422298, -0.03123381920158863, 0.02458503656089306, 0.026721643283963203, 0.013620869256556034, 0.007323501165956259, 0.039105527102947235, -0.013227283023297787, -0.015124927274882793, 0.0033191205002367496, 0.014239360578358173, -0.02042427472770214, 0.007151307538151741, 0.007492180913686752, -0.01750049740076065, 0.0438566692173481, -0.006712038069963455, 0.04419402778148651, -0.020649181678891182, 0.020494557917118073, 0.0018185757799074054, -0.001421476132236421, -0.007801426574587822, 0.0026391311548650265, -0.006332509219646454, 0.01175133790820837, -0.019496537744998932, 0.0033366912975907326, -0.007773313205689192, 0.013972284272313118, -0.0009163161739706993, -0.0009057737188413739, -0.011371809057891369, -0.011322611011564732, -0.01758483611047268, -0.012475254014134407, -0.0250067338347435, -0.012524452060461044, 0.004266185685992241, 0.007246189750730991, 0.028169475495815277, 0.010507326573133469, -0.00754137896001339, 0.023840034380555153, 0.0165446475148201, -0.018878046423196793, -0.01758483611047268, -0.001990769524127245, 0.02104276604950428, -0.022364089265465736, 0.011526431888341904, -0.016530590131878853, 0.022223522886633873, 0.014548606239259243, 0.020817860960960388, -0.015898041427135468, 0.012629876844584942, 0.004157246556133032, 0.00028376810951158404, -0.002932563191279769, -0.0007542257662862539, -0.007843595929443836, -0.014520492404699326, 0.018048705533146858, 0.0017711346736177802, 0.012053554877638817, -0.01300237700343132, 0.01013482641428709, -0.016052665188908577, -0.015476343221962452, -0.021520690992474556, 0.006567957811057568, -0.0049338750541210175, 0.01827361062169075, -0.01508275792002678, -0.03196476399898529, -0.01570124924182892, 0.02589230239391327, 0.015673136338591576, 0.007239161524921656, 0.012447141110897064, -0.014970304444432259, -0.005158781073987484, -0.013206198811531067, -0.009136805310845375, 0.013796576298773289, 0.0035580829717218876, 0.021703427657485008, -0.025133244693279266, 0.005879183299839497, 0.008940013125538826, -0.014871908351778984, 0.013796576298773289, 0.024514753371477127, 0.004961988423019648, -0.0008218732546083629, 0.018681254237890244, 0.022631164640188217, 0.03404514491558075, -0.027677493169903755, 0.00013968770508654416, -0.037756092846393585, 0.009010296314954758, 0.01603860780596733, -0.0365472212433815, 0.045487236231565475, 0.013944171369075775, 0.010401901789009571, 0.005246635060757399, -0.0012940879678353667, -0.003414002712816, -0.013255396857857704, -0.006480103824287653, -0.006606613285839558, 0.0038269159849733114, 0.025020791217684746, -0.03980835899710655, 0.0039604539051651955, -0.027016831561923027, -0.04233855381608009, -0.00368283549323678, 0.0045121763832867146, -0.009052465669810772, 0.022954467684030533, -0.020986540243029594, -0.031683631241321564, -0.595551073551178, 0.008546427823603153, 0.0008122093277052045, -0.023558901622891426, -0.032330237329006195, -0.007653831969946623, 0.010071570985019207, 0.011821621097624302, 0.018301725387573242, 0.015687191858887672, -0.01427450217306614, 0.0007647682214155793, 0.00946010835468769, -0.013522472232580185, -0.010127797722816467, 0.009614731185138226, 0.017163138836622238, -0.028408437967300415, 0.005657791160047054, -0.004803851246833801, -0.026299944147467613, 0.01738804392516613, 0.007822511717677116, 0.012826669961214066, 0.002864037174731493, 0.012327659875154495, 0.010823600925505161, -0.006905316840857267, 0.014049596153199673, 0.010380816645920277, -0.04773629456758499, 0.012784499675035477, 0.02227974869310856, 0.023376166820526123, 0.05015403404831886, -0.010668978095054626, -0.047061577439308167, 0.02542843297123909, 0.004009651951491833, 0.02954702451825142, -0.00482845026999712, -0.023151259869337082, 0.023643242195248604, -0.014253417029976845, 0.005457484163343906, 0.01130855455994606, 0.047370824962854385, -0.025456545874476433, -0.013431104831397533, -0.016783609986305237, -0.015181154012680054, -0.0051622954197227955, 0.01180756464600563, 0.002359755802899599, -0.028872305527329445, -0.010296477004885674, 0.04278836399316788, -0.009959118440747261, -0.002589933108538389, -0.006835033651441336, 0.006560929585248232, 0.004255643114447594, -0.015181154012680054, -0.023319939151406288, -0.01796436496078968, -0.016263514757156372, -0.008616711013019085, -0.03528212755918503, 0.003802316961809993, -0.006648783106356859, 0.019707387313246727, -0.005696447100490332, 0.010528411716222763, -0.0025987185072153807, 0.00723213329911232, 0.04647120088338852, 0.024177392944693565, -0.012018413282930851, 0.0035246985498815775, 0.03092457354068756, 0.02904098480939865, -0.021436352282762527, -0.014928135089576244, -0.011322611011564732, 0.06123065575957298, 0.0008741462952457368, -0.023137204349040985, -0.024402299895882607, 0.010036429390311241, 0.00399208115413785, 0.005499654449522495, 0.0228841844946146, -0.019088895991444588, -0.01858285814523697, 0.0271152276545763, 0.03027796931564808, -0.013571670278906822, -0.0163478534668684, 0.004157246556133032, -0.008061474189162254, 0.004926846828311682, -0.01681172288954258, -0.01471728552132845, 0.0008640431333333254, 0.02258899435400963, 0.005580479744821787, -0.022842014208436012, 0.00015066943888086826, 0.040061380714178085, -0.02708711475133896, -0.0008064988069236279, -0.005011186469346285, -0.019819840788841248, -0.025133244693279266, 0.022068900987505913, -0.034747976809740067, 0.013698180206120014, -0.012770443223416805, 0.038374584168195724, -0.017992479726672173, 0.016333797946572304, -0.01712096855044365, 0.01261582039296627, 0.00646253302693367, -0.008602653630077839, 0.010029401630163193, -0.0023474562913179398, -0.033904578536748886, -0.006227084435522556, 0.03289249911904335, -0.0008126485627144575, -0.02735419012606144, 0.018878046423196793, 0.0035563260316848755, 0.025512773543596268, -0.01175133790820837, 0.03151495009660721, -0.002092679962515831, 0.018414177000522614, -0.02350267581641674, 0.0016305684112012386, -0.00600217841565609, 0.020143141970038414, -0.015363890677690506, -0.018104931339621544, -0.010437043383717537, -0.025526829063892365, -0.015546626411378384, 0.01712096855044365, 0.006269254256039858, -0.013634925708174706, -0.009031381458044052, 0.004392695147544146, 0.01367709506303072, -0.008996239863336086, 0.010837657377123833, -0.040145717561244965, -0.011934073641896248, -0.0010314048267900944, -0.021900219842791557, 0.0021699913777410984, 0.039330434054136276, -0.029294004663825035, 0.0165446475148201, -0.0280851349234581, -0.017205307260155678, -0.023179372772574425, 0.010767374187707901, -0.0021998616866767406, -0.010781430639326572, -0.007379727903753519, -0.004101020283997059, -0.00035383159411139786, 0.005408286117017269, -0.0010410686954855919, -0.003967482130974531, -0.0173177607357502, -0.005643734708428383, -0.016825778409838676, 0.0014416825724765658, 0.017064742743968964, 0.00516580929979682, 0.003872599918395281, -0.0163478534668684, 0.03081212006509304, 0.01446426659822464, 0.017598893493413925, 0.021337956190109253, -0.008989211171865463, 0.011716196313500404, 0.004550832323729992, 0.027073059231042862, -0.027677493169903755, -0.014478323049843311, -0.017570780590176582, 0.0016138762002810836, 0.006473075598478317, -0.0065398444421589375, 0.004280242137610912, 0.011842706240713596, 0.020874086767435074, 0.0020399675704538822, 0.023629184812307358, -0.008054445497691631, -0.026721643283963203, -0.01854068785905838, 0.010914968326687813, -0.010071570985019207, 0.024374186992645264, 0.01471728552132845, 0.012180064804852009, -0.005032271612435579, -0.004231044091284275, -0.012770443223416805, 0.007478123996406794, 0.01572936214506626, -0.009839637205004692, -0.014105822890996933, -0.01440803986042738, -0.007878737524151802, -0.000635623000562191, -0.002995818154886365, -0.002814838895574212, 0.010486241430044174, -0.006286825053393841, 0.031205706298351288, 0.0026725155767053366, 0.00927034392952919, 0.006683924701064825, -0.007260246202349663, 0.005306375678628683, 0.017711346969008446, 0.0018150615505874157, -0.00957958959043026, 0.01198327261954546, 0.014914078637957573, 0.016994459554553032, -0.006606613285839558, 0.03182419762015343, -0.056226495653390884, 0.010570581071078777, 0.008082559332251549, 0.010057514533400536, 0.00318382540717721, 0.01646030694246292, -0.0006668111309409142, 0.0047511388547718525, 0.006697981618344784, 0.004318897612392902, -0.0039604539051651955, -0.020438332110643387, 0.0035229413770139217, 0.0058510699309408665, -0.0007401691400445998, 0.021647201851010323, -0.015490399673581123, 0.01703662797808647, 0.019833896309137344, 0.027340134605765343, 0.001006805687211454, 0.01175133790820837, 0.018976442515850067, 0.023558901622891426, 0.009530391544103622, 0.02604692429304123, -0.02230786345899105, 0.005812413990497589, -0.04855158179998398, -0.01892021670937538, -0.01973550021648407, 0.0007955170585773885, 0.0028851220849901438, -0.018596913665533066, -0.042563457041978836, 0.03646288439631462, 0.01107661984860897, -0.012039498426020145, 0.029996836557984352, -0.006546872667968273, 0.022167297080159187, -0.03415759652853012, -0.02985627017915249, 0.033679671585559845, -0.0061743720434606075, 0.0008218732546083629, -0.021858051419258118, -0.0061357165686786175, 0.02835221029818058, 0.0027867257595062256, 0.0040237088687717915, 0.01615106128156185, -0.009811523370444775, -0.008047417737543583, 0.009931004606187344, 0.0018906159093603492, -0.007003712933510542, 0.04439081996679306, 0.008089587092399597, -0.008996239863336086, -0.03469174727797508, 0.014900021255016327, 0.025751736015081406, -0.029912495985627174, -0.014386954717338085, 0.023151259869337082, -0.0043645817786455154, -0.025484660640358925, -0.026707585901021957, 0.02126767300069332, 0.0024757229257375, -0.0173037052154541, -0.032020989805459976, -0.040989115834236145, -0.004097505938261747, 0.01083062868565321, 0.01175133790820837, 0.015012474730610847, 0.0032927643042057753, 0.030109290033578873, -0.016066720709204674, -0.028745796531438828, -0.022139182314276695, -0.011793508194386959, 0.010844686068594456, 0.05330272018909454, 0.007878737524151802, 0.01796436496078968, 0.005699960980564356, -0.0027744262479245663, -0.006532816216349602, -0.023558901622891426, -0.014014454558491707, 0.01831578090786934, 0.006332509219646454, -0.002758612623438239, -0.005882697179913521, 0.0003584439109545201, 0.010127797722816467, 0.006901802495121956, 0.009417938068509102, -0.016727382317185402, -0.030362308025360107, 0.004027222748845816, 0.0070283119566738605, 0.00940388161689043, 0.013691152445971966, 0.014183133840560913, 0.02434607408940792, 0.04239477962255478, 0.030755894258618355, 0.01696634478867054, -0.0013661282137036324, 0.016024552285671234, -0.020185312256217003, 0.011962187476456165, -0.01269313134253025, 0.009474164806306362, 0.01862502656877041, -0.012679074890911579, 0.04599327594041824, -0.0030959714204072952, 0.000871071417350322, -0.0008416404016315937, 0.001524265157058835, -0.003921797964721918, 0.02157691866159439, 0.005928381346166134, 0.02199861779808998, 0.027227681130170822, -0.028141362592577934, -0.016755495220422745, -0.008363691158592701, -0.030362308025360107, 0.0048706200905144215, 0.03553514555096626, -0.007913879118859768, -0.022715505212545395, -0.010676005855202675, 0.02299663797020912, 0.007618690375238657, 0.005021729040890932, 0.013754406943917274, -0.0052185216918587685, -0.06392952799797058, -0.005236092489212751, -0.0010103199165314436, -0.011343696154654026, -0.004167789127677679, -0.017781630158424377, -0.015321720391511917, -0.03145872429013252, 0.004234557971358299, -0.020607011392712593, -0.009692042134702206, -0.02901287190616131, -0.022181352600455284, -0.002024153945967555, -0.00720401993021369, 0.026342114433646202, 0.03224589675664902, 0.02831004187464714, 0.013044547289609909, 0.0010243764845654368, 0.016474364325404167, 0.0020505101419985294, -0.028422493487596512, -0.0090384092181921, -0.040989115834236145, -0.02819758839905262, -0.002579390536993742, 0.01658681593835354, -0.00896109826862812, -0.01681172288954258, 0.001656924607232213, 0.002020639833062887, -0.0032295093405991793, 0.00612517399713397, 0.0016375967534258962, 0.01627757027745247, 0.002479237038642168, 0.021366069093346596, 0.014998418278992176, 0.015588796697556973, -0.032414574176073074, 0.012587706558406353, -0.024838054552674294, 0.010303505696356297, -0.024711545556783676, -0.0036898639518767595, -0.029631363227963448, 0.007822511717677116, 0.0129812927916646, -0.031683631241321564, -0.005394229665398598, 0.0015523784095421433, -0.02257493883371353, -0.010275392793118954, 0.024093054234981537, 0.034523069858551025, 0.008799446746706963, -0.006283311173319817, 0.02181588113307953, 0.006213027983903885, -0.0027550982777029276, 0.039948925375938416, -0.01800653524696827, 0.021366069093346596, 0.02620154805481434, -0.009621758945286274, 0.027410417795181274, -0.0029747330117970705, -0.022181352600455284, -0.015420116484165192, 0.02130984328687191, 0.01738804392516613, 0.01336784940212965, 0.0105776097625494, -0.030024949461221695, -0.03016551584005356, -0.015954269096255302, -0.008827559649944305, 0.030643440783023834, -0.007717086933553219, 0.01150534674525261, -0.02496456541121006, 0.012243319302797318, 0.006413334980607033, -0.022012673318386078, -0.022645222023129463, -0.029940608888864517, -0.0342419371008873, 0.022181352600455284, 0.01508275792002678, 0.01703662797808647, -0.017135024070739746, -0.024360129609704018, -0.006553900893777609, -0.02108493633568287, -0.01780974306166172, -0.024795884266495705, 8.521828567609191e-05, -0.013712236657738686, 0.016713326796889305, 0.012763414531946182, 0.03612552583217621, 0.026834094896912575, 0.021366069093346596, -0.007548407185822725, -0.009249258786439896, 0.008918927982449532, 0.00756949232891202, 0.006332509219646454, -0.0052009508945047855, -0.0077241151593625546, 0.023052863776683807, 0.03311740607023239, -0.014618889428675175, -0.0004537653876468539, -0.01862502656877041, 0.02492239512503147, -0.024064941331744194, -0.0023527275770902634, -0.039021190255880356, -0.04166383296251297, 0.000718644936569035, 0.010479213669896126, -0.00015517194697167724, 0.01267204713076353, -0.044109687209129333, 0.00526069151237607, 0.04498119652271271, 0.0033700757194310427, 0.024528808891773224, 0.011526431888341904, 0.022476542741060257, -0.02480994164943695, 0.0010261335410177708, -0.008412889204919338, 0.006304395850747824, -0.01242605596780777, -0.006620670203119516, -0.02458503656089306, 0.0007792640826664865, 0.006040834356099367, 0.038177791982889175, 0.0026356170419603586, 0.013121859170496464, 0.0037988026160746813, 0.00227365898899734, -0.005882697179913521, -0.010683034546673298, 0.007639775052666664, 0.029518911615014076, -0.025287866592407227, -0.024064941331744194, -0.03247080370783806, -0.012011385522782803, -0.022139182314276695, -0.0005341517389751971, 0.01827361062169075, 0.01102039311081171, 0.014323700219392776, 0.017908139154314995, 0.0036476938985288143, 0.00927034392952919, 0.0046492284163832664, 0.03573193773627281, -0.009797466918826103, 0.01261582039296627, 0.04124213382601738, -0.000988356419838965, -0.021647201851010323, -0.024205507710576057, 0.02100059576332569, -0.020227482542395592, 0.023179372772574425, 0.047145918011665344, 0.0007388513186015189, -0.015307663939893246, 0.003417516825720668, -0.020635124295949936, -0.01765511929988861, -0.015560682862997055, 0.026243718340992928, 0.02569550834596157, -0.005998664535582066, -0.020325878635048866, -0.006782321259379387, -0.008574540726840496, 0.014162048697471619, -0.05327460542321205, 0.0005135060637257993, 0.020382104441523552, -0.006163829937577248, -0.018610971048474312, 0.021942390128970146, -0.006023263558745384, 0.026862209662795067, 0.005151752848178148, 0.02901287190616131, -0.014330727979540825, 0.03081212006509304, -0.036490995436906815, -0.010507326573133469, 0.017289647832512856, 0.025105131790041924, -0.02965947799384594, -0.002758612623438239, 0.0228841844946146, 0.010373788885772228, -0.018400121480226517, 0.0032013962045311928, 0.017416156828403473, 0.03803722560405731, -0.013241340406239033, 0.009558504447340965, -0.003978024702519178, -0.0007788248476572335, 0.009544447995722294, -0.024402299895882607, -0.024528808891773224, -0.020874086767435074, -0.0010006559314206243, -0.012847754172980785, 0.006775293033570051, 0.006360622588545084, 0.00785062462091446, 0.013459217734634876, -0.00898218248039484, -0.01206058356910944, -0.016797665506601334, -0.00024335530179087073, 0.020297765731811523, -0.04020194709300995, -0.010907940566539764, 0.007934964261949062, -0.0035387552343308926, 0.03427004814147949, 0.004937389399856329, 0.006669868249446154, -0.0017887054709717631, 0.03778420761227608, -0.013473274186253548, 0.0070353406481444836, -0.0004135722410865128, -0.015687191858887672, -0.026482680812478065, -0.006487132050096989, -0.020817860960960388, -0.018343893811106682, -0.0008078166283667088, -0.023179372772574425, -0.011083648540079594, -0.021562861278653145, -0.0011579144047573209, 0.01540606003254652, -0.02097248286008835, -0.0019345429027453065, 0.04416591301560402, 0.017641063779592514, 0.0008420796366408467, -0.008223124779760838, -0.000685260456521064, 0.04259157180786133, -0.001073574647307396, -0.013613840565085411, 0.022842014208436012, 0.01750049740076065, -0.022631164640188217, -0.003482528729364276, -0.004772223997861147, 0.0009242230444215238, -0.04186062887310982, -0.01873748004436493, -0.016643043607473373, 0.009818552061915398, -0.02277173101902008, 7.851942791603506e-05, -0.014689172618091106, -0.032527029514312744, -0.025217583402991295, 0.03061532787978649, -0.009867750108242035, 0.005246635060757399, 0.016558703035116196, 0.01113987434655428, 0.007024798076599836, 0.00846208818256855, -0.015223324298858643, -0.018357951194047928, 0.0044664922170341015, -0.01703662797808647, -0.0353945791721344, -0.013930114917457104, -0.0055031683295965195, 0.033792123198509216, 0.03292061388492584, -0.020494557917118073, -0.022265693172812462, -0.0021524205803871155, -0.048495352268218994, -0.01132963877171278, 0.008433974348008633, 0.0010929025011137128, 0.0029044500552117825, 0.004874134436249733, 0.03938665986061096, 0.024036826565861702, 0.024992678314447403, 0.01603860780596733, -0.04101723060011864, 0.0010709390044212341, -0.0225046556442976, -0.024360129609704018, 0.041635721921920776, 0.006849090103060007, -0.03750307485461235, -0.006480103824287653, -0.008750248700380325, -0.0015954268164932728, 0.001523386687040329, 0.018990499898791313, -0.03143061324954033, -0.01198327261954546, 0.004895219579339027, -0.016938231885433197, -0.008820531889796257, -0.018133046105504036, 0.026595132425427437, -0.016108890995383263, -0.024753715842962265, 0.022293806076049805, -0.007899822667241096, -0.0011658212170004845, 0.000585985544603318, 0.026243718340992928, -0.0019362999591976404, -0.010683034546673298, -0.019524650648236275, 0.013135915622115135, 0.021900219842791557, -0.01015591062605381, 0.025414377450942993, 0.002665487350896001, 0.0057245600037276745, 0.020382104441523552, -0.017641063779592514, -0.018863989040255547, 0.005798357538878918, 0.01719125173985958, -0.02188616432249546, -0.004803851246833801, 0.003602009965106845, -0.01758483611047268, 0.005404772236943245, -0.027213623747229576, 0.02235003188252449, -0.00492333248257637, -0.00027212745044380426, -0.011596715077757835, -0.018104931339621544, -0.016404081135988235, 0.004339982755482197, -0.00042609142838045955, -0.01920134946703911, -0.023980600759387016, 0.013487330637872219, 0.012123838067054749, -0.021253615617752075, -0.005608593113720417, 0.016024552285671234, -0.019187292084097862, -0.008911900222301483, 0.006343051791191101, -0.005116611253470182, -0.024036826565861702, 0.006033806130290031, 0.0024265246465802193, 0.007949020713567734, -0.006592556834220886, 0.2150101214647293, 0.0003500978054944426, 0.009649872779846191, 0.043181948363780975, 0.003914769738912582, 0.007140764966607094, 0.004937389399856329, 0.006901802495121956, -0.004494605585932732, 0.03317363187670708, -0.01392308622598648, 0.024050883948802948, -0.015841815620660782, -0.003988567274063826, 0.010233222506940365, -0.00027432380011305213, -0.03800911083817482, -0.05647951737046242, -0.019426254555583, 0.0063184527680277824, -0.008869729936122894, -0.012411999516189098, -0.04647120088338852, -0.021956447511911392, 0.00535557372495532, -0.011146903038024902, 0.010535439476370811, 0.012067612260580063, 0.019524650648236275, -3.654173269751482e-05, -0.03278004750609398, -0.003083671908825636, -0.0011965701123699546, -0.0015330505557358265, -0.01953870803117752, -0.004104534164071083, 0.010408930480480194, -0.018245497718453407, -0.00361606664955616, 0.019876066595315933, 0.02573767863214016, -0.001171971089206636, 0.015335776843130589, -0.009649872779846191, 0.005562908947467804, -0.003148683812469244, -0.007794398348778486, -0.005056870635598898, -0.006202485412359238, 0.013276482000946999, -0.0259625855833292, 0.029518911615014076, 0.0036793213803321123, 0.02542843297123909, 0.012531480751931667, -0.008918927982449532, -0.004368096124380827, -0.0037285196594893932, 0.022532768547534943, 0.02977192960679531, -0.005330974701792002, 0.023404279723763466, 0.009481193497776985, 0.020480502396821976, -0.026089094579219818, 0.006079489830881357, -0.0384589247405529, 0.024261733517050743, 0.023629184812307358, -0.002096194075420499, -0.03716571629047394, -0.010760345496237278, -0.018751537427306175, 0.0009567289962433279, -0.012166008353233337, -0.029800042510032654, -0.008890815079212189, 0.01565907895565033, 0.018343893811106682, 0.042141757905483246, 0.0036266089882701635, -0.005113096907734871, -0.01619323156774044, -0.009790439158678055, -0.015673136338591576, 0.009031381458044052, 0.024261733517050743, -0.015602853149175644, -0.014302615076303482, -0.03407325595617294, -0.0031188135035336018, -0.02492239512503147, -0.009221145883202553, -0.009319541975855827, 0.019187292084097862, 0.019918236881494522, -0.0009092878899537027, 0.014492379501461983, -0.016221344470977783, -0.0014504679711535573, -0.04450327157974243, 0.04107345640659332, 0.025709565728902817, -0.020761633291840553, -0.02892853319644928, 0.005018214695155621, -0.006213027983903885, 0.007309444714337587, -0.00786468107253313, -0.004993615671992302, -0.0024651805870234966, -0.025400320068001747, 0.013142943382263184, -0.01639002375304699, 0.0009057737188413739, -0.004807365592569113, 0.016249457374215126, -0.014386954717338085, 0.002816596068441868, -0.0037074347492307425, -0.004220501519739628, -0.00957958959043026, 0.019398141652345657, -0.007696001790463924, -0.0280851349234581, -0.027368247509002686, -0.009931004606187344, 0.007144279312342405, 0.01827361062169075, -0.026974661275744438, 0.01661493070423603, -0.010472184978425503, 0.004624629393219948, -0.032836273312568665, 0.004673827439546585, 0.02473965846002102, -0.0040869633667171, -0.017683234065771103, -0.022335976362228394, 0.005053356289863586, -0.006936944089829922, 0.01619323156774044, 0.03143061324954033, -0.004294298589229584, 0.018090875819325447, -0.03913364186882973, -0.012215206399559975, 0.0037285196594893932, -0.00871510710567236, -0.02454286627471447, -0.025512773543596268, 0.02696060575544834, -0.001154400291852653, -0.006543358787894249, 0.015448230318725109, 0.002310557523742318, -0.000871510710567236, -0.026075037196278572, 0.012601763941347599, -0.010774402879178524, -0.053864985704422, -0.013339736498892307, -0.008363691158592701, -0.004972530994564295, -0.01161780022084713, -0.03792477399110794, -0.1800372451543808, 0.012967236340045929, 0.03182419762015343, -0.015307663939893246, 0.019665217027068138, -0.0048600779846310616, 0.018414177000522614, -0.002867551287636161, -0.03061532787978649, -0.009333598427474499, -0.00565427727997303, -0.006613641511648893, -0.02354484610259533, -0.03027796931564808, 0.007063453551381826, 0.011540488339960575, 0.011730252765119076, -0.0002664169587660581, 0.02146446518599987, 0.03488854318857193, 0.038599491119384766, -0.03699703514575958, 0.0028253814671188593, 0.005292319227010012, 0.02157691866159439, -0.01623540185391903, 0.001623540068976581, -0.003819887526333332, -0.00016428680100943893, -0.025020791217684746, -0.03767175227403641, -0.00600217841565609, 0.0014601318398490548, -0.010071570985019207, 0.029940608888864517, 0.01849851757287979, 0.010795487090945244, -0.005113096907734871, 0.009431994520127773, 0.026285886764526367, 0.008518313989043236, 0.037446845322847366, 0.008525342680513859, 0.028872305527329445, 0.0061743720434606075, 0.03814967721700668, -0.019454367458820343, -0.005471541080623865, 0.009375768713653088, 0.0005398622015491128, 0.03727816790342331, -0.012517424300312996, 0.00485656363889575, -0.017261534929275513, 0.0017658633878454566, 0.01175133790820837, -0.0007120558875612915, 0.005049842409789562, -0.00767491664737463, -0.029912495985627174, 0.02585013210773468, -0.007583548780530691, -0.003816373413428664, 0.002726985141634941, -0.0077241151593625546, -0.02573767863214016, -0.017950309440493584, 0.022870127111673355, -0.00946713611483574, -0.013670067302882671, -0.00756949232891202, -0.007070481777191162, 0.007105623371899128, 0.021801823750138283, -0.0027357705403119326, -0.002526678144931793, -0.01378954853862524, 0.00485656363889575, 0.03438250347971916, -0.006873689126223326, -0.001473309937864542, 0.031683631241321564, -0.021717485040426254, 0.02396654523909092, 0.007133736740797758, -0.01359978411346674, -0.014337756671011448, 0.00934765487909317, -0.01892021670937538, 0.0007590577006340027, 0.027312021702528, -0.004382152575999498, 0.01907483860850334, -0.019046725705266, -0.010289449244737625, 0.01776757277548313, 0.022870127111673355, 0.0015831273049116135, 0.004445407539606094, -0.020016632974147797, 0.007506237365305424, -0.005000643897801638, -0.026805981993675232, -0.015645023435354233, 0.02562522515654564, -0.0051622954197227955, -0.011652941815555096, 0.01761295087635517, 0.039836473762989044, -0.014386954717338085, -0.0005372266168706119, 0.027804002165794373, 0.017163138836622238, 0.03949911519885063, -0.009024352766573429, 0.00996614620089531, 0.006859632674604654, -0.010043458081781864, 0.016404081135988235, -0.0301936287432909, 0.08062879741191864, -0.0020522670820355415, -0.010317562147974968, 0.029490796849131584, 0.017092855647206306, -0.022097013890743256, -0.083833709359169, 0.0022490599658340216, 0.00016296899411827326, 0.005524253472685814, -0.025864189490675926, 0.011948131024837494, -0.020410219207406044, 0.05473649501800537, -0.010676005855202675, 0.026257773861289024, -0.024486638605594635, -0.006198971066623926, 0.0045754313468933105, -0.0016024551587179303, 0.009762325324118137, -0.009474164806306362, -0.005148238502442837, 0.0006391371134668589, 0.014801625162363052, 0.023319939151406288, 0.0027181997429579496, -0.011463177390396595, -0.022631164640188217, 0.00643441965803504, -0.025976641103625298, 0.002911478281021118, -0.022012673318386078, -0.0014188404893502593, 0.010837657377123833, 0.0068069202825427055, 0.01873748004436493, -0.006230598781257868, 0.023896262049674988, -0.02100059576332569, -0.007281331345438957, 0.00853939913213253, -0.016685213893651962, 0.01187081914395094, 0.03736250847578049, -0.030024949461221695, 0.00025565485702827573, 0.005373144522309303, 0.026904378086328506, -0.020255595445632935, 0.00963581632822752, 0.01700851507484913, -0.005348545499145985, 0.03761552646756172, -0.016474364325404167, -0.0029026928823441267, -0.02715739794075489, -0.007857653312385082, -0.011603743769228458, 0.00896109826862812, 0.02161908894777298, -0.010683034546673298, 0.004543803632259369, 0.02000257559120655, -0.02892853319644928, 0.011378837749361992, 0.0127915283665061, 0.001756199519149959, -0.014358841814100742, 0.008412889204919338, -0.0013019947800785303, -0.009488221257925034, -0.007182934787124395, 0.01367709506303072, 0.00013617354852613062, -0.02915343828499317, -0.0365472212433815, 0.018709367141127586, -0.0211552195250988, -0.004522718954831362, -0.01893427222967148, -0.0017834341851994395, 0.0017843127716332674, 0.0022683877032250166, 0.016755495220422745, 0.00048187864013016224, -0.02881607972085476, -0.0062551978044211864, -0.006195457186549902, -0.02219540998339653, -0.003566868370398879, 0.025358149781823158, 0.015560682862997055, -0.010732232592999935, 0.014632945880293846, -0.041410814970731735, -0.008729163557291031, -0.01248228270560503, 0.0007129344157874584, -0.008820531889796257, -0.011624827980995178, 0.027916455641388893, 0.0025038362946361303, 0.013353792950510979, 0.02923777885735035, 0.013332707807421684, -0.03322986140847206, -0.02097248286008835, -0.07989785075187683, 0.025836074724793434, 0.007899822667241096, -0.020817860960960388, 0.014302615076303482, -0.008932984434068203, -0.005798357538878918, -0.020747577771544456, 0.016896061599254608, 0.0029395916499197483, -0.019665217027068138, -0.00016472606512252241, -0.0114420922473073, -0.012496339157223701, -0.01658681593835354, -0.0030397449154406786, 0.03289249911904335, -0.010169968008995056, -0.004782766569405794, 0.016713326796889305, 0.013894973322749138, -0.005102554801851511, 0.011737281456589699, 0.020452387630939484, -0.010233222506940365, -0.0259625855833292, 0.0062376270070672035, 0.02715739794075489, -0.015588796697556973, -0.004051821772009134, -0.002630345756188035, -0.017753517255187035, 0.007970105856657028, 0.013641953468322754, 0.014506435953080654, -0.004157246556133032, 0.0032330236863344908, 0.031065139919519424, 0.01847040466964245, 0.02100059576332569, -0.02272956073284149, -0.015841815620660782, 0.004515690729022026, -0.019918236881494522, -0.009052465669810772, -0.004744110628962517, -0.0075132655911147594, 0.0061357165686786175, 0.04290081560611725, 0.0007441225461661816, 0.04292893037199974, 0.013838746584951878, -0.004737082403153181, -0.04866403341293335, -0.019974462687969208, 0.0014829738065600395, 0.019173234701156616, 0.01409879419952631, -0.013768463395535946, -0.00823015347123146, 0.039836473762989044, 0.0023702983744442463, -0.01969332993030548, -0.00574915949255228, 0.015012474730610847, -0.025287866592407227, -0.044531386345624924, -0.014942191541194916, 0.01577153243124485, -0.020860031247138977, -0.01935597136616707, -0.02146446518599987, 0.008975154720246792, -0.00940388161689043, -0.019088895991444588, -0.018456347286701202, -0.015954269096255302, 0.015237380750477314, -0.0326957069337368, -0.00432944018393755, 0.01646030694246292, -0.0086588803678751, 0.002061052480712533, 0.003018660005182028, 0.008103643544018269, 0.010971195064485073, -0.01225034799426794, 0.0012905738549306989, 0.02392437495291233, -0.004417294170707464, -0.03314552083611488, 0.007857653312385082, 0.008209068328142166, 0.021703427657485008, -0.00996614620089531, 0.028956646099686623, 0.00796307809650898, 0.008736192248761654, 0.0072110481560230255, 0.01849851757287979, 0.010676005855202675, 0.017106911167502403, 0.025484660640358925, -0.02323560044169426, -0.0009461865411140025, -0.008996239863336086, -0.02197050303220749, -0.0026215603575110435, -0.0008310978882946074, 0.0062938532792031765, -0.00020404068345669657, -0.012573650106787682, -0.020100973546504974, 0.029828157275915146, -0.00713725108653307, 0.014928135089576244, 0.022645222023129463, -0.008441003039479256, 0.0027217138558626175, 0.041214022785425186, -0.001992526464164257, -0.004136161878705025, 0.03165551647543907, 0.0014654031256213784, 0.023319939151406288, 0.026749756187200546, -0.00010103199019795284, -0.00010119671060238034, 0.0064590186811983585, -0.01323431171476841, 0.012756386771798134, 0.02396654523909092, -0.014077709056437016, -0.009748268872499466, 0.007344586309045553, -0.03862760215997696, -0.009959118440747261, 0.007766284979879856, 0.012622848153114319, 0.10559336096048355, 0.018639083951711655, 0.0045754313468933105, 0.005489111877977848, 0.0010779673466458917, 0.006248169578611851, -0.013318651355803013, 0.017865968868136406, -0.009136805310845375, -0.03862760215997696, 0.018203329294919968, 0.0020628096535801888, -0.017444271594285965, -0.027494756504893303, -0.01862502656877041, -0.000501645787153393, -0.010704119689762592, 0.009129777550697327, 0.006248169578611851, -0.01355761382728815, 0.027326077222824097, -0.00411507673561573, 0.014576719142496586, -0.018906159326434135, -0.03204910457134247, -0.00559805054217577, 0.02050861530005932, 0.01149831898510456, -0.012334687635302544, -0.027522869408130646, 0.04793309047818184, -0.0009488221257925034, -0.023362109437584877, -0.02580796182155609, 0.0044489214196801186, 0.0121168103069067, 0.015687191858887672, -0.004526232834905386, -0.0017992479261010885, 0.02427579089999199, -0.007186449132859707, -0.007379727903753519, -0.02261710911989212, -0.020143141970038414, 0.025709565728902817, -0.01608077809214592, -0.008778361603617668, -0.012911009602248669, -0.027719663456082344]"
Redis vs. Dragonfly Scalability and Performance,Redis vs. Dragonfly Scalability and Performance," In-memory databases have become one of the most important pieces of infrastructure underpinning modern, performance oriented applications. Redis is the most popular of these because of its simplicity  its quick to set up, easy to use, and scalable to meet the demands of a growing business.  However, Redis was designed over a decade ago, and due to its simplistic single-threaded architecture, scaling Redis deployments can be a long and frustrating experience for developers. Scaling and maintaining Redis clusters is complex and time consuming, and if you dont maintain your Redis cluster correctly, you may lose data, which can lead to user experience issues or even a site outage.  Alternatively, you can use [Dragonfly](https://github.com/dragonflydb/dragonfly). Dragonfly works as a drop-in replacement for Redis and Memcached  its a modern in-memory database thats been developed to build upon the success of its predecessors, while improving performance and reliability. Its multi-threaded architecture allows for more effective vertical scaling, so you can avoid the headache that comes with horizontal scaling and cluster management while still enjoying the benefits of scaling your website.  In this article, we explain the main features of Dragonfly and show how it performs versus [Redis (OSS version)](https://redis.io/) on benchmarking tests for throughput, latency, and memory usage.  ## Redis: Simple to get up and running, complex to scale  Redis is single-threaded, which means it can only do one thing at a time. Even if the machine its running on has multiple cores, it cant make use of them to perform multiple tasks in parallel. While Redis can be vertically scaled (by increasing the memory and processor speed of the hardware it runs on), the gains in performance quickly plateau  throwing more powerful multi-threaded processing power at a single-threaded process wont result in anything getting done any faster.  To break through this limitation, your only option is horizontal scaling  adding more Redis servers, each running a single-threaded Redis process  and managing them as part of a cluster. Redis clusters are notoriously difficult to set up and maintain (unhealthy nodes cant be easily replaced and must be manually configured, and snapshotting must be configured on each node separately) and they add complexity to your infrastructure, meaning you may end up needing specialist DevOps staff to run and maintain your cluster.  To add to the frustration of maintaining an unwieldy Redis cluster, Redis can run out of memory and crash, causing you to lose all your data. Redis needs to run many background processes to maintain a healthy state, and the workload often becomes unreasonably large for its single CPU core to handle, [causing the database to crash](https://www.figma.com/blog/postmortem-service-disruptions-on-june-6-and-7-2022/). If this happens, your site may go down or there may be other serious impacts on user experience. This instability means its important for you to regularly snapshot your Redis database to avoid losing data, but unfortunately the snapshotting process itself also uses a lot of memory, leaving you once again at risk of a crash.  To combat these resource and stability issues, Redis users tend to massively over-provision their servers due to fear of data loss  either by having more cluster nodes than they actually need, which affects latency, or by provisioning machines with much larger memory capacity than they ordinarily require. They often end up paying for multiple times the amount of RAM that they need, just to cover the memory spikes from snapshotting.  Redis can also be affected by regular [latency spikes](https://about.gitlab.com/blog/2022/11/28/how-we-diagnosed-and-resolved-redis-latency-spikes/). Because its single-threaded, any background process that needs to be run regularly causes a huge spike in latency, as there are no other threads to do the work. During periods of high latency, throughput drops. If this happens regularly, your users may become annoyed at a system that seems flaky.  While Redis remains popular, these issues are still unaddressed, and continue to waste time and resources for many organizations. Our frustrations with Redis led us to develop our own drop-in replacement that solves the most common issues faced by Redis users.  ## Dragonfly solves the biggest problems with Redis  Dragonfly is a drop-in Redis replacement to simplify production and boost performance. It [scales vertically](https://www.cloudzero.com/blog/horizontal-vs-vertical-scaling) to support millions of operations per second and terabyte sized workloads on a single instance.  Compared to Redis single-threaded process, Dragonfly makes use of all hardware resources made available to it via its multi-threaded processing capabilities. This allows it to scale vertically in a way that leads to much higher throughput on high-spec machines  without the stress of managing a cluster. Dragonflys ability to make full use of all available CPU cores also makes it much cheaper to run, as you can deploy much smaller instance sizes of Dragonfly than you would need for Redis (for comparable sizes of data), and simply up-spec your server when additional resources are required.  We want everyone to enjoy the benefits of our faster, more reliable in-memory database, so we made Dragonfly subject to a Business Source License, meaning it costs nothing to use and the source code is made available. You can [check out the code on GitHub](https://github.com/dragonflydb/dragonfly) and install it right away.  ## Benchmarking comparison between Dragonfly and Redis  In order to show the considerable performance advantage that Dragonfly has over Redis, we are sharing our benchmarking results with you here. To show the most direct comparison, we compared a single instance of Redis with a single instance of Dragonfly.  We ran our tests on [AWS Graviton2 EC2 instances](https://aws.amazon.com/ec2/graviton/), which are network-optimized and provide the best performance for web applications. We used [memtier_benchmark](https://github.com/RedisLabs/memtier_benchmark)  a widely used benchmarking tool developed by Redis Ltd.  to test throughput and latency, and [Prometheus](https://prometheus.io/) to monitor and visualize memory usage.  ### Test #1: Throughput  The throughput of a database is measured by the number of operations it can process per second. This is one of the most important metrics for database performance.  We filled the Redis and Dragonfly databases with 10 million keys each, to simulate databases that are in use, and then ran a memtier_benchmark test against the Redis and Dragonfly instances.  As you can see from the graph below, the throughput for the multi-threaded Dragonfly far exceeds that of Redis.  ![throughput chart](/assets/blog/scaling-performance-redis-vs-dragonfly/throughput.png ""Dragonfly throughput is far higher than Redis for both GET and SET operations."")  #### How to repeat these tests for yourself  If you want to test these performance gains on your own infrastructure, you can follow this guide:  - Install Redis version 7.0.4 and Dragonfly version 0.15.0 onto separate AWS EC2 instances (we used [c6gn.16xlarge](https://instances.vantage.sh/aws/ec2/c6gn.16xlarge)). - Edit the Redis configuration file: - _protected-mode no_ This allows you to run the memtier_benchmark command from outside of the Redis server. - Change _bind 127.0.0.1_ to _bind 0.0.0.0_ This is also used to assist with remote Redis connections. - _save """"_ This disables snapshotting. - _enable-debug-command yes_ This enables debug commands, which you can use to add dummy data to the database. - Start Dragonfly with the command: - _./dragonfly-aarch64 --proactor_threads=64_ This parameter specifies how many threads will be allocated to Dragonfly. - Start Redis. - Fill each database with 10 million keys, to simulate a database that is in use. _debug populate 10000000 key 550_  - Run this memtier_benchmark command for each database: - _memtier_benchmark -p 6380 --ratio=&lt;1:0 for GET, 0:1 for SET&gt; --hide-histogram --threads=&lt;2 for Redis, 64 for Dragonfly&gt; --clients=30 --requests=200000 --distinct-client-seed --data-size 256 --expiry-range=500-500 -s &lt;IP address for Redis/Dragonfly server&gt;_  memtier_benchmark is a versatile tool, so be sure to check out the [user manual](https://redis.com/blog/memtier_benchmark-a-high-throughput-benchmarking-tool-for-redis-memcached/) if you want to tweak the test parameters to reflect your own usage scenarios.  ### Test #2: Latency  Database latency is a measure of how long operations take to complete. When a database has high throughput, this can often affect its latency, as writing more data to the database can cause delays. It's particularly important to consider the [tail latency](https://robertovitillo.com/why-you-should-measure-tail-latencies/) of a system. Tail latency focuses on the operations that have taken the longest time to complete, rather than the overall average time. Tail latency is measured for the higher percentiles  for example, a P99 latency is a measure of how long the longest 1% of requests took to complete.  Tail latency is an important metric to measure. If every 1 in 100 or even 1 in 10000 operations is unacceptably slow, then  depending on your traffic  a significant number of users could be affected, undermining confidence in your product or service. It is becoming increasingly common for service level agreements (SLAs) to demand that your products 99th percentile for response time is below a certain threshold.  Dragonfly, while providing up to 30 times the throughput of Redis, does not show a significant increase in latency for the slowest 1% of requests.  Below, we have graphed the results of our test of the P99 latency of Dragonfly (using 64 cores) and Redis. Its worth noting that we used **exactly the same** memtier_benchmark commands for our latency test as we did for our throughput test.  ![latency chart](/assets/blog/scaling-performance-redis-vs-dragonfly/latency.png ""The P99 latency of Dragonfly is only a little higher than that of Redis, even when the throughput is 2530 times more than for Redis."")  **This graph shows that the P99 latency of Dragonfly is only slightly higher than that of Redis, despite Dragonflys massive throughput increase**  it's worth noting that if we were to reduce Dragonfly's throughput to match that of Redis, Dragonfly would have much lower P99 latency than Redis. This means that Dragonfly will give you significant improvements to your application performance.  ### Test #3: Memory efficiency during the snapshotting process  [Redis is known to perform particularly slowly](https://medium.com/@bb8s/how-redis-cluster-achieves-high-availability-and-data-persistence-8cdc899764e8) when snapshots of the database are being created, as the bulk of its memory gets redirected to the snapshotting process. Dragonfly does not suffer from this issue due to its increased efficiency. Below, our graph demonstrates how much more efficient Dragonfly is while snapshotting, by comparing what happens when the Redis bgsave and the Dragonfly save commands are run  which initiate the snapshotting processes for their respective databases.  ![memory usage chart](/assets/blog/scaling-performance-redis-vs-dragonfly/memory-usage.png ""First, a large number of records are added to Redis and Dragonfly, causing the memory usage of both to increase to 56 and 48 GiB respectively. Next, the snapshotting process is initiated for both. This causes Redis memory to spike massively, whereas Dragonflys memory has no significant change."")  **Our results show that:**  - **Dragonfly has an inherently smaller memory usage for the same dataset.** - **Dragonfly is faster at both loading the dataset and producing the snapshot.** - **Dragonfly's memory usage does not grow during the snapshotting process, whereas Redis almost doubles its RAM requirements.**  #### How to repeat these tests for yourself  - Install Redis version 7.0.4 and Dragonfly version 0.15.0 onto separate AWS EC2 instances (we used [r6gd.4xlarge](https://instances.vantage.sh/aws/ec2/r6gd.4xlarge)). - Edit the Redis configuration file: - _protected-mode no_ This allows you to run the memtier_benchmark command from outside of the Redis server. - Change _bind 127.0.0.1_ to _bind 0.0.0.0_ This is also used to assist with remote Redis connections. - enable-debug-command yes This enables debug commands, which you can use to add dummy data to the database. - Start Dragonfly with the command: - _./dragonfly --dir ""/mnt/vol1/""_ - Start Redis. - Fill each database with 100 million keys, to simulate a database that is in use. - _debug populate 100000000 key 500_ - See our [snapshotting video](https://www.youtube.com/watch?v=fEwU-hwtfwQ) demonstration for further details.  ### Redis vs. Dragonfly benchmarks: Results summary  As the above benchmark results show, **Dragonfly outperforms Redis by a huge amount**. Dragonfly throughput is up to 30 times higher than Redis, while at the same time, P99 latency only increases by around 0.2ms.  The other high-impact performance improvement is that the snapshotting process  which uses up so much memory in Redis  causes no noticeable spikes in memory usage in Dragonfly.  If you are deploying a new application, or looking to scale an existing Redis deployment, Dragonfly can save you time and resources, both in the initial implementation of an in-memory database and with ongoing scaling and maintenance tasks. Dragonfly is a high-performance drop-in alternative to Redis that wont suffer from resource exhaustion, and is ready to expand with your product as it grows.  ## Dragonfly is Redis compatible, with better performance and effortless scaling  We built Dragonfly to solve Redis prevalent performance issues and, as our results show, we have succeeded.  Redis is an amazing technology that has been utilized by millions of developers to get a cache up and running quickly. We built Dragonfly so developers would have something just as easy to use, but with better performance as well as being much more reliable.  Making the easy switch from Redis to Dragonfly is a great one-step solution to solving Redis scalability and saturation issues. You can get started easily in just a few minutes by running [a Dockerized version of Dragonfly](/docs/getting-started/docker) and calling it with exactly the same commands you would use to call Redis.","[-0.024316851049661636, 0.0016833049012348056, -0.0065536219626665115, -0.033425502479076385, 0.006262199021875858, 0.008227608166635036, -0.01177212130278349, -0.005499755963683128, -0.021605942398309708, -0.019545651972293854, -0.00047059680218808353, -0.0013325810432434082, -0.008017512038350105, -0.01644166186451912, 0.0014935412909835577, 0.02034536935389042, 0.020968878641724586, -0.01584526151418686, 0.02191769704222679, -0.03234114125370979, 0.005143949296325445, -0.014313598163425922, -0.017404034733772278, 0.008003957569599152, -0.030931469053030014, 0.0005396402557380497, 0.02019627019762993, -0.003849490312859416, -0.004466222133487463, 0.02414064109325409, 0.014557579532265663, -0.020508024841547012, 0.0028396768029779196, -0.007014476228505373, -0.026051832363009453, 0.0065942853689193726, 0.018257969990372658, -0.006892485544085503, 0.01927456073462963, 0.000756936555262655, 0.02908805012702942, -0.016956733539700508, -0.014150943607091904, -0.02087399736046791, -0.02254120633006096, 0.011304489336907864, 0.00035157098318450153, -0.03225981444120407, 0.010897853411734104, -0.020697787404060364, 0.008410594426095486, 0.0178513340651989, -0.010389558039605618, 0.001829863409511745, 0.013629093766212463, -0.003825769992545247, -6.549598037963733e-05, 0.017715787515044212, 0.009440739639103413, -0.01147392112761736, 0.014015397988259792, 0.02965734153985977, -0.015533506870269775, 0.0030311348382383585, -0.009176425635814667, -0.004188354127109051, -0.0001252736255992204, -0.017946215346455574, 0.013737529516220093, -0.01303947065025568, 0.041720885783433914, 0.030443504452705383, 0.001726510003209114, -0.0024669268168509007, 0.01644166186451912, -0.027895251289010048, -0.009027325548231602, 0.009420407935976982, 0.008498698472976685, -0.0066722240298986435, 0.0010691146599128842, 0.0007222029962576926, -0.017864888533949852, 0.01908479630947113, -0.006492626387625933, 0.0472511388361454, -0.02556386962532997, 0.01049121655523777, 0.00022725039161741734, 0.013493548147380352, -0.00032086146529763937, 0.014232270419597626, 0.006604451220482588, 0.0042967903427779675, -0.007048362400382757, -0.007610876113176346, 0.017566688358783722, 0.00773964449763298, -0.028410322964191437, -0.01153491623699665, -0.023449359461665154, 0.002322909887880087, -0.0030328291468322277, -0.010660648345947266, -0.017282042652368546, -0.014408479444682598, 0.026797331869602203, -0.020806225016713142, 0.01682118885219097, 0.010301453061401844, -0.018800152465701103, 0.030226631090044975, 0.015004879795014858, -0.014001843519508839, -0.002763432450592518, 0.000924250460229814, 0.0394437201321125, -0.03339839354157448, 0.02027759701013565, -0.01140614878386259, 0.032314032316207886, 0.01684829778969288, 0.0234358049929142, -0.027841031551361084, 0.013107243925333023, 0.009115430526435375, -0.006756939925253391, -0.0017027895664796233, 0.014259379357099533, 0.0023855995386838913, 0.007671871688216925, 0.02719041332602501, -0.016983842477202415, -0.013032693415880203, -0.02016916126012802, -0.006892485544085503, -0.004828806035220623, 0.0014986242167651653, -0.005093119572848082, -0.02046736143529415, 0.006872153375297785, 0.019111907109618187, -0.025496095418930054, -0.021375514566898346, -0.02336803264915943, 0.028328996151685715, -0.021863479167222977, 0.015289525501430035, -0.006872153375297785, -0.006546844728291035, 0.025496095418930054, -0.019884515553712845, -0.01365620270371437, -0.005875894799828529, 0.013364779762923717, 0.019437216222286224, -0.02588917873799801, 0.004147690255194902, -0.017363369464874268, -0.010755530558526516, 0.017363369464874268, 0.043808285146951675, -0.006021605804562569, -0.0037173335440456867, 0.031419433653354645, 0.03328995779156685, 0.013256343081593513, -0.019206788390874863, 0.006773883011192083, -0.011765344068408012, 0.014557579532265663, 0.034970723092556, -0.03209716081619263, 0.03705812245607376, 0.007285567000508308, 0.008071730844676495, -0.016306115314364433, 0.020846888422966003, 0.002819345099851489, -0.015913033857941628, 0.011555247940123081, -0.00257705757394433, 0.007759976200759411, 0.021307742223143578, -0.013527434319257736, -0.008844339288771152, -0.012687052600085735, 0.008810453116893768, 0.004306956194341183, -0.007746421732008457, -0.002482175827026367, -0.0026211098302155733, -0.009833821095526218, -0.03185317665338516, -0.6011711359024048, 0.0011504418216645718, 0.005723406095057726, -0.036217741668224335, -0.0055878604762256145, -0.004605156369507313, 0.004384894855320454, 0.005984331015497446, -0.0067908260971307755, 0.002400848548859358, 0.0018569724634289742, -0.016157016158103943, 0.005882672034204006, -0.006180871743708849, -0.03225981444120407, 0.0021483951713889837, 0.009406853467226028, -0.008193721994757652, -0.028545867651700974, -0.00579456752166152, -0.03540446609258652, 0.030443504452705383, -0.0006811158382333815, 0.008051399141550064, -0.009772825986146927, 0.004344230983406305, -0.00998969841748476, 0.007651539985090494, -0.005513310432434082, 0.03600086644291878, -0.047224029898643494, 0.01703806035220623, 0.025346996262669563, 0.0016367111820727587, 0.04418781027197838, -0.007997180335223675, -0.029630232602357864, 0.037627413868904114, 0.0033344177063554525, 0.025455432012677193, 0.0005349809071049094, -0.006336749065667391, 0.016387443989515305, 0.017756452783942223, -0.002582140499725938, -0.0029887768905609846, 0.015669051557779312, -0.015004879795014858, 0.0060419379733502865, -0.0017366758547723293, -0.01028789859265089, -0.015791043639183044, -0.005008403677493334, -0.007495662663131952, 0.0011114726075902581, -0.015018434263765812, 0.04676317423582077, -0.014259379357099533, 0.006333360448479652, -0.004947408568114042, 0.003085352946072817, 0.021890588104724884, -0.004747478757053614, -0.01381885726004839, -0.02946757711470127, 0.008342821151018143, -0.023462913930416107, -0.02719041332602501, 0.021456843242049217, -0.028600087389349937, 0.02838321402668953, -0.017010951414704323, 0.019098352640867233, -0.014869334176182747, -0.0009843987645581365, 0.008918889798223972, 0.044106483459472656, 0.0015613139839842916, 0.0005269328830763698, 0.030551940202713013, 0.02409997768700123, 0.0025618087965995073, -0.005801344756036997, -0.03426588699221611, 0.036922577768564224, 0.016766970977187157, -0.01797332428395748, -0.010924962349236012, -0.006218146998435259, 0.004435724578797817, 0.009481403045356274, 0.0312567763030529, -0.019911624491214752, -0.030741704627871513, 0.030524831265211105, 0.031121231615543365, -0.023164715617895126, -0.01424582488834858, 0.005110063124448061, -0.023354478180408478, -0.013764638453722, -0.03507915884256363, -0.00029714099946431816, 0.015221752226352692, 0.013852743431925774, -0.0022161677479743958, -0.028816958889365196, 0.0006213911110535264, 0.039335284382104874, -0.005621747113764286, 0.000782351300586015, -0.013344448059797287, -0.0069162058643996716, -0.004076528828591108, 0.008702017366886139, -0.015858815982937813, 0.03638039529323578, -0.005608192179352045, 0.008180166594684124, -0.027393732219934464, -0.005333712790161371, -0.006187648978084326, 0.005950444377958775, 0.00046085446956567466, -0.0012927645584568381, 0.004327287897467613, 0.002533005317673087, -0.0023788223043084145, 0.008878226391971111, 0.007956516928970814, 0.005123617593199015, -0.02544187754392624, 0.026756668463349342, -0.020860442891716957, 0.03857623040676117, 0.021483952179551125, 0.014706679619848728, 0.004252737853676081, 0.012666720896959305, -0.036434613168239594, 0.03207004815340042, -0.0033157803118228912, 0.018244415521621704, -0.02068423293530941, -0.027597051113843918, -0.0013910350389778614, -0.0148828886449337, 0.0027295462787151337, -0.0005972470971755683, -0.012985252775251865, -0.007895521819591522, -0.010857189074158669, -0.0017104139551520348, 0.019017023965716362, 0.0004212498024571687, 0.022866515442728996, -0.008031067438423634, -0.034320104867219925, -0.011229938827455044, -0.02202613279223442, -0.004022310953587294, 0.025875624269247055, -0.034618303179740906, 0.00218567019328475, -0.049419865012168884, -0.03619063273072243, -0.01099273469299078, 0.020995987579226494, -0.00704158516600728, -0.02377466857433319, -0.030524831265211105, -0.009806712158024311, 0.013737529516220093, 0.01343255303800106, -0.008092062547802925, -0.00423240615054965, -0.02693287841975689, 0.008200499229133129, 0.00025308874319307506, -0.00816661212593317, 0.012185534462332726, 0.019613424316048622, 0.0021263689268380404, -0.01938299648463726, 0.040311213582754135, 0.01229397114366293, 0.00996936671435833, 0.02179570682346821, -0.008600357919931412, 0.03047061339020729, 0.003312391461804509, 0.02313760481774807, -0.016211234033107758, -0.02849164977669716, -0.016197679564356804, -0.02488614246249199, -0.002566891722381115, 0.0014469475718215108, -0.012842929922044277, 0.031636305153369904, 0.016089243814349174, 0.0077735306695103645, 0.015872370451688766, -0.019206788390874863, -0.011263825930655003, -0.013486770913004875, 0.003476740326732397, 0.000979315722361207, 0.008979884907603264, 0.007929407991468906, 0.005354044493287802, 0.015899479389190674, -0.0018078372813761234, -0.029955541715025902, -0.012463402934372425, 0.037112340331077576, -0.012510843575000763, 0.005503144580870867, -0.004195131361484528, 0.000715849339030683, 0.0030989074148237705, 0.013439330272376537, 0.0074888854287564754, 0.008342821151018143, 0.009122207760810852, 0.0014909998280927539, 0.008302157744765282, 0.010416666977107525, 0.02499457821249962, -0.04603122919797897, -0.006326583214104176, 0.034916505217552185, -0.004435724578797817, -0.013547766022384167, 0.03066037781536579, 0.019911624491214752, 0.025496095418930054, -0.02667534165084362, 0.01261250302195549, -0.024872587993741035, 0.028735632076859474, 0.008281826041638851, 0.009996475651860237, -0.029630232602357864, 0.015208197757601738, 0.020928215235471725, 0.008885003626346588, 0.015208197757601738, -0.01684829778969288, -0.009576285257935524, -0.021294187754392624, -0.008064953610301018, -0.0017468418227508664, -0.003407273441553116, 8.593368693254888e-05, -0.017919106408953667, 0.011128280311822891, 0.008918889798223972, 0.027217524126172066, 0.014394924975931644, 0.005360821727663279, 0.011006289161741734, 0.02778681367635727, 0.002677022246643901, 0.025794295594096184, 0.0040460312739014626, 0.005299826618283987, -0.010186239145696163, -0.0015214974991977215, -0.004456056281924248, -0.006265587639063597, -0.024425286799669266, -0.02742084115743637, -0.03464541211724281, 0.004262903705239296, 0.0007014475995674729, -0.008552917279303074, 0.011914444155991077, -0.020765559747815132, 0.020819779485464096, -0.005252385511994362, -0.03399479389190674, 0.015818152576684952, 0.0009911759989336133, 0.0006688319845125079, -0.04326610267162323, -0.016102798283100128, 0.01669919677078724, 0.01663142442703247, 0.008810453116893768, 0.0072381263598799706, 0.0015630082925781608, -0.004107026848942041, -0.010897853411734104, -0.005198167636990547, -0.006167317274957895, 0.05495011806488037, -0.0048321946524083614, -0.02309694141149521, -0.0026837997138500214, 0.016116352751851082, 0.005845396779477596, -0.018962806090712547, -0.020657123997807503, 0.04022988677024841, -0.006980590056627989, -0.016360333189368248, -0.020779116079211235, 0.01644166186451912, -0.00752277160063386, -0.015235306695103645, -0.03375081345438957, -0.018623942509293556, -0.02437106892466545, 0.0004242148424964398, 0.014394924975931644, -0.014706679619848728, 0.004811862949281931, 0.031229667365550995, 0.02522500604391098, -0.019030578434467316, -0.01644166186451912, -0.010708088986575603, -0.0004297213745303452, 0.06007373705506325, 0.010328561998903751, 0.005018569529056549, 0.003415744984522462, -0.032910432666540146, -0.014503361657261848, -0.0031531257554888725, -0.03418456017971039, 0.031094122678041458, -0.0007120370864868164, -0.008959553204476833, -0.029006723314523697, 0.010592876002192497, -0.0033428892493247986, 0.0028312052600085735, 0.017132943496108055, -0.03434721380472183, -0.029819995164871216, -0.011324821040034294, -0.006750162690877914, -0.013771416619420052, 0.001147900358773768, 0.02298850566148758, 0.018257969990372658, 0.06023639068007469, 0.016021469607949257, 0.02109086886048317, 0.0025075904559344053, 0.009955812245607376, -0.025848515331745148, -0.010132021270692348, 0.001421532710082829, -0.002792235929518938, 0.020562242716550827, -0.008817230351269245, 0.029304923489689827, -0.006435019429773092, -0.021212860941886902, -0.010938516817986965, 0.010369225405156612, 0.003788494970649481, 0.009827043861150742, -0.005401485599577427, 0.007204239722341299, 0.017105834558606148, -0.011575580574572086, -0.0025651974137872458, 0.01667208783328533, -0.04296790435910225, 0.007197462487965822, 0.028545867651700974, -0.010518325492739677, -0.03225981444120407, -0.00011997888941550627, 0.0059097809717059135, 0.0028210394084453583, 0.00971182994544506, 0.005882672034204006, -0.015506397932767868, -0.03768163174390793, -0.006543455645442009, 0.01547928899526596, -0.034320104867219925, -0.005889449268579483, -0.014096724800765514, -0.010945294052362442, 0.0023551019839942455, 0.004683094564825296, -0.016604315489530563, -0.021551724523305893, -0.024953914806246758, -0.03174474090337753, -0.019179679453372955, 0.007536326069384813, 0.016861852258443832, 0.008288603276014328, 0.022270115092396736, 0.013873075135052204, -0.013120798394083977, 0.019206788390874863, 0.017959769815206528, -0.006204592064023018, -0.000773879699409008, -0.04147690162062645, -0.048606593161821365, 0.0029091439209878445, 0.0012597254244610667, -0.008769789710640907, -0.024831924587488174, -0.004788142628967762, 0.020670678466558456, 0.0002725734084378928, 0.032314032316207886, 0.007265235297381878, 0.004066362977027893, 0.032042939215898514, 0.030226631090044975, 0.01874593272805214, 0.02428974211215973, -0.033723704516887665, 0.024303296580910683, 0.01644166186451912, -0.01722782477736473, -0.015059097670018673, 0.009461071342229843, -0.015059097670018673, -0.008071730844676495, -0.011101171374320984, -0.006024994421750307, -0.028328996151685715, -0.0005832689348608255, 0.003547901753336191, -0.015303079970180988, 0.007597321644425392, 0.027597051113843918, 0.011467143893241882, -0.01633322425186634, 0.014720234088599682, -0.0014113668585196137, 0.0004117192584089935, 0.028301887214183807, -0.02582140453159809, 0.031419433653354645, 0.024235524237155914, 0.0015850344207137823, 0.018922142684459686, 0.013825634494423866, -0.02979288622736931, -0.031717631965875626, -0.00352079258300364, 0.018285078927874565, 0.02087399736046791, 0.00044687636545859277, -0.02254120633006096, -0.015330188907682896, -0.010647093877196312, -0.0131140211597085, 0.005472647026181221, -0.016360333189368248, 0.0032412302680313587, -0.018840815871953964, -0.0039342064410448074, 0.016495879739522934, -0.02336803264915943, -0.009400076232850552, -0.021904142573475838, -0.028844067826867104, 0.013263121247291565, 0.0172955971211195, 0.0031361824367195368, -0.019247451797127724, -0.03914552181959152, -0.013622316531836987, -0.010416666977107525, 0.013798525556921959, -0.021212860941886902, 0.012863261625170708, 7.354398985626176e-05, 0.01848839782178402, 0.016658533364534378, 0.02183637022972107, 0.027746150270104408, 0.0014266157522797585, 0.01878659799695015, -0.007658317219465971, -0.019694751128554344, -0.005238831043243408, -0.00397148123010993, 0.004825417418032885, -0.0007510064169764519, 0.02105020545423031, 0.018501952290534973, -0.020630015060305595, -0.008824007585644722, -0.008885003626346588, 0.015614833682775497, -0.009996475651860237, -0.017797116190195084, -0.042723920196294785, -0.036326177418231964, -0.012436293996870518, 0.019735414534807205, -0.0002865515125449747, 0.010328561998903751, -0.014869334176182747, -0.01957276090979576, 0.029711559414863586, -0.028708523139357567, 0.04624810069799423, -0.0084648123010993, 0.010836857371032238, -0.01808176189661026, 0.013215679675340652, -0.004317122045904398, -0.0077735306695103645, -0.021660160273313522, -0.021605942398309708, -0.02243276871740818, -0.021199306473135948, 0.014666016213595867, 0.013439330272376537, 0.004669540096074343, 0.009339080192148685, 0.019220342859625816, 0.006150374189019203, 0.004059585742652416, -0.011921221390366554, 0.0006565481889992952, 0.002714297268539667, -0.016658533364534378, -0.014489807188510895, -0.04158534109592438, -0.03076881356537342, -0.031527869403362274, -0.013330893591046333, 0.01718716137111187, 0.004906744696199894, 0.009854152798652649, 0.00286848028190434, -0.006224924232810736, 0.010782639496028423, -0.0023974599316716194, 0.03117544949054718, -0.006685778498649597, 0.028030795976519585, 0.018054651096463203, 0.016021469607949257, -0.023910215124487877, -0.018434179946780205, 0.018651051446795464, -0.02277163229882717, 0.02277163229882717, 0.045516155660152435, -0.031121231615543365, -0.016943179070949554, -0.003727499395608902, -0.018759489059448242, -0.0032141210976988077, -0.020914660766720772, -0.001036075409501791, 0.015248861163854599, -0.00922386720776558, -0.016726307570934296, -0.007305899169296026, -0.009677943773567677, 0.014503361657261848, -0.04256126657128334, 0.01365620270371437, 0.021456843242049217, -0.01335800252854824, -0.007360117044299841, 0.03478095680475235, -0.0050355130806565285, 0.02987421303987503, -0.02409997768700123, 0.010525102727115154, -0.025794295594096184, 0.007177130784839392, -0.028112122789025307, -0.016170570626854897, 0.015614833682775497, 0.02031826041638851, -0.009644057601690292, -0.008044621907174587, 0.017485361546278, -0.0006764564313925803, 0.01169757079333067, 0.0005049067549407482, -0.013032693415880203, 0.025645196437835693, -0.001187716843560338, -0.0031006017234176397, 0.00844448059797287, 0.006228312849998474, -0.002971833571791649, -0.01659076102077961, -0.022608978673815727, 0.007692203391343355, -0.0030243576038628817, -0.004920299164950848, 0.010186239145696163, -0.026851549744606018, -0.0009572896524332464, 0.008139503188431263, 0.0013596900971606374, -0.02347646839916706, -0.020399587228894234, -0.002056902041658759, 0.025509651750326157, -0.03884731978178024, -0.010863966308534145, 0.010152352973818779, -0.005689519457519054, -0.007217794191092253, 0.0049270763993263245, 0.0021704211831092834, 0.003144653979688883, 0.037220776081085205, -0.0026939655654132366, 0.029006723314523697, 0.025794295594096184, -0.0056657991372048855, -0.027949469164013863, 0.016279006376862526, -0.012456625699996948, -0.012260084971785545, 0.024913251399993896, -0.01957276090979576, -0.03337128460407257, -0.013215679675340652, 0.008200499229133129, 0.0031107678078114986, -0.01770223304629326, -0.005028735846281052, 0.013784971088171005, 0.020738450810313225, 0.006882319226861, -0.0189763605594635, -0.018718823790550232, 0.01808176189661026, -0.026472022756934166, -0.026512686163187027, 0.01253795251250267, 0.009020548313856125, -0.018556170165538788, -0.0064994036220014095, -0.0058148992247879505, -0.014788007363677025, -0.01562838815152645, -0.022554760798811913, -0.03239535912871361, 0.008430926129221916, -0.011236716993153095, 0.004533994942903519, -0.005903003737330437, -0.0306874867528677, -0.01682118885219097, 0.019803188741207123, -0.0025092847645282745, 0.02618737891316414, 0.006180871743708849, -0.007109357975423336, 0.024574387818574905, 0.010145575739443302, -0.010179461911320686, 0.00864779856055975, -0.023056278005242348, -0.016916070133447647, -0.054407939314842224, -0.011731456965208054, -0.009142539463937283, 0.04397093877196312, 0.02403220534324646, -0.005116840358823538, -0.016279006376862526, 0.01119605265557766, -0.05316092073917389, -0.015303079970180988, 0.000301165011478588, 0.009820266626775265, 0.02309694141149521, 0.012510843575000763, 0.03131099417805672, 0.02473704144358635, 0.030118195340037346, 0.02477770484983921, -0.01153491623699665, 0.00144864188041538, -0.02949468605220318, -0.020765559747815132, 0.028844067826867104, -0.006516346707940102, -0.0327477753162384, -0.013723975047469139, -0.0015884230379015207, -0.018407069146633148, 0.0015706326812505722, 0.027542833238840103, 0.006021605804562569, 0.030904358252882957, -0.0017807281110435724, 0.003131099510937929, -0.006485849153250456, 0.001741758780553937, 0.024086423218250275, -0.039226848632097244, -0.0031243222765624523, 0.02887117676436901, -0.0110672852024436, -0.008017512038350105, -0.005550585687160492, 0.004293401725590229, -0.007007698994129896, -0.014096724800765514, -0.020928215235471725, 0.013920515775680542, 0.0019992950838059187, 0.0032988369930535555, 0.0017027895664796233, -0.009359411895275116, 0.015669051557779312, 0.04077206552028656, -0.032042939215898514, -0.021755041554570198, -0.005055844783782959, -0.004883024375885725, -0.03426588699221611, 0.02927781455218792, 8.286273805424571e-05, -0.008898558095097542, 0.01752602495253086, -0.016794079914689064, 0.008593580685555935, -0.009732162579894066, -0.01752602495253086, -0.012205866165459156, -0.014557579532265663, -0.011257048696279526, 0.007881967350840569, -0.011094394139945507, 0.005713240243494511, -0.004720369819551706, 0.01463890727609396, 0.012083875946700573, -0.028139231726527214, -0.008634244091808796, 0.02426263317465782, -0.004642431158572435, -0.006089378613978624, 0.027136195451021194, -0.00499484920874238, -0.03928106650710106, -0.006262199021875858, 0.013141130097210407, 0.014056061394512653, -0.012788712047040462, 0.2209932804107666, 0.022351441904902458, 0.007394003681838512, 0.0446486659348011, 0.00010864813521038741, 0.002516062231734395, 0.021253524348139763, 0.0025075904559344053, -0.0029819996561855078, 0.020440252497792244, -0.006685778498649597, -0.0025651974137872458, -0.02057579718530178, -0.0035004608798772097, 0.004591601435095072, -0.009935480542480946, -0.019667642191052437, -0.032042939215898514, 0.00386982224881649, 0.006204592064023018, -0.009461071342229843, -0.006885708309710026, -0.0360821932554245, -0.01017268467694521, 0.028328996151685715, -0.0071839080192148685, 0.0031887064687907696, -0.01927456073462963, 0.013581652194261551, 0.002636358607560396, -0.009311971254646778, -0.004262903705239296, 0.004771199077367783, -0.01076908502727747, -0.01997939683496952, 0.0028667859733104706, 0.024465950205922127, -0.028437431901693344, 0.0016748332418501377, 0.004794919863343239, 0.008580026216804981, -0.0071296896785497665, 0.029630232602357864, -0.0030802700202912092, 0.014516916126012802, -0.015452179126441479, -0.02183637022972107, 0.0026295813731849194, -0.005015180911868811, 0.021822815760970116, -0.005188001319766045, -0.0017620906000956893, 0.0022331110667437315, 0.016428107395768166, 0.008817230351269245, -0.0029193097725510597, 0.009305194020271301, -0.006814546883106232, 0.005005015060305595, 0.019098352640867233, -0.0076244305819272995, 0.020846888422966003, 0.004449279047548771, -0.0004794919805135578, -0.04275102913379669, 0.02778681367635727, -0.05069399252533913, 0.058013446629047394, 0.005415040068328381, -0.0005481118569150567, -0.033425502479076385, -0.007726089563220739, -0.01778356172144413, 0.004781365394592285, -0.01209065318107605, -0.016007915139198303, 0.013934070244431496, 0.0027261576615273952, 0.01829863339662552, 0.03779006749391556, -0.0039037084206938744, -0.010125244036316872, -0.020955324172973633, 0.017878443002700806, 0.002722768811509013, -0.006133431103080511, 0.0260382778942585, -0.017092280089855194, -0.01957276090979576, -0.008735903538763523, 0.005072787869721651, -0.01408317033201456, -0.02079267054796219, -0.023652678355574608, 0.03399479389190674, -0.010043916292488575, 0.0034496313892304897, 0.025062350556254387, -0.014950661920011044, -0.02671600505709648, -0.03808826580643654, 0.0502331368625164, 0.0431576669216156, 0.010464107617735863, -0.02559097856283188, -0.006634949240833521, -0.030497722327709198, 0.01829863339662552, -0.008552917279303074, -0.010457330383360386, -0.002992165507748723, -0.035621341317892075, 0.008613912388682365, -0.014462698251008987, 0.009481403045356274, 0.02288006991147995, 0.02134840562939644, -0.010945294052362442, -0.0009174731676466763, 0.018556170165538788, 0.0009250976145267487, -0.015099761076271534, 0.021999023854732513, -0.008939221501350403, -0.0371936671435833, -0.035729777067899704, -0.022446323186159134, 0.020995987579226494, -0.008905335329473019, -0.027502167969942093, 0.012490511871874332, -0.007265235297381878, 0.005143949296325445, -0.026051832363009453, -0.011243494227528572, 0.02317827008664608, 0.00565563328564167, -0.020508024841547012, -0.01823086105287075, -0.02176859602332115, 0.005621747113764286, 0.015208197757601738, 0.025455432012677193, 0.006746774073690176, 0.007909076288342476, -0.00712291244417429, 0.0012385464506223798, 0.015018434263765812, 0.007495662663131952, -0.02262253314256668, -0.023205379024147987, 0.025604533031582832, 0.014015397988259792, 0.01352065708488226, 0.01856972463428974, -0.009454294107854366, 0.006509569473564625, -0.017607351765036583, -0.003639394883066416, 0.0029023666866123676, -0.054895900189876556, 0.0010072720469906926, 0.0076244305819272995, 0.0019518542103469372, -0.010897853411734104, -0.0256723053753376, -0.17046193778514862, 0.009637280367314816, 0.009379744529724121, -0.007211016956716776, 0.02908805012702942, 0.0010538657661527395, 0.027217524126172066, -0.008864670991897583, 0.001356301479972899, 0.002358490601181984, -0.0038867653347551823, 0.000979315722361207, -0.03228692337870598, -0.04047386720776558, 0.012870038859546185, 0.012382075190544128, 0.008532585576176643, 0.023164715617895126, 0.029413359239697456, 0.013961180113255978, 0.0195320975035429, -0.03827803209424019, 0.015533506870269775, 0.0019061076454818249, 0.021565278992056847, -0.026607569307088852, -0.004842360503971577, 0.0019230508478358388, 0.021904142573475838, -0.03147365152835846, -0.020819779485464096, -0.00965083483606577, 0.029304923489689827, -0.0037952722050249577, 0.021104423329234123, -0.007502439897507429, 0.027244633063673973, 0.020521579310297966, 0.001050477148965001, 0.03076881356537342, 0.034618303179740906, 0.03724788501858711, -0.008227608166635036, 0.004137524403631687, 0.017810670658946037, 0.023015614598989487, -0.002775292843580246, -0.03548579663038254, 0.008329266682267189, 0.015547061339020729, 0.04185643047094345, 0.00397148123010993, -0.010606430470943451, 0.006746774073690176, 0.006506180856376886, -0.0016290866769850254, 0.006865376140922308, 0.01800043322145939, 0.020223379135131836, -0.021660160273313522, 0.010965625755488873, -0.015126870945096016, 0.005960610695183277, -0.011372261680662632, 0.00894599873572588, -0.023259596899151802, -0.006743385456502438, 0.024249078705906868, -0.030795922502875328, 0.004408615175634623, -0.012619280256330967, 0.0009437350672669709, 0.004374729003757238, 0.036732811480760574, -0.00631641736254096, 0.007305899169296026, 0.0004930465365760028, 0.031094122678041458, 0.032910432666540146, 0.008979884907603264, 0.000280621403362602, 0.01752602495253086, -0.024045759811997414, 0.00028083319193683565, -0.002827816642820835, -0.008573248982429504, 0.004428946878761053, -0.004079917445778847, -0.01474734302610159, 0.014489807188510895, 0.06419432163238525, -0.0357026681303978, 0.004672928713262081, 0.0028159564826637506, -0.007061917334794998, 0.014652461744844913, 0.01365620270371437, -0.007278789766132832, 0.03846779465675354, 0.011826339177787304, -0.003937595058232546, 0.014205161482095718, -0.02132129669189453, -0.0028837290592491627, 0.02123996987938881, 0.025902733206748962, -0.0038630447816103697, -0.004222240298986435, 0.04519084841012955, -0.010165907442569733, -0.010599653236567974, 0.020223379135131836, 0.022703859955072403, 0.03559423238039017, -0.020074278116226196, 0.022080350667238235, 0.03610930219292641, -0.008017512038350105, 0.022554760798811913, -0.017797116190195084, 0.06554977595806122, 0.00024398177629336715, -0.01281582098454237, 0.04345586523413658, 0.02503524161875248, -0.02094176970422268, -0.10632184147834778, -0.016834743320941925, 0.014367816038429737, -0.0044865538366138935, -0.017986878752708435, 0.0022398883011192083, 0.003122627967968583, 0.02592984214425087, -0.012659943662583828, 0.01625189743936062, -0.0319887213408947, -0.005272717215120792, -0.00539470836520195, 0.0058386195451021194, -0.0011521362466737628, -0.0010453942231833935, -0.0007704910822212696, 0.008227608166635036, 0.002221250906586647, 0.027705486863851547, 0.024872587993741035, 0.00046043089241720736, 0.0008674907730892301, 0.00629608565941453, -0.03575688600540161, 0.00916964840143919, -0.0015172617277130485, 0.010328561998903751, 0.00974571704864502, 0.012883593328297138, 0.025387659668922424, 0.004154467489570379, 0.00365972681902349, -0.00591655820608139, -0.008064953610301018, 0.0030565494671463966, -0.029819995164871216, 4.129899934923742e-06, 0.02279874123632908, -0.025509651750326157, -0.01774289831519127, 0.00302774622105062, 0.015126870945096016, 0.0009335691574960947, -0.012463402934372425, 0.001179245300590992, 0.006892485544085503, 0.015750380232930183, 0.016455216333270073, -0.013378334231674671, -0.00304977223277092, 0.0016028247773647308, -0.01923389732837677, 0.006777271628379822, 0.0239915419369936, -0.01778356172144413, 0.025767186656594276, -0.0008170848013833165, -0.004642431158572435, 0.004500108305364847, -0.009854152798652649, -0.005560751538723707, -0.003747831331565976, 0.024642160162329674, 0.011121503077447414, -0.010369225405156612, 0.003398801665753126, 0.0056657991372048855, -0.0015807986492291093, -0.00028040961478836834, -0.012388852424919605, 0.0028650916647166014, -0.036217741668224335, -0.0012241447111591697, -0.02588917873799801, 0.009108653292059898, 0.00024313462199643254, -0.002590612042695284, -0.0011174026876688004, 0.016902515664696693, -0.027149749919772148, 0.0009988003876060247, 0.000147405662573874, -0.032232705503702164, 0.005028735846281052, 0.009840598329901695, 0.026133159175515175, -0.0029515018686652184, 0.01878659799695015, -0.04443179443478584, -0.014123834669589996, -0.010701311752200127, -0.014354261569678783, -0.015072652138769627, -0.010240457952022552, 0.03366948664188385, -0.0016748332418501377, 0.01119605265557766, 0.014462698251008987, 0.026431359350681305, -0.03399479389190674, -0.012273639440536499, -0.05367599055171013, 0.002590612042695284, 0.021755041554570198, -0.009752494283020496, 0.034618303179740906, -0.032530903816223145, -0.028003687039017677, -0.023164715617895126, 0.009203534573316574, 0.008857893757522106, -0.02965734153985977, 0.01108761690557003, -0.0052659399807453156, -0.015872370451688766, -0.026214487850666046, -0.008607135154306889, 0.013608762063086033, -0.010226903483271599, -0.0050524561665952206, 0.026661787182092667, 0.0002028945746133104, 0.0025872234255075455, -0.00294811325147748, 0.018732378259301186, -0.03166341409087181, -0.024167751893401146, 0.00019209329911973327, 0.024194860830903053, -0.0061605400405824184, -0.012490511871874332, 0.004079917445778847, -0.027515722438693047, -0.010477662086486816, 0.0007963294046930969, 0.005408262833952904, 0.003642783500254154, 0.0056420788168907166, -0.0020823166705667973, 0.00744144432246685, 0.0075837671756744385, -0.02087399736046791, -0.03057905100286007, 0.019626978784799576, -0.01844773441553116, -0.015397961251437664, -0.015641942620277405, -0.0018722213571891189, -0.004615322221070528, 0.027841031551361084, 0.019071241840720177, 0.020887551829218864, 0.014422033913433552, -0.005584471859037876, -0.02701420523226261, -0.011358707211911678, -0.006180871743708849, 0.012510843575000763, 0.025238560512661934, -0.012578615918755531, -0.007285567000508308, 0.02176859602332115, 0.01667208783328533, -0.014015397988259792, -0.0364617221057415, 0.013107243925333023, -0.021483952179551125, -0.045326393097639084, 0.004381506238132715, 0.010206570848822594, -0.013947625644505024, -0.0260382778942585, -0.007766753435134888, 0.025008132681250572, 0.0009250976145267487, 0.006268976256251335, -0.007637985050678253, -0.0017959770048037171, 0.001802754239179194, -0.029033832252025604, 0.010199793614447117, 0.0008014123886823654, -0.036922577768564224, -0.0031277108937501907, 0.008315712213516235, 0.0420461930334568, 0.00027702096849679947, -0.012165202759206295, 0.03261223062872887, 0.02968445047736168, -0.0012919174041599035, -0.008885003626346588, -0.005323546938598156, -0.01219908893108368, -0.00782774854451418, 0.016387443989515305, -0.0013851049588993192, -0.03356105089187622, 0.021267078816890717, 0.007990403100848198, 0.02351713366806507, 0.025455432012677193, 0.007197462487965822, 0.021673714742064476, -0.009840598329901695, 0.005977553781121969, 0.016238342970609665, 0.001838334952481091, 0.0035072381142526865, -0.002792235929518938, 0.01026756688952446, -0.024601496756076813, -0.01669919677078724, -0.030850140377879143, 0.03190739452838898, 0.003561456222087145, 0.0041239699348807335, 0.009237421676516533, -0.018163088709115982, -0.0022432769183069468, 0.02701420523226261, 0.011297712102532387, 0.010111689567565918, 0.03483517840504646, 0.003000637050718069, 0.012422739528119564, 0.027732595801353455, 0.012253307737410069, 0.002682105405256152, -0.009054435417056084, -0.006895874161273241, 0.00733978534117341, 0.013364779762923717, -0.012307525612413883, -0.015899479389190674, 0.021497506648302078, -0.030335068702697754, -0.012680275365710258, 0.024533724412322044, 0.01149425283074379, 0.09016482532024384, 0.010857189074158669, -0.025753632187843323, -0.017309151589870453, -0.01927456073462963, 0.00267871655523777, 0.012436293996870518, 0.0037410540971904993, -0.016509434208273888, -0.03949793800711632, 0.03787139430642128, -0.005221887957304716, -0.018773043528199196, -0.022866515442728996, 0.012673498131334782, 0.0003087894292548299, -0.017485361546278, 0.006238478701561689, 0.00038969313027337193, -0.012992030009627342, 0.04269681125879288, -0.01814953424036503, 0.013208902440965176, -0.026499131694436073, -0.018461288884282112, 0.0009471237426623702, 0.03876599296927452, -0.003424216527491808, -0.003302225610241294, -0.03225981444120407, 0.029521794989705086, -0.0015401350101456046, -0.0148828886449337, 0.0012859873240813613, -0.000798023771494627, 0.023191824555397034, 0.015411515720188618, -0.019843852147459984, 0.005448926705867052, 0.02202613279223442, -0.007637985050678253, -0.00948818027973175, -0.009962589479982853, -0.04163955897092819, 0.01678052544593811, 0.005167669616639614, 0.004483165219426155, -0.024682823568582535, -0.02247343398630619]"
10k Stars,10k Stars,"![](/assets/blog/10k-stars/star-history.png)  ## It's tough to make predictions, especially about the future. - Yogi Berra  Three months ago, our wildest dream was to reach a thousand stars by the end of this year. Even then, people around us were skeptical this could be achieved. When we reached 5K stars in June, we immediately updated our goals to 10K stars by the end of the year. By now we understand that we lack the ability to predict the future, but at least we can try to explain what we think is the reason behind this surge.  ## Good market fit  We innovated in the field of in-memory stores, which are tremendously popular. Any innovation in this field sparkles significant interest from the community. You can see how vibrant the [Hacker News discussion](https://news.ycombinator.com/item?id=31560547) was on the first day of our launch.  But this alone is not enough to explain the star trend. We have seen projects with incremental improvement that did not see similar growth. This brings us to the second major factor:  ## State-of-the-art engineering  We redesigned the engine using novel algorithms and data structures, innovating around lockless multithreading, memory structures, caching algorithms, and snapshotting. Our goal of providing a simple, cost-efficient, and reliable in-memory store strongly [resonated](https://www.reddit.com/r/programming/comments/wiztpx/comment/ijf4cva/) with the engineering community. And yes, we read and learn from all your public [posts and comments](https://www.reddit.com/r/programming/comments/wiztpx/redis_hits_back_at_dragonfly/), sometimes with the help of [Google translate](https://www.infoq.cn/article/AlF5NIhHdskayl0MTyQG).  ## Whats next?  So first of all, we want to thank you for your comments, your interest, and your enthusiasm. 10K is just a round number, and we thought it deserves a post. But really nothing changed with regard to our plans. We are focused on building the best in-memory store in the universe. Our eyes are on maturing Dragonfly and extending its APIs. We know that stars are just an initial metric, and its our responsibility to live up to the expectations you set for us.  **Thank you for your support!**  Oded and Roman","[0.01675068587064743, -0.017179125919938087, -0.002157756360247731, -0.023868344724178314, 0.002822877373546362, 0.01166466809809208, -0.03532570227980614, -0.005542099475860596, -0.019155485555529594, -0.022403350099921227, 0.006668486166745424, 0.01542389765381813, 0.0017396803013980389, -0.024490274488925934, 0.004519368056207895, 0.01571413315832615, 0.02952100895345211, -0.00606383103877306, 0.0007191081531345844, -0.004519368056207895, -0.005092926789075136, -0.0019521734211593866, -0.014456449076533318, 0.019017279148101807, -0.022956177592277527, 0.003235770622268319, 0.04530424624681473, -0.020040011033415794, 0.014470269903540611, -0.01825714111328125, 0.029825065284967422, -0.0025896532461047173, -0.010496819391846657, 0.01652955450117588, -0.04306529089808464, -0.010828516446053982, 0.006492272485047579, 0.005037643946707249, 0.016460450366139412, -0.009978543035686016, 0.03786871209740639, 0.015023097395896912, -0.013993456028401852, -0.006098382640630007, -0.018961995840072632, 0.0073526110500097275, -0.00316493958234787, -0.010227316059172153, 0.001561738783493638, 0.006765231490135193, 0.008119659498333931, 0.011395164765417576, -0.024669945240020752, 0.00027706180117093027, -0.013150393031537533, 0.026494275778532028, 0.016515733674168587, 0.0065924725495278835, 0.011104930192232132, -0.006951810792088509, 0.025886164978146553, 0.02885761484503746, -0.00581505848094821, 0.00557665154337883, -0.019777417182922363, -0.009895619004964828, -0.03609966114163399, -0.011443537659943104, 0.00011024165723938495, 0.01840916834771633, 0.04024587199091911, 0.020233500748872757, 0.012749592773616314, -0.015161304734647274, 0.00019770074868574739, -0.016612477600574493, 0.009252957068383694, -0.006115658674389124, 0.0019210769096389413, 0.0008650892414152622, 0.004198036622256041, -0.009840336628258228, -0.028995823115110397, 0.020855432376265526, 0.007186762522906065, 0.007587562780827284, -0.024946358054876328, 0.0019418079173192382, -0.03305910900235176, 0.010994364507496357, 0.010593564249575138, 0.012687399983406067, 0.02768285572528839, 0.005929078906774521, 0.014732862822711468, 0.01532715279608965, -0.0045642852783203125, -0.007829424925148487, -0.0030854707583785057, -0.011692309752106667, -0.015631208196282387, -0.02135297656059265, -0.020482273772358894, -0.023785419762134552, 0.0009354884386993945, 0.019528646022081375, 0.016985636204481125, 0.0003833083901554346, 0.013647938147187233, 0.02507074549794197, 0.0010123660322278738, 0.028608843684196472, 0.006927624344825745, -0.005358975380659103, -0.016888892278075218, -0.019335154443979263, -0.0002977928379550576, -0.012576834298670292, -0.002848791191354394, -0.006644300185143948, 0.06788726150989532, 0.014746683649718761, 0.01265975832939148, -0.0011894437484443188, -0.001476223231293261, -0.0035346432123333216, -0.02518131025135517, -0.012728862464427948, 0.01248008944094181, -0.02352282591164112, 0.007179852109402418, 0.0071314796805381775, 0.01367557980120182, -0.0008374478784389794, -0.02513984777033329, 0.02996327169239521, -0.016653940081596375, 0.0034154397435486317, 0.00391125725582242, -0.017013277858495712, -0.00832005962729454, 0.025996731594204903, -0.0027745049446821213, 0.011194764636456966, -0.016239318996667862, 0.01345444843173027, 0.0027796877548098564, 0.018243320286273956, 0.029134029522538185, -0.019846521317958832, 0.014193856157362461, -0.017427898943424225, -0.012265868484973907, 0.03839389607310295, 0.014829607680439949, 0.023536646738648415, -0.006488817278295755, 0.007656666450202465, -0.017427898943424225, 0.013143482618033886, 0.017027098685503006, 0.03198109194636345, -0.0013501093490049243, -0.006029278971254826, 0.031898170709609985, 0.02496017888188362, 0.03637607395648956, -0.006931079551577568, -0.01118785422295332, -0.02171231620013714, -0.004011457320302725, 0.025927627459168434, -0.04254010692238808, 0.02279032953083515, -0.0008948901668190956, 0.019114024937152863, 0.0006551874103024602, 0.012252047657966614, -0.018132755532860756, 0.005611203145235777, 0.000689307285938412, 0.004405347164720297, 0.026328427717089653, 0.0404946431517601, -0.006962176412343979, -0.006658121012151241, 0.02812511846423149, -0.025969089940190315, -0.005023823585361242, -0.001666257856413722, 0.010538281872868538, 0.021560287103056908, -0.01339916605502367, -0.0028919808100908995, -0.628012478351593, -0.01796690560877323, 0.024600841104984283, -0.027337338775396347, -0.0011237954022362828, -0.02565121464431286, 0.0065924725495278835, 0.013115841895341873, -0.031207134947180748, 0.008914349600672722, -0.005417713429778814, -0.013578834943473339, 0.009916350245475769, -0.002107656328007579, -0.03131769970059395, -0.005407347809523344, 0.019735954701900482, -0.012176034040749073, -0.006689217407256365, 0.01531333290040493, -0.025595931336283684, 0.017358794808387756, -0.005493727046996355, -0.0023806151002645493, 0.001766457804478705, 0.002159483963623643, 0.00849972851574421, -0.01387597993016243, -0.025720316916704178, 0.022403350099921227, -0.01818803697824478, 0.016225498169660568, 0.018284782767295837, -0.002133570145815611, 0.04682452231645584, -4.7184723371174186e-05, -0.019335154443979263, 0.024158578366041183, -0.020344065502285957, 0.0451383963227272, -0.020399348810315132, 0.0043327887542545795, 0.038228049874305725, 0.018381526693701744, -0.02701946347951889, 0.011574833653867245, 0.017289692535996437, 0.006519913673400879, -0.0181465744972229, -0.00656137615442276, 0.0021957631688565016, -0.016363704577088356, 0.006692672614008188, 0.00826477725058794, 0.008589562959969044, 0.0011894437484443188, 0.02907874621450901, -0.003486270783469081, -0.010033826343715191, 0.011015095748007298, 0.0045400988310575485, 0.0061640311032533646, 0.0035018192138522863, -0.010130571201443672, -0.033252596855163574, 0.022997640073299408, -0.0013345610350370407, 0.013343882746994495, 0.007953811436891556, -0.022389529272913933, 0.0021422081626951694, 0.016184035688638687, -0.011478088796138763, 0.005269140936434269, 0.01260447595268488, 0.024200040847063065, 0.04195963591337204, 0.0054626306518912315, -0.0027123119216412306, 0.03797927498817444, 0.015050739049911499, -0.016059650108218193, -0.0175937470048666, -0.022583018988370895, 0.02086925320327282, 0.016557196155190468, -0.036016736179590225, -0.012417896650731564, 0.006070741452276707, 0.004567740485072136, -0.011837427504360676, 0.0021681219805032015, -0.014083290472626686, -0.03538098558783531, 0.04729442670941353, 0.030764872208237648, -0.019445721060037613, 0.0034759053960442543, 0.014995456673204899, -0.02683979459106922, -0.02675686962902546, -0.027378801256418228, 0.022444812580943108, 0.01332315243780613, 0.005756320431828499, 0.015354794450104237, -0.010054557584226131, -0.001857156166806817, 0.0338607095181942, -0.0336395762860775, 0.005466085858643055, -0.020620480179786682, -0.03598909452557564, -0.03239571303129196, 0.0184782724827528, -0.031787604093551636, 0.017759595066308975, -0.00254819099791348, 0.002449718536809087, 0.002494635758921504, 0.024504095315933228, -0.005894527304917574, 0.01681978814303875, 0.010241136886179447, 0.01248008944094181, -0.016253139823675156, 0.0003649527789093554, -0.007470086682587862, 0.0060016377829015255, 0.030571382492780685, 0.01536861527711153, -0.01437352504581213, 0.032561562955379486, -0.00026237728889100254, 0.0037108571268618107, 0.007145300507545471, 0.007649756036698818, -0.028940539807081223, 0.016653940081596375, -0.008637935854494572, -0.015244228765368462, 0.023135846480727196, 0.008161121979355812, -0.008472087793052197, -0.026715407148003578, -0.019832700490951538, 0.00133888004347682, -0.0030751051381230354, -0.007380252238363028, -0.016875071451067924, -0.002040280494838953, -0.01825714111328125, -0.023398440331220627, 0.012265868484973907, -0.010109839960932732, 0.0027537739370018244, -0.015133663080632687, -0.02496017888188362, -0.02086925320327282, -0.0200261902064085, -0.0035225502215325832, 0.0345241017639637, -0.029216954484581947, 0.010842337273061275, -0.027917807921767235, -0.03308675065636635, -0.008810694329440594, 0.02683979459106922, -0.020620480179786682, -0.002304601250216365, 0.019639210775494576, -0.015188946388661861, 0.006298782769590616, 0.0077465008944272995, -0.02153264544904232, 0.02120094932615757, -0.02226514369249344, -0.0077741420827806, 0.008789963088929653, -0.0092391362413764, 0.003990726079791784, -0.007919259369373322, -0.01741407811641693, -0.019597748294472694, 0.02513984777033329, 0.031677037477493286, 0.02742026373744011, 0.023204950615763664, 0.017897803336381912, -0.007504638750106096, -0.009722860530018806, 0.029880346730351448, -0.0068481555208563805, -0.004519368056207895, -0.025830883532762527, -0.03477287292480469, -0.006008548196405172, -0.022057833150029182, -0.003669395111501217, 0.02440735138952732, 0.02226514369249344, 0.010842337273061275, 0.011277688667178154, -0.0012810059124603868, -0.010676488280296326, -0.011332971975207329, 0.01637752540409565, -0.009467178024351597, -0.014553193934261799, -0.013682490214705467, 0.007850156165659428, -0.0077741420827806, -0.00012535804125946015, -0.0016515733441337943, 0.010745592415332794, 0.03587853163480759, -0.004661030136048794, 0.01385524868965149, -0.017179125919938087, -0.019155485555529594, -0.01590762287378311, -0.006792872678488493, 0.01626696065068245, -0.00219403556548059, 0.012728862464427948, 0.002059283899143338, -0.0014615387190133333, 0.0170409195125103, 0.017027098685503006, -0.020482273772358894, 0.002387525513768196, 0.01312275230884552, 0.0112293167039752, 0.016474271193146706, 0.025374799966812134, 0.009950902312994003, 0.03759229555726051, -0.0234537236392498, 0.020924534648656845, 7.412428385578096e-05, 0.013903621584177017, -0.017344975844025612, 0.00681705866008997, -0.009404984302818775, 0.00266393949277699, 0.023025281727313995, 0.01670922338962555, 0.008658667095005512, -0.008271687664091587, 0.024200040847063065, -0.02241717092692852, -0.00011110545165138319, -0.0016040647169575095, 0.011699220165610313, -0.001331969746388495, -0.033252596855163574, -0.0068481555208563805, -0.005587016697973013, 0.0019262597197666764, 0.03206401690840721, 0.01612875424325466, 0.02252773568034172, 0.026190221309661865, -0.011920351535081863, 0.002009183866903186, -0.005089471582323313, -0.014470269903540611, -0.0025447357911616564, 0.01840916834771633, -0.015465360134840012, -0.009301329031586647, -0.02496017888188362, 0.011747593060135841, -0.011381343938410282, -0.016032008454203606, -0.015797056257724762, 0.01292235217988491, -0.006723769009113312, -0.024614661931991577, 0.01932133547961712, -0.014760504476726055, -0.016391346231102943, 0.007836335338652134, -0.016211677342653275, -0.01910020411014557, -0.014414987526834011, 0.01715148612856865, 0.007960721850395203, 0.0058910720981657505, 0.013730863109230995, -0.016736865043640137, 0.002081742510199547, -0.029797423630952835, -0.004481361247599125, -0.01225895807147026, -0.005569741129875183, 0.0438116118311882, -0.024006551131606102, 0.0014658577274531126, -2.217519977421034e-05, 0.020675763487815857, 0.007394073065370321, -0.011070378124713898, -0.036016736179590225, 0.016902713105082512, -0.01763520948588848, -0.011049647815525532, -0.02193344570696354, 0.008119659498333931, -0.009861067868769169, 0.0032599568367004395, -0.01722058840095997, -0.016626298427581787, 0.010303329676389694, 0.024794330820441246, -0.005801237653940916, -0.007711948826909065, 0.001686125062406063, 0.041766148060560226, 0.0215741079300642, 0.019528646022081375, -0.019390437752008438, -0.010441537015140057, 0.027392622083425522, 0.07955193519592285, -0.004975451156497002, -0.017054740339517593, -0.005220768507570028, -0.018575016409158707, 0.022251322865486145, -0.025830883532762527, -0.02786252461373806, 0.0179254449903965, 0.00909401848912239, 0.0027382257394492626, -0.02241717092692852, 0.023274054750800133, -0.015741774812340736, 0.007463176269084215, 0.019818879663944244, -0.001273231697268784, -0.010752502828836441, -0.004128933418542147, -0.0029248050414025784, -0.010793964378535748, -0.001201536855660379, 0.02363339252769947, 0.037564653903245926, 0.032229866832494736, -0.0040010917000472546, 0.025941448286175728, 0.009080197662115097, 0.011250047944486141, -0.0201367549598217, -0.005697582382708788, 0.007898528128862381, 0.002888525603339076, 0.0037765055894851685, -0.011782144196331501, 0.030543740838766098, 0.007725769653916359, -0.01015821285545826, -0.008575743064284325, 0.006326423957943916, -0.004509002435952425, -0.0031148395501077175, 0.0023547012824565172, 0.018091293051838875, 0.008838335983455181, 0.009211494587361813, 0.006385162007063627, 0.01863029971718788, -0.015023097395896912, -0.0194733627140522, 0.004270595498383045, -0.007974542677402496, -0.04281651973724365, -0.0023857979103922844, -0.01367557980120182, 0.014221497811377048, 0.004298236686736345, -0.014207676984369755, -0.030156761407852173, -0.03397127240896225, -0.009280597791075706, -0.03173232078552246, -0.01854737475514412, -0.017621388658881187, -0.01481578778475523, -0.0204684529453516, -0.024227682501077652, -0.01096672285348177, -0.013309331610798836, -0.015479180961847305, -0.016833608970046043, -0.02226514369249344, -0.04682452231645584, -0.009004184044897556, 0.02292853593826294, 0.018492093309760094, 0.003177032805979252, -0.0040840161964297295, 0.000321763101965189, 0.01887907274067402, -0.015534463338553905, -0.0002558988344389945, 0.004785416182130575, -0.028774691745638847, -0.0018847975879907608, -0.008016004227101803, -0.011415896005928516, -0.005621568765491247, -0.014857249334454536, 0.011540282517671585, 0.024725226685404778, 0.0061985827051103115, 0.004329333547502756, 0.008651756681501865, 0.022665943950414658, -0.017897803336381912, 0.026190221309661865, 0.005932534113526344, -0.00278314296156168, -0.013841427862644196, 0.0038317881990224123, 0.0012827333994209766, -0.0012611385900527239, -0.03410948067903519, 0.01098745409399271, 0.006253865547478199, 0.001234360970556736, 0.000708742649294436, -0.006253865547478199, -0.02815276011824608, 0.020399348810315132, -0.01464993879199028, 0.009861067868769169, -0.0030336431227624416, 0.018782326951622963, 0.0028971636202186346, 0.00977123249322176, 0.017096202820539474, -0.02896818146109581, -0.017897803336381912, -0.0024894531816244125, -0.011291509494185448, 0.029686857014894485, 0.0028902532067149878, 0.02149118483066559, -0.007698128465563059, 0.004785416182130575, 0.0022855978459119797, -0.030820155516266823, -0.015285691246390343, -0.0015479180729016662, 0.019998548552393913, 0.0014606749173253775, -0.030018555000424385, -0.02786252461373806, -0.026881255209445953, -0.00438116118311882, -0.008057466708123684, -0.005210402887314558, -0.002933443058282137, -0.021187128499150276, -0.013336972333490849, -0.004557374864816666, -0.03225750848650932, -0.01367557980120182, -0.025278056040406227, -0.02068958431482315, 0.00872085988521576, 0.010137481614947319, 0.010593564249575138, -0.012867068871855736, -0.004515912849456072, -0.020924534648656845, -0.0409369058907032, -0.006644300185143948, -0.005455720238387585, 0.008859067223966122, -0.0007886435487307608, 0.025706496089696884, 0.01722058840095997, 0.02292853593826294, 0.0056146583519876, 0.026328427717089653, 0.009778142906725407, 2.971989852085244e-05, -0.007031279616057873, -0.005023823585361242, -0.0008542918367311358, -0.01163011696189642, -0.012535372748970985, -0.0023270598612725735, -0.007017458789050579, -0.013917442411184311, -0.0020299148745834827, 0.0033947087358683348, 0.015575925819575787, -0.03670777007937431, 0.012307330965995789, -0.030488457530736923, -0.020288784056901932, -0.028664125129580498, 0.0060880170203745365, -0.007031279616057873, 0.014608477242290974, -0.0038421538192778826, -0.016239318996667862, 0.023343157023191452, 0.0038006918039172888, 0.01929369382560253, 0.00782251451164484, 0.046244051307439804, -0.011623206548392773, 0.004916713107377291, 0.002651846269145608, 0.0097919637337327, -0.015769414603710175, -0.009557012468576431, -0.02370249480009079, -0.009508639574050903, 0.0061467550694942474, 0.009308239445090294, 0.023495186120271683, 0.0049339886754751205, 0.026369890198111534, -0.004004546906799078, 0.012528462335467339, -0.032976184040308, -0.017607567831873894, 0.007031279616057873, -0.03239571303129196, 0.011941082775592804, -0.024600841104984283, -0.02775195986032486, -0.02403419278562069, -0.01190653070807457, 0.016957994550466537, -0.0205790176987648, 0.005821968894451857, -0.0117268618196249, -0.03803455829620361, 0.007711948826909065, -0.0010123660322278738, 0.04110275208950043, 0.013205676339566708, 0.02109038457274437, 0.02359193004667759, 0.03018440306186676, -0.02823568508028984, -0.007760321255773306, -0.002382342703640461, -0.008783052675426006, 0.019708314910531044, 0.035850889980793, -0.030488457530736923, -0.0159352645277977, 0.010683398693799973, 0.001390707679092884, -0.015119843184947968, -0.04251246526837349, 0.006126023828983307, 0.009114749729633331, 0.004626478534191847, -0.01907256245613098, -0.014021097682416439, -0.02060665935277939, 0.020965997129678726, -0.013696311041712761, 0.013281689956784248, 0.0107870539650321, -0.008361522108316422, -0.011049647815525532, 0.0175937470048666, 0.005877251271158457, 0.02160174958407879, 0.00949481874704361, -0.029548650607466698, 0.002985270693898201, 0.001483133528381586, 0.016543375328183174, 0.0013483817456290126, -0.00351909501478076, 0.034220047295093536, -0.018561195582151413, 0.020109115168452263, 0.009280597791075706, 0.012355702929198742, 0.008617204613983631, -0.01925223134458065, -0.013682490214705467, 0.03264448791742325, -0.029990913346409798, -0.012569923885166645, 0.007490817923098803, 0.0033636121079325676, -0.016584835946559906, -0.01843681000173092, -0.030018555000424385, -0.0036348432768136263, -0.017621388658881187, 0.007304238621145487, 0.020813969895243645, -0.0200261902064085, -0.007476997096091509, 0.004775051027536392, -0.007359521463513374, -0.002447990933433175, -0.024669945240020752, -0.013827607966959476, 0.020731044933199883, -0.03875323385000229, -0.0155482841655612, -0.009646846912801266, 0.0062849619425833225, 0.001404528389684856, 0.004733589012175798, -0.016225498169660568, 0.01619785651564598, 0.020620480179786682, -0.013806876726448536, 0.010849247686564922, 0.00588070647791028, 0.005061830393970013, -0.02168467454612255, 0.012818696908652782, -0.021615570411086082, -0.013026007451117039, 0.007981452159583569, -0.008769232779741287, -0.02587234601378441, -0.021408259868621826, 0.024172399193048477, 0.004882161505520344, -0.015258049592375755, 0.006858521141111851, 0.0004711993969976902, 0.04505547136068344, 0.003641753690317273, -0.02363339252769947, -0.030239686369895935, 0.040107663720846176, -0.020772507414221764, 0.012238227762281895, 0.013074379414319992, -0.013150393031537533, -0.0022389530204236507, 0.003935443703085184, 0.003859429620206356, -0.020109115168452263, -0.03684597834944725, -0.017718134447932243, -0.02323259226977825, 0.0155482841655612, -0.015810877084732056, -0.002967994660139084, -0.011657757684588432, -0.01409711129963398, -0.001180805847980082, 0.006374796386808157, 0.02120094932615757, 0.013482090085744858, -0.014691401273012161, 0.03250627964735031, 0.02038552798330784, 0.01571413315832615, -0.005835789255797863, -0.02241717092692852, 0.015188946388661861, 0.006181306671351194, -0.031455907970666885, -0.022209860384464264, -0.0011574834352359176, 0.032229866832494736, 0.00806437712162733, -0.02668776549398899, -0.00732496939599514, 0.0020782873034477234, -0.03687362000346184, -0.01288088969886303, -0.013026007451117039, 0.01065575797110796, 0.020178217440843582, 0.015921443700790405, 0.0002654005656950176, 0.03847682103514671, -0.008306238800287247, 0.00925986748188734, -0.01887907274067402, -0.003807601984590292, -0.00045305973617359996, 0.006896527949720621, 0.02929987758398056, -0.008133480325341225, -0.024434993043541908, -0.01196181308478117, 0.013627207837998867, 0.0014157576952129602, 0.01268048956990242, 0.017469361424446106, -0.02226514369249344, 0.004567740485072136, 0.001766457804478705, -0.0013768869685009122, 0.0008650892414152622, 0.022735046222805977, 0.005020368378609419, -0.04958866164088249, -0.00020029213919769973, 0.013240227475762367, 0.0031580294016748667, 0.0007735271356068552, -0.020067652687430382, 0.0035104569979012012, 0.02476668916642666, -0.0008702720515429974, -0.01437352504581213, 0.007400983478873968, -0.004557374864816666, 0.0060016377829015255, 0.004481361247599125, -0.0012689128052443266, -0.007857066579163074, 0.01943190023303032, 0.01821567863225937, -0.011954902671277523, 0.006322968751192093, 0.012321151793003082, -0.0076704868115484715, 0.006267686374485493, 0.00465757492929697, -0.019528646022081375, 0.025222772732377052, 0.008672487922012806, -0.005362430587410927, -0.0195839274674654, -0.006136389449238777, 0.002776232548058033, -0.0169303547590971, -0.027254415675997734, 0.01100818533450365, 0.005942899733781815, 0.0006767822778783739, 0.014884890988469124, 0.007559921592473984, -0.0026483910623937845, -0.015133663080632687, -0.012846337631344795, -0.009633026085793972, 0.0030353707261383533, -0.01969449408352375, 0.03264448791742325, 0.006316058803349733, -0.028829975053668022, -0.003576105460524559, 0.022292785346508026, -0.016736865043640137, -0.004654119722545147, 0.23793712258338928, -0.013412986882030964, -0.019929444417357445, 0.05627787858247757, 0.00894199125468731, 0.005956720560789108, 0.0070451004430651665, 0.005953265354037285, -0.006008548196405172, 0.0012715040938928723, -0.00047076749615371227, 0.014470269903540611, -0.011561012826859951, -0.0067617762833833694, 0.02182288095355034, -0.006996728014200926, -0.027074744924902916, -0.030018555000424385, -0.017497003078460693, -0.006108748260885477, -0.002389253117144108, -0.013274779543280602, -0.022942356765270233, -0.017787236720323563, 0.01994326524436474, -0.001377750770188868, -0.00583233404904604, 0.006741045042872429, 0.01146426796913147, 0.015700312331318855, -0.02826332487165928, -0.018132755532860756, -0.0018623389769345522, -0.008548101410269737, -0.006295327562838793, -0.020288784056901932, 0.036901261657476425, -0.0005329606356099248, 0.01781487837433815, 0.003332515712827444, 0.025595931336283684, -0.00971595011651516, 0.0014088472817093134, 0.0040010917000472546, 0.008313149213790894, 0.022389529272913933, -0.013254048302769661, 0.021173307672142982, -0.004405347164720297, 0.02127005346119404, -0.010593564249575138, -0.02410329505801201, 0.036458998918533325, 0.018229499459266663, -3.892469612765126e-05, -0.011643937788903713, 0.012341883033514023, 0.02509838528931141, -0.015990545973181725, 0.02124241180717945, 0.0097919637337327, 0.01821567863225937, -0.018782326951622963, 0.019445721060037613, -0.0411580353975296, 0.008333880454301834, -0.024642303586006165, 0.049561019986867905, 0.0052138580940663815, 0.0017172215739265084, 0.01093217171728611, -0.013288600370287895, -0.030350251123309135, -0.006975996773689985, -0.01965303160250187, -0.02120094932615757, 0.024200040847063065, -0.003360156901180744, 0.017676671966910362, 0.020509915426373482, -0.015258049592375755, -0.016557196155190468, -0.007490817923098803, -0.021228590980172157, -0.012936173006892204, -0.041240960359573364, 0.028208043426275253, -0.0028850706294178963, -0.022030191496014595, -0.009170033037662506, 0.0004133252368774265, -0.011491909623146057, -0.01431824266910553, -0.019846521317958832, 0.000344653642969206, -0.031704679131507874, -0.004046008922159672, 0.023177308961749077, 0.004405347164720297, -0.034358251839876175, -0.009612294845283031, 0.018395347520709038, 0.03853210434317589, 0.013972724787890911, -0.011692309752106667, -0.004844154231250286, -0.01987416297197342, 0.01218294445425272, 0.009964722208678722, -0.013717042282223701, 0.006706493441015482, -0.025554468855261803, 0.017690492793917656, -0.0012438627891242504, -0.017179125919938087, 0.007767231669276953, 0.0032150396145880222, 0.005600837524980307, 0.027282055467367172, -0.011623206548392773, -0.007566831540316343, -0.003987271338701248, 0.024504095315933228, 0.01568649150431156, -0.005735589191317558, -0.02918931283056736, -0.05124714598059654, 0.011402075178921223, 0.0002280415064888075, -0.015838518738746643, 0.02367485500872135, -0.009543191641569138, 0.004851064644753933, -0.019901804625988007, -0.017179125919938087, -0.011637027375400066, 0.009909439831972122, -0.00757374195381999, -0.009563922882080078, -0.018906714394688606, -0.03250627964735031, 0.014387345872819424, 0.02082779072225094, 0.0006279779481701553, -0.003866340033710003, -0.018174216151237488, 0.008154211565852165, -0.005939444527029991, 0.009778142906725407, -0.019266052171587944, 0.006768686231225729, -0.005303692538291216, -0.0029351706616580486, 0.008333880454301834, -0.01210693083703518, -0.01337843481451273, 0.005980906542390585, -0.026964180171489716, -0.002605201443657279, -0.01568649150431156, -0.03698418661952019, 0.0038352434057742357, 0.04439207911491394, -0.011941082775592804, -0.02606583572924137, -0.005739044398069382, -0.17756831645965576, 0.031704679131507874, 0.011056557297706604, -0.0365142822265625, 0.037675220519304276, 0.0017673216061666608, 0.016764504835009575, 0.010130571201443672, -0.015106022357940674, -0.014884890988469124, 0.012307330965995789, 0.0023927080910652876, -0.04077105596661568, -0.024338247254490852, 0.015810877084732056, 0.01752464473247528, 0.011346792802214622, 0.0031355705577880144, 0.03891908377408981, 0.01409711129963398, 0.029327519237995148, -0.044005099684000015, 0.01943190023303032, -0.008803783915936947, -0.008382252417504787, -0.008983452804386616, 0.011194764636456966, 0.006516458932310343, 0.0008491090848110616, -0.03803455829620361, -0.02735115960240364, -0.007407893892377615, 0.043673403561115265, 0.008347701281309128, 0.00899727363139391, 0.008444446139037609, 0.014055648818612099, -0.006205493118613958, -0.015506822615861893, 0.022292785346508026, 0.026162579655647278, 0.029161671176552773, 0.01190653070807457, 0.008686307817697525, -0.008105838671326637, 0.017897803336381912, 0.0025810152292251587, -0.0023115116637200117, -0.014359704218804836, -0.0032789604738354683, 0.01715148612856865, -0.02540244162082672, 0.007428624667227268, -0.020122935995459557, -0.010883798822760582, -0.011947992257773876, 0.009225315414369106, 0.031262416392564774, 0.018229499459266663, -0.006944900378584862, -0.010704129934310913, -0.011947992257773876, 0.016501912847161293, -0.028332429006695747, 0.007919259369373322, -0.006516458932310343, -0.00048286060336977243, 0.015202767215669155, -0.023978909477591515, 0.009633026085793972, -0.015161304734647274, -0.006322968751192093, 0.004626478534191847, 0.024780509993433952, -0.0065406449139118195, -0.0035933812614530325, -0.030681947246193886, -0.004450264386832714, 0.015244228765368462, -0.005904892925173044, -0.0006128615350462496, 0.021435901522636414, -0.002461811760440469, 0.029355160892009735, -0.0030561017338186502, 0.0031804880127310753, 0.005303692538291216, 0.006734134629368782, -0.01686125062406063, -0.023398440331220627, 0.00022566606639884412, -0.008838335983455181, -0.00046299336827360094, 0.013371524401009083, 0.010869977995753288, 0.01407638005912304, -0.0036210226826369762, 0.009280597791075706, 0.026660125702619553, -0.009142391383647919, 0.006989817600697279, 0.010344792157411575, -0.03206401690840721, 0.024462634697556496, 0.02374395728111267, 0.014511732384562492, -0.027655215933918953, 0.004965085536241531, 0.030930720269680023, 0.0020782873034477234, -0.02841535396873951, 0.0376199372112751, 0.02668776549398899, 0.010800874792039394, -0.010379343293607235, 0.011436627246439457, -0.0072074937634170055, -0.022057833150029182, 0.019114024937152863, -0.00852045975625515, 0.06783197820186615, -0.0026293876580893993, -0.03485579788684845, 0.016875071451067924, 0.01969449408352375, -0.0347452312707901, -0.11410367488861084, -0.03750937059521675, -0.004080560989677906, -0.00876232236623764, 0.016833608970046043, 0.027890166267752647, -0.006060375832021236, 0.034579385071992874, -0.054868169128894806, 0.03427533060312271, 0.00010133378236787394, -0.028719408437609673, 0.0030733775347471237, -0.00439843675121665, -0.011022006161510944, 0.004574650898575783, 0.008824515156447887, -0.0037108571268618107, -0.0005282097845338285, 0.03316967189311981, 0.01774577610194683, -0.010503729805350304, -0.004902892280369997, 0.009004184044897556, -0.0003178760234732181, -0.009480997920036316, -0.017344975844025612, 0.02149118483066559, 0.0055490098893642426, -0.002178487367928028, 0.006865431554615498, -0.01568649150431156, 0.0034430811647325754, -0.032036375254392624, -0.018091293051838875, -0.009819605387747288, -0.020675763487815857, 0.012445537373423576, 0.016667760908603668, -0.038006916642189026, 0.008534280583262444, 0.006022369023412466, -0.003346336307004094, -0.011913441121578217, -0.012597565539181232, 0.014235317707061768, -0.004833788610994816, 0.039775967597961426, 0.006288417149335146, -0.019957086071372032, -0.03532570227980614, -0.007891617715358734, -0.010697219520807266, -0.02668776549398899, 0.030681947246193886, -0.021394439041614532, 0.013689400628209114, -0.004011457320302725, -0.031234774738550186, -0.002040280494838953, 0.0107317715883255, -0.00804364588111639, 0.009646846912801266, 0.007870887406170368, 0.013799966312944889, 0.0204684529453516, -0.014857249334454536, 0.0018381527625024319, -0.0007964176475070417, -0.002054101089015603, 0.00439843675121665, 0.016488092020154, -0.010621205903589725, 0.014470269903540611, -0.0008188763167709112, -0.006644300185143948, -0.010185853578150272, -0.01492635253816843, 0.01095290295779705, -0.005379706155508757, -0.010717950761318207, -0.022334245964884758, 0.004937443882226944, -0.013689400628209114, 0.019708314910531044, 0.009826515801250935, 0.01832624524831772, -0.012666668742895126, 0.02223750203847885, -0.024352068081498146, -0.030764872208237648, 0.01270122081041336, -0.009031825698912144, -0.01586616039276123, 0.005255320109426975, 0.019279872998595238, 0.0033687949180603027, 0.003880160627886653, 0.011471178382635117, 0.021408259868621826, -0.028208043426275253, -0.014262959361076355, -0.04472377523779869, 0.02686743624508381, 0.02330169454216957, -0.01409711129963398, -0.003128660377115011, -0.0045642852783203125, -0.012037827633321285, -0.005908348131924868, 0.0023996185045689344, 0.006357520818710327, -0.005168940871953964, -0.01312275230884552, -0.011588654480874538, -0.01885143108665943, 0.0023944356944411993, 0.005445354618132114, -0.013426807709038258, -0.011436627246439457, -0.006509548518806696, -0.004412257578223944, -0.0015677852788940072, 0.02668776549398899, 0.018063651397824287, 0.004944354295730591, -0.0215741079300642, -0.012037827633321285, -0.014760504476726055, 0.017649030312895775, -0.010386253707110882, -0.025747958570718765, 0.02414475753903389, -0.014857249334454536, -0.002126659732311964, 0.009204584173858166, -0.0013483817456290126, -0.01315730344504118, 0.002465266967192292, 0.001411438686773181, 0.014940173365175724, 0.005279506556689739, -0.029272235929965973, -0.039471909403800964, -0.005756320431828499, -0.016391346231102943, -0.008748501539230347, 0.001777687226422131, -0.008485907688736916, -0.005276051349937916, 0.010254957713186741, 0.028470635414123535, -0.0087415911257267, 0.02706092596054077, -0.025015462189912796, -0.030488457530736923, -0.016847429797053337, -0.03131769970059395, 0.017110023647546768, 0.015783235430717468, 0.0015323697589337826, -0.026342248544096947, 0.012867068871855736, 0.0008871160098351538, 0.0017094474751502275, -0.009543191641569138, 0.023135846480727196, -0.0020765597000718117, -0.00032737775472924113, 0.020717225968837738, 0.010945992544293404, -0.009384253062307835, -0.005711403209716082, 0.003358429530635476, 0.015493001788854599, 0.011180943809449673, -0.0019539010245352983, -0.00852045975625515, -0.012500820681452751, -0.027406442910432816, -0.014235317707061768, 0.03383306786417961, 0.024338247254490852, -0.035021647810935974, -0.0038110571913421154, 0.021449722349643707, 0.02498782053589821, 0.02109038457274437, 0.017621388658881187, 0.027959270402789116, 0.015340973623096943, 0.0023374254815280437, -0.02525041438639164, -0.004429533611983061, -0.005500637460500002, 0.007283507380634546, 0.014276780188083649, -0.0008737272000871599, -0.011436627246439457, 0.017980726435780525, 0.021477364003658295, 0.009266777895390987, -0.002610384253785014, -0.008485907688736916, 0.018270961940288544, -0.010828516446053982, -0.012583744712173939, 0.005120568443089724, -0.004875251092016697, 0.0037765055894851685, -0.003261684440076351, 0.012853248044848442, 0.016944175586104393, 0.013440627604722977, -0.01880996860563755, 0.016543375328183174, -0.01766285113990307, -0.00563193392008543, 0.014857249334454536, -0.034026555716991425, -0.0016835336573421955, 0.032119300216436386, 0.012334972620010376, 0.009598474018275738, 0.024434993043541908, -0.01571413315832615, 0.02863648533821106, 0.02436588890850544, 0.021256232634186745, -0.008900528773665428, 0.007767231669276953, -0.004495181608945131, 0.010552102699875832, 0.006620113737881184, 0.006720313802361488, 0.005987816955894232, -0.0018087837379425764, -0.01851973496377468, -0.01260447595268488, 0.016114933416247368, 0.008092017844319344, 0.09127188473939896, 0.02941044420003891, -0.016253139823675156, 0.01170613057911396, -0.021767597645521164, -0.0018381527625024319, 0.009805784560739994, 0.003589926054701209, -0.007152210921049118, -0.025747958570718765, 0.033805426210165024, -0.0017707768129184842, -0.00014986818132456392, -0.002553373808041215, 0.005697582382708788, 0.015451539307832718, -0.007898528128862381, 0.008568832650780678, -0.005645754747092724, -0.016543375328183174, 0.02454555779695511, 0.015783235430717468, 0.02031642571091652, -0.008375342935323715, -0.008589562959969044, -0.02182288095355034, 0.02746172621846199, 0.014539373107254505, 0.013910531997680664, -0.04320349916815758, 0.0061122034676373005, 0.01770431362092495, -0.024393530562520027, -0.013247137889266014, -0.020731044933199883, 0.023937446996569633, 0.010835426859557629, -0.010559013113379478, 0.008693218231201172, -0.006730679422616959, 0.0064819068647921085, -0.016363704577088356, -0.014000366441905499, -0.01492635253816843, 0.01571413315832615, -0.0014399439096450806, -0.004985816311091185, -0.00657865172252059, -0.04016294702887535]"
Top 5 Reasons Why Your Redis Instance Might Fail,Top 5 Reasons Why Your Redis Instance Might Fail,"If youve implemented a cache, message broker, or any other data use case that prioritizes speed, chances are youve used Redis. Redis has been the most popular in-memory data store for the past decade and for good reason; its built to handle these types of use cases. However, if you are operating a Redis instance you should be aware of the most common points of failure, most of which are a result of its single-threaded design.  If your Redis instance completely fails, or just becomes temporarily unavailable, data loss is likely to occur, as new data cant be written during these periods. If you're using Redis as a cache, the result will be poor user performance and potentially a temporary outage. However, if youre using Redis as a primary datastore, then you could suffer partial data loss. Even worse, you could end up losing your entire dataset if the Redis issue affects its ability to take proper snapshots, or if the snapshots get corrupted.  In this article, we will explain the main reasons why your Redis instance might fail, and provide advice to avoid this. We'll also compare the reliability of Redis (OSS version) with [Dragonfly](/)  a source-available multi-threaded in-memory database with a modern architecture that was designed to avoid many of these issues.  ## The main reasons a Redis instance can fail  ### Scalability limitations in Redis architecture  Redis is limited to a single thread, which causes bottlenecks and reduced performance during high workloads. Vertical scaling wont get you far with Redis  there is nothing stopping you from provisioning 128 CPU cores, but Redis will only ever be able to make use of one of them. This means horizontal scaling is your only realistic option, which immediately makes matters more complicated  as you now have to deploy and maintain a distributed system.  Clustering will greatly increase the amount of work required to maintain your Redis deployment. If you get an unhealthy node, it cant be easily replaced without downtime (and therefore data loss), unless you implement high availability practices. High availability means not only setting up more nodes to handle the extra load, but configuring each of these nodes to have one or more replicas  requiring even more infrastructure and maintenance resources beyond those required to just scale out.  As with many of Redis problems, this is due to its design. Redis originally made certain design trade-offs that made it an industry leader in both speed and latency. Since then, however, more powerful public cloud hosting has evolved, and consumer expectations have been raised  they want fast, highly-available applications  leading developers to demand more speed, lower latency, and higher reliability from their systems.  ### Running out of memory  Like all in-memory databases, Redis stores all its data in memory. This makes the data much faster to retrieve, but if your system runs out of memory you can suffer data loss. Redis is particularly vulnerable to running out of memory during the snapshopping phase.  Every time you back up your Redis data set, the snapshotting process is launched in the background. If Redis is trying to back up your data while its also under heavy write load, memory usage increases massively, and if you dont have enough memory allocated to do both tasks at once, you risk bringing down your entire Redis instance.  ![Redis memory usage during snapshotting](/assets/blog/top-5-reasons-why-your-redis-instance-might-fail/redis-memory-usage-during-snapshotting.png ""Caption: A Redis instance with 10 million keys is using 56 GiB of memory. The snapshotting process is initiated after 60 seconds, and the memory usage increases to double its original size (105 GiB), before dropping back to normal levels at 240 seconds, when the process completes."")  The exact same issue can occur if you try to scale or upgrade your Redis instance during a period of heavy write load: if you dont have enough memory allocated, you may [run out](https://cloud.google.com/memorystore/docs/redis/memory-management-best-practices), leading to a crash and/or data loss.  ### Lack of consistency between Redis cluster nodes  Redis doesnt guarantee consistency  this is a tradeoff in order to achieve very low latency. Consistency means that the data between the master and replica nodes of a cluster are always in sync. The problem is that when data gets written to the master Redis node, it sends back a message to say that the write was successful before that write has been propagated to its replicas. So if something happens to the master node during this process, the replica gets promoted to master and [the latest data write gets lost forever](https://redis.io/docs/management/scaling/#redis-cluster-consistency-guarantees).  ![Consistency issues between Redis cluster nodes](/assets/blog/top-5-reasons-why-your-redis-instance-might-fail/consistency-issues-between-redis-cluster-nodes.png)  Another consistency issue is known as split brain. This happens if a network partition failure splits your Redis nodes across two partitions that lose communication with each other, with a master node ending up on one side and its replica on the other. The replica will then be promoted to master, and once this has happened, its possible for different data to be written to the two different master nodes, causing them to get out of sync.  ### Replication loops  As your Redis database gets larger, it takes longer to copy data from master to replica when syncing the two. The master node has a replication buffer, and data is copied to this before it gets copied to the replica. This replication buffer is finite in size, so if your Redis database is large, the buffer can get completely filled up before the copying has finished. This means that while your master node gets the full update, your replica misses out on some of this data.  This is a much bigger problem than a replica simply missing a small amount of data: Redis relies on a check that the master and replica are in sync before proceeding to the next update step, and this issue means that the condition will never be met. Redis deals with this fact by restarting the entire replication process, which causes an infinite [replication loop](https://redis.com/blog/the-endless-redis-replication-loop-what-why-and-how-to-solve-it/), making your instance unavailable.  ### Failure to provision the extra memory that Redis requires for snapshotting  If your database is large, your master node will need a lot of additional memory to complete the snapshotting process. Redis often needs around three times the amount of memory than it normally uses just so that it can complete a snapshot successfully. To avoid running out of memory, your only solution is to over-provision your database server by a large amount. This is an expensive band-aid but its the only way that Redis can handle the memory-intensive snapshotting process.  ## Solving the most common causes of Redis failure: a comparison between Redis OSS and Dragonfly  You can use Dragonfly, in most scenarios, to act as a drop-in replacement for Redis  due to its API compatibility. As you can see below, Dragonfly directly addresses most of the common causes of Redis failure, dramatically reducing operational complexity and improving reliability.  | Redis                                                                                                                                                                                                              | Dragonfly                                                                                                                                                                                                    | | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | | **[Single-threaded][redis-single-thread]**: leads to bottlenecks and performance issues.                                                                                                                           | **Multi-threaded**: faster and more reliable.                                                                                                                                                                | | For larger Redis instances, **[horizontally scaling is really the only option][redis-horizontal-scaling]** to improve performance, meaning you will need to maintain a Redis cluster.                              | Can be **vertically scaled**, which is much simpler.                                                                                                                                                         | | **[Memory][redis-memory-overload-1] [overload][redis-memory-overload-2]**: this happens because Redis needs to process database transactions as well as run background tasks such as snapshots on a single thread. | **Memory spikes dont happen during snapshotting**: database transactions, and tasks like snapshotting, can all be spread across multiple threads and completed faster, **so crashes are much less likely**. | | **You have to [over-provision your servers][redis-over-provisioning]** to deal with the increased memory usage that comes with snapshotting.                                                                       | **No need to over-provision your servers** due to much more efficient use of the underlying hardware.                                                                                                        |  [redis-single-thread]: https://levelup.gitconnected.com/4-reasons-why-single-threaded-redis-is-so-fast-414e0106f921 [redis-horizontal-scaling]: https://developer.redis.com/operate/redis-at-scale/scalability/lustering-in-redis/ [redis-memory-overload-1]: https://dba.stackexchange.com/questions/72661/redis-takes-up-all-the-memory-and-crashes [redis-memory-overload-2]: https://stackoverflow.com/questions/34974819/redis-snapshot-overloading-memory [redis-over-provisioning]: https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/BestPractices.BGSAVE.html  ## Dragonfly is easy to deploy and scales readily  Dragonfly is a drop-in Redis replacement with high throughput, low latency, and efficient memory management. We were motivated to create Dragonfly to deal with many of the issues we saw with Redis failures in our own deployments, including running out of memory, snapshotting issues, replication loops, and the need to over-provision your servers.  Dragonfly scales vertically, allowing you to vertically scale to over 1TB in data and 4 million queries per second  all on a single instance. When you require more capacity, you can simply resize your VM.  Redis touts its single-threaded architecture as a [feature, not a bug](https://redis.com/blog/redis-architecture-13-years-later/), and argues that it still performs well when run as part of a cluster. But maintaining a cluster adds complexity to your deployments and makes them difficult to maintain, requiring constant re-tuning to perform optimally. While there are certainly sophisticated DevOps teams out there who have solved these Redis issues themselves through automation, we found it to be such a hassle that we decided to build an out of the box solution for other developers.  If youd like to learn more, you can get started right away by [viewing our docs](/docs) or checking out the [Dragonfly project on GitHub](https://github.com/dragonflydb/dragonfly/blob/main/docs/quick-start/README.md).","[-0.016008427366614342, -0.00855740625411272, 0.003196222009137273, -0.03786293789744377, -0.004954827018082142, 0.004586032126098871, -0.012101934291422367, 0.009076450951397419, -0.011384833604097366, -0.007888111285865307, 0.002067641355097294, 0.009288166649639606, -0.00909010972827673, -0.01122092455625534, 0.004073816817253828, 0.0254605021327734, 0.02966749481856823, -0.002352774376049638, 0.016063064336776733, -0.03365594521164894, -0.013262954540550709, -0.0240945965051651, -0.021349122747778893, 0.011289219371974468, -0.011097992770373821, 0.00012549269013106823, 0.034038398414850235, -0.0050948322750627995, -0.005012877751141787, 0.008099826984107494, 0.03130658343434334, -0.025419525802135468, 0.006559767294675112, -0.008803268894553185, -0.024272164329886436, 0.01568060927093029, 0.018671946600079536, -0.014915701933205128, 0.016308927908539772, -0.0229199156165123, 0.02854745276272297, -0.010954572819173336, -0.0047738440334796906, -0.00827739480882883, -0.007273453753441572, 0.016691381111741066, -0.002762546529993415, -0.023616528138518333, 0.008666678331792355, -0.018412424251437187, 0.01845340058207512, 0.012620978988707066, -0.014601543545722961, 0.0075193168595433235, 0.02637566067278385, 0.0019959313794970512, -0.013768340460956097, 0.006392444018274546, 0.011589718982577324, -0.022865280508995056, 0.01570792868733406, 0.034284260123968124, -0.001033820677548647, 0.007840304635465145, -0.012620978988707066, -0.0032508582808077335, 0.003872345667332411, -0.020939351990818977, 0.0036572155077010393, -0.02600686624646187, 0.03565016761422157, 0.02832890674471855, -0.005979257170110941, 0.003196222009137273, 0.0133175915107131, -0.02324773371219635, -0.0010457723401486874, 0.012279502116143703, 0.003283298574388027, -0.007539805490523577, -0.001796167460270226, 0.008810099214315414, -0.02914845012128353, 0.024422412738204002, 0.007403214927762747, 0.03420230746269226, -0.013290273025631905, 0.008748632855713367, 0.00034937335294671357, 0.007717373315244913, -0.009083280339837074, 0.0033498865086585283, 0.00031607935670763254, -0.007191499229520559, -0.0033874488435685635, 0.0030801198445260525, 0.01092725433409214, 0.020953010767698288, -0.03556821122765541, -0.0027301062364131212, -0.021704258397221565, -0.008072509430348873, -0.025378547608852386, -0.008892052806913853, -0.021458396688103676, 0.0035752609837800264, 0.027249841019511223, -0.016937244683504105, 0.01513424701988697, 0.023903368040919304, -0.0173879936337471, 0.034366216510534286, 0.006716846488416195, -0.007177839986979961, -0.011446299031376839, -0.013700044713914394, 0.03048704005777836, -0.025009753182530403, 0.012545853853225708, -0.011931195855140686, 0.03108803927898407, 0.003913322929292917, 0.008933030068874359, -0.03111535683274269, -0.001990809105336666, -0.01793435588479042, -0.00936329085379839, 4.431193883647211e-05, 0.013310762122273445, -0.00046824992750771344, -0.001833729911595583, 0.03379253298044205, -0.011500935070216656, -0.020051511004567146, -0.009472563862800598, -0.00566168362274766, -0.02013346552848816, -0.012716592289507389, -0.008632531389594078, -0.01957344450056553, 0.016746018081903458, 0.016705039888620377, -0.01566695049405098, -0.020488601177930832, -0.0031501224730163813, 0.0342569425702095, -0.02102130651473999, 0.011036527343094349, -0.006788556929677725, -0.005829007364809513, 0.006225120276212692, -0.04332656413316727, -0.015407429076731205, -0.011658014729619026, 0.024231186136603355, 0.021922804415225983, -0.02346627786755562, -0.004005521535873413, -0.022783325985074043, -0.015147906728088856, 0.036223847419023514, 0.037398528307676315, -0.007000272162258625, 0.012368286028504372, 0.0031245118007063866, 0.032645173370838165, -0.005682172253727913, -0.012293160893023014, 0.029749449342489243, -0.003254272975027561, 0.001160167041234672, 0.022059394046664238, -0.01599476858973503, 0.03212612867355347, 0.020912032574415207, 0.020502261817455292, -0.02040664665400982, 0.01819387823343277, -0.011378003284335136, -0.01759287901222706, 0.016131360083818436, 0.0037630731239914894, 0.021758895367383957, 0.0192729439586401, -0.024531686678528786, -0.0003007129125762731, -0.009014984592795372, 0.0010833347914740443, 0.011398492380976677, -0.006829534191638231, 0.003373789833858609, -0.005381672643125057, -0.011528253555297852, -0.01553035993129015, -0.6184825897216797, 0.006826119031757116, -0.004152356646955013, -0.028957223519682884, -0.0017125055892392993, 0.00594510929659009, 0.01317417062819004, 0.00398503290489316, -0.02151303179562092, 0.0021769138984382153, -6.0825535911135375e-05, -0.013379056937992573, 0.014505930244922638, -0.005132394842803478, -0.02323407493531704, 0.0020556896924972534, 0.005733393598347902, -0.005774370860308409, -0.0209666695445776, -0.0026908363215625286, -0.03056899458169937, 0.028110362589359283, -0.013221978209912777, 0.0018371446058154106, -0.009725256823003292, 0.0003359277034178376, -0.009971119463443756, -0.003249150700867176, -0.014096158556640148, 0.03955665975809097, -0.047506239265203476, 0.008229588158428669, 0.033519353717565536, -0.0005327036487869918, 0.0493638701736927, 0.004510906990617514, -0.030705584213137627, 0.029694814234972, 0.01020332332700491, 0.034912578761577606, 0.009875506162643433, 0.009889164939522743, 0.03562285006046295, 0.010558459907770157, 0.022592097520828247, -0.002791572129353881, 0.008011043071746826, -0.004756770562380552, 0.008734974078834057, 0.003278176300227642, 3.0279379643616267e-05, -0.022742347791790962, -0.021745236590504646, 0.0031996367033571005, 0.0089535191655159, -0.01175362803041935, 0.053051818162202835, -0.0061773136258125305, 0.013870783150196075, -0.0021154482383280993, 0.0012856597313657403, 0.016595767810940742, -0.017811425030231476, -0.005542166996747255, -0.03693411871790886, 0.00912425760179758, -0.01682797260582447, -0.0198602844029665, 0.02018810249865055, -0.04114111140370369, 0.022619416937232018, -0.018316810950636864, 0.012013150379061699, -0.012504876591265202, -0.00963647197932005, 0.007573953364044428, 0.0285201333463192, -0.0012216329341754317, -0.0061773136258125305, 0.016445517539978027, 0.01572158746421337, 0.0012088274816051126, -0.01553035993129015, -0.030459720641374588, 0.02630736492574215, 0.009411097504198551, -0.011043356731534004, -0.026198092848062515, -0.010872618295252323, 0.0006705748965032399, 0.007553464733064175, 0.01652747206389904, -0.008728144690394402, -0.02181353233754635, 0.021649623289704323, 0.022851619869470596, -0.015188883990049362, 0.002636200049892068, -0.009274506941437721, -0.019969556480646133, -0.009151575155556202, -0.03608725592494011, -0.02074812352657318, 0.01539376936852932, 0.017879720777273178, -0.007123203948140144, -0.01767483353614807, 0.0034608663991093636, 0.04461051523685455, -0.008434474468231201, 0.008079338818788528, -0.013611260801553726, 0.005682172253727913, -0.006242194212973118, 0.011876559816300869, -0.014888384379446507, 0.02459998056292534, -0.012716592289507389, 0.009411097504198551, -0.02129448764026165, 0.007956407032907009, -0.008161293342709541, -0.0019105621613562107, -0.0058938879519701, 0.002882063388824463, -0.0137410219758749, 0.009984778240323067, 0.002612296724691987, 0.012566342949867249, 0.007273453753441572, 0.006518790032714605, -0.04422806203365326, 0.022346235811710358, -0.021062282845377922, 0.04163283854722977, -0.0010500408243387938, 0.013017091900110245, 0.014164453372359276, 0.007075397297739983, -0.021608645096421242, 0.017811425030231476, 0.0005100808339193463, 0.023698482662439346, -0.016582109034061432, -0.02944895066320896, -0.0019208064768463373, -0.013706875033676624, -0.013331250287592411, 0.00014107256720308214, -0.014150794595479965, -0.005665098316967487, -0.02297455258667469, 0.0024671691935509443, 0.016855290159583092, -0.007095885928720236, 0.008871564641594887, 0.006310489494353533, -0.023862391710281372, -0.007307601161301136, -0.01708749309182167, -0.0044699301943182945, 0.030678266659379005, -0.03253589943051338, 0.010729198344051838, -0.04034888744354248, -0.027577659115195274, -0.009192552417516708, 0.021963780745863914, -0.015434746630489826, -0.014956679195165634, -0.023944346234202385, -0.00869399681687355, 0.012388774193823338, 0.017579220235347748, -0.019819308072328568, -0.0038894196040928364, -0.01961442083120346, -0.0020078830420970917, 0.004842139780521393, 0.006634892430156469, 0.01848071813583374, 0.024217527359724045, 0.0019276359817013144, -0.021171554923057556, 0.03422962501645088, 0.01678699441254139, 0.013044409453868866, 0.0034591590519994497, -0.008195441216230392, 0.023684823885560036, -0.0029896285850554705, 0.024012641981244087, -0.02128082700073719, -0.029285041615366936, -0.01317417062819004, -0.011439469642937183, -0.0021683769300580025, 0.0028393787797540426, -0.01038089208304882, 0.037972208112478256, 0.02991335839033127, -0.0007286259206011891, 0.01566695049405098, -0.025897592306137085, -0.009144745767116547, -0.012054127641022205, 0.01202680915594101, -0.000599291583057493, 0.007860793732106686, -0.0044904183596372604, -0.006815874949097633, 0.016145018860697746, -0.004367487039417028, -0.035376984626054764, -0.0011277267476543784, 0.04343583434820175, 0.007355408277362585, 0.009909654036164284, -0.010278448462486267, 0.0012395604280754924, -0.008584723807871342, 0.010899935849010944, 0.015011315234005451, -0.0033362272661179304, 0.010469675995409489, -0.003037435235455632, 0.020037852227687836, 0.010886277072131634, 0.0313885398209095, -0.023370664566755295, 0.004978730343282223, 0.039338115602731705, 0.005347525235265493, 0.004125038627535105, 0.03789025545120239, 0.025624411180615425, 0.023452619090676308, -0.029011860489845276, 0.006467568688094616, -0.02216866798698902, 0.015052292495965958, 0.0014034692430868745, 0.008297883905470371, -0.01845340058207512, 0.018589992076158524, 0.033191535621881485, 0.009855017066001892, 0.010640413500368595, -0.02379409596323967, 0.006399273406714201, -0.02495511807501316, -0.00896717794239521, -0.01651381328701973, 0.005217764060944319, 0.006252438295632601, -0.011418980546295643, 0.010968231596052647, 0.0069627100601792336, 0.027919134125113487, 0.011022867634892464, 0.013495159335434437, 0.003636726876720786, 0.022305257618427277, -0.005651439540088177, 0.02241452969610691, -0.015544019639492035, -0.0024569248780608177, -0.005651439540088177, -0.0007610662141814828, -0.0031023158226162195, -0.002328871050849557, -0.024422412738204002, -0.017278721556067467, -0.022182326763868332, 0.013501988723874092, 0.012361456640064716, -0.002045445377007127, 0.018330469727516174, -0.01684163138270378, 0.009131086990237236, 0.00022985650866758078, -0.022824302315711975, 0.0019276359817013144, 0.008195441216230392, -0.006382199469953775, -0.035458941012620926, -0.014492271468043327, 0.020584216341376305, 0.0041147940792143345, 0.009595495648682117, 0.013898101635277271, 0.008974007330834866, 0.008625701069831848, -0.011316537857055664, -0.001818363438360393, -0.0034796474501490593, 0.051959093660116196, -0.013030750676989555, 2.5157229174510576e-05, -0.01568060927093029, 0.021417418494820595, -0.013385886326432228, -0.018712922930717468, -0.025979546830058098, 0.04305338114500046, 0.004596276208758354, -0.015079610981047153, -0.01538011059165001, 0.011576060205698013, -0.002853037789463997, -0.016909925267100334, -0.04094988480210304, -0.021690599620342255, -0.020051511004567146, 0.011439469642937183, 0.0005958768306300044, -0.01563963294029236, -0.0013898101169615984, 0.033464714884757996, 0.008530087769031525, -0.0034847697243094444, -0.011002379469573498, -0.009014984592795372, 0.0040464987978339195, 0.03857320919632912, 0.00896717794239521, 0.0019395876443013549, 0.012388774193823338, -0.025105366483330727, -0.017538243904709816, -0.000872046104632318, -0.04848968982696533, 0.04674132913351059, 0.011104822158813477, 0.010777004994452, -0.030732903629541397, 0.006460739299654961, -0.0004306874761823565, 0.0063685402274131775, 0.020515920594334602, -0.013303931802511215, -0.03977520763874054, -0.021635964512825012, -0.003786976682022214, -0.01010088063776493, -0.0168006531894207, 0.03395644202828407, 0.0218818262219429, 0.0492272824048996, 0.0249414574354887, 0.01712847128510475, -0.0030749975703656673, -0.0018234855961054564, -0.015024974942207336, -0.013904931023716927, 0.0061773136258125305, -0.00048788482672534883, 0.022236961871385574, 0.006027063820511103, 0.036524347960948944, -0.002707910258322954, -0.009390609338879585, -0.0062319496646523476, 0.013829805888235569, -0.00636512553319335, -0.0007696031243540347, 0.002588393399491906, 0.0009245481342077255, 0.00390990823507309, -0.019245626404881477, 0.01845340058207512, 0.016636744141578674, -0.040184978395700455, -0.001542620942927897, 0.03048704005777836, -0.0006607574177905917, -0.02272868901491165, 0.006337807513773441, 0.007526146247982979, -0.006887584924697876, 0.008332031778991222, 0.0072119878605008125, -0.02043396607041359, -0.03141585737466812, -0.010722368024289608, 0.010490164160728455, -0.029011860489845276, 0.0029366996604949236, -0.003493306692689657, -0.004452856257557869, 0.0030049949418753386, 0.009274506941437721, -0.028164997696876526, -0.020925691351294518, -0.004640668164938688, -0.01599476858973503, -0.01594013161957264, 0.011432640254497528, 0.029831403866410255, 0.01824851520359516, 0.018876831978559494, 0.006812460254877806, -0.012381944805383682, 0.01118677668273449, 0.029066497460007668, -0.011384833604097366, 0.00012784033606294543, -0.04283483698964119, -0.0515766404569149, 0.02189548686146736, -0.0029452366288751364, -0.0089535191655159, -0.03565016761422157, 0.0018149486277252436, 0.007881281897425652, 0.01010088063776493, 0.02208671346306801, 0.007532976102083921, 0.0035376986488699913, 0.031224628910422325, 0.02356189303100109, 0.027782544493675232, 0.017729470506310463, -0.03341007977724075, 0.009957460686564445, 0.013665897771716118, -0.035704802721738815, -0.024217527359724045, -0.0028257197700440884, -0.014109817333519459, -0.02017444372177124, -0.008024702779948711, -0.00637537008151412, -0.02384873293340206, 0.012675615027546883, -0.004763599950820208, -0.013413204811513424, 0.0006599037442356348, 0.02490048110485077, 0.007300771772861481, 0.004657742101699114, 0.033765215426683426, -0.0010824811179190874, -0.007737861946225166, 0.010899935849010944, -0.03556821122765541, 0.02830158919095993, 0.025924911722540855, 0.0002139564894605428, 0.017743129283189774, 0.009233529679477215, -0.02882063388824463, -0.03472135215997696, -0.00511873560026288, 0.009786722250282764, 0.028629407286643982, 0.010169176384806633, -0.031142674386501312, -0.023124802857637405, 0.005146054085344076, -0.015093269757926464, 0.007949577644467354, -0.001849096268415451, -0.0016740894643589854, -0.019696375355124474, -0.0015460357535630465, 0.018931468948721886, -0.03805416449904442, 0.0010056488681584597, -0.023302370682358742, -0.021335463970899582, 0.006115847732871771, 0.025009753182530403, 0.007983725517988205, -0.015475723892450333, -0.03892834484577179, -0.018576333299279213, -0.031033402308821678, 0.014929361641407013, -0.020830078050494194, 0.018535355105996132, -0.0023681409657001495, 0.01572158746421337, 0.01677333563566208, 0.036278486251831055, 0.025692706927657127, 0.008017872460186481, 0.002071056282147765, -0.005740223452448845, -0.008857905864715576, 0.009424757212400436, -0.009650131687521935, -0.011992661282420158, -0.004326509777456522, 0.01988760381937027, 0.013017091900110245, -0.014014204032719135, -0.0017159203998744488, 0.005774370860308409, 0.0192729439586401, 0.0035889199934899807, -0.0302138589322567, -0.036770209670066833, -0.032891035079956055, -0.016595767810940742, 0.02152669057250023, -0.005040196236222982, 0.01344052329659462, -0.018822195008397102, -0.01961442083120346, 0.013105875812470913, -0.025679048150777817, 0.026703478768467903, -0.007949577644467354, 0.011022867634892464, 0.0004048632981721312, 0.0023305783979594707, 0.00399527745321393, -0.010674561373889446, -0.025897592306137085, -0.01388444285839796, -0.030650949105620384, -0.002255453495308757, 0.01626794971525669, 0.02630736492574215, 0.007532976102083921, 0.002497902140021324, 0.025965888053178787, -0.00474994070827961, 0.010107710026204586, -0.012620978988707066, 0.0010133320465683937, 0.009561347775161266, -0.020065171644091606, -0.01793435588479042, -0.023015528917312622, -0.022796984761953354, -0.018644627183675766, 0.0032081736717373133, 0.006276341620832682, 0.004292361903935671, 0.004586032126098871, -0.00785396434366703, -0.011057015508413315, -0.0006167922983877361, -0.007908600382506847, 0.02495511807501316, 0.005470456555485725, 0.03275444358587265, -0.0010235763620585203, -0.0035445280373096466, -0.030377767980098724, -0.025569776073098183, 0.017415311187505722, -0.024176551029086113, 0.023657506331801414, 0.032071489840745926, -0.01711481250822544, -0.020242739468812943, 0.004473344888538122, -0.01822119578719139, 0.013781999237835407, -0.03193490207195282, 0.0011994369560852647, 0.026525909081101418, -0.016582109034061432, -0.013017091900110245, -0.003561601974070072, -0.010073562152683735, 0.01568060927093029, -0.033983759582042694, 0.014382998459041119, 0.02574734389781952, -0.022824302315711975, -0.012231695465743542, 0.03450280427932739, -0.002950358670204878, 0.024804867804050446, -0.026280047371983528, 0.022810643538832664, -0.02378043718636036, 0.010804322548210621, -0.018070947378873825, -0.0029606029856950045, 0.0002960176207125187, 0.015188883990049362, -0.012504876591265202, -0.004234311170876026, 0.009957460686564445, 0.002328871050849557, -0.004128453321754932, -0.004053328186273575, -0.011644355021417141, 0.02410825528204441, -0.004579202737659216, -0.004695304669439793, 0.011842411942780018, -0.0041830893605947495, -0.016759676858782768, -0.020502261817455292, -0.021635964512825012, 0.006317318882793188, -0.005890473257750273, -0.01706017553806305, 0.013973226770758629, -0.007860793732106686, 0.0017244573682546616, 0.010046244598925114, -0.0002870538446586579, -0.036551665514707565, -0.012682444415986538, -0.003211588365957141, 0.008174952119588852, -0.023288710042834282, -0.013338079676032066, 0.0045382254756987095, -0.02296089380979538, -0.0013727362966164947, 0.00783347524702549, 0.002156425267457962, 0.00694222142919898, 0.025050731375813484, 0.003667459823191166, 0.03226272016763687, 0.02235989458858967, -0.007812987081706524, -0.026758113875985146, 0.024845844134688377, -0.020352011546492577, -0.020953010767698288, 0.012846353463828564, -0.020024193450808525, -0.0420699305832386, -0.023657506331801414, 0.013099046424031258, 0.013379056937992573, -0.016978221014142036, 0.019723694771528244, 0.028110362589359283, 0.0013488329714164138, 0.00046611568541266024, -0.016035744920372963, -0.01173313893377781, 0.021731577813625336, -0.027796203270554543, -0.02184084989130497, 0.017456289380788803, 0.015557678416371346, -0.016705039888620377, -0.014342021197080612, -0.0028427934739738703, -0.01569426991045475, -0.013672727160155773, -0.0184943787753582, -0.02020176127552986, 0.01034674420952797, -0.018617309629917145, 0.0032662246376276016, -0.0009697938221506774, -0.020543238148093224, -0.0005335573223419487, 0.009561347775161266, -0.008454962633550167, 0.01845340058207512, -0.0072119878605008125, -0.0032286623027175665, 0.0229199156165123, 0.009233529679477215, -0.0018064117757603526, 0.007594441995024681, -0.0210349652916193, -0.0058221775107085705, -0.04253433644771576, -0.01734701544046402, -0.0104833347722888, 0.04425537958741188, 0.01412347611039877, 0.006747579667717218, -0.008188610896468163, 0.0024347288999706507, -0.03840930014848709, -0.01624063216149807, -0.0024142402689903975, 0.0030784124974161386, 0.020379329100251198, 0.024736572057008743, 0.028684042394161224, 0.02745472639799118, 0.031224628910422325, 0.008270565420389175, -0.008366178721189499, 0.0010799200972542167, -0.023042848333716393, -0.018385104835033417, 0.034311577677726746, 0.003226954722777009, -0.027031295001506805, -0.011214095167815685, 0.0019515393069013953, 0.003691363148391247, 0.0035376986488699913, 0.02242819033563137, 0.009213041514158249, 0.034857939928770065, 0.0047772591933608055, 0.004357242491096258, -0.0028684043791145086, -0.014519589021801949, 0.01824851520359516, -0.046577420085668564, 0.005210934206843376, 0.021089600399136543, -0.008960348553955555, -0.0123068206012249, 0.0011738261673599482, -0.0002938833786174655, 0.014505930244922638, -0.019491489976644516, -0.018139243125915527, 0.010182835161685944, 0.0017534828511998057, 0.00566168362274766, -0.002494487212970853, 0.008748632855713367, 0.007792498450726271, 0.028656724840402603, -0.043545108288526535, -0.01823485642671585, -0.004726037383079529, -0.013795658946037292, -0.027659611776471138, 0.0310607198625803, 0.0028188901487737894, -0.006863681599497795, 0.0007798474398441613, -0.009479393251240253, 0.007266624365001917, 0.0006048405775800347, -0.016104040667414665, 0.0023220416624099016, -0.016595767810940742, -0.03611457720398903, 0.018644627183675766, -0.01930026337504387, 0.009110597893595695, -0.004405049607157707, 0.010169176384806633, 0.0012856597313657403, -0.024804867804050446, 0.004282117821276188, 0.013030750676989555, -0.011828753165900707, 0.0015477431006729603, 0.0013240758562460542, -0.004736281931400299, -0.03300030902028084, -0.011883389204740524, 0.010975060984492302, -0.0005096539971418679, 0.0025866860523819923, 0.2349359691143036, 0.018876831978559494, 0.012170229107141495, 0.04627692326903343, -0.005637780297547579, 0.009957460686564445, 0.016172336414456367, 0.004166015889495611, -0.014369339682161808, 0.02936699613928795, 0.0046065207570791245, 0.0042411405593156815, -0.009943801909685135, -0.0006035600672475994, 0.014273726381361485, -0.016896266490221024, -0.022209644317626953, -0.03969325125217438, 0.007375896908342838, -0.0018098264699801803, -0.014287385158240795, -0.003331105224788189, -0.02432679943740368, -0.005569485016167164, 0.028383543714880943, 0.0011337026953697205, -0.0013872490962967277, -0.013529307208955288, 0.011316537857055664, 0.0036059939302504063, -0.007676396053284407, -0.01371370442211628, 0.010394550859928131, 0.006651965901255608, -0.021745236590504646, -0.0030493868980556726, 0.025842957198619843, -0.0280010886490345, 0.009800381027162075, 0.00028854780248366296, 0.007942748256027699, -0.00381770939566195, 0.025556115433573723, -0.006976368837058544, 0.0037459994200617075, 0.0059929159469902515, -0.007881281897425652, -0.0017031150637194514, -0.00785396434366703, 0.013290273025631905, -0.01471081655472517, 0.001294196699745953, -0.013372227549552917, 0.006085114553570747, 0.011405321769416332, 0.004872872494161129, 0.004797747824341059, -0.0031620741356164217, -0.006027063820511103, 0.003090364160016179, -0.007785668596625328, 0.015366451814770699, 0.009213041514158249, 0.004975315649062395, -0.04108647629618645, 0.01987394317984581, -0.05291523039340973, 0.04062206670641899, 0.00838666781783104, -0.014833747409284115, -0.016281608492136, -0.01740165241062641, -0.01655478961765766, 0.004685060121119022, -0.0020522749982774258, -0.01759287901222706, 0.01260731928050518, 0.012586831115186214, 0.013194659724831581, 0.024217527359724045, -0.007136863190680742, -0.005593388341367245, -0.022209644317626953, 0.013167341239750385, -0.0015306692803278565, -0.016281608492136, 0.033492036163806915, -0.0162133127450943, -0.007608100771903992, -0.01648649573326111, -0.009178893640637398, -0.009158405475318432, -0.025419525802135468, -0.011507764458656311, 0.025146344676613808, -0.01499765645712614, 0.009684279561042786, 0.02406727708876133, -0.003061338560655713, -0.025351230055093765, -0.035704802721738815, 0.05359818413853645, 0.040485478937625885, 0.0029332847334444523, -0.026990318670868874, -0.010906766168773174, -0.022537462413311005, 0.012832694686949253, -0.006382199469953775, -0.013700044713914394, 0.01206095702946186, -0.038491252809762955, 0.00104833347722888, -0.016185995191335678, 0.011016038246452808, 0.02040664665400982, 0.02020176127552986, -0.010141857899725437, -0.0032730542588979006, 0.011296048760414124, 0.0056855869479477406, -0.021403759717941284, 0.027359113097190857, -0.01020332332700491, -0.03551357612013817, -0.029776768758893013, -0.03830002620816231, 0.021717917174100876, -0.0055046044290065765, -0.03365594521164894, 0.014792770147323608, -0.013303931802511215, 0.004176259972155094, -0.014902043156325817, -0.003517210017889738, 0.02211403101682663, 0.021717917174100876, -0.020638851448893547, -0.0112004354596138, -0.007423703558743, -0.003255980322137475, 0.015912814065814018, 0.023643847554922104, 0.011152628809213638, 0.010305766947567463, -0.004405049607157707, -0.004405049607157707, 0.007717373315244913, -0.010387721471488476, -0.01596745103597641, -0.02637566067278385, 0.031033402308821678, 0.011152628809213638, 0.030350448563694954, 0.01594013161957264, 0.004012351389974356, -0.012224866077303886, -0.01091359555721283, -0.020010534673929214, 0.013638579286634922, -0.048844825476408005, 0.014738134108483791, 0.00671001709997654, 0.014410316944122314, -0.012429751455783844, -0.023903368040919304, -0.1730877161026001, 0.01077017467468977, 0.01398688554763794, -0.016404541209340096, 0.0408952496945858, -0.006682699080556631, 0.0347759872674942, 0.008550576865673065, 0.0007538098143413663, 0.014669839292764664, -0.01525717880576849, -0.008625701069831848, -0.0240945965051651, -0.03696143627166748, -0.006689528468996286, -0.0008285078220069408, -0.0007085641263984144, 0.013310762122273445, 0.03993911296129227, 0.011179947294294834, 0.014027862809598446, -0.04622228443622589, 0.007437362335622311, -0.014505930244922638, 0.004432367626577616, -0.02832890674471855, -0.009650131687521935, 0.015161565504968166, 0.03029581345617771, -0.03420230746269226, -0.013078557327389717, -0.01553035993129015, 0.036223847419023514, -0.011808264069259167, 0.014109817333519459, -0.018029969185590744, 0.0173879936337471, 0.011828753165900707, -0.005559240467846394, 0.032317355275154114, 0.022455507889389992, 0.03504916653037071, -0.0011208972427994013, 0.008933030068874359, 0.01105018611997366, 0.010817982256412506, 0.012313649989664555, -0.03341007977724075, 0.012935137376189232, 0.015844518318772316, 0.03690680116415024, 0.004545054864138365, -0.010674561373889446, 0.0050367810763418674, -0.00868033803999424, 0.004603106062859297, -0.004148941952735186, 0.00498214503750205, 0.013665897771716118, -0.011582889594137669, -0.00025183905381709337, -0.018931468948721886, 0.021690599620342255, -0.0021974025294184685, 0.005531922448426485, -0.010442357510328293, -0.000872046104632318, 0.016937244683504105, -0.036524347960948944, 0.02126716822385788, -0.00199251645244658, 0.006262682843953371, 0.010537970811128616, 0.01374785229563713, 0.014328362420201302, 0.01570792868733406, -0.0019805647898465395, 0.010988719761371613, 0.010025755502283573, -0.012771228328347206, -0.005548996385186911, 0.007266624365001917, -0.029776768758893013, 0.0015929888468235731, -0.011391662992537022, -0.011398492380976677, 0.0060646263882517815, -0.004316265694797039, 0.0005621560267172754, 0.0010150395100936294, 0.05512799695134163, -0.03701607510447502, 0.0011439468944445252, -0.009267677552998066, -0.0009083280456252396, 0.007710543926805258, 0.024873163551092148, -0.005330451298505068, 0.0454573780298233, 0.01678699441254139, -0.009055961854755878, 0.012074615806341171, -0.015776222571730614, -0.006126091815531254, 0.016336245462298393, 0.0023459449876099825, 0.0023476523347198963, -0.008379838429391384, 0.04332656413316727, -0.015462065115571022, -0.010046244598925114, 0.017469948157668114, 0.02132180519402027, 0.03220808133482933, -0.018617309629917145, 0.010510653257369995, 0.03701607510447502, -0.010059903375804424, 0.014369339682161808, -0.018699264153838158, 0.07026224583387375, 0.002835964085534215, -0.029585540294647217, 0.03939275071024895, 0.010169176384806633, -0.01764751598238945, -0.11659380048513412, -0.03127926588058472, 0.010592606849968433, 0.004111379384994507, -0.013030750676989555, 0.016349904239177704, 0.0015374987851828337, 0.02408093772828579, -0.022236961871385574, 0.027919134125113487, -0.037917573004961014, -0.007403214927762747, -0.007614930160343647, 0.003585505299270153, 0.007546634878963232, -0.0026669329963624477, 0.0019566614646464586, 0.0015605485532432795, -0.005658268928527832, 0.0302138589322567, 0.026949340477585793, 0.0033430568873882294, -0.0005958768306300044, 0.0005920352414250374, -0.025351230055093765, -0.0033430568873882294, 0.0024091179948300123, 0.006460739299654961, 0.00384844234213233, 0.004316265694797039, 0.0184943787753582, 0.005678757559508085, -0.0006782580749131739, -0.003930396866053343, 0.0002761692740023136, 0.0069149029441177845, -0.027891816571354866, -0.007444192189723253, 0.017688492313027382, -0.028492815792560577, -0.0042411405593156815, 0.01525717880576849, 0.011808264069259167, -0.016718698665499687, -0.004497248213738203, -0.003226954722777009, -0.011726309545338154, 0.026184434071183205, 0.016336245462298393, -0.007710543926805258, 0.00785396434366703, 0.010244300588965416, -0.025706365704536438, 0.01936855912208557, 0.023438960313796997, -0.02466827630996704, 0.028192317113280296, 0.012552683241665363, 0.005125565454363823, 0.011985831893980503, 0.00769688468426466, -0.007205158472061157, 0.0004180955293122679, 0.024572663009166718, 0.012177059426903725, -0.020106147974729538, 0.0027727908454835415, -0.0037016074638813734, 0.010080392472445965, -0.01957344450056553, -0.009458904154598713, 0.003448914736509323, -0.028410861268639565, 0.0007811279501765966, -0.028219634667038918, 0.003653800580650568, -0.004323095083236694, 0.012784888036549091, 0.004504077602177858, 0.020283715799450874, -0.00519044604152441, -0.0006112433038651943, 0.0009817455429583788, -0.03029581345617771, -0.000379679404431954, 0.016295267269015312, 0.03422962501645088, 0.0077583505772054195, 0.005009463056921959, -0.04425537958741188, -0.0168006531894207, 0.009697938337922096, -0.024285823106765747, -0.022564779967069626, -0.005453383084386587, 0.024504367262125015, -0.016322586685419083, 0.017961673438549042, 0.004446026403456926, 0.02216866798698902, -0.012832694686949253, -0.0016382344765588641, -0.04332656413316727, 0.009711597114801407, 0.014055181294679642, -0.011862900108098984, 0.026389319449663162, -0.0137410219758749, -0.01021015364676714, -0.034284260123968124, 0.005706075578927994, 0.011002379469573498, -0.013768340460956097, 0.0027010806370526552, -0.008373009040951729, -0.02235989458858967, -0.03693411871790886, -0.0152708375826478, 0.004917264450341463, -0.007355408277362585, 0.0019173916662111878, 0.015434746630489826, -0.0029076740611344576, 0.0006163654616102576, 0.007054908666759729, 0.013488329946994781, -0.020884715020656586, -0.03174367547035217, 0.01905439980328083, 0.03324617072939873, -0.01244341116398573, -0.002709617605432868, 0.001422250410541892, -0.043517790734767914, -0.013003433123230934, 0.0026037597563117743, 0.0009424756863154471, 0.00699344277381897, 2.1942545572528616e-05, -0.002776205539703369, 0.020953010767698288, 0.019163671880960464, -0.02607516013085842, -0.02602052502334118, 0.028465498238801956, -0.028492815792560577, -0.009848187677562237, -0.022824302315711975, -0.018139243125915527, -0.0003077558649238199, 0.022277940064668655, 0.004828480537980795, 0.02013346552848816, 0.021376442164182663, -0.008741803467273712, -0.0152708375826478, -0.01902708224952221, -0.004374316427856684, 0.015421087853610516, 0.029339678585529327, -0.01737433485686779, -0.012040468864142895, 0.019791988655924797, -0.0024739985819905996, -0.007737861946225166, -0.02936699613928795, 0.0054602124728262424, -0.027645952999591827, -0.025392208248376846, 0.007430532947182655, -0.004364072345197201, -0.018863173201680183, -0.0066109891049563885, 0.004220651928335428, 0.020912032574415207, 0.009417926892638206, 0.01712847128510475, -0.004753355868160725, -0.0046509127132594585, 0.009288166649639606, -0.02600686624646187, -0.00461335014551878, -0.0034591590519994497, -0.02692202292382717, -0.0071300333365798, 0.011507764458656311, 0.04482905939221382, -0.009308654814958572, -0.002687421627342701, 0.0386824794113636, 0.024463390931487083, 0.001444446388632059, -0.020515920594334602, 0.006139751058071852, -0.009561347775161266, -0.01931392215192318, 0.0159537922590971, 0.013761511072516441, -0.035404305905103683, 0.017797766253352165, 0.005805104039609432, 0.006822704337537289, 0.024763889610767365, 0.01175362803041935, 0.0040601580403745174, -0.014519589021801949, -0.0018012896180152893, 0.023684823885560036, 0.0035274543333798647, -0.0022878937888890505, -0.00762176001444459, 0.005521678365767002, -0.032371990382671356, 0.0006355735240504146, 0.0010833347914740443, 0.028738679364323616, 0.00840032659471035, -0.0006027063936926425, 0.002035201061517, -0.014423975721001625, 0.01051748264580965, 0.023029187694191933, 0.005675342865288258, 0.013488329946994781, 0.011391662992537022, 0.001973735401406884, 0.007266624365001917, 0.035677485167980194, 0.009349632076919079, -0.014560566283762455, -0.01619965396821499, -0.013481499627232552, 0.019122695550322533, 0.00623877951875329, -0.0077037145383656025, -0.014205430634319782, 0.008304713293910027, -0.030951447784900665, -0.002718154573813081, 0.02796011231839657, -0.006628062576055527, 0.0733218789100647, 0.011958514340221882, -0.027222521603107452, -0.018357787281274796, -0.01648649573326111, -0.006921732798218727, -0.01202680915594101, 0.009438415989279747, -0.003930396866053343, -0.03076022118330002, 0.042752884328365326, 6.322654371615499e-05, -0.014410316944122314, -0.032891035079956055, 0.010763345286250114, 0.022906256839632988, -0.018849514424800873, 0.011548741720616817, 0.004435782320797443, -0.010906766168773174, 0.0342569425702095, -0.024873163551092148, 0.02999531291425228, -0.021171554923057556, -0.01513424701988697, -0.008202270604670048, 0.02714056894183159, -0.006286586169153452, -0.006430006120353937, -0.032645173370838165, 0.018398763611912727, -0.013392715714871883, -0.02300187014043331, -0.002193987835198641, 0.0010534556349739432, 0.02744106762111187, 0.012846353463828564, -0.030049949884414673, 0.011350685730576515, 0.00251668319106102, -0.011473617516458035, -0.002342530060559511, -0.01145995780825615, -0.04879019036889076, 0.0071300333365798, 0.01317417062819004, 0.017183108255267143, -0.009882335551083088, -0.016650402918457985]"
Zero Downtime Migration from Redis to Dragonfly using Redis Sentinel,Zero Downtime Migration from Redis to Dragonfly using Redis Sentinel,"## <a name=""_vv459bfk5u44""></a>Introduction  Dragonfly is a modern in-memory datastore that implements novel algorithms and data structures on top of a multi-threaded, shared-nothing architecture. Thanks to its [API compatibility](https://dragonflydb.io/docs/category/command-reference), Dragonfly can act as a _drop-in replacement_ for Redis. At the time of writing, [Dragonfly has implemented more than 200 Redis commands](https://dragonflydb.io/docs/about/faq#when-will-you-support-x-command) which represents good coverage for the vast majority of use cases. So why would someone want to migrate from Redis to Dragonfly? Due to Dragonfly's hardware efficiency, you can reduce your infrastructure costs up to 80% by migrating while also reducing your architectural complexity.  You can use a variety of techniques to migrate data from existing Redis deployments to Dragonfly. These include Snapshot and Restore, Replication, as well as custom solutions.  - **Snapshot and Restore** is a commonly used technique for migrating data between Redis instances. You can configure Redis to automatically save snapshots on disk or manually call the SAVE (or BGSAVE) command. During startup, Dragonfly will try to find the snapshot dump file in its current dir path and will load it automatically (for further details, refer to [Saving Backups](https://www.dragonflydb.io/docs/managing-dragonfly/backups) in the Dragonfly documentation). - **Replication** is also a widely-used migration technique. This solution involves establishing a primary-replica relationship between the source Redis instance (master) and the replica instance (using REPLICAOF command), decommissioning the old master (by promoting the replica to primary using REPLICAOF no one), reconfiguring and restarting client applications to use the new primary node. - In addition to the above-mentioned techniques, you can also build **custom solutions** using the MIGRATE command or tools such as RIOT (as [discussed in this blog](https://www.dragonflydb.io/blog/migrating-from-a-redis-cluster-to-a-dragonfly-on-a-single-node)).  Each of the techniques has its own pros and cons. One of the common cons is application downtime. For example, _Snapshot and Restore_ involves potential downtime during the migration process, especially for larger datasets. The time taken to create, transfer and restore the snapshot can lead to data loss as well as service interruption. Using _Replication_ also involves manual process (re-configuring the application) and downtime.  In this blog post, we'll discuss how you can use Redis Sentinel to perform a zero-downtime migration from Redis to Dragonfly.  ## <a name=""_slbrj3e0zmml""></a>Redis Sentinel  Redis Sentinel is a distributed system designed to provide high availability and automatic failover for Redis. A Redis Sentinel based setup consists of one or more Sentinel processes that monitor the health and status of Redis instances. By continuously sending heartbeat-like check-ins and performing active monitoring, Redis Sentinel detects failures in Redis master nodes and orchestrates the failover process. It promotes suitable replica nodes to become the new master, updates the system configuration, and redirects clients to the new master to ensure uninterrupted service. This ability to automatically handle failovers can be used to perform migrations as well.  At a high level, here are the steps involved:  1. Start a new Dragonfly instance and configure it as a replica of the source (primary) Redis instance. 1. Replicate data from source Redis (primary) node to Dragonfly. 1. Allow replication to reach steady state and monitor using INFO replication command. 1. Stop the primary Redis node and let Sentinel promote the Dragonfly instance to become the new primary.  Let's look at each of these steps in detail.  ## <a name=""_uj83y5u0bvse""></a>Migration from Redis to Dragonfly using Redis Sentinel  Clone the [Git repository](https://github.com/dragonflydb/dragonfly-examples/tree/main/sentinel-migration):  ```lua git clone git@github.com:dragonflydb/dragonfly-examples.git  cd dragonfly-examples/sentinel-migration ```  **Start Redis Primary, Replica and Sentinel nodes**  ```lua redis-server --port 6379  redis-server --port 6380 --slaveof 127.0.0.1 6379  redis-server sentinel.conf --sentinel ```  _Note that we started Redis primary, replica and Sentinel nodes on ports 6379, 6380 and 5000 (as per sentinel.conf) respectively._  Confirm Redis master node via Sentinel:  ```lua redis-cli -p 5000 sentinel get-master-addr-by-name the_master ```  ```lua #expected output  1) ""127.0.0.1""  2) ""6379"" ```  **_the_master_** _is the name of the master node as specified in_ **_sentinel.conf_** _file._  Confirm Redis replica status via Sentinel:  ```lua redis-cli -p 5000 sentinel replicas the_master ```  ```lua  #expected output  1)  1) ""name""  2) ""127.0.0.1:6380""  3) ""ip""  4) ""127.0.0.1""  5) ""port""  6) ""6380""  ..... ```  **Start the client application**  The client application is a Go program that uses [go-redis](https://github.com/redis/go-redis) client library and connects to Redis via Sentinel (using [NewFailoverClient](https://pkg.go.dev/github.com/redis/go-redis/v9#NewFailoverClient)).  To start the application:  ```lua go run main.go ```  ```lua #expected output  sentinel.go:685: sentinel: new master=""the_master"" addr=""127.0.0.1:6379""  connected to redis ```  The application exposes a couple of HTTP endpoints to set and get key-value pairs. We will invoke these endpoints (via a script) to verify that the application works as expected and how it behaves during failover(s).  ```lua ./test.sh ```  The script output should look like this:  ```lua {""key"":""key-1"",""value"":""value-1"",""from_node"":""127.0.0.1:6379""}  {""key"":""key-2"",""value"":""value-2"",""from_node"":""127.0.0.1:6379""}  .... ```  Notice that the output contains the information of the _primary node_ (port 6379) configured in Sentinel.  The base setup is ready and we have verified that the application works as expected. Let's begin the migration process.  **Start Dragonfly and replicate data**  There are [several options](https://www.dragonflydb.io/docs/getting-started) available to get Dragonfly up and running quickly. We will be using Docker for this example.  ```lua docker run --network=host --ulimit memlock=-1 docker.dragonflydb.io/dragonflydb/dragonfly:latest --port 6000 ```  _Note that we have started Dragonfly on port 6000._  [Dragonfly supports a primary/secondary replication model](https://www.dragonflydb.io/docs/managing-dragonfly/replication), similar to Rediss replication. When using replication, Dragonfly creates exact copies of the primary instance. Once configured properly, secondary instances reconnect to the primary any time their connections break and will always aim to remain an exact copy of the primary.  To convert the Dragonfly instance into a replica of the primary Redis node we started earlier, run the following command:  ```lua redis-cli -p 6000 REPLICAOF localhost 6379 ```  ```lua #expected output  OK ```  Note that Dragonfly to Redis replication is currently _not_ possible.  To confirm replication, check the number of keys:  ```lua redis-cli -p 6000 DBSIZE ```  ```lua #expected output  (integer) 10 ```  **Failover to Redis replica**  First, stop the primary node and witness Sentinel in action. Go to the terminal where you started the Redis server and stop the primary node by pressing Ctrl+C.  In the script output, you should see the following:  ```lua {""operation"":""set"",""msg"":""dial tcp 127.0.0.1:6379: connect: connection refused"",""code"":500}  {""operation"":""get"",""msg"":""dial tcp 127.0.0.1:6379: connect: connection refused"",""code"":500}  ... ```  This is expected because the primary node is down and the application is unable to connect to it. Sentinel should trigger a failover and promote the replica to become the new primary node.  If you check the script, after some time the application should work as usual. In the script output, notice the from_node field. It should be the earlier replica node (on port 6380):  ```lua {""key"":""key-1"",""value"":""value-1"",""from\_node"":""127.0.0.1:6380""}  {""key"":""key-2"",""value"":""value-2"",""from\_node"":""127.0.0.1:6380""}  .... ```  You can verify this by checking the master via Sentinel as well:  ```lua redis-cli -p 5000 sentinel get-master-addr-by-name the\_master ```  ```lua #output  1) ""127.0.0.1""  2) ""6380"" ```  **Failover to Dragonfly**  Now, let's stop the new master (port 6380).  In the script output, you should see the following:  ```lua {""operation"":""set"",""msg"":""dial tcp 127.0.0.1:6380: connect: connection refused"",""code"":500}  {""operation"":""get"",""msg"":""dial tcp 127.0.0.1:6380: connect: connection refused"",""code"":500}  ... ```  Just like in the previous case, this is expected because the primary node is down and the application is unable to connect to it. Sentinel will trigger a failover and promote the Dragonfly instance to be the new primary node.  If you check the script, after some time the application should work as usual. In the script output, notice the from_node field. It should be the Dragonfly instance (on port 6000):  ```lua {""key"":""key-1"",""value"":""value-1"",""from\_node"":""127.0.0.1:6000""}  {""key"":""key-2"",""value"":""value-2"",""from\_node"":""127.0.0.1:6000""}  .... ```  You can verify this by checking the Sentinel status via CLI as well:  ```lua redis-cli -p 5000 sentinel get-master-addr-by-name the\_master ```  ```lua #output  1) ""127.0.0.1""  2) ""6000"" ```  ## <a name=""_a00wtseewrx2""></a>Conclusion  Migrating from Redis to Dragonfly can involve downtime, but this can be circumvented using Redis Sentinel. By replicating data from Redis to Dragonfly and then failing over to Dragonfly using Redis Sentinel, the failover was automatic and without manual steps of stopping or reconfiguring the application.  There are a few things to consider when using this approach:  - **Sentinel client** - Please ensure that the client library you use supports Sentinel. Without that, the client will not be able to connect to the Sentinel cluster and retrieve the master node information. - **Application resilience** - The master node will be unavailable during failover and this will have a (temporary) impact on the application. To counter this, you need to ensure that the application is resilient to failures by having appropriate error handling, retry logic, and timeouts. - **Sentinel high availability** - In this blog post, we used a single Sentinel process for demonstration purposes. For production use-cases, use a fault-tolerant Sentinel setup with a minimum of three nodes. This ensures that the Sentinel cluster itself is resilient to failures.","[-0.013313909992575645, -0.012465846724808216, -0.0005614974070340395, -0.004622981417924166, -0.00015599545440636575, 0.024200841784477234, -0.03436381369829178, 0.007170619443058968, -0.029096167534589767, -0.017554229125380516, -0.003450860735028982, 0.020587952807545662, -0.01621663197875023, 0.004019683692604303, 0.012176264077425003, 0.026641609147191048, 0.01148678082972765, -0.018133394420146942, 0.026641609147191048, -0.013120855204761028, 0.012624427676200867, -0.006856904830783606, -0.01718190684914589, -0.007632573135197163, -0.026765717193484306, -0.012982957996428013, 0.013120855204761028, -0.006491478998214006, 0.007529150694608688, 0.03193683549761772, 0.0246558990329504, -0.0025079932529479265, -0.005874392110854387, -0.007625678088515997, -0.017402542755007744, 0.008218633010983467, 0.015141039155423641, -0.003926603589206934, 0.025359172374010086, -0.009811338037252426, 0.035577304661273956, -0.02647613361477852, -0.006829325575381517, -0.01396202389150858, -0.016161473467946053, 0.024793796241283417, 0.004171370062977076, -0.027013929560780525, 0.015761572867631912, -0.026090024039149284, -0.0004886708338744938, 0.020105313509702682, -0.0219255480915308, 0.02051900327205658, 0.006846562959253788, 0.014658400788903236, 0.01150746550410986, 0.01118340902030468, -0.0007592927431687713, -0.014851456508040428, 0.011052407324314117, 0.033564016222953796, -0.002539019798859954, 0.001997776096686721, -0.018740138038992882, -0.0018047208432108164, 0.005264200270175934, -0.04037610441446304, -0.003757680533453822, -0.0042058443650603294, 0.03949356451630592, 0.020670689642429352, 0.014286080375313759, -0.010797298513352871, 0.038804084062576294, -0.017319804057478905, 0.0016375213162973523, -0.007798048667609692, -0.008949484676122665, -0.010411188006401062, 0.009666547179222107, 0.0016263171564787626, -0.02490411326289177, 0.02727593295276165, 0.021249854937195778, 0.03869376704096794, -0.027827519923448563, 0.00636737234890461, -0.0030078680720180273, 0.009059801697731018, -0.01241068821400404, 0.01829886995255947, 0.00023507048899773508, -0.0003141455235891044, 0.0040713949128985405, 0.009701021015644073, 0.021553227677941322, 0.0019167617429047823, 0.00034560318454168737, -0.0123279495164752, -0.030364815145730972, -0.005629625637084246, -0.006098473910242319, -0.00645700516179204, -0.013362173922359943, -0.004540243186056614, 0.028089523315429688, -0.02249092422425747, 0.017719704657793045, 0.01918140798807144, -0.021580807864665985, 0.04481637105345726, 0.013631071895360947, -0.022794296965003014, 0.0014168868074193597, -0.016878535971045494, 0.0195123590528965, -0.03086124360561371, 0.024435264989733696, -0.028792794793844223, 0.031798940151929855, -0.0016125275287777185, 0.014851456508040428, -0.03789396584033966, 0.0191951971501112, 0.0038611029740422964, -0.006519058253616095, -0.005657205358147621, 0.0038059442304074764, -0.0014599795686081052, -0.0033353723119944334, 0.032571159303188324, -0.0062294756062328815, 0.005357280373573303, -0.02127743512392044, -0.0074946763925254345, -0.003493953263387084, 0.004971169866621494, -0.016230421140789986, -0.02188417874276638, 0.0011867720168083906, 0.02071205899119377, -0.013893075287342072, -0.02723456546664238, -0.010935194790363312, 0.017595596611499786, -0.012183158658444881, 0.01080419309437275, 0.0016099419444799423, -0.013948233798146248, 0.006353582721203566, -0.02719319611787796, -0.013369068503379822, -0.008073842152953148, 0.012286581099033356, 0.031081877648830414, -0.014086131006479263, -0.0023201091680675745, 0.0029475383926182985, 0.0038645502645522356, 0.009942339733242989, 0.029868388548493385, -0.015044511295855045, -0.00322850258089602, 6.280755769694224e-05, 0.02904100902378559, 0.007377464324235916, -0.024242209270596504, -0.0009256304474547505, -0.01970541477203369, 0.006260502617806196, 0.023304514586925507, -0.01130751520395279, 0.03339853882789612, 0.009025327861309052, 0.0250695887953043, -0.015237567014992237, -0.004443715792149305, -0.012603743001818657, -0.026172760874032974, 0.0005696850712411106, 0.009859601967036724, -0.0024097419809550047, 0.03359159454703331, -0.026972562074661255, -0.018878035247325897, -0.013886180706322193, -0.0036128892097622156, 0.013658651150763035, -0.010362924076616764, -0.004988406784832478, 0.0023787152022123337, -0.003235397394746542, -0.019608886912465096, -0.6040971279144287, -0.007970419712364674, 0.0021701466757804155, -0.04534037783741951, 0.0057502854615449905, -0.007398148998618126, 0.007336095441132784, 0.0075567299500107765, -0.010997247882187366, -0.013424227014183998, 0.007701521273702383, -0.006136395502835512, -0.0047850096598267555, -0.004067947622388601, -0.01930551417171955, -0.012203843332827091, -0.0014108539326116443, -0.006226028315722942, 0.0009402819559909403, 0.002673469018191099, -0.05648241937160492, 0.04211360216140747, -0.004429926164448261, 0.020587952807545662, -0.003175067715346813, -0.003647363279014826, -0.01600978709757328, 0.009059801697731018, 0.0011031721951439977, 0.03163346275687218, -0.04404415190219879, 0.009804443456232548, 0.026572661474347115, 0.010038867592811584, 0.04409931227564812, 0.008811588399112225, -0.009370069019496441, 0.024407686665654182, 0.008983958512544632, 0.03395012766122818, 0.008032472804188728, 0.007467097137123346, 0.026545081287622452, 0.011107565835118294, 0.00987339112907648, -0.020987851545214653, 0.016023576259613037, -0.010666296817362309, 0.007101671304553747, -0.0008605605107732117, 0.011045511811971664, -0.012603743001818657, -0.014920404180884361, -0.0072809369303286076, -0.001321221119724214, -0.006791403982788324, 0.04840168356895447, -0.026034865528345108, 0.026241710409522057, 0.00011020949023077264, 0.018643610179424286, 0.018354028463363647, -0.023180406540632248, -0.014368818141520023, -0.006860352586954832, -0.013058801181614399, -0.014879035763442516, -0.030419975519180298, 0.023745782673358917, -0.03254358097910881, 0.043713200837373734, -0.008577164262533188, 0.012445162050426006, -0.006067447364330292, 0.004240318201482296, 0.018616031855344772, 0.018285080790519714, 0.016561374068260193, 0.004816036205738783, 0.03921777382493019, 0.022022075951099396, 0.010790403932332993, -0.0325160026550293, -0.02788267843425274, 0.030116602778434753, -0.0054365708492696285, -0.03883166238665581, -0.012824377045035362, 0.005957130342721939, -0.006212238688021898, 0.014161973260343075, 0.01930551417171955, -0.02404915541410446, -0.025759071111679077, 0.016988852992653847, 0.02320798672735691, -0.024228420108556747, -0.00979754887521267, -0.019167616963386536, -0.019498569890856743, 0.003992104437202215, -0.01827128976583481, -0.008563374169170856, 0.008963274769484997, 0.02851700223982334, -0.013176013715565205, -0.030226919800043106, 0.013362173922359943, 0.03541182726621628, -0.0123279495164752, -0.0035025719553232193, -0.02039489708840847, -0.003899024333804846, -0.012727850116789341, -0.0010057828621938825, -0.028061943128705025, 0.030585451051592827, 0.010397398844361305, 0.023580307140946388, -0.03386738896369934, 0.010700770653784275, -0.010652506723999977, 0.0005890767206437886, 0.009852707386016846, -0.006243265233933926, 0.00013272541400510818, -0.011976313777267933, -0.016906114295125008, 0.014934194274246693, 0.020381107926368713, 0.014534294605255127, -0.03237810358405113, 0.00557101983577013, -0.00584336556494236, 0.0316886231303215, -0.014272291213274002, 0.010666296817362309, 0.002583836205303669, 0.007977314293384552, -0.0174163319170475, 0.01293469499796629, 0.013803442940115929, 0.016547583043575287, -0.03243326395750046, -0.009749284945428371, -0.003647363279014826, -0.018450556322932243, -0.014865245670080185, -0.003592204535380006, -0.022780505940318108, -0.026724347844719887, -0.007791154086589813, 0.00636737234890461, 0.007715310901403427, -0.01867119036614895, 0.004564375150948763, -0.007036170456558466, -0.031881678849458694, -0.005274542141705751, -0.021622175350785255, 0.01303811650723219, 0.03913503512740135, -0.030033864080905914, 5.111867358209565e-05, -0.038445550948381424, -0.03497055917978287, 0.0038921295199543238, 0.025317803025245667, 0.009749284945428371, -0.018574662506580353, -0.014520504511892796, -0.017126748338341713, 0.001254858449101448, 0.009507966227829456, 0.0022718452382832766, 0.0027493119705468416, -0.028351526707410812, 0.006894826423376799, 0.003985209856182337, -0.003330201143398881, 0.012576163746416569, 0.012252106331288815, 0.0022304763551801443, -0.01150746550410986, 0.03290211036801338, 0.017733493819832802, 0.024917902424931526, 0.018974563106894493, -0.01737496256828308, 0.02788267843425274, -0.003364675445482135, 0.03554972633719444, -0.005798548925668001, -0.024600740522146225, -0.008142789825797081, -0.005443465430289507, -0.014506715349853039, 0.0010256054811179638, -0.004485084675252438, 0.02404915541410446, 0.035136036574840546, -0.01862982101738453, 0.024407686665654182, -0.02261503040790558, -0.009549334645271301, -0.031716201454401016, -0.005236620549112558, 0.016395896673202515, 0.0277999397367239, -0.015513359569013119, 0.007129250559955835, 0.008232423104345798, -0.007515361066907644, -0.013203592970967293, 0.01078350841999054, 0.032764215022325516, -0.011293726041913033, 0.014989352785050869, -0.013968918472528458, 0.005133198574185371, -0.015802942216396332, 0.010652506723999977, -0.007701521273702383, 0.016602741554379463, 0.014947984367609024, 0.0032440158538520336, 0.01223142258822918, 0.004240318201482296, 0.012355528771877289, -0.03458445146679878, 0.001247963635250926, 0.02502821944653988, -0.005708916578441858, 0.007294726558029652, 0.03527393192052841, 0.012989853508770466, 0.015361673198640347, -0.007253357674926519, 0.00919080339372158, -0.041341379284858704, 0.009342489764094353, 0.03808702155947685, 0.026021074503660202, -0.025359172374010086, 0.028379106894135475, 0.014382608234882355, -0.00927354209125042, 0.015747783705592155, -0.017650755122303963, 0.0025131641887128353, -0.01600978709757328, -0.00852890033274889, -0.00012960119056515396, -0.01737496256828308, -0.005653757601976395, -0.017554229125380516, 0.007418833207339048, -0.0072809369303286076, 0.022256499156355858, 0.01321738213300705, 0.03237810358405113, 0.021511858329176903, 0.011086881160736084, 0.0029337487649172544, 0.029951127246022224, 0.004667797591537237, 3.2134335015143733e-06, -0.0022821875754743814, -0.003071645274758339, -0.002587283728644252, 0.0009885457111522555, -0.020849956199526787, 0.0022218578960746527, -0.02204965613782406, 0.03913503512740135, 0.0013375963317230344, 2.081914499285631e-05, 0.022918403148651123, -0.008197948336601257, 0.010369818657636642, -0.00369562697596848, -0.026641609147191048, 0.027524147182703018, -0.000301648658933118, -0.006101921666413546, -0.03632194548845291, -0.012424477376043797, 0.029399540275335312, 0.004223081283271313, 0.024311158806085587, 0.0011238567531108856, -0.011700520291924477, -0.018229922279715538, 0.0006993939750827849, -0.013424227014183998, -0.007611888460814953, 0.05110445246100426, -0.014534294605255127, -0.006560427602380514, 0.0007446412928402424, 0.011011037975549698, 0.022546082735061646, -0.021677333861589432, -0.019250355660915375, 0.04633323475718498, -0.007997998967766762, -0.006470794789493084, -0.007777364458888769, 0.021856600418686867, 0.0009256304474547505, -0.03331580013036728, -0.01665790006518364, -0.02276671677827835, -0.03850071132183075, 0.0032767662778496742, 0.0023080431856215, -0.03560488298535347, 0.008777114562690258, 0.03237810358405113, -0.004016236402094364, -0.029399540275335312, -0.007060302421450615, -0.008515111170709133, -0.007398148998618126, 0.03549456596374512, 0.018712559714913368, -0.0006640579667873681, -0.006305318791419268, -0.019815731793642044, -0.01938825286924839, -0.00607434194535017, -0.022780505940318108, 0.02079479768872261, -0.00348016363568604, -0.005488282069563866, -0.014437766745686531, -0.0015944286715239286, 0.0017314633587375283, 0.0005433984915725887, 0.015016932040452957, -0.0310542993247509, -0.03668047860264778, -0.009707915596663952, -0.00732230581343174, -0.00047401932533830404, -0.007184409070760012, 0.010231922380626202, 0.002854458289220929, 0.04200328141450882, 0.01323806680738926, 0.0075429403223097324, -0.015609887428581715, 0.0074326228350400925, -0.014934194274246693, -0.02071205899119377, -0.0022511607967317104, 0.01152125559747219, 0.019319303333759308, -0.0014798021875321865, 0.017209487035870552, -0.01114203967154026, -0.023194195702672005, -0.0072050937451422215, -0.006312213838100433, 0.009680336341261864, 0.02398020587861538, 0.010411188006401062, 0.0045333486050367355, 0.03508087620139122, -0.008239317685365677, -0.015499570406973362, 0.0059398929588496685, -0.03866618871688843, -0.006767272017896175, 0.031247353181242943, -0.026379605755209923, -0.03921777382493019, -0.0009368345490656793, 0.0019960522186011076, 0.015789153054356575, 0.010500820353627205, -0.00255970424041152, -0.017609387636184692, -0.031550727784633636, -0.026545081287622452, 0.0037611278239637613, -0.016644110903143883, -0.0035749676171690226, -0.010542189702391624, -0.012879535555839539, -0.002645889762789011, 0.0031716201920062304, -0.019333094358444214, -0.0018857350805774331, -0.0288479533046484, -0.02457316219806671, -0.012321054935455322, -0.002980288816615939, 0.017609387636184692, 0.016464846208691597, 0.009011538699269295, 0.019236566498875618, -0.021897969767451286, 0.022601241245865822, 0.010549084283411503, -0.0046850345097482204, 0.0066293757408857346, -0.024711057543754578, -0.0321023128926754, -1.599815186636988e-05, -0.00539175420999527, -0.010349134914577007, -0.023001141846179962, 0.009604493156075478, 0.0018909061327576637, 0.01447913609445095, 0.0039334986358881, 0.0028992744628340006, 0.007832522504031658, 0.028268788009881973, 0.020008787512779236, 0.02209102362394333, 0.004450610373169184, -0.02591075748205185, 0.023759571835398674, -0.009583808481693268, -0.010197448544204235, -0.03701142966747284, -0.019664045423269272, -0.016382107511162758, 0.021856600418686867, 0.012059051543474197, -0.010866246186196804, -0.010390503332018852, -0.018960772082209587, -0.0022356475237756968, 0.0026062445249408484, -0.007611888460814953, 0.04023820906877518, -0.0157339945435524, 0.005443465430289507, 0.027455199509859085, -0.003950735554099083, -0.0005188356735743582, 0.022670188918709755, -0.018464345484972, 0.024766216054558754, 0.019402042031288147, 0.0015565070789307356, 0.027524147182703018, 0.022794296965003014, -0.022173762321472168, -0.03472234681248665, 0.004357530269771814, 0.02490411326289177, 0.03452929109334946, 0.019236566498875618, -0.033729489892721176, -0.020008787512779236, 0.004298924468457699, -0.0011583308223634958, 0.004019683692604303, -0.01806444488465786, -0.004922905936837196, -0.017071589827537537, -0.012969168834388256, 0.009949234314262867, -0.031881678849458694, -0.013727599754929543, -0.02176007255911827, -0.03761817514896393, 0.004054157994687557, 0.02020184136927128, -0.0020425922702997923, -0.010156079195439816, -0.03532909229397774, -0.0023580307606607676, -0.027524147182703018, -0.007177514489740133, -0.017788652330636978, 0.004378214944154024, 0.012265896424651146, 0.020987851545214653, 0.012272791005671024, 0.038804084062576294, 0.03281937539577484, 0.011383358389139175, 0.006260502617806196, -0.009452806785702705, -0.011259251274168491, -0.01581673137843609, 0.005505518987774849, 0.0071568298153579235, -0.0026855350006371737, 0.002716561546549201, 0.01890561357140541, -0.002447663340717554, 0.0007666185265406966, -0.0066397180780768394, 0.021029220893979073, -0.005633073393255472, -0.023800941184163094, -0.044347524642944336, -0.04429236426949501, 0.0005795963807031512, 0.03053029254078865, 0.011224777437746525, 0.010500820353627205, -0.02557980641722679, -0.01496177352964878, 0.028130892664194107, -0.02526264451444149, 0.03353643789887428, 0.0029837361071258783, 0.019939837977290154, -0.0015634018927812576, 0.00391281396150589, 0.005681336857378483, -0.011748784221708775, -0.02369062416255474, 0.004395451862365007, -0.026765717193484306, -0.019939837977290154, 0.01777486316859722, 0.01653379388153553, 0.0028682479169219732, 0.0002320540079381317, 0.01926414482295513, 0.0036025468725711107, -0.0069051687605679035, -0.013734494335949421, 0.004250660538673401, 0.011273041367530823, -0.012541689909994602, -0.013968918472528458, -0.03472234681248665, -0.029427120462059975, -0.037149325013160706, -0.012017682194709778, 0.015775363892316818, 0.017237067222595215, 0.0232907235622406, 0.007598098833113909, -0.03268147632479668, 0.007260252255946398, -0.01098345872014761, 0.03304000943899155, 0.01041808258742094, 0.028654899448156357, 0.027979206293821335, 0.0059157609939575195, -0.02068447880446911, -0.009749284945428371, 0.026944981887936592, -0.02912374772131443, 0.01584431156516075, 0.040569160133600235, -0.02083616517484188, -0.021691124886274338, -0.003940393216907978, -0.008811588399112225, 0.007777364458888769, -0.01934688352048397, 0.023263145238161087, 0.04120348393917084, -0.0015108288498595357, -0.020698269829154015, 0.0035508356522768736, -0.004226528573781252, 0.02607623301446438, -0.03121977485716343, 0.007129250559955835, 0.03008902259171009, -0.013582807965576649, -0.013141538947820663, 0.017733493819832802, 0.013210487551987171, 0.010666296817362309, -0.011011037975549698, 0.025717703625559807, -0.004960827529430389, 0.014396397396922112, -0.009769969619810581, -0.005864049773663282, 0.002942367224022746, 0.016726849600672722, -0.030033864080905914, -0.009335595183074474, 0.014975563623011112, 0.0051228562369942665, -0.0028579055797308683, 0.006719008553773165, -0.007060302421450615, 0.033122748136520386, -0.0055641247890889645, 0.011603993363678455, 0.010824877768754959, 0.012072841636836529, -0.0006269983132369816, -0.004940143320709467, -0.005839918274432421, 0.013065696693956852, -0.011252356693148613, -0.015720205381512642, 0.01221073791384697, -0.02123606577515602, 0.0008450471796095371, 0.007087881676852703, 0.001665962510742247, -0.0279102586209774, -0.0054813870228827, -0.0034094916190952063, 0.01938825286924839, -0.056179046630859375, -0.025607386603951454, 0.005184909328818321, -0.00015933513350319117, 0.02104301005601883, 0.007839418016374111, 0.002713114256039262, 0.015720205381512642, 0.03930051252245903, -0.0028872087132185698, 0.01974678225815296, 0.017761074006557465, -0.00022515917953569442, -0.017485279589891434, 0.02112574875354767, -0.005033223424106836, -0.007935944944620132, 0.009632072411477566, -0.01355522871017456, -0.03668047860264778, -0.00591231370344758, 0.012603743001818657, 0.003518085228279233, -0.029868388548493385, 0.004857405088841915, 0.033122748136520386, 0.005557230208069086, -0.0031354224774986506, -0.002256331965327263, -0.0077842590399086475, 0.019208986312150955, -0.03348127752542496, -0.009632072411477566, 0.014217132702469826, 0.004395451862365007, -0.007287831511348486, -0.0047470880672335625, 0.0038679977878928185, -0.020767217501997948, -0.011155829764902592, -0.0300062857568264, -0.01714053936302662, 0.009694126434624195, 0.00028591984300874174, -0.01918140798807144, -0.0041955020278692245, -0.021594597026705742, -0.022297868505120277, 0.01375517901033163, 0.0074946763925254345, 0.014230921864509583, 0.025455700233578682, 0.010397398844361305, 0.034694768488407135, 0.017568018287420273, 0.016644110903143883, -0.010431872680783272, -0.01886424608528614, -0.006243265233933926, -0.04225149750709534, -0.019457200542092323, -0.006712113507091999, 0.04465089738368988, 0.01661653257906437, -0.006839667912572622, -0.01947098970413208, -0.008997748605906963, -0.06045383960008621, -0.010162974707782269, 0.004488531965762377, 0.006808641366660595, 0.011245462112128735, 0.013520754873752594, 0.02498685196042061, 0.01770591363310814, 0.03497055917978287, 0.02606244385242462, -0.01907109096646309, -0.0027906810864806175, -0.025359172374010086, -0.016120104119181633, 0.04928421974182129, 0.003992104437202215, -0.04440268129110336, -0.00661903340369463, 0.0015116906724870205, -0.00804626289755106, 0.004695376846939325, 0.014658400788903236, -0.008466847240924835, 0.009790653362870216, -0.021222276613116264, 0.008453057147562504, 0.0038128390442579985, 6.862507143523544e-05, -0.006381161976605654, -0.040734633803367615, 0.0009058078285306692, 0.017443910241127014, -0.02312524802982807, -0.0056261783465743065, 0.010673191398382187, 0.02171870321035385, 0.010197448544204235, -0.00890811625868082, -0.01552714966237545, 0.0037232062313705683, 0.011886680498719215, 0.0027424171566963196, -0.014851456508040428, -0.0006726765423081815, 0.008901220746338367, 0.039079878479242325, -0.018229922279715538, -0.011941839940845966, -0.0022752927616238594, -0.0017909312155097723, -0.024724848568439484, 0.018684979528188705, 0.0005477077793329954, -0.017926549538969994, 0.016520004719495773, -0.03430865705013275, 0.004233423620462418, -0.01447913609445095, 0.000496858439873904, -0.014754928648471832, -0.021870389580726624, -0.029509857296943665, 0.014534294605255127, -0.010645612142980099, 0.0054365708492696285, -0.023952627554535866, 0.018767718225717545, -0.001871945452876389, -0.022835666313767433, -0.005536545533686876, 0.02792404778301716, -0.019939837977290154, 0.012217632494866848, 0.0063639250583946705, -0.00283032632432878, -0.021622175350785255, 0.0006088993395678699, 0.014230921864509583, -0.006812088657170534, -0.00977686420083046, 0.2070654332637787, 0.0021735939662903547, 0.020587952807545662, 0.03938324749469757, -0.0006015736144036055, 0.016478635370731354, 0.034253496676683426, 0.0006881898734718561, -0.002532124985009432, 0.013107065111398697, 0.003592204535380006, -0.00732230581343174, -0.017733493819832802, -0.0023718203883618116, 0.004240318201482296, -0.0003089744132012129, -0.027662044391036034, -0.03985209763050079, 0.008956379257142544, -0.006053657736629248, -0.011535044759511948, -0.005619283765554428, -0.048456840217113495, -0.02112574875354767, 0.02586938999593258, -0.010445661842823029, -6.463899626396596e-05, -0.0019719204865396023, 0.0077704694122076035, 0.016437266021966934, -0.03673563525080681, -0.0003356918750796467, 0.01762317679822445, 0.008901220746338367, -0.0007291279034689069, 0.004898774437606335, 0.019457200542092323, -0.016078734770417213, -0.01970541477203369, 0.02461453154683113, 0.010349134914577007, -0.0017176736146211624, -0.005040118005126715, -0.008880537003278732, 0.013637966476380825, -0.0002503683790564537, -0.015596097335219383, 2.9949402232887223e-05, 0.009321805089712143, 0.015830522403120995, -0.014975563623011112, 0.00987339112907648, -0.002287358744069934, 0.0016478635370731354, 0.004984959494322538, -0.0013824127381667495, 0.004926353693008423, -0.004719508811831474, -0.0006261364324018359, 0.017692124471068382, -0.006519058253616095, 0.0293719619512558, 0.009769969619810581, 0.009838917292654514, -0.03508087620139122, 0.021511858329176903, -0.02555222623050213, 0.05237310379743576, 0.022711558267474174, -0.01377586368471384, -0.008542690426111221, -0.017636965960264206, -0.03549456596374512, 0.00015039340360090137, 0.002280463930219412, -0.01653379388153553, 0.0014660124434158206, 0.00418515969067812, 0.02047763392329216, 0.034088023006916046, 0.0005610664957202971, 0.0011772916186600924, -0.0017667992506176233, 0.02018805220723152, -0.004457505419850349, 0.00022580557561013848, 0.03295727074146271, -0.03599099442362785, -0.027013929560780525, -0.009790653362870216, -0.012686480768024921, -0.027744781225919724, -0.035742782056331635, -0.015802942216396332, 0.027138037607073784, -0.01674063876271248, 0.009046012535691261, 0.029013430699706078, -0.01293469499796629, -0.033205483108758926, -0.047684621065855026, 0.0610605850815773, 0.037673331797122955, 0.005522755905985832, -0.02461453154683113, 0.0075015714392066, -0.03174377977848053, 0.0026252050884068012, -0.01043876726180315, -0.0009006367181427777, 0.006781062111258507, -0.03226778656244278, 0.027041509747505188, -0.022504713386297226, 0.003961077891290188, 0.01737496256828308, 0.03157830610871315, -0.007398148998618126, -0.005188357084989548, -0.006918958388268948, -0.010383608750998974, -0.021305013447999954, 0.020974062383174896, 0.0019512359285727143, -0.044512998312711716, -0.036266788840293884, -0.02815847098827362, 0.007032723166048527, -0.007646362762898207, -0.03852828964591026, 0.011900470592081547, -0.008604743517935276, 0.02438010647892952, -0.019374461844563484, 0.008487531915307045, 0.022504713386297226, 0.023828521370887756, -0.016795797273516655, -0.02658645063638687, -0.0137413889169693, 0.0004529039142653346, 0.017719704657793045, 0.025014430284500122, 0.009942339733242989, 0.014437766745686531, -0.02450421266257763, 0.011541939340531826, -0.009528649970889091, -0.007308516185730696, -0.01963646523654461, -0.017788652330636978, 0.022173762321472168, 0.010976564139127731, 0.01661653257906437, 0.00939075369387865, -0.0019926049280911684, -0.0043471879325807095, -0.011424727737903595, -0.0126933753490448, -0.009245962835848331, -0.05634452402591705, 0.0074946763925254345, -0.010631822049617767, -0.018174761906266212, -0.013313909992575645, -0.027220774441957474, -0.17485280334949493, 0.020863745361566544, 0.024435264989733696, -0.01967783458530903, 0.03422591835260391, 0.004529900848865509, 0.028710057958960533, -0.0057744174264371395, 0.011369569227099419, 0.003733548568561673, -0.003957630600780249, 0.007901471108198166, -0.032846953719854355, -0.05071834474802017, 0.013210487551987171, 0.015278935432434082, -0.00017215519619639963, 0.010376714169979095, 0.03607373312115669, 0.0146859809756279, 0.016919903457164764, -0.046802081167697906, -0.0012634769082069397, -0.02152564935386181, 0.0005110790370963514, -0.01534788403660059, -0.007418833207339048, -0.019732993096113205, 0.005633073393255472, -0.021980706602334976, -0.017002642154693604, 0.007163724862039089, 0.015775363892316818, -0.011852206662297249, 0.025124747306108475, 0.0017323251813650131, 0.012355528771877289, 0.006226028315722942, -0.004629875998944044, 0.033564016222953796, 0.03604615479707718, 0.04357530549168587, -0.007839418016374111, 0.00514009315520525, 0.009225278161466122, 0.01254858449101448, -0.0024769664742052555, -0.02542812004685402, 0.008894326165318489, 0.010356029495596886, 0.024669690057635307, 0.0032233314123004675, 0.009397648274898529, -0.019167616963386536, 0.013686230406165123, 0.0018943535396829247, 0.0033801887184381485, 0.0021529095247387886, 0.03497055917978287, -0.009018433280289173, 0.020284580066800117, -0.01657516323029995, -0.0011212711688131094, -0.0004363132466096431, 0.005960577633231878, -0.023621676489710808, -0.00798420887440443, 0.012672691605985165, -0.020698269829154015, 0.007163724862039089, -0.014892824925482273, 0.0045574805699288845, -0.0050608026795089245, 0.018836665898561478, 0.012376213446259499, 0.011679836548864841, -0.02204965613782406, 0.009280436672270298, 0.011659151874482632, -0.014410187490284443, -0.006563874892890453, 0.0174163319170475, -0.026848454028367996, 0.005743390414863825, 0.005322806071490049, -0.0068672471679747105, -0.00048134507960639894, -0.016382107511162758, -0.0004438544565346092, 0.017430121079087257, 0.039438407868146896, -0.028020575642585754, 0.0007885957602411509, -0.006825878284871578, -0.005967472214251757, 0.01357591338455677, 0.006284634582698345, -0.002185659948736429, 0.03392254561185837, 0.01911245845258236, 0.014437766745686531, 0.0018564320635050535, -0.004502321593463421, -0.0022821875754743814, 0.025166116654872894, 0.017885180190205574, -0.02043626643717289, -0.009101171046495438, 0.027413830161094666, -0.012976063415408134, -0.023221775889396667, 0.012589952908456326, 0.007901471108198166, 0.03543940931558609, -0.018078235909342766, 0.013196698389947414, 0.013982708565890789, -0.0011445411946624517, 0.010749034583568573, -0.0025890073738992214, 0.060564156621694565, -0.0002925992012023926, -0.00029647754854522645, 0.02784130908548832, 0.0050366707146167755, -0.02188417874276638, -0.10331208258867264, -0.021180907264351845, 0.01496177352964878, 0.0056882319040596485, -0.014148184098303318, -0.0059778145514428616, -0.00047229562187567353, 0.022421976551413536, -0.029427120462059975, 0.0010997247882187366, -0.02671055868268013, -0.008949484676122665, 0.005281437188386917, 0.003235397394746542, 0.0047987992875278, 0.0024390448816120625, 0.002240818692371249, -0.009804443456232548, 0.010990353301167488, 0.03527393192052841, 0.026338238269090652, 0.010742140002548695, -0.009659651666879654, 0.0198295209556818, -0.015747783705592155, -0.006463899742811918, 0.0009661375661380589, 0.002123606624081731, 0.0034077679738402367, 0.005629625637084246, 0.021746283397078514, 0.007570519577711821, 0.016023576259613037, 0.006539742927998304, -0.012879535555839539, -0.020905114710330963, -0.040293365716934204, -0.0024355973582714796, 0.015623676590621471, -0.03571520000696182, -0.006446662824600935, 0.0033422671258449554, 0.013272540643811226, -0.015099669806659222, -0.012300370261073112, 0.0007157691870816052, 0.005450360476970673, 0.02111195959150791, 0.0008079874678514898, -0.0031957521568983793, 0.0009118408197537065, -0.007591203786432743, -0.019140038639307022, -0.0005722705973312259, 0.014203342609107494, -0.008066946640610695, 0.006081236992031336, 0.021222276613116264, -0.008494426496326923, 0.012196947820484638, -0.003057855647057295, 0.005567572545260191, -0.01162467710673809, 0.017526648938655853, 0.002147738356143236, -0.00732230581343174, -0.02450421266257763, 0.018657401204109192, -0.00739125395193696, -0.00784631259739399, -0.018133394420146942, 0.011934944428503513, -0.027220774441957474, 0.010390503332018852, -0.019043510779738426, 0.010149184614419937, 0.010169869288802147, 0.0011023103725165129, 0.009728600271046162, 0.007163724862039089, -0.018616031855344772, -0.00557101983577013, -0.0037990494165569544, -0.039438407868146896, 0.008273791521787643, 0.0170991700142622, 0.04396141320466995, -0.003616336500272155, 0.013679335825145245, -0.0423893928527832, -0.00041218133992515504, 0.0006007117335684597, -0.045395538210868835, -0.020656900480389595, -0.021580807864665985, 0.009204593487083912, -0.007722205948084593, 0.026007285341620445, 0.007253357674926519, 0.01596841774880886, -0.041617173701524734, -0.006898273713886738, -0.06922405958175659, 0.008784009143710136, 0.014837666414678097, -0.015802942216396332, 0.022752927616238594, -0.04164475202560425, -0.021056801080703735, -0.022311659529805183, 0.016285579651594162, 0.0004214462824165821, -0.027689622715115547, 0.009114961139857769, 0.0011747060343623161, -0.029620174318552017, -0.012403792701661587, -0.012886431068181992, 0.023869888857007027, -0.005343490745872259, 0.0031923046335577965, 0.031716201454401016, 0.0010178487282246351, 0.0072809369303286076, 0.004212738946080208, 0.02007773518562317, -0.032322946935892105, -0.017168117687106133, 0.017871391028165817, 0.03215746954083443, -0.0024149129167199135, -0.003726653754711151, -0.001418610569089651, -0.021856600418686867, -0.021939337253570557, 0.0019236565567553043, 0.004005894064903259, 0.00566065264865756, 0.024669690057635307, -0.00020695252169389278, 0.024393895640969276, 0.017692124471068382, -0.019002141430974007, -0.018560873344540596, 0.03339853882789612, -0.0039300513453781605, -0.028268788009881973, -0.0009859602432698011, 0.006139843259006739, 0.0015711586456745863, 0.02807573415338993, 0.009046012535691261, 0.02819984033703804, 0.008515111170709133, -0.018574662506580353, -0.019664045423269272, -0.031550727784633636, -0.01482387725263834, 0.009356279857456684, 0.027468988671898842, -0.022297868505120277, -0.004426478408277035, 0.03077850490808487, 0.01613389328122139, 0.012645111419260502, -0.01991225965321064, 0.010066446848213673, -0.01907109096646309, -0.04211360216140747, 0.005153882782906294, -0.004250660538673401, -0.021773861721158028, -0.04147927463054657, -0.011107565835118294, 0.011803942732512951, 0.0016056327149271965, -0.003712864127010107, 0.0017090551555156708, -0.016961272805929184, 0.0041334484703838825, -0.010156079195439816, -0.002471795305609703, 0.005584809463471174, -0.03822491690516472, -0.002897550817579031, -0.00031112905708141625, 0.03033723682165146, 0.027413830161094666, -0.005136645864695311, 0.042334236204624176, 0.021815231069922447, -0.009542440064251423, -0.028489423915743828, 0.0024390448816120625, -0.013231172226369381, 0.006077789701521397, 0.0004397606535349041, 0.011672941036522388, -0.01289332564920187, 0.023097669705748558, 0.015775363892316818, 0.01955372840166092, 0.0081841591745615, 0.018119603395462036, 0.02123606577515602, -0.0008558203699067235, 0.0034025968052446842, 0.02788267843425274, 0.00593299837782979, 0.002227029064670205, 0.0013393200933933258, 8.500028343405575e-05, -0.022215131670236588, -0.002270121593028307, -0.015802942216396332, 0.037838809192180634, 0.006463899742811918, 0.00369562697596848, 0.019926048815250397, -0.02007773518562317, -0.010266397148370743, 0.0144239766523242, 0.010873141698539257, 0.007818733341991901, 0.02631065808236599, -0.011335094459354877, 0.023607885465025902, 0.028296368196606636, -0.00838410947471857, -0.0014901444083079696, -0.01482387725263834, -0.020505214110016823, 0.02610381320118904, 0.012403792701661587, -0.009383859112858772, -0.017278434708714485, -0.002764825476333499, -0.01942962035536766, -0.014589453116059303, 0.012038366869091988, -0.013444911688566208, 0.09128750115633011, 0.004822931252419949, -0.022421976551413536, -0.022697769105434418, -0.04244455322623253, 0.013100170530378819, -0.012314160354435444, 0.017002642154693604, -0.030502712354063988, -0.04983580484986305, 0.031881678849458694, -0.011597097851336002, -0.01963646523654461, -0.015596097335219383, 0.0016056327149271965, 0.0025010984390974045, -0.023787152022123337, 0.018616031855344772, -0.005150435492396355, 0.0011807390255853534, 0.02964775450527668, 0.00038438657065853477, 0.008411688730120659, -0.023745782673358917, -0.017085380852222443, -0.0038611029740422964, 0.031192194670438766, -0.0006636270554736257, -0.025331592187285423, -0.03888682276010513, 0.02320798672735691, 0.001195390592329204, -0.012631322257220745, -0.0022528846748173237, -0.0075015714392066, 0.01781623251736164, 0.018767718225717545, -0.028268788009881973, 0.01938825286924839, 0.023663043975830078, 0.0003119909088127315, -0.009232172742486, -0.005443465430289507, -0.03472234681248665, 0.02683466486632824, 0.0001581500837346539, 0.009701021015644073, -0.018767718225717545, -0.0065052686259150505]"
How We Optimized Dragonfly to Get 30x Throughput with BullMQ,How We Optimized Dragonfly to Get 30x Throughput with BullMQ,"Howdy! I am Shahar, a software engineer at DragonflyDB. Today, I'm thrilled to share an exciting journey we embarked on  optimizing [Dragonfly](https://www.dragonflydb.io/) for [BullMQ](https://bullmq.io/), which resulted in a staggering 30x increase in throughput. While I won't be delving into code snippets here (you can check out all the changes on our [GitHub](https://github.com/dragonflydb/dragonfly)), I'll take you through the high-level optimizations that made this achievement possible. We believe these enhancements not only mark a significant milestone for Dragonfly but also represent great performance benefits for users of BullMQ.  So, if you're interested in the behind-the-scenes of database performance tuning and what it takes to achieve such a massive throughput improvement, you're in the right place. Let's get started.  ## Introduction  BullMQ is a popular, robust, and fast Node.js library for creating and processing background jobs that uses Redis as a backend. Redis backends are a common choice for frameworks, providing low latency, comprehensive data structures, replication, and other useful features. However, applications using Redis are limited by its throughput. Dragonfly is a drop-in replacement for Redis designed for much higher throughput and easier deployments.  In a [previous blog post](https://www.dragonflydb.io/blog/running-bullmq-with-dragonfly-part-1-announcement), we announced the full compatibility of Dragonfly with BullMQ and showed how to run BullMQ with Dragonfly efficiently in a few simple steps. In this post, we'll elaborate the optimizations we made to achieve the stunning 30x performance improvements.  ---  ## Benchmark Baseline  Before we optimize anything, it's essential to establish a reliable benchmarking baseline. For BullMQ, which offers its users a robust queue API for adding and processing jobs, our focus was on optimizing the **throughput** for the `add-job` operation. Collaborating closely with the BullMQ team, we developed a [benchmarking tool](https://github.com/taskforcesh/bullmq-concurrent-bench). This tool is tailored to measure the rate at which messages can be added to queues per second  a crucial metric for understanding the performance of BullMQ while running on different backends.  ### Our Benchmarking Approach  - We focus on adding messages (i.e., `add-job` operations). The rationale is straightforward: additions are less influenced by the fluctuating state of the queue. Unlike reading from queues, which can be delayed if queues are temporarily empty, adding messages offers a more stable and measurable performance indicator. - To push Dragonfly to its limits, we employed Node.js's worker threads, enabling us to leverage real OS threads to run on multiple CPUs in parallel. This approach simulates a high-load environment more effectively than a single-threaded setup. - Another key aspect of our testing environment was the hardware configuration. We intentionally used a more powerful machine for the client code (running BullMQ) compared to the machine running Dragonfly. This ensures that the client side is never the bottleneck, allowing us to accurately assess Dragonfly's raw performance.  Of course, if your workload requires higher throughput than shown in this post, you could use stronger machines. Dragonfly is all about scaling, both vertically and horizontally. As a baseline performance, let's benchmark how many `add-jobs/sec` Redis can achieve:  | Backend   | `add-jobs/sec` | |-----------|----------------| | Redis 6.2 | 71,351         | | Redis 7.2 | 76,773         |  ###  Benchmark with Redis Cluster  Scaling in Redis typically involves setting up a Redis Cluster. Note that minor changes are needed to get the benchmark to work against the Redis Cluster, as one has to use a cluster-aware Redis client. We conducted our tests using an 8-node Redis Cluster, all hosted on a single machine equipped with 8 CPUs.  | Backend           | `add-jobs/sec` | |-------------------|----------------| | Redis 6.2         | 71,351         | | Redis 7.2         | 76,773         | | **Redis Cluster** | **194,533**    |  As shown above, the Redis Cluster reaches much higher throughput than a single node.  ---  ## Global Locks  Running BullMQ on Dragonfly doesn't work right away, but with [a few steps](https://www.dragonflydb.io/docs/integrations/bullmq), you can get it up and running smoothly. To grasp this integration challenge, let's look at how BullMQ uses Redis. BullMQ leverages Lua scripts for executing Redis commands efficiently. These scripts are advantageous because they reduce network latency and allow multiple commands to execute atomically.  However, the way BullMQ executes these scripts presents a hurdle. Despite [Redis requiring that Lua script invocations specify all the keys used by the script](https://redis.io/docs/interact/programmability/lua-api/#the-keys-global-variable), it does not enforce this requirement, and accessing such undeclared keys from Lua scripts ""just works"" in Redis. This flexibility in Redis contrasts sharply with Dragonfly's design.  Dragonfly's architecture is fundamentally different. It adopts a multi-threaded, shared-nothing approach, meaning **keys are spread and not shared across Dragonfly threads**. We have a state of the art transactional framework built on top of this architecture, which allows running operations on keys that belong to different threads.  The challenge arises with Lua scripts from BullMQ that contain undeclared keys. Dragonfly's mechanism involves locking all declared keys **prior** to executing a Lua script. It then strictly prohibits accessing undeclared keys during script execution, as they could be part of other parallel transactions.  ![transactions](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/01-transactions.png)  Let's consider an example to illustrate the challenge with Dragonfly and undeclared keys. As shown above, imagine a transaction, `Tx1`, which is set to access keys `key0`, `key1`, and `key2`. In Dragonfly's architecture, `Tx1` cannot access other keys, such as `key3`, because it needs to ensure they are not locked by another transaction like `Tx2`. Attempting to access an undeclared key like `key3` could disrupt the integrity of `Tx2`.  Accessing undeclared keys is common, and many Redis-based frameworks rely on this practice. To accommodate this, Dragonfly can be configured to handle these scenarios. By using the `--default_lua_flags=allow-undeclared-keys` flag, Dragonfly treats Lua scripts as global transactions. This means the script has access to the entire datastore, locking it completely for its duration.  However, this solution comes with its own set of challenges. While it allows scripts to access all keys (including the undeclared ones), it also restricts parallelism. No other commands or scripts can run alongside a global transaction, even if they involve completely different keys. Moreover, the situation is further complicated by Dragonfly's multi-threaded nature. One might think that, using this mode, Dragonfly will have similar performance characteristics to Redis. However, because keys in Dragonfly are owned by different threads, Dragonfly has to schedule the work between their respective threads (we call these **""hops""**), which adds significant latency.  ![global-locks](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/02-global-locks.png)  Here are the results of running Dragonfly with global locks:  | Backend                       | `add-jobs/sec` | Notes                  | |-------------------------------|----------------|------------------------| | Redis 6.2                     | 71,351         |                        | | Redis 7.2                     | 76,773         |                        | | Redis Cluster                 | 194,533        |                        | | **Dragonfly w/ Global Locks** | **7,697**      | **Dragonfly Baseline** |  As demonstrated, using global locks in Dragonfly, while necessary for compatibility with certain Lua scripts, leads to a noticeable drop in throughput. However, this is just the start of our journey, let's start optimizing!  ---  ## Rollback Mechanism: A Path Not Taken  One of the initial thoughts we considered was a new approach for running Lua scripts, which we called the ""try-lock-rollback"" mode. In this mode, Lua scripts would work normally until they attempted to access an undeclared key. When they do, Dragonfly will try to lock that key. If the lock is successful, meaning no other command or script is using the key, the script would proceed as intended.  However, the challenge arises if the lock attempt does **not** succeed. If we can't acquire the lock (because another command or script is using the key), Dragonfly would then roll back any changes made by the script so far. Following the rollback, it would attempt to run the script again from the beginning, this time possibly pre-locking the keys that caused the failure in the previous attempt.  This is an elegant solution that provides a generic way for running all Lua scripts (BullMQ or otherwise), but it has two major disadvantages:  - **Performance Impact on the Happy Path**: Implementing this would require tracking every change made by every script, just in case a rollback is needed. This tracking would be necessary even for scripts that don't access undeclared keys or where undeclared keys are successfully locked. Essentially, this means slowing down the usual, rollback-free operations, which is known as the ""common path"" or ""happy path"". - **Risk of Snowball Effect & Deadlocks**: In scenarios where keys are frequently contended, this approach could lead to a series of rollbacks and retries, creating a bottleneck and significantly impacting performance. Under extreme conditions, this could even lead to deadlocks.  Given these considerable disadvantages, we ultimately decided not to pursue this option.  ---  ## Hashtags to the Rescue  While we might not know every specific key a script will use, we do know something about their structure. In the case of BullMQ, all keys share a common string pattern. Users can define a prefix, like the default `bull:`, followed by a queue name. This forms a consistent prefix for all keys related to a specific queue (for instance, `bull:queue:123`). Our initial thought was to implement some form of prefix locking based on this pattern. However, we then considered a more refined solution: [hashtags](https://redis.io/docs/reference/cluster-spec/#hash-tags).  Hashtags are a Redis Cluster feature. They involve wrapping a part of a key in curly braces `{}`, which ensures that all keys with the same hashtag are located on the same cluster node. For example, keys `{user1}:name` and `{user1}:email` are guaranteed to reside on the same node, allowing them to be efficiently used together in commands or scripts.  Recognizing that BullMQ already utilizes hashtags for Redis Cluster operations, we adopted this concept for Dragonfly as well. We introduced a new server flag (`--lock_on_hashtags`) where Dragonfly locks based on the hashtag rather than the entire key. This approach allows us to maintain the atomicity and isolation of script executions while avoiding the performance penalties associated with global locks or the complexities of the rollback mechanism.  ![hashtags](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/03-hashtags.png)  Implementing the hashtag-locking method in Dragonfly has several key advantages:  - **Ease of Integration for BullMQ**: It allows BullMQ to work with Dragonfly by not specifying the exact keys which will be used, but only the queue name itself, which is always known. This simplification greatly streamlines the integration process. - **Reduced Cross-Thread Coordination**: By ensuring that all keys associated with a particular queue are handled by the same thread in Dragonfly, the need for cross-thread coordination is significantly diminished. We will cover more on this in the following sections.  However, there is a trade-off to consider, which is the **limitation on parallelization within a single queue**. While individual Lua scripts run serially, two different scripts can usually run in parallel if they involve keys managed by different threads. Under the hashtag-locking system, all keys of a specific queue are allocated to the same thread in Dragonfly. This means that parallel execution of operations within the same queue is not possible. However, we saw that all common BullMQ operations use a specific subset of keys, so they couldn't be parallelized anyway.  | Backend                        | `add-jobs/sec` | Notes                         | |--------------------------------|----------------|-------------------------------| | Redis 6.2                      | 71,351         |                               | | Redis 7.2                      | 76,773         |                               | | Redis Cluster                  | 194,533        |                               | | Dragonfly w/ Global Locks      | 7,697          | Dragonfly Baseline            | | **Dragonfly w/ Hashtag Locks** | **17,403**     | **~2.26x Dragonfly Baseline** |  Our first optimization gave us around 126% increase, which is a nice start. Also, it's notable that we decided to disable hashtag-locking by default, but Dragonfly users can turn it on via the `lock_on_hashtags` flag.  ---  ## Reducing Number of Hops  ### Reducing Number of Hops for Commands  As mentioned a couple of times, Dragonfly is multi-threaded. We also handle incoming connections using multiple threads, where each connection is assigned a single thread randomly. This means that when BullMQ connects to a Dragonfly instance with 8 threads, it has a 1/8 chance of ""landing"" on the thread that owns its queue. In 7/8 of cases, the connection thread (internally called the coordinator thread) will attempt to run each command on the target thread separately. A script that tries to run 100 commands will require a ""hop"" to the target thread to lock the key, another 100 hops to run each of the commands, and another final hop to unlock the key. Each hop has a latency cost (as well as some minimal coordination overhead), which adds up. To mitigate that, we added a check to see if all the operations of a script are being done on a single (remote) thread. If they are, we perform a single hop to the target thread and run the script there. This turns those 100 hops, 1 per command, to 1 hop for all commands.  ![reduce-hops-1](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/04-reduce-hops-1.png)  | Backend                                  | `add-jobs/sec` | Notes                         | |------------------------------------------|----------------|-------------------------------| | Redis 6.2                                | 71,351         |                               | | Redis 7.2                                | 76,773         |                               | | Redis Cluster                            | 194,533        |                               | | Dragonfly w/ Global Locks                | 7,697          | Dragonfly Baseline            | | Dragonfly w/ Hashtag Locks               | 17,403         | ~2.26x Dragonfly Baseline     | | **Dragonfly w/ Reduced Hops (Commands)** | **53,011**     | **~6.98x Dragonfly Baseline** |  With this optimization, Dragonfly achieved another 200% increase on top of hashtag-locking and reached 6.98x the baseline.  ### Reducing Hops Further for Scripts  After reducing hops for each command, we looked at the rest of the hops. We had 3 hops for each **script invocation**, no matter how many commands it issued:  1. Lock keys. 2. Run the Lua script to read/modify keys. 3. Unlock keys.  We then modified our Lua invocation flow to run all steps under a single hop (lock, run, unlock).  ![reduce-hops-2](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/05-reduce-hops-2.png)  | Backend                                  | `add-jobs/sec` | Notes                          | |------------------------------------------|----------------|--------------------------------| | Redis 6.2                                | 71,351         |                                | | Redis 7.2                                | 76,773         |                                | | Redis Cluster                            | 194,533        |                                | | Dragonfly w/ Global Locks                | 7,697          | Dragonfly Baseline             | | Dragonfly w/ Hashtag Locks               | 17,403         | ~2.26x Dragonfly Baseline      | | Dragonfly w/ Reduced Hops (Commands)     | 53,011         | ~6.98x Dragonfly Baseline      | | **Dragonfly w/ Reduced Hops  (Scripts)** | **122,890**    | **~15.97x Dragonfly Baseline** |  Again, by reducing the number of hops on the script level, we achieved another 132% increase, reaching 15.97x the baseline.  ---  ## Connection Migration  Previously, I highlighted that, for an 8-thread Dragonfly server, the probability of a connection hitting the target thread is 1/8, and this likelihood decreases as the number of threads increases. When a connection tries to execute a script (or even a simple command) on a remote thread, it has to request that thread to run some code. Then it waits for that thread to become free, which may take some time.  To improve this situation, we've developed a connection migration mechanism. Currently, this feature is specifically tailored to BullMQ, where each queue typically doesn't share its connection with others. However, it holds potential benefits for other frameworks as well.  Migrating connections to other threads is a subtle process, as Dragonfly uses thread-local variables quite intensively, but this saves the last hop, getting us to a place where connections **seamlessly** use their target threads. We like this feature so much that we even enabled it by default. It could, however, be disabled by running Dragonfly with `--migrate_connections=false`.  | Backend                               | `add-jobs/sec` | Notes                          | |---------------------------------------|----------------|--------------------------------| | Redis 6.2                             | 71,351         |                                | | Redis 7.2                             | 76,773         |                                | | Redis Cluster                         | 194,533        |                                | | Dragonfly w/ Global Locks             | 7,697          | Dragonfly Baseline             | | Dragonfly w/ Hashtag Locks            | 17,403         | ~2.26x Dragonfly Baseline      | | Dragonfly w/ Reduced Hops (Commands)  | 53,011         | ~6.98x Dragonfly Baseline      | | Dragonfly w/ Reduced Hops  (Scripts)  | 122,890        | ~15.97x Dragonfly Baseline     | | **Dragonfly w/ Connection Migration** | **189,756**    | **~24.65x Dragonfly Baseline** |  ---  ## Round Robin Key Placement  Here comes the final optimization we have made so far in this journey. In Dragonfly, the distribution of keys (or queues) across threads is determined by their hash values, akin to a random distribution. This approach typically ensures an even load distribution when there are many keys, as it balances the computational load across all threads.  However, consider a situation where an 8-thread Dragonfly server is managing just 8 queues. In an ideal scenario, each thread would handle one queue, leading to a perfectly balanced load and optimal performance. But due to the random nature of key distribution based on hashing, achieving such an even distribution is [very unlikely](https://en.wikipedia.org/wiki/Balls_into_bins_problem). When the distribution of queues across threads is uneven, it results in inefficient use of resources: some threads may be idle while others become bottlenecks, leading to suboptimal performance.  That is exactly why we implemented a very cool feature we call ""shard round-robin"". By using `--shard_round_robin_prefix=queue`, keys that start with `queue` will be distributed between the threads one by one, guaranteeing a near-even distribution of workloads. This feature is relatively new, and you should note that:  - Currently, this feature is only available for keys using hashtags, so in the example above, the key `bull:{queue1}` will use round-robin, while `queue1` will **not**. - This feature should **usually** be disabled. It is useful only in cases of a small number of hashtags (like BullMQ queues) which are highly contended. If you use many keys (like in most Dragonfly use cases), do not use the feature, as it will in fact hurt performance.  ![round-robin](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/06-round-robin.png)  By this point, we've achieved a 30x increase in throughput from the baseline, which is a huge improvement!  | Backend                              | `add-jobs/sec` | Notes                          | |--------------------------------------|----------------|--------------------------------| | Redis 6.2                            | 71,351         |                                | | Redis 7.2                            | 76,773         |                                | | Redis Cluster                        | 194,533        |                                | | Dragonfly w/ Global Locks            | 7,697          | Dragonfly Baseline             | | Dragonfly w/ Hashtag Locks           | 17,403         | ~2.26x Dragonfly Baseline      | | Dragonfly w/ Reduced Hops (Commands) | 53,011         | ~6.98x Dragonfly Baseline      | | Dragonfly w/ Reduced Hops  (Scripts) | 122,890        | ~15.97x Dragonfly Baseline     | | Dragonfly w/ Connection Migration    | 189,756        | ~24.65x Dragonfly Baseline     | | **Dragonfly w/ Shard Round Robin**   | **253,075**    | **~32.87x Dragonfly Baseline** |  To put this chart into visualizations, it is notable that Dragonfly outperforms an 8-instance Redis Cluster on the same hardware. In the meantime, this optimization is much harder to implement using a Redis Cluster, as the key distribution is built into both Redis and Redis Cluster client libraries. Instead, users of Redis may have to move cluster slots between the nodes to enforce an even distribution.  ![benchmarks](/assets/blog/running-bullmq-with-dragonfly-part-2-optimization/07-benchmarks.png)  ---  ## Conclusion  In this post, we've taken a glimpse into our journey of integrating BullMQ with Dragonfly with a series of optimizations. Each step on this path was guided by our commitment to achieving exceptional performance, ensuring that Dragonfly stands ready to handle the most demanding loads from BullMQ users.  The journey has been both challenging and rewarding, leading to developments that not only benefit BullMQ but also have the potential to enhance the performance of other Redis-based frameworks. Dragonfly is committed to embracing the open-source community and broadening the ecosystem. More integrations and frameworks will be tested with Dragonfly and released in the future. As always, [start trying Dragonfly in just a few steps](https://www.dragonflydb.io/docs/getting-started) and build amazing applications!  ---  ## Appendix - Benchmark Setup & Details  Here are some technical details for those who wish to reproduce the benchmarks:  - All benchmarks in this post are done on the same machine, one after the other. We chose an AWS EC2 `c7i.2xlarge` 8-CPU instance for running Dragonfly or Redis, and a monstrous `c7i.16xlarge` 64-CPU instance for running BullMQ. - Operating system: Ubuntu 23.04, Linux kernel 6.2.0 - All client-side invocations use [this tool](https://github.com/taskforcesh/bullmq-concurrent-bench) with the following command, which uses 8 queues and 16 threads on the BullMQ side:  ``` tsc index.ts && node index.js -h <server_ip> -p 7000 -d 30 -r 0 -w 16 -q 8 ```","[-0.020548393949866295, 0.006860122550278902, -0.010032618418335915, -0.01926944963634014, -0.0011093077482655644, 0.009798144921660423, -0.030950486660003662, -0.0057303872890770435, -0.036975741386413574, -0.028349963948130608, -0.0008099989499896765, -0.0028989436104893684, -0.006423149723559618, -0.012348931282758713, 0.0033394694328308105, 0.016086295247077942, 0.010061039589345455, -0.012796562165021896, 0.009009461849927902, -0.018715238198637962, -0.00819235760718584, -0.0011927945306524634, -0.010196039453148842, 0.016910504549741745, -0.02547944150865078, 0.010451829060912132, 0.0372031107544899, 0.0005080256378278136, -0.00935051403939724, 0.016342084854841232, 0.016001032665371895, 0.014096823520958424, -0.02826470136642456, 0.004859993699938059, -0.03473048284649849, -0.02017892152070999, 0.015105769969522953, 0.01729418896138668, 0.02108839340507984, 0.008448147214949131, 0.027468912303447723, -0.00879630446434021, 0.0002804354880936444, -0.020548393949866295, -0.02123049832880497, 0.013542613945901394, 0.011510511860251427, -0.016086295247077942, 0.01314472034573555, -0.01577366329729557, 0.013933403417468071, 0.01460840180516243, -0.023902075365185738, 0.014949453994631767, 0.0026147335302084684, 0.010871038772165775, 0.007453411351889372, 0.006593675818294287, 0.00725446455180645, -0.003779995022341609, 0.011858669109642506, 0.034247323870658875, -0.013151825405657291, 0.01583050563931465, -0.011062880046665668, -0.006153149995952845, -0.019439974799752235, -0.0117805115878582, 0.012988404370844364, -0.017677871510386467, 0.01769208163022995, 0.024228915572166443, 0.0029238120187073946, -0.0012158865574747324, 0.0245131254196167, -0.018416818231344223, -0.017322609201073647, -0.003893679240718484, 0.017706293612718582, -0.012562088668346405, 0.012725509703159332, 0.01642734743654728, -0.016967346891760826, 0.02846364676952362, -0.009265251457691193, 0.03154732659459114, -0.027511542662978172, 0.012064721435308456, -0.011538932099938393, 0.010004197247326374, -0.008071568794548512, 0.0009680908406153321, 0.001107531483285129, -0.0013100311625748873, -0.001356215332634747, 0.0004407477972563356, -0.01541840098798275, 0.010323934257030487, -0.01571682095527649, -0.014622612856328487, -0.019496817141771317, -0.02437102049589157, -0.00978393480181694, -0.016043663024902344, -0.02830733172595501, -0.01094209123402834, 0.0029717725701630116, 0.011403932236135006, 0.021116815507411957, -0.0013748666970059276, -0.003687626915052533, 0.011332879774272442, 0.01074314396828413, -0.028634173795580864, -0.005982623901218176, -0.010302618145942688, 0.012519457377493382, -0.009357619099318981, 0.021955234929919243, -0.008114200085401535, 0.04251784086227417, 0.008810514584183693, 0.02795206941664219, -0.01840260811150074, 0.00972709245979786, -0.0007988970028236508, -0.00605367636308074, -0.012611825950443745, 0.016199979931116104, -0.007030648645013571, -0.0021209183614701033, 0.021855762228369713, 0.008632883429527283, -0.0038261793088167906, -0.007375253830105066, 0.002699996577575803, -0.004568678326904774, -0.019383132457733154, -0.018871555104851723, -0.006114071235060692, -0.004380389116704464, 0.021258920431137085, -0.003383877221494913, -0.041182052344083786, -0.02623259834945202, 0.03143364191055298, 0.010267091915011406, 0.01276814192533493, 0.018928397446870804, -0.021415235474705696, -0.012263668701052666, -0.022608919069170952, -0.000320624589221552, 0.018587345257401466, 0.011865774169564247, 0.02123049832880497, -0.013563930056989193, 0.007773147895932198, -0.011133933439850807, -0.012164195068180561, 0.031007329002022743, 0.01688208431005478, -0.008732357062399387, 0.0014006232377141714, 0.013613666407763958, 0.025507861748337746, 0.02972838282585144, -0.028179436922073364, 0.006551044061779976, -0.03188838064670563, 0.021102603524923325, 0.018971027806401253, -0.02482575736939907, 0.0362936370074749, 0.010657881386578083, 0.011411038227379322, -0.003572166431695223, 0.0035224296152591705, 0.00030752428574487567, -0.012647352181375027, 0.00489196740090847, -0.0033430219627916813, 0.008696830831468105, 0.02992733009159565, -0.03393469378352165, -0.004724993836134672, -0.024129442870616913, -0.0281510166823864, -0.001650195219554007, -0.004064205102622509, -0.008099989965558052, 0.015119980089366436, -0.026261018589138985, -0.02087523601949215, -0.5952497720718384, -0.0016768398927524686, 0.003538416465744376, -0.02688628062605858, -0.026118913665413857, -0.011894195340573788, 0.00546038756147027, 0.009975777007639408, 0.0020694052800536156, 0.021017340943217278, -0.007346832659095526, 0.005368019454181194, 0.012455509975552559, -0.016086295247077942, -0.021770497784018517, -0.0020747340749949217, 0.026417333632707596, -0.023376286029815674, -0.0009512158576399088, -0.008405515924096107, -0.03342311456799507, 0.01207893155515194, 0.027767332270741463, 0.012725509703159332, -0.002428220584988594, 0.008561830967664719, 0.002254141727462411, -0.005332493223249912, 0.004053547512739897, 0.016441557556390762, -0.03714626654982567, 0.00508025661110878, 0.02067628875374794, 0.004128152504563332, 0.048656780272722244, -0.009123146533966064, -0.0326557457447052, 0.017734713852405548, -0.001754109631292522, 0.03737363591790199, -0.010466039180755615, -0.02613312378525734, 0.026303650811314583, -0.0075528849847614765, 0.0016111163422465324, 0.005151309072971344, 0.0480315163731575, -0.02547944150865078, -0.012071826495230198, -0.00879630446434021, -0.014977875165641308, -0.006092755123972893, 0.02204049751162529, -0.0025241414550691843, -0.0199657641351223, -0.006884991191327572, 0.04504730924963951, -0.008554725907742977, 0.018288923427462578, -0.009243935346603394, 0.009769724681973457, 0.017919450998306274, -0.021457867696881294, -0.022068919613957405, -0.022310497239232063, -0.018075766041874886, -0.002612957265228033, -0.022211024537682533, 0.007101701572537422, -0.018132608383893967, 0.025195231661200523, -0.009684461168944836, 0.006792622618377209, -0.0024726283736526966, 0.006554597057402134, 0.02658786065876484, 0.02987048774957657, -0.016612084582448006, 0.0019148659193888307, 0.03328100964426994, 0.015603138133883476, -0.012782352045178413, -0.016256820410490036, -0.012547878548502922, 0.04700836166739464, -0.0005786341498605907, -0.028648383915424347, -0.01850208081305027, 0.007101701572537422, 0.00468946760520339, 0.001733682001940906, 0.027937859296798706, -0.027667859569191933, -0.010153408162295818, 0.02780996449291706, 0.02866259403526783, -0.010267091915011406, -0.014295770786702633, 0.010963407345116138, -0.014246034435927868, -0.014807349070906639, -0.022637339308857918, -0.008021831512451172, 0.010750249028205872, 0.03706100583076477, 0.0007855746662244201, -0.02780996449291706, 0.006586570292711258, 0.03367890417575836, -0.012228142470121384, 0.003074798732995987, -0.007631042972207069, -0.029898907989263535, -0.010124986991286278, 0.0239731278270483, -0.030609434470534325, 0.023532601073384285, -0.010316829197108746, 0.023575233295559883, -0.013734456151723862, 0.010814196430146694, -0.007091043516993523, 0.0190562903881073, -0.0001209003385156393, -0.012391562573611736, 0.006192228756844997, 0.0027461806312203407, -0.020591026172041893, 0.0003781327395699918, 0.01794787123799324, -0.001059571048244834, -0.02906048856675625, 0.023035233840346336, -0.0028225621208548546, 0.03376416862010956, -0.02233891934156418, 0.01662629470229149, -0.00683880690485239, 0.020292606204748154, -0.026857860386371613, 0.0012034523533657193, -0.007623937446624041, 0.006224202457815409, -0.0239731278270483, -0.01617155782878399, -0.011432353407144547, -0.028676806017756462, -0.0055634137243032455, 0.01688208431005478, -0.010394986718893051, 0.0070199910551309586, -0.01056551281362772, -0.00451183645054698, 0.013578140176832676, -0.02168523520231247, 0.016910504549741745, -0.04382520541548729, -0.02609049342572689, 0.0004316441772971302, -0.022765234112739563, 0.00235716812312603, 0.04027257859706879, -0.018161028623580933, 0.00449762586504221, -0.034304168075323105, -0.018487870693206787, -0.023063654080033302, 0.014722086489200592, -0.00564867677167058, -0.013393403962254524, -0.009791039861738682, -0.011965247802436352, 0.0005901801632717252, -0.0021155893336981535, -0.004881309345364571, -0.001540952012874186, -0.019724184647202492, 0.001774537144228816, -0.014182087033987045, -0.0031849301885813475, 0.01286761462688446, 0.0167826097458601, 0.005005651619285345, -0.024172073230147362, 0.04240415617823601, 0.013208666816353798, 0.011084196157753468, 0.02188418246805668, -0.008320252411067486, 0.01961050182580948, 0.001452136319130659, 0.019979974254965782, -0.026715755462646484, -0.011951037682592869, -0.013926297426223755, -0.012846299447119236, 0.017606819048523903, -0.01538997981697321, 0.005421308800578117, 0.020818393677473068, 0.022765234112739563, 0.0027088781353086233, 0.012398668564856052, -0.012881825678050518, -0.021571550518274307, -0.019582079723477364, 0.004010915756225586, -0.001110195997171104, 0.032286275178194046, -0.0019486158853396773, 0.00705196475610137, 0.0009680908406153321, 0.004270257893949747, -0.004842230584472418, 0.0009725316194817424, 0.017805766314268112, -0.016342084854841232, -0.004558020271360874, -0.012086036615073681, -0.00011174122482771054, 0.008867356926202774, 0.004849335644394159, 0.007723411079496145, 0.01577366329729557, 0.010707617737352848, 0.012022090144455433, 0.005989728961139917, 0.024740494787693024, 0.022083129733800888, -0.0014583533629775047, -0.0024779574014246464, 0.017962081357836723, 0.0035650611389428377, -0.007901042699813843, 0.022836286574602127, 0.015603138133883476, 0.010849722661077976, -0.003597034839913249, 0.030069435015320778, -0.04126731678843498, 0.020505763590335846, 0.017365241423249245, 0.012640247121453285, -0.022608919069170952, 0.019539449363946915, 0.005506571847945452, 0.015318927355110645, 0.005812097806483507, 0.0008344232919625938, 0.00957788247615099, -0.005449729971587658, 0.0040926262736320496, 0.013329456560313702, -0.014032877050340176, 0.011332879774272442, -0.02557891421020031, 0.0025774308014661074, 0.022665759548544884, 0.03180311620235443, 0.005684203002601862, 0.020690498873591423, 0.02795206941664219, 0.028577331453561783, 0.004867099225521088, 0.022154182195663452, -0.007282885257154703, -0.017663661390542984, -0.010423407889902592, -0.012221036478877068, -0.012434194795787334, -0.004060652572661638, -0.012235247530043125, -0.018999449908733368, -0.03782837092876434, 0.032286275178194046, 0.0042240736074745655, 2.783816307783127e-05, 0.01349998265504837, -0.007723411079496145, 0.02482575736939907, -0.024783125147223473, -0.028747858479619026, 0.022154182195663452, 0.0024601942859590054, -0.009435777552425861, -0.022893128916621208, -0.00017263546760659665, 0.029032068327069283, -0.001434373203665018, 0.005804992746561766, 0.005321835167706013, -0.012796562165021896, -0.008512094616889954, 0.006188676226884127, 0.0030890090856701136, 0.0026022992096841335, 0.05445466563105583, 0.006813938729465008, -0.0065794652327895164, -0.02346154861152172, 0.009762618690729141, 0.01602945290505886, -0.03163259103894234, -0.01053709164261818, 0.04160836711525917, 0.0013375640846788883, -0.018033133819699287, -0.027213122695684433, 0.018871555104851723, -0.00021393476345110685, -0.010977617464959621, -0.03478732332587242, -0.032485220581293106, 0.014793138951063156, 0.006682491395622492, 0.016711557283997536, 9.192422294290736e-05, 0.006110518239438534, 0.023191548883914948, 0.007098148576915264, -0.023333653807640076, -0.027625227347016335, -0.015645768493413925, 0.018786292523145676, 0.056955717504024506, 0.0075173587538301945, -0.0009956237627193332, -0.007101701572537422, -0.00724025396630168, -0.0016439781757071614, -0.012462615966796875, -0.02334786392748356, 0.022083129733800888, -0.004270257893949747, -0.0012451957445591688, -0.006451570428907871, -0.005645124241709709, 0.0007416108855977654, -0.0030144040938466787, 0.006408939138054848, -0.01276814192533493, -0.03063785471022129, 0.00527209835126996, 0.005371571984142065, -0.001399734988808632, 0.011432353407144547, 0.010750249028205872, 0.025053124874830246, 0.04362626001238823, 0.03058101236820221, 0.0009521040483377874, -0.007361043244600296, 0.01982365921139717, -0.013357877731323242, 0.0016919386107474566, -0.005300519522279501, 0.011041564866900444, 0.027284175157546997, -0.009258146397769451, 0.0353841632604599, -0.001962826354429126, -0.02482575736939907, -0.0029397988691926003, 0.0034638112410902977, -0.009272356517612934, 0.02290733903646469, 0.006938280537724495, 0.025209441781044006, 0.0318315364420414, -0.020861025899648666, -0.008071568794548512, 0.004579336382448673, -0.040727317333221436, 0.002998417243361473, 0.028932593762874603, -0.02415786311030388, -0.03487258777022362, -0.010331039316952229, 0.020235763862729073, 0.017962081357836723, 0.00037369196070358157, 0.002936246106401086, -0.004010915756225586, -0.05016309395432472, -0.010231565684080124, 0.003936310764402151, 0.002849206794053316, -0.0011341761564835906, -0.015162612311542034, 0.0013775310944765806, -0.02421470545232296, -0.0017239123117178679, -0.01931207999587059, -0.00015798088861629367, -0.04052836820483208, -0.01652682013809681, -0.019852079451084137, -0.004518941510468721, 0.033593639731407166, 0.03058101236820221, 0.022324707359075546, 0.029643120244145393, -0.0005182394525036216, 0.013713140040636063, -0.00684946496039629, -0.02941575087606907, 0.0029220357537269592, -0.02314891666173935, -0.0325704850256443, -0.01001130323857069, 0.007645253092050552, -0.006671833340078592, -0.02658786065876484, 0.019482607021927834, 0.009371830150485039, 0.0004200981347821653, 0.007144332863390446, -0.0006141603807918727, 0.016768399626016617, -0.005939992144703865, 0.020008394494652748, 0.010181829333305359, 0.014146560803055763, -0.036322057247161865, 0.014992086216807365, -0.01294577307999134, -0.002362496918067336, -0.016953136771917343, -0.005087361671030521, -0.02255207672715187, 0.004018021281808615, 0.0023909180890768766, -0.0140541922301054, -0.022054707631468773, -0.00035881533403880894, -0.012725509703159332, -0.007574200630187988, 0.018587345257401466, 0.032627325505018234, 0.002200852381065488, 0.0048280199989676476, 0.016995767131447792, -0.005204598419368267, 0.008263410069048405, 0.04027257859706879, -0.010018408298492432, 0.03251364082098007, 0.020505763590335846, -0.000572861114051193, 0.014111034572124481, 0.009215514175593853, -0.025209441781044006, -0.02987048774957657, 0.011766300536692142, 0.02547944150865078, 0.016811031848192215, 0.008099989965558052, -0.02577786147594452, -0.016811031848192215, -0.023788390681147575, -0.016967346891760826, 0.023319443687796593, -0.005041177850216627, 0.016469979658722878, -0.033991534262895584, 0.002362496918067336, 0.011247617192566395, -0.028776278719305992, -0.021912602707743645, -0.022679971531033516, -0.02907469868659973, 0.024783125147223473, 0.011659721843898296, 0.015503664501011372, -0.01845945045351982, -0.019752606749534607, -0.00952814519405365, -0.03271258994936943, -0.0262894406914711, -0.012746825814247131, 0.0069667017087340355, -0.006305912975221872, 0.024584179744124413, 0.012803668156266212, 0.035867322236299515, 0.03427574411034584, 0.01288893073797226, 0.010892353951931, 0.0013233536155894399, -0.0035774954594671726, 0.012405773624777794, 0.009329198859632015, -0.012810773216187954, -0.006572360172867775, 0.018075766041874886, 0.026346281170845032, -0.018487870693206787, 0.003437166567891836, -0.019539449363946915, 0.029245225712656975, -0.02820785902440548, -0.006188676226884127, -0.045871518552303314, -0.03626521676778793, 0.0007877950556576252, 0.00806446373462677, -0.004721441306173801, 0.01571682095527649, -0.03578205779194832, -0.0025205889251083136, 0.046127308160066605, -0.0075884112156927586, 0.03765784576535225, 0.003946968819946051, 0.01956786960363388, -0.03043890744447708, 0.0018260502256453037, -0.008490778505802155, -0.007496043108403683, -0.004412362817674875, -0.01016051322221756, -0.023319443687796593, -0.007858410477638245, 0.01693892478942871, 0.021102603524923325, 0.01111972238868475, 0.013883666135370731, 0.00037435806007124484, 0.0011617090785875916, -0.00235183909535408, -0.014992086216807365, 0.0025454573333263397, 0.025820493698120117, -0.024172073230147362, -0.01324419304728508, -0.04095468297600746, -0.018175240606069565, -0.010444723069667816, 0.0007664792938157916, 0.014473402872681618, 0.012839194387197495, 0.014416560530662537, 0.011418143287301064, 0.006710912566632032, 0.010167618282139301, 0.014516034163534641, 0.03589574247598648, -0.011027353815734386, 0.013784192502498627, 0.041579946875572205, 0.00724380649626255, -0.013691824860870838, -0.024783125147223473, 0.021571550518274307, -0.01486419141292572, 0.039363108575344086, 0.05283466726541519, -0.02194102481007576, -0.01733681932091713, -0.0044443365186452866, -0.031007329002022743, -0.013023930601775646, -0.01921260729432106, 0.02063365839421749, 0.014849981293082237, -0.008483673445880413, -0.016199979931116104, -0.002785259624943137, -0.025365756824612617, 0.0069631487131118774, -0.051328353583812714, 0.00821367371827364, 0.018743660300970078, -0.017251556739211082, -0.019638922065496445, 0.0262894406914711, 0.007979200221598148, 0.03507153317332268, -0.0073326220735907555, 0.014338403008878231, -0.024953652173280716, 0.023475758731365204, -0.034901008009910583, -0.01463682297617197, 0.006874333135783672, 0.018317345529794693, -0.03163259103894234, -0.0046113100834190845, 0.020051026716828346, 0.006479991599917412, -0.006739333271980286, 0.001852695015259087, 0.005652229767292738, 0.03478732332587242, -0.013947613537311554, 0.009741303510963917, -0.003264864208176732, 0.001744339824654162, 0.0018420370761305094, -0.014018665999174118, -0.026275228708982468, -0.013968929648399353, 0.0008530745399184525, -0.002220391994342208, 0.008938409388065338, -0.004145915620028973, -0.005904465913772583, 0.017223136499524117, -0.01364919263869524, -0.027795754373073578, -0.007474726997315884, -0.0009689790313132107, 0.027426280081272125, -0.05692729353904724, -0.007581306155771017, 0.00682459631934762, 0.01931207999587059, 0.03669153153896332, 0.009968671016395092, -0.013187351636588573, -0.013031035661697388, 0.029131541028618813, 7.87684039096348e-05, 0.0034389428328722715, 0.007531569339334965, -0.028790488839149475, -0.03168943151831627, -0.011332879774272442, -0.02427154779434204, -0.023788390681147575, 0.0033821009565144777, -0.03154732659459114, -0.020647868514060974, -0.01372735109180212, 0.0053111775778234005, 0.009442882612347603, -0.026431545615196228, -0.013826824724674225, 0.03779995068907738, 0.012903140857815742, 0.010252881795167923, -0.007993410341441631, -0.008355778641998768, 0.03311048448085785, -0.02162839286029339, -0.01385524496436119, 0.010053934529423714, 0.0033074957318603992, -0.014047087170183659, -0.01327261421829462, -0.00819235760718584, -0.002936246106401086, -0.04038626328110695, -0.008909988217055798, -0.01225656270980835, 0.014764717780053616, -0.026602070778608322, 0.00033505712053738534, -0.006536833476275206, -0.036975741386413574, -0.029088910669088364, 0.035099953413009644, -0.008881567977368832, 0.011084196157753468, 0.009542356245219707, 0.011915510520339012, 0.015191033482551575, 0.017308399081230164, -0.0017709846142679453, -0.015787875279784203, 0.0042063104920089245, -0.01344314031302929, -0.05016309395432472, -0.02188418246805668, 0.0009432224906049669, 0.027980489656329155, 0.028293121606111526, -0.018772080540657043, -0.02830733172595501, -0.0022044051438570023, -0.04837257042527199, -0.0163278728723526, 0.007623937446624041, 0.004561573266983032, 0.0050909146666526794, 0.000970755354501307, 0.04049994796514511, 0.0258773360401392, 0.017464714124798775, 0.014032877050340176, -0.03887994959950447, -0.0028225621208548546, -0.011716564185917377, -0.031319960951805115, 0.029699962586164474, -0.000887268572114408, -0.04607046768069267, -0.009293672628700733, -0.006437360309064388, -0.0006714464980177581, 0.006515517830848694, 0.021784707903862, -0.016754189506173134, -0.014679455198347569, 0.005176177714020014, -0.014274455606937408, -0.0017825305694714189, -0.014707875438034534, 0.013237087987363338, -0.029614698141813278, -0.024854177609086037, 0.027539964765310287, -0.005350256338715553, -0.007943673990666866, -0.0012798338430002332, 0.015688400715589523, -0.010252881795167923, -0.012554983608424664, -0.01779155619442463, 0.009243935346603394, 0.02154313027858734, -0.004682362545281649, 0.02421470545232296, 0.0023909180890768766, 0.009620513767004013, 0.02694312296807766, -0.00724025396630168, -0.011602879501879215, 0.004575783386826515, 0.011077091097831726, -0.022381549701094627, -0.00035215416573919356, 0.006170913111418486, -0.022665759548544884, 0.011801826767623425, -0.030950486660003662, 0.014331297017633915, -0.0019397343276068568, -0.011304459534585476, -0.01713787205517292, -0.022026287391781807, -0.010799986310303211, 0.009599198587238789, -0.002040984109044075, -0.013428930193185806, -0.010004197247326374, 0.007908147759735584, 0.010004197247326374, -0.012753930874168873, 0.0037764424923807383, 0.008853146806359291, -0.020818393677473068, -0.014921033754944801, 0.02118786796927452, -0.007009332999587059, -0.02820785902440548, 0.007190517149865627, 0.010551301762461662, 0.0075528849847614765, -0.0034105218946933746, 0.22407129406929016, -0.000973419810179621, 0.01541840098798275, 0.038396794348955154, 0.00030885651358403265, 0.015020507387816906, 0.01931207999587059, 0.012455509975552559, -0.003691179445013404, 0.027881016954779625, 0.001984142232686281, 0.01708103157579899, -0.022083129733800888, -0.003376771928742528, 0.021045763045549393, 0.0046255202032625675, -0.03760100528597832, -0.0426599457859993, -0.012277878820896149, 0.012043405324220657, 0.003495784942060709, -0.008426831103861332, -0.04760520160198212, -0.013386298902332783, 0.021173657849431038, -0.006529728416353464, 0.015475243330001831, -0.002298549748957157, 0.025195231661200523, 0.006153149995952845, -0.028122594580054283, -0.0008224331540986896, 0.001376642961986363, 0.002938022604212165, -0.003550850786268711, -0.0043555209413170815, 0.037032585591077805, -0.016185767948627472, 0.0009751961333677173, 0.0032488773576915264, 0.02259470708668232, -0.0053111775778234005, 0.013542613945901394, -0.011922616511583328, -0.0028403252363204956, -0.012981299310922623, -0.011091301217675209, 0.0034460481256246567, 0.0032275617122650146, 0.011020248755812645, -0.026985755190253258, 0.026829438284039497, 0.017365241423249245, 0.025053124874830246, 0.011396827176213264, -0.0203778687864542, 0.010451829060912132, -0.004160126205533743, 0.010672091506421566, 0.03646416217088699, -0.007261569611728191, 0.02881891094148159, 0.003723153145983815, 0.016299452632665634, -0.04135257750749588, -0.0024601942859590054, -0.04240415617823601, 0.038396794348955154, 0.00899525173008442, 0.0015649321721866727, -0.02765364944934845, -0.0245131254196167, -0.022779444232583046, -0.0009849658235907555, -0.016086295247077942, -0.027937859296798706, 0.004476310219615698, -0.0017700963653624058, 0.030012592673301697, 0.04109678789973259, 0.00686367554590106, -0.013670508749783039, -0.01352129876613617, -0.001596905873157084, -0.011261827312409878, -0.0030232856515794992, 0.015262085944414139, -0.014565770514309406, -0.007233148440718651, -0.02921680361032486, -0.011965247802436352, -0.012384457513689995, -0.014224718324840069, -0.021401025354862213, 0.020448921248316765, 0.006519070360809565, 0.0022932207211852074, 0.024896809831261635, -0.02152892015874386, -0.018061555922031403, -0.04533151909708977, 0.04672415181994438, 0.025294704362750053, -0.01327261421829462, -0.013968929648399353, 0.0064124916680157185, -0.016967346891760826, 0.009471303783357143, -0.005634466651827097, -0.016242610290646553, 0.001736346399411559, -0.03103574924170971, 0.014189192093908787, -0.02209733985364437, 0.013002614490687847, 0.006913412362337112, 0.02709943801164627, -0.00743209570646286, 0.004174336791038513, 0.00410683685913682, 0.005609598010778427, -0.010402091778814793, 0.020363658666610718, 0.007538674399256706, -0.03018311969935894, -0.03615153208374977, -0.019539449363946915, 0.008369989693164825, 0.012519457377493382, -0.019795237109065056, 0.022566286846995354, -0.009343408979475498, -0.00028487626696005464, -0.035355743020772934, 0.00024668555124662817, 0.012995509430766106, -0.006025255192071199, -0.024456284940242767, -0.011219196021556854, -0.011638405732810497, -0.00583696598187089, 0.018686817958950996, 0.02370312809944153, 0.0007131898892112076, 0.010196039453148842, -0.04032942280173302, 0.0056770979426801205, -0.005456835031509399, -0.0017434516921639442, -0.029699962586164474, -0.02118786796927452, 0.02300681173801422, 0.00019073166185989976, -0.013798403553664684, 0.007311306428164244, 3.3971995435422286e-05, 0.0051264408975839615, -0.013514192774891853, 0.003968284465372562, -0.005801439750939608, -0.0506746731698513, 0.005783676635473967, -0.007005780469626188, -0.003359008813276887, -0.00902367290109396, -0.0326557457447052, -0.18257661163806915, 0.015532085672020912, 0.03302522003650665, -0.02320575900375843, 0.02164260298013687, -0.0053467038087546825, 0.033394694328308105, 0.0035472980234771967, -0.024172073230147362, -0.008114200085401535, -0.0057126241736114025, 0.007410780061036348, -0.03990310803055763, -0.03848205506801605, 0.008725252002477646, 0.001980589469894767, 0.0048280199989676476, 0.01428156066685915, 0.024854177609086037, 0.03487258777022362, 0.038339950144290924, -0.03782837092876434, 0.0062277549877762794, 0.0072189378552138805, 0.008313147351145744, -0.006096308119595051, 0.0033341404050588608, -0.0009019231656566262, 0.005797887220978737, -0.030069435015320778, -0.040926262736320496, -0.0020338790491223335, 0.021969445049762726, -0.004099731333553791, 0.02461259998381138, 0.013940508477389812, 0.005961308255791664, 0.007595516741275787, 0.002918482990935445, 0.021756287664175034, 0.026616280898451805, 0.0362936370074749, 0.0016990439034998417, 0.021599972620606422, -0.0016013466520234942, 0.02725575491786003, -0.011396827176213264, 0.0009281238308176398, 0.0006123840576037765, 0.010821301490068436, 0.040670473128557205, -0.008099989965558052, 0.0049949935637414455, -0.020349446684122086, 0.004213415551930666, 0.013535508885979652, 0.002263023518025875, 0.016924714669585228, 0.01013209205120802, -0.023191548883914948, 0.0199231319129467, -0.008632883429527283, 0.002749733394011855, -0.0018509186338633299, 0.008256305009126663, -0.02780996449291706, -0.025493651628494263, 0.013372087851166725, -0.0245131254196167, -0.008853146806359291, -0.019795237109065056, 0.018772080540657043, 0.005829860921949148, 0.02381681092083454, 0.002445983700454235, 0.003733810968697071, -0.007979200221598148, 0.012228142470121384, 0.029955750331282616, 0.00019517244072631001, -0.00039078897680155933, 0.03285469487309456, -0.03038206696510315, 0.021813130006194115, -0.01225656270980835, -0.009059199132025242, -0.005979071371257305, 0.004238284192979336, -0.014764717780053616, 0.006181571166962385, 0.02694312296807766, -0.016313662752509117, 0.02002260647714138, -0.011382617056369781, -0.006224202457815409, 0.015318927355110645, 0.018672607839107513, 0.006181571166962385, 0.015333138406276703, -0.004437230993062258, 0.0006066110800020397, -0.00024202271015383303, -0.04172205179929733, -0.002719535958021879, 0.015944190323352814, -0.00019273001817055047, -0.0044265734031796455, 0.017024189233779907, 0.04189257696270943, -0.0053076245822012424, -0.023447338491678238, 0.02375996857881546, 0.011574458330869675, 0.03760100528597832, -0.01210735272616148, 0.018416818231344223, 0.021415235474705696, -0.008448147214949131, 0.02330523356795311, -0.02057681605219841, 0.08651357144117355, -0.0018145042704418302, -0.013826824724674225, 0.023944705724716187, 0.010835512541234493, -0.03103574924170971, -0.10032618790864944, -0.01935471221804619, 0.000669226108584553, 0.005289861466735601, -0.01668313704431057, 0.007510253693908453, -0.012356036342680454, 0.0453030988574028, -0.021500498056411743, 0.028548911213874817, -0.027028385549783707, -0.013556824997067451, -0.0026147335302084684, 0.0144876129925251, 0.011126827448606491, -0.002445983700454235, 0.0006487984792329371, 0.0026076282374560833, 0.023120496422052383, 0.038254689425230026, 0.009627618826925755, -0.01628524251282215, -0.0011492748744785786, 0.005709071643650532, -0.011723669245839119, 0.004145915620028973, -0.01152472198009491, 0.003669863799586892, 0.000516907253768295, 0.005371571984142065, 0.026616280898451805, 0.0035917058121412992, 0.018075766041874886, -0.012533668428659439, -0.017564188688993454, -0.008540515787899494, -0.015134191140532494, 0.008128410205245018, 0.0345599539577961, -0.027682069689035416, -0.005197493359446526, 0.011496300809085369, 0.027966279536485672, -0.005918676499277353, -0.001736346399411559, 0.023291023448109627, -0.009016566909849644, 0.0326557457447052, -0.026218388229608536, -0.010373670607805252, -0.028023121878504753, 0.014039982110261917, -0.017194714397192, 0.00225058919750154, 0.029444172978401184, -0.020534183830022812, 0.017478924244642258, 0.021969445049762726, -0.0235610231757164, 0.011645511724054813, 0.017464714124798775, -0.008121305145323277, -0.006565254647284746, 0.016967346891760826, 0.003939863294363022, -0.008377094753086567, -0.011048669926822186, 0.00012944884656462818, -0.0032204564195126295, -0.016512610018253326, -0.02699996531009674, 0.021443655714392662, -0.03282627463340759, 0.004149468149989843, -0.026602070778608322, 0.006352097261697054, -0.010906565003097057, -0.008185252547264099, 0.014018665999174118, 0.000851742341183126, -0.022267866879701614, -0.0022115102037787437, 0.009165777824819088, -0.029245225712656975, 0.0025063783396035433, 0.026616280898451805, 0.015844715759158134, -0.019496817141771317, 0.008547620847821236, -0.041778892278671265, -0.022083129733800888, -0.016271032392978668, -0.0032897326163947582, -0.02168523520231247, -0.005137098487466574, 0.026630492880940437, -0.006980912294238806, 0.01642734743654728, 0.016313662752509117, 0.011155248619616032, -0.03791363537311554, -0.01288893073797226, -0.0662209689617157, 0.016953136771917343, 0.017521556466817856, -0.01430998183786869, 0.023077864199876785, -0.022708391770720482, -0.011034459806978703, -0.019070502370595932, 0.01033814437687397, 0.002765720011666417, -0.01901366002857685, 0.0066327545791864395, -0.015020507387816906, -0.023774180561304092, -0.025237862020730972, -0.003751574084162712, 0.019553659483790398, -0.009101830422878265, -0.012562088668346405, 0.023575233295559883, 0.015176822431385517, -0.011688143014907837, 0.007623937446624041, 0.014444981701672077, -0.0037728899624198675, -0.04169363155961037, 0.005336045753210783, 0.02654522843658924, -0.012967088259756565, -0.00836288370192051, -0.003769337199628353, -0.027781542390584946, 0.008661304600536823, 0.01587313786149025, 0.01294577307999134, -0.005261440761387348, 0.01428156066685915, 0.02830733172595501, 0.021216288208961487, 0.015517874620854855, -0.03649258613586426, -0.0226515494287014, -0.004327099770307541, -0.009940250776708126, -3.33891439368017e-05, 0.004238284192979336, -0.004742756951600313, 0.0025276942178606987, 0.029159963130950928, 0.011474985629320145, 0.034304168075323105, 0.01800471358001232, -0.004053547512739897, -0.043143101036548615, -0.021116815507411957, 0.005964860785752535, 0.014167876914143562, 0.01789102889597416, -0.005204598419368267, -0.025621546432375908, 0.02528049424290657, 0.010359460487961769, -0.01698155701160431, -0.027980489656329155, 0.016114715486764908, -0.01875787042081356, -0.03603784739971161, -0.014707875438034534, 0.004888414870947599, -0.024854177609086037, -0.020292606204748154, -0.017521556466817856, 0.01946839690208435, 0.008895778097212315, -0.011645511724054813, -0.015944190323352814, -0.010679196566343307, 0.018033133819699287, -0.0235610231757164, -0.0073326220735907555, 0.02316312864422798, -0.036521006375551224, 0.007389463949948549, -0.006423149723559618, 0.01779155619442463, -0.00607854500412941, 0.0051264408975839615, 0.00882472563534975, 0.02447049506008625, 0.0006026143673807383, -0.024342600256204605, -0.00018085091141983867, 0.009947355836629868, 0.013748666271567345, 0.009968671016395092, 0.03760100528597832, 0.007567095570266247, 0.004579336382448673, 0.024584179744124413, 0.013215772807598114, -0.0005688644014298916, 0.016185767948627472, 0.01875787042081356, -0.024101020768284798, -0.0019450632389634848, 0.000988518469966948, -0.005783676635473967, -0.008433936163783073, 0.014807349070906639, 0.0024779574014246464, -0.00010224904690403491, -0.01921260729432106, -0.015659980475902557, 0.031177854165434837, -0.00841972604393959, 0.008156831376254559, 0.007524463813751936, -0.008412620984017849, -0.007645253092050552, 0.044819943606853485, -0.0035224296152591705, -0.008121305145323277, 0.02891838364303112, -0.006874333135783672, 0.011681037954986095, 0.027625227347016335, 0.005488808732479811, -0.0024886152241379023, -0.002302102278918028, -0.01402577105909586, 0.016498399898409843, 0.019951554015278816, -0.015887347981333733, -0.007929463870823383, 0.007886831648647785, -0.036833636462688446, -0.009435777552425861, 0.009897618554532528, 0.010167618282139301, 0.10396407544612885, 0.014324191957712173, -0.015119980089366436, -0.0028705226723104715, -0.004060652572661638, 0.008348673582077026, -0.007872621528804302, 0.016512610018253326, -0.012597615830600262, -0.053005196154117584, 0.03200206533074379, 0.005083809141069651, -0.021017340943217278, -0.03453153371810913, -0.010636565275490284, 0.010117881931364536, 0.0016164452536031604, 0.002451312728226185, -0.0016342083690688014, -0.014992086216807365, 0.02381681092083454, -0.004199204966425896, 0.01213577389717102, -0.011183669790625572, -0.03225785493850708, -0.003145851194858551, 0.011517616920173168, 0.002279010135680437, -0.0075884112156927586, -0.029756803065538406, 0.03623679652810097, 0.0034051930997520685, -0.02219681441783905, -0.017109451815485954, 0.002831443678587675, 0.00900235679000616, 0.013109194114804268, -0.007829990237951279, 0.008007621392607689, 0.019738394767045975, -0.0031227590516209602, -0.00980525091290474, -0.02243839204311371, -0.007829990237951279, 0.027582596987485886, -0.01622840017080307, -0.01509155984967947, -0.014061297290027142, -0.023688916116952896]"
Monitoring In-memory datastores,Monitoring In-memory datastores,"## **Introduction**  M*onitoring* in-memory datastores requires a different approach to traditional disk-based databases. Since in-memory datastores are designed to store data in RAM, there's a greater risk of the datastore exceeding the allocated memory limit. When this happens, the datastore may have to evict data (e.g. Redis evicts keys based on the configured policy such as LRU) or it may become unstable or crash, leading to data loss or downtime.  Therefore, tracking memory consumption is one of the key focus areas when monitoring in-memory datastores. However, there are other important metrics to be considered as well, including client-side metrics that provide insight into how client applications are using the datastore as well as other server-side metrics (for example, ones related to CPU usage).  In this blog post, we will explore how to monitor [Dragonfly](https://www.dragonflydb.io/) using [Prometheus](https://prometheus.io/) and add [Grafana](https://grafana.com/) for visualization.  Dragonfly is a modern in-memory datastore that implements novel algorithms and data structures on top of a multi-threaded, shared-nothing architecture. Thanks to its [API compatibility](https://dragonflydb.io/docs/category/command-reference), Dragonfly can act as a _drop-in replacement_ for Redis. At the time of writing, [Dragonfly has implemented more than 200 Redis commands](https://dragonflydb.io/docs/about/faq#when-will-you-support-x-command) which represents good coverage for the vast majority of use cases. Due to Dragonfly\'s hardware efficiency, you can run a single node instance on a small 8GB instance or scale vertically to large 768GB machines with 64 cores. This greatly reduces infrastructure costs as well as architectural complexity.  ## **Getting Started: Monitoring Dragonfly With Prometheus**  A Prometheus Exporter can be used in scenarios where it is not feasible to instrument a given system with Prometheus metrics directly. It collects metrics from a specific system or application and exposes them in a format that Prometheus can scrape and ingest for monitoring and analysis.  The [Prometheus Redis Metrics Exporter](https://github.com/oliver006/redis_exporter) extracts metrics from Redis databases and makes them available in a Prometheus-compatible format. But we won\'t need it in our case since Dragonfly exposes Prometheus-compatible metrics out of the box! (available on http://\<dragonfly-host\>:6379/metrics by default)  Although 6379 is the default port, you can use the \--bind-admin and \--bind-admin-port flags respectively, to specify alternate host and port.  Let\'s start by setting up a simple environment to monitor Dragonfly. In this demo, We will have a Dragonfly instance running, along with a Prometheus instance to collect metrics and Grafana to visualize the metrics.  Before you begin, make sure you have the following installed: Docker, Docker Compose and Redis CLI.  To start with, Let's save the prometheus scrape configuration in a file called prometheus.yml. This file will be mounted into the prometheus container later.  ```lua global: scrape_interval: 15s  scrape_configs: - job_name: dragonfly_metrics static_configs: - targets: ['dragonfly:6379'] EOF ```  Next, we will create a docker-compose.yml file to define the services we need:  ```lua cat <<EOF > docker-compose.yml version: '3'  services: dragonfly: image: 'docker.dragonflydb.io/dragonflydb/dragonfly' pull_policy: 'always' ulimits: memlock: -1 ports: - ""6379:6379"" volumes: - dragonflydata:/data  prometheus: image: prom/prometheus:latest restart: always ports: - ""9090:9090"" volumes: - .:/etc/prometheus command: - '--config.file=/etc/prometheus/prometheus.yml' depends_on: - dragonfly  grafana: image: grafana/grafana:latest restart: always ports: - ""3000:3000""  volumes: dragonflydata:  EOF ```  Use Docker Compose to start Dragonfly, Prometheus and Grafana:  ``` docker compose -p monitor-dragonfly up ```  Verify that the containers are running:  ``` docker compose -p monitor-dragonfly ps ```  For each container, you should see the STATUS as running:  | NAME                          | COMMAND                | SERVICE   | STATUS            | PORTS                  | | ----------------------------- | ---------------------- | --------- | ----------------- | ---------------------- | | monitor-dragonfly-dragonfly-1 | ""entrypoint.sh drago"" | dragonfly | running (healthy) | 0.0.0.0:6379->6379/tcp | | monitor-dragonfly-grafana-1   | ""/run.sh""              | grafana   | running           |  To check the metrics exposed by Dragonfly, navigate to http://localhost:6379/metrics in your browser:  ![dragonfly-metrics](/assets/blog/monitoring-In-memory-datastores/dragonfly-metrics.png)  To see these metrics in Prometheus, navigate to http://localhost:9090. Select Status -\> Targets from the left menu:  Search for metrics related to Dragonfly (they are exposed with a dragonfly\_ prefix.):  ![search-metrics](/assets/blog/monitoring-In-memory-datastores/search-metrics.png)  ![dragonfly-prefix](/assets/blog/monitoring-In-memory-datastores/dragonfly-prefix.png)  Most of the metrics available via the [INFO](https://redis.io/commands/info/) command. Now let\'s dive deeper into some of them.  ## **Client related metrics**  **dragonfly_connected_clients**  The dragonfly_connected_clients metric refers to the number of client connections that are currently established with Dragonfly. It includes both active and idle connections and monitoring it over time can provide insight into usage patterns and trends.  Let\'s connect to the Redis instance using three different redis-cli clients and see the value of connected_clients:  ``` redis-cli -p 6379 ```  In a few seconds, the value of dragonfly_connected_clients should be 3, and you should see that reflect in Prometheus:  ![connected-clients](/assets/blog/monitoring-In-memory-datastores/connected-clients.png)  Monitoring this metric can help identify potential performance and scalability issues, especially with clients that are not properly closing connections. **dragonfly_blocked_clients**  The dragonfly_blocked_clients metric refers to the number of client connections that are currently pending on a blocking call with Dragonfly such as BLPOP, BRPOP, BRPOPLPUSH etc.  Let\'s open a few redis-cli clients with the following command to block on a List:  ``` blpop test_list 15 ```  There should be a spike in the dragonfly_blocked_clients metric.  _It should come down to 0 after 15 seconds (since that\'s the timeout we specified in the blpop command)._  ## **Server metrics**  Let\'s look at Dragonfly server related metrics. For most of these, you can note down the initial value and then perform some operations to see the change in the metric value. The operation can be simple client operations using any Redis client or the load testing with the Redis benchmarking tool (e.g. redis-benchmark -t set -r 100000 -n 1000000)  **Memory related**  - dragonfly_memory_used_bytes - This is the total number of bytes allocated by Redis using its allocator. Note that this refers to the used_memory metric in the INFO command. - dragonfly*used_memory_rss_bytes - rss stands for \_resident set size* and this metric refers to the number of bytes that Dragonfly allocates as seen by the operating system. This is the number reported by tools such as top(1) and ps(1). Note that this refers to the used_memory_rss metric in the INFO command. - dragonfly_memory_max_bytes - This is the value of the maxmemory configuration directive. Note that this refers to the maxmemory metric in the INFO command.  **Keys related**  - dragonfly_db_keys - This is the total number of keys in a specific db. - dragonfly_expired_keys_total - This is the total number of key expiration events. Note that this refers to the expired_keys metric in the INFO command. If you add a key to Dragonfly with a time-to-live (TTL) value, they are automatically deleted by the server after the TTL. This metric counts the number of keys that have reached their TTL and been deleted. You can use the EXPIRE command to expire a key and see the change in this metric. - dragonfly_evicted_keys_total - This is the total number of evicted keys due to maxmemory limit.  ## **Use Grafana to visualize Dragonfly metrics**  Navigate to the Grafana console at http://localhost:3000/ (use _admin/admin_ as credentials) and start by adding Prometheus as a data source.  - From **Add data source**, select _Prometheus_  - Enter http://prometheus:9090 as the URL  - Select **Save & Test**  ![data-source-prometheus](/assets/blog/monitoring-In-memory-datastores/data-source-prometheus.png)  Although you can build you own Grafana dashboard, let\'s leverage a ready-to-use dashboard for now:  - Download the Dragonfly Grafana dashboard [using this link](https://gist.github.com/Pothulapati/927122bdfcc32cf0bff591f791638cda) - Click **Dashboards > Import** in the side menu and upload the dragonfly-_dashboard.json_ file you downloaded. - On the next screen, select the Prometheus data source you just created and click **Import**.  To experiment with the dashboard, you can perform simple client operations using any Redis client or the Redis benchmarking tool as below:  ``` redis-benchmark -t set -r 100000 -n 1000000 ```  You should now see the dashboard with metrics from Dragonfly:  ![dragonfly-dashboard](/assets/blog/monitoring-In-memory-datastores/dragonfly-dashboard.png)  Once you have completed the steps in this tutorial, use this command to stop the Docker containers:  ``` docker compose -p monitor-dragonfly down -v ```  ## **Conclusion**  In this blog post, we explored how to monitor Dragonfly metrics using Prometheus and integrated with Grafana to visualize the metrics on a dashboard.  If you want to learn more, check out our documentation on [how to fire up a DragonflyDB instance](https://dragonflydb.io/docs/getting-started/), bring along a [client of your choice](https://dragonflydb.io/docs/development/sdks) and start building with familiar [Redis commands](https://dragonflydb.io/docs/category/command-reference)!","[0.004184415563941002, -0.01469450443983078, -0.0009623817750252783, -0.04435412958264351, 0.008010263554751873, 0.01683237962424755, -0.02531622350215912, -0.010141372680664062, -0.009336287155747414, -0.019538549706339836, 0.011609470471739769, -0.0032592439092695713, -0.006345969159156084, -0.018902599811553955, -0.0043434035032987595, 0.029957305639982224, 0.012198062613606453, -0.014640381559729576, 0.01702181063592434, -0.01796897128224373, -0.005689722951501608, -0.00540219247341156, -0.019700920209288597, 0.008903300389647484, -0.013760875910520554, -0.023205410689115524, 0.011717717163264751, -0.0266557764261961, -0.024423187598586082, 0.0040964651852846146, 0.02520797587931156, -0.01860492117702961, -0.0015433627413585782, 0.002684182720258832, -0.01280018500983715, 0.007969671860337257, 0.019727980718016624, -0.0012676715850830078, 0.03155394643545151, 0.003639799077063799, 0.01188685279339552, -0.0015416713431477547, 0.009972237050533295, -0.02330012619495392, -0.0019467512611299753, 0.022840077057480812, 0.01710299588739872, -0.03231167420744896, 0.006961623206734657, -0.007211943622678518, 0.003063046373426914, 0.004745946265757084, -0.02809004671871662, 0.021784670650959015, 0.022325905039906502, 0.005134958308190107, 0.021392276510596275, 0.022569460794329643, -0.006021228618919849, -0.01642645336687565, 0.0034368361812084913, 0.030200859531760216, 0.003063046373426914, -0.0014232763787731528, -0.011758309789001942, 0.002410182962194085, -0.013199345208704472, -0.013760875910520554, 0.0020313190761953592, -0.010324039496481419, 0.05179609730839729, 0.03317764773964882, 0.011433569714426994, -0.024477310478687286, 0.012786654755473137, -0.03455779328942299, 0.0011095297522842884, -0.025952173396945, 0.015276331454515457, 0.00960013922303915, 0.013923246413469315, -0.004918464459478855, -0.030146736651659012, 0.04367758706212044, 0.004864341113716364, 0.03250110521912575, -0.029686687514185905, -0.005077451933175325, 0.00878828763961792, -0.005195846781134605, -0.0056288340128958225, -0.00037992093712091446, 0.017008280381560326, 0.008815350010991096, 0.036993347108364105, 0.002848244272172451, 0.016291145235300064, 0.0002200877497671172, -0.010939693078398705, -0.0014418812934309244, -0.010966755449771881, 0.011034409515559673, -0.018198994919657707, -0.010892335325479507, -0.014437418431043625, 0.002958182478323579, 0.023841360583901405, -0.03558613732457161, 0.013361715711653233, 0.0033945522736757994, -0.02776530757546425, 0.027156418189406395, 0.0336647592484951, -0.017211243510246277, -0.023259533569216728, -0.0018672575242817402, 0.03401656076312065, -0.01650763861835003, 0.01872669905424118, -0.023678990080952644, 0.023909013718366623, 0.02342190407216549, 0.027711182832717896, -0.018036624416708946, 0.0008486380684189498, -0.003568761982023716, 0.009126558899879456, -0.014491542242467403, -0.010757027193903923, -0.007293128874152899, -0.001619473798200488, 0.03155394643545151, -0.0006482123280875385, 0.003961156588047743, -0.023557212203741074, 0.004681674763560295, -0.005030094180256128, 0.00219707190990448, -0.00947836134582758, -0.005710019264370203, 0.0050842175260186195, 0.019741512835025787, -0.00303091062232852, -0.027210542932152748, -0.04673556238412857, 0.029930243268609047, -0.004715501796454191, 0.02235296554863453, -0.010987050831317902, -0.002039775950834155, 0.0006372185307554901, -0.03645211458206177, -0.02792767807841301, -0.008132041431963444, -0.003551848465576768, 0.008172634057700634, -0.013314357958734035, -0.0007945146644487977, -0.0005606846534647048, 0.00556117994710803, 0.0233813114464283, 0.035342585295438766, 0.003260935191065073, -0.0013184123672544956, 0.006288463249802589, 0.04089023172855377, 0.01031050831079483, -0.015492824837565422, -0.02006625197827816, -0.0108855701982975, 0.03461191803216934, 0.04005131870508194, -0.05217496305704117, 0.04194563999772072, -0.0015594306169077754, 0.02863128110766411, -0.007096931338310242, 0.017116526141762733, 0.017725415527820587, -0.025938641279935837, 0.01928146369755268, -0.00408969959244132, -0.004911698866635561, 0.010872039012610912, -0.017563045024871826, -0.019958006218075752, -0.0012000174028798938, -0.011447099968791008, 0.010087249800562859, -0.015181615017354488, -0.003917181398719549, 0.03328589349985123, -0.021514054387807846, -0.021148720756173134, -0.5927595496177673, -0.014464479871094227, 0.009234805591404438, -0.03574850782752037, 0.002751836786046624, -0.006893968675285578, 0.008619152009487152, -0.007516387850046158, 0.011798902414739132, 0.017292428761720657, 0.03101271204650402, -0.016331737861037254, 0.008368831127882004, -0.017441267147660255, 0.0017607019981369376, 0.0035586138255894184, 0.0003279117227066308, -0.0177389457821846, -0.009451299905776978, -0.015628132969141006, -0.037940505892038345, 0.02947019413113594, 0.006812783423811197, 0.026128074154257774, -0.008734164759516716, 0.006312142126262188, -0.00668762344866991, 0.012861073948442936, 0.011088532395660877, 0.06229604035615921, -0.03829231113195419, 0.027440566569566727, 0.01465391181409359, 0.015127492137253284, 0.04264924302697182, -0.020215092226862907, -0.01903790794312954, 0.034503672271966934, 0.0022359732538461685, 0.03472016379237175, 0.0022782571613788605, -0.010939693078398705, 0.04135028272867203, 0.028983084484934807, -0.008240288123488426, -0.008497375063598156, 0.02117578312754631, -0.017630700021982193, 0.02432847023010254, 0.009079201146960258, -0.0019163067918270826, 0.0034554412122815847, 0.0004312958917580545, -0.006285080220550299, -0.006376413628458977, -0.003842761740088463, 0.046356696635484695, -0.002907441696152091, 0.013036975637078285, -0.013185814954340458, 0.009809867478907108, -0.0023425286635756493, -0.01595287397503853, -0.008646214380860329, -0.04218919575214386, 0.011250902898609638, -0.014464479871094227, -0.019930943846702576, 0.0027501455042511225, -0.04603195562958717, 0.035017844289541245, -0.01430211029946804, 0.006535401102155447, -0.006454216316342354, 0.012103346176445484, 0.01738714426755905, 0.05266207456588745, 0.0045091561041772366, 0.014126208610832691, 0.02204175665974617, 0.020120376721024513, 0.008003498427569866, -0.0314456969499588, -0.021229906007647514, 0.02938900887966156, -0.004965822212398052, -0.02603335864841938, 0.004414440132677555, -0.0020296277943998575, -0.003964539617300034, 0.007685523480176926, 0.028333602473139763, -0.016345268115401268, -0.032771721482276917, 0.017752476036548615, 0.0228265468031168, -0.023137755692005157, -0.009187447838485241, 0.0008735855808481574, -0.0029598737601190805, -0.010777323506772518, -0.022853607311844826, -0.018063686788082123, 0.005987401586025953, 0.018415488302707672, -0.025451531633734703, -0.046004895120859146, 0.006626734510064125, 0.03764282912015915, -0.022772422060370445, -0.0029480343218892813, -0.020810449495911598, -0.012001865543425083, -0.009958706796169281, 0.01800956390798092, -0.01691356487572193, 0.04879225045442581, 0.0037074533756822348, 0.007117227651178837, -0.0035146386362612247, 0.008226757869124413, 0.0012702086241915822, 0.03239285945892334, 0.018862007185816765, 0.003673626109957695, -0.001868948806077242, 0.010642014443874359, -0.013260234147310257, -0.004336637910455465, 0.019064970314502716, 0.02827947959303856, -0.013557912781834602, 0.016683539375662804, -0.016886502504348755, 0.03374594449996948, -0.022177064791321754, 0.021189313381910324, -0.012915197759866714, 0.009288929402828217, -0.035017844289541245, 0.0013793011894449592, -0.010452582500874996, 0.02551918476819992, -0.021703485399484634, -0.012042457237839699, 0.010824681259691715, -0.015371046960353851, -0.013896184042096138, 0.007475795224308968, 0.0019281463464722037, -0.011068236082792282, -0.01534398552030325, 0.0036025892477482557, 0.010290211997926235, -0.009999299421906471, -0.0025268865283578634, 0.0029598737601190805, -0.010175200179219246, -0.014423887245357037, -0.002868540585041046, -0.020174499601125717, 0.024504370987415314, -0.032365795224905014, 0.01860492117702961, -0.02698051743209362, -0.026452815160155296, 0.020336870104074478, 0.017319489270448685, -0.014518603682518005, -0.01654823124408722, -0.03593794256448746, 0.0005539192352443933, 0.0034097745083272457, 0.027007579803466797, 0.03504490479826927, 0.011386211030185223, -0.03523433580994606, -0.020918695256114006, -0.005138340871781111, -0.014423887245357037, 0.014153270050883293, 0.01654823124408722, -0.008801818825304508, -0.01955207996070385, 0.05071363225579262, -0.0012905049370601773, 0.030038490891456604, 0.0332588329911232, -0.012543099001049995, 0.015736380591988564, 0.006163302809000015, 0.0228265468031168, -0.026019826531410217, -0.026953455060720444, -0.006471129599958658, -0.002887145383283496, -0.00328292278572917, 0.008849176578223705, -0.019930943846702576, 0.019105562940239906, 0.0388064831495285, -0.005858858581632376, 0.022407090291380882, -0.013693221844732761, -0.002112504094839096, -0.02757587470114231, 0.0011332087451592088, -0.008382362313568592, -0.0012313075130805373, 0.012488976120948792, 0.00543940206989646, -0.00455313129350543, 0.0040626381523907185, -0.01741420477628708, -0.0017285662470385432, 0.027684122323989868, -0.004323107190430164, 0.00015349058958236128, -0.018077217042446136, 0.0029429602436721325, 0.004701970610767603, 0.007123993244022131, 0.0012110112002119422, 0.004600489512085915, 0.025262098759412766, 0.005053773056715727, 0.018158402293920517, 0.031229205429553986, 0.005354834254831076, -0.029713749885559082, -0.00614300649613142, 0.02480204962193966, 0.0016017145244404674, -0.0018841710407286882, 0.019457364454865456, 0.041620898991823196, 0.017333021387457848, -0.018185464665293694, 0.006464364007115364, -0.019768573343753815, 0.010939693078398705, 0.014383294619619846, -0.0033082931768149137, -0.02037746272981167, 0.013402308337390423, 0.01792837865650654, -0.013003148138523102, 0.03006555140018463, -0.021825263276696205, 0.01232660561800003, -0.03593794256448746, 0.01963326521217823, -0.003159453859552741, -0.005145105998963118, 0.00013509709970094264, -0.01730595901608467, 0.007949375547468662, 0.0076652271673083305, 0.011088532395660877, 0.02319187857210636, 0.016020527109503746, 0.022961854934692383, 0.007435202598571777, -0.015925811603665352, 0.026723431423306465, -0.002929429290816188, -0.0033691818825900555, -0.02267770655453205, -0.004187798593193293, -0.004255452658981085, -0.006789104547351599, -0.014667442999780178, -0.008098214864730835, -0.027386443689465523, 0.02618219703435898, -0.002053306670859456, 0.0033268979750573635, 0.008740929886698723, -0.007895251736044884, 0.01971445046365261, -0.016142304986715317, -0.029849058017134666, 0.014396825805306435, -0.004715501796454191, -0.0046613784506917, -0.02574921026825905, -0.0023357633035629988, 0.02342190407216549, 0.0015932577662169933, 0.013415839523077011, 0.016805317252874374, -0.01580403372645378, -0.007631400134414434, -0.025221506133675575, -0.004231773782521486, -0.007475795224308968, 0.03645211458206177, -0.013145222328603268, 0.01056759525090456, 0.006474512163549662, 0.022014694288372993, 0.027589406818151474, -0.04229744151234627, -0.019051438197493553, 0.045680154114961624, -0.007631400134414434, -0.007076635025441647, -0.01691356487572193, 0.014518603682518005, -0.012461913749575615, -0.030390292406082153, -0.021703485399484634, -0.03315058723092079, -0.030742093920707703, 0.017400674521923065, 0.012191297486424446, -0.03831937164068222, 0.013828529976308346, 0.033204708248376846, 0.0310938972979784, -0.023097163066267967, -0.025492124259471893, -0.009370114654302597, -0.015695787966251373, 0.0485757552087307, 0.00014926221047062427, 0.008348534815013409, -0.010432286188006401, -0.02543800137937069, 0.001220313599333167, -0.003269392065703869, -0.02531622350215912, 0.021148720756173134, 0.0239360760897398, -0.009762508794665337, 0.00048415077617391944, -0.011602705344557762, -0.0026148369070142508, 0.01623702235519886, -0.0022833312395960093, -0.0266557764261961, -0.03352944925427437, -0.004630933981388807, 0.0063222902826964855, 0.0022292076610028744, -0.0056153032928705215, 0.028333602473139763, 0.02097281999886036, 0.03206811845302582, 0.012022161856293678, 0.006934561301022768, -0.0014748628018423915, -0.0013742271112278104, -0.017157118767499924, -0.020905165001749992, -0.0003621616924647242, 0.009343053214251995, 0.010966755449771881, -0.02377370558679104, 0.024125507101416588, 0.015222207643091679, 0.002579318592324853, 0.0008727399399504066, 0.01734655164182186, -0.016182897612452507, 0.023922545835375786, 0.0050064148381352425, 0.012407790869474411, 0.009085966274142265, 0.010094014927744865, -0.01671060174703598, 0.014383294619619846, -0.032961152493953705, 0.011602705344557762, 0.03748045861721039, -0.0013319432036951184, -0.005672809202224016, -0.01817193254828453, 0.009809867478907108, 0.003340428927913308, 0.01220482774078846, 0.007502857130020857, -0.012969320639967918, -0.03120214305818081, -0.01213040854781866, 0.00878828763961792, -0.02887483686208725, -0.005043624900281429, -0.010736730881035328, 0.004854192957282066, 0.004373847506940365, 0.006826314609497786, -0.0186455138027668, -0.014870405197143555, -0.01963326521217823, -0.008341769687831402, -0.028901899233460426, 0.00851090531796217, -0.0008904991555027664, 0.02693992480635643, 0.015574010089039803, 0.0035822929348796606, -0.0022664174903184175, 0.011142656207084656, 0.007130758836865425, 0.0010469496482983232, -0.017278896644711494, -0.03623561933636665, -0.02037746272981167, -0.01646704599261284, -0.004052489995956421, -0.0033167500514537096, -0.02089163474738598, 0.012610753066837788, 0.0032761574257165194, 0.0030647378880530596, 0.028901899233460426, 0.009823397733271122, 0.006251253187656403, 0.015357516705989838, 0.010100780986249447, -0.008585325442254543, 0.012942259199917316, -0.032961152493953705, 0.02836066484451294, -0.01690003275871277, -0.030146736651659012, -0.021541114896535873, 0.005195846781134605, 0.006095648743212223, -0.018320772796869278, -0.007435202598571777, 0.006704536732286215, -0.013537616468966007, -0.009985768236219883, -0.0022444298956543207, -0.01856432855129242, -0.0042994278483092785, 0.03301527723670006, -0.02819829434156418, 0.001043566851876676, 0.03160806745290756, -0.0037209840957075357, -0.00910626258701086, 0.03426011651754379, -0.019294993951916695, 0.03206811845302582, 0.009694854728877544, 0.007496091537177563, 0.018929660320281982, 0.006582759320735931, -0.02101341262459755, -0.04484124109148979, -0.024396125227212906, 0.012042457237839699, 0.0253974087536335, 0.008450016379356384, -0.0386982336640358, -0.008280880749225616, 0.003194972174242139, -0.03969951719045639, 0.018077217042446136, -0.011169717647135258, 0.000570409931242466, -0.0482780784368515, -0.00011342659126967192, 0.01765776053071022, -0.010296978056430817, 0.0022917878814041615, -0.03385419026017189, -0.031148020178079605, 0.00013065728126093745, 0.019294993951916695, 0.007793770171701908, -0.011636531911790371, -0.01936264894902706, -0.02377370558679104, -0.012022161856293678, -0.015749910846352577, -0.010432286188006401, -0.012069519609212875, 0.008023794740438461, 0.03997013345360756, -0.00024038403353188187, 0.023246003314852715, 0.02216353453695774, 0.00928216427564621, 0.00040507985977455974, -0.005195846781134605, -0.005814883392304182, -0.004549748729914427, -0.003913798835128546, -0.001582263968884945, -0.030985649675130844, -0.0003543391649145633, 0.007435202598571777, 0.0025607135612517595, -0.015154553577303886, -0.007083400618284941, 0.008855942636728287, -0.022840077057480812, 0.0015535108977928758, -0.03266347572207451, -0.038887668401002884, -0.021338151767849922, 0.045057736337184906, 0.001203400082886219, 0.03239285945892334, -0.03187868744134903, -0.03163513168692589, 0.019741512835025787, -0.024504370987415314, 0.036749791353940964, -0.009255101904273033, -0.0022359732538461685, -0.030444415286183357, 0.019660327583551407, 0.004333255346864462, -0.0010909248376265168, -0.005869006738066673, -0.008490609005093575, -0.025248568505048752, -0.005774290766566992, 0.02070220187306404, 0.010554064065217972, 0.00815910380333662, 0.019890351220965385, 0.0024896766990423203, -0.0022562695667147636, 0.0008076226804405451, -0.007489326409995556, 0.013963839039206505, -0.0005213606054894626, -0.03223048895597458, -0.02531622350215912, -0.030904464423656464, -0.015330454334616661, -0.004363699350506067, -0.0017057328950613737, 0.03680391609668732, 0.01031050831079483, 0.02018802985548973, 0.0026875652838498354, -0.020999880507588387, 0.005270266439765692, -0.013882653787732124, 0.030390292406082153, 0.0053007109090685844, 0.013043740764260292, 0.035965003073215485, -0.011873321607708931, -0.031229205429553986, 0.005077451933175325, 0.026452815160155296, -0.021026942878961563, 0.02037746272981167, 0.03426011651754379, -0.03967245668172836, -0.02026921510696411, -0.01422092504799366, -0.007354017812758684, 0.02290773205459118, -0.0250456053763628, 0.017996031790971756, 0.020796919241547585, -0.006961623206734657, -0.018970252946019173, -0.005226291250437498, -0.020363930612802505, 0.03187868744134903, -0.02484264224767685, 0.009248336777091026, 0.03385419026017189, -0.002070220187306404, -0.004634316544979811, 0.015776973217725754, 0.00015296204946935177, 0.022501805797219276, -0.006332438439130783, 0.02022862248122692, -0.013003148138523102, 0.024774989113211632, -0.026479875668883324, 0.005551031790673733, 0.008294411934912205, 0.020769856870174408, -0.01915968582034111, 0.008991250768303871, 0.005753994453698397, -0.0009082583710551262, 0.01650763861835003, 0.00427574897184968, -0.011386211030185223, 0.02819829434156418, -0.003504490479826927, 0.0014621776062995195, 0.0203098077327013, -0.016845909878611565, -0.011582409031689167, -0.02002565935254097, -0.024666741490364075, -0.009667793288826942, 0.012631049379706383, -0.011528285220265388, 0.0005496908561326563, -0.030985649675130844, -0.015817565843462944, -0.002491367980837822, -0.013097863644361496, -0.021554647013545036, -0.025532716885209084, -0.01534398552030325, 0.017441267147660255, -0.030227921903133392, -0.0199038814753294, 0.014017961919307709, 0.014708035625517368, 0.011507988907396793, 0.024071384221315384, -0.0053920443169772625, 0.004444884601980448, 0.03582969307899475, -0.009119793772697449, 0.02919957786798477, 0.020404523238539696, -0.009830163791775703, -0.03049853816628456, 0.0219199787825346, -0.006667327135801315, -0.01805015653371811, -0.002575935795903206, -0.010094014927744865, -0.04982059448957443, -0.019741512835025787, 0.016845909878611565, 0.018415488302707672, -0.021771140396595, 0.010939693078398705, 0.03564026206731796, 0.01698121801018715, -0.0014232763787731528, -0.017522452399134636, -0.0025640963576734066, 0.0035992064513266087, -0.035369645804166794, -0.03085034154355526, 0.0031543797813355923, 0.0013116468908265233, -0.004773007705807686, -0.00399836665019393, -0.005040242336690426, -0.00316452793776989, -0.01368645578622818, -0.019971536472439766, -0.03371888026595116, 0.010540532879531384, -0.01177184097468853, 0.005669426638633013, -0.024504370987415314, -0.039401840418577194, -0.031932808458805084, 0.01745479740202427, 0.006430536974221468, 0.019687388092279434, 0.010621718131005764, 0.00023826982942409813, 0.020255684852600098, 0.017278896644711494, -0.004610637668520212, -0.002016096841543913, -0.01805015653371811, -0.010662310756742954, -0.025410939007997513, -0.01220482774078846, -0.012076284736394882, 0.05274325981736183, 0.006044907961040735, -0.005151871591806412, -0.0328529067337513, 0.0034622065722942352, -0.024544963613152504, -0.027697652578353882, 0.005781056359410286, 0.004536218009889126, 0.008328239433467388, 0.01216423511505127, 0.00706986989825964, 0.01911909319460392, 0.020512770861387253, 0.015262800268828869, -0.02547859400510788, -0.005689722951501608, -0.015912281349301338, -0.02578980289399624, 0.050470076501369476, -0.0030190711840987206, -0.021473461762070656, -0.016521168872714043, -0.0022545780520886183, -0.013267000205814838, -0.018631981685757637, 0.039753641933202744, -0.003954391460865736, -0.00636964850127697, -0.020512770861387253, -0.005858858581632376, 0.01418033242225647, -0.011487692594528198, 0.01301667932420969, -0.02461261861026287, -0.0018215908203274012, 0.019376179203391075, 0.00198565237224102, -0.016764724627137184, 0.008659744635224342, 0.01805015653371811, -0.009546015411615372, 0.008795053698122501, -0.04227038100361824, 0.010696138255298138, 0.010614953003823757, 0.001616091001778841, 0.003744663204997778, -0.016602354124188423, -0.0016905107768252492, 0.035775572061538696, -0.004597106948494911, -0.031499821692705154, -0.016778254881501198, 0.010777323506772518, -0.02863128110766411, 0.014031493104994297, -0.01011431124061346, -0.013591740280389786, -0.004701970610767603, -0.011832729913294315, 0.00971515104174614, -0.0037277494557201862, -0.01293549407273531, -0.01983622834086418, -0.028739528730511665, -0.0074419681914150715, 0.0026571210473775864, -0.011054705828428268, -0.008321473374962807, -0.018469611182808876, 0.010378163307905197, 0.0015027702320367098, -0.03139157593250275, -0.008104979991912842, -0.0015839552506804466, -0.013774407096207142, -0.004292662721127272, 0.009721917100250721, 0.0012397642713040113, -0.009458065032958984, -0.006444068159908056, 0.012712234631180763, -0.023692520335316658, -0.013233172707259655, 0.20404523611068726, 0.00863268319517374, -0.00700221536681056, 0.04741210490465164, 0.009410707280039787, 0.01691356487572193, 0.008700337260961533, 9.069898806046695e-05, 0.011501223780214787, 0.016737662255764008, -0.0008566720061935484, -0.0055679455399513245, -0.014072085730731487, -0.0035417003091424704, 0.012691938318312168, -0.007874955423176289, -0.027981800958514214, -0.02243415080010891, -0.00369392242282629, -0.01642645336687565, -0.023787235841155052, -0.005990784615278244, -0.023367781192064285, -0.000528126023709774, 0.028333602473139763, -0.009025078266859055, -0.004827131051570177, 0.010141372680664062, 0.01903790794312954, 0.018266649916768074, -0.026804616674780846, -0.01938970945775509, 0.014207393862307072, 0.0017201094888150692, -0.002780589973554015, 0.014978652819991112, 0.03171631693840027, -0.007888486608862877, 0.009187447838485241, -0.004894785583019257, 0.013192580081522465, -0.017549514770507812, 0.025627432391047478, 0.007435202598571777, 0.006136240903288126, -0.005256735719740391, -0.0014384986134245992, -0.008098214864730835, 0.001923072268255055, 0.026168666779994965, -0.03271759673953056, 0.007326955907046795, -0.003957774024456739, 0.012529568746685982, -0.0036465644370764494, -0.024626148864626884, 0.005182316061109304, -0.003568761982023716, -0.010811150074005127, 0.019876820966601372, -0.005415723193436861, 0.035180214792490005, 0.015831096097826958, 0.006701154168695211, -0.021947041153907776, 0.011717717163264751, -0.029767872765660286, 0.04673556238412857, 0.022853607311844826, -0.01938970945775509, -0.015411639586091042, -0.009586608037352562, -0.01685944013297558, -0.006092265713959932, -0.0011061470722779632, -0.02334071882069111, 0.0016524551901966333, 0.014423887245357037, 0.028685403987765312, 0.027345851063728333, 0.0018165167421102524, -0.014491542242467403, -0.014058554545044899, 0.018320772796869278, -0.003781873034313321, -0.011940976604819298, 0.02311069332063198, -0.03472016379237175, -0.01679178699851036, -0.009221275337040424, -0.005578093696385622, -0.02053983323276043, -0.03290703147649765, -0.001695584855042398, 0.009911349043250084, -0.029794935137033463, 0.0011053014313802123, 0.014965121634304523, -0.0015002331929281354, -0.04251393675804138, -0.04478711634874344, 0.06251253187656403, 0.046789683401584625, 0.003147614188492298, -0.03306940197944641, -0.008307943120598793, -0.03385419026017189, 0.015357516705989838, -0.016480576246976852, -0.02002565935254097, 0.0029175898525863886, -0.04064667597413063, 0.01856432855129242, -0.019484426826238632, -0.018537266179919243, 7.896520401118323e-05, 0.024463778361678123, 0.005023328587412834, -0.016345268115401268, 0.009031843394041061, 0.0010638631647452712, -0.0005742154899053276, 0.0213652141392231, -0.013036975637078285, -0.03512609004974365, -0.02315128594636917, -0.025194445624947548, 0.01426151767373085, -0.016209959983825684, -0.027386443689465523, 0.019876820966601372, -0.018983785063028336, 0.00983692891895771, -0.03239285945892334, 0.00021691646543331444, 0.016534700989723206, 0.023868421092629433, -0.0019924179650843143, -0.019619734957814217, -0.009911349043250084, -0.0045937239192426205, -0.005879154894500971, 0.03290703147649765, 0.01805015653371811, 0.016724132001399994, 0.009485126473009586, -0.00011363800877006724, 0.02286713942885399, 0.024396125227212906, -0.02271829918026924, -0.004681674763560295, 0.013936776667833328, 0.0012321531539782882, 0.009897817857563496, 0.011947741732001305, -0.008666510693728924, 0.004881254397332668, -0.022664176300168037, -0.007333721499890089, -0.015452232211828232, -0.04427294433116913, 0.005574710667133331, -0.002824565162882209, -0.0072051784954965115, -0.01667000912129879, 0.0011966347228735685, -0.16940626502037048, 0.004495625384151936, 0.021162251010537148, -0.020945757627487183, 0.02587098814547062, -0.001616091001778841, 0.020255684852600098, -0.022961854934692383, -0.008443251252174377, 0.012157469987869263, 0.013050505891442299, -0.0033759474754333496, -0.026601653546094894, -0.06332438439130783, 0.016169367358088493, 0.0020313190761953592, 0.014667442999780178, 0.02243415080010891, 0.03439542278647423, 0.005053773056715727, 0.030038490891456604, -0.03177043795585632, 0.0022308991756290197, -0.011406507343053818, -0.008328239433467388, -0.011088532395660877, -0.0017894550692290068, 0.008957423269748688, 0.016385860741138458, -0.042486872524023056, -0.030200859531760216, -0.0017911464674398303, 0.005141723435372114, 0.008206461556255817, 0.020553363487124443, 0.00823352299630642, 0.003379330039024353, 0.006247870624065399, 0.0002691370900720358, 0.04451650008559227, 0.027427036315202713, 0.038887668401002884, 0.004032193683087826, -0.005892685614526272, 0.018280180171132088, 0.01642645336687565, 0.00054926797747612, -0.011683890596032143, 0.0230295080691576, 0.007597573101520538, 0.03531552106142044, -0.0029767872765660286, -0.007164585869759321, -0.021987633779644966, -0.003859675256535411, -0.007597573101520538, -0.001775924232788384, 0.01216423511505127, 0.015235738828778267, -0.008544732816517353, -0.0020719117019325495, -0.025072667747735977, -0.003178058657795191, -2.497393506928347e-05, 0.019538549706339836, -0.022745361551642418, -0.01619642972946167, 0.03315058723092079, -0.037155717611312866, -0.003592441091313958, -0.007394610438495874, 0.008321473374962807, -0.002751836786046624, 0.024193162098526955, 0.014315640553832054, 0.0029057504143565893, -0.01269870437681675, 0.007401375565677881, 0.019146155565977097, 0.0048880199901759624, 0.010121076367795467, 0.015519886277616024, -0.026019826531410217, -0.0011289804242551327, -0.007766708731651306, -0.013524086214601994, 0.0016380787128582597, -0.0033218238968402147, -0.0012769741006195545, 0.010283446870744228, 0.04194563999772072, -0.03775107488036156, 0.0009623817750252783, -0.016494108363986015, 0.013009913265705109, 0.035613201558589935, 0.004641082137823105, 0.008152337744832039, 0.03550495207309723, 0.006071969401091337, -0.013544382527470589, 0.0007860579062253237, -0.027115825563669205, 0.004191181156784296, 0.00543940206989646, 0.023137755692005157, 0.009173917584121227, -0.0036668607499450445, 0.026398690417408943, 0.0017285662470385432, -0.026046888902783394, 0.042243316769599915, 0.007780239451676607, 0.024896766990423203, -0.005578093696385622, 0.012624284252524376, 0.02235296554863453, -0.0024592322297394276, -0.0004414440190885216, 0.0012050914810970426, 0.06483983993530273, -0.01761716790497303, -0.01275959238409996, 0.015235738828778267, 0.002587775234133005, -0.029686687514185905, -0.09460771083831787, -0.004911698866635561, 0.03033616952598095, -0.004360316786915064, 0.01911909319460392, 1.9463812350295484e-05, -0.01056759525090456, 0.01595287397503853, -0.013936776667833328, 0.004059255588799715, -0.03823818638920784, -0.005134958308190107, 0.011846260167658329, -0.008517671376466751, -0.005838562268763781, -0.007983202114701271, 0.011014113202691078, -0.005436019506305456, 0.007888486608862877, 0.041972700506448746, 0.034855473786592484, -0.008456782437860966, 0.006291845813393593, 0.03444954752922058, -0.022231189534068108, 0.00960013922303915, -0.0066436477936804295, 0.025627432391047478, 0.01550635602325201, 0.011129125021398067, 0.01872669905424118, -0.00656584557145834, 0.020607486367225647, 0.013226407580077648, -0.00811851117759943, -0.012631049379706383, -0.02587098814547062, 0.014315640553832054, 0.01915968582034111, -0.017035342752933502, 0.009018312208354473, 0.004309576004743576, 0.023043040186166763, -0.018889067694544792, -0.024666741490364075, 0.011636531911790371, -0.021419337019324303, 0.017251836135983467, 0.007225474808365107, -0.014951590448617935, -0.0014156653778627515, -0.023963138461112976, -0.018713166937232018, 0.0033218238968402147, 0.022366497665643692, -0.03723690286278725, 0.00936334952712059, 0.016778254881501198, -0.010729964822530746, 0.016521168872714043, -0.014491542242467403, 0.010858507826924324, -0.0032169600017368793, 0.020715733990073204, 0.007962905801832676, -0.005408957600593567, -0.034584857523441315, 0.0059366608038544655, -0.0030207624658942223, 0.0019349117064848542, -0.01955207996070385, -0.001733640325255692, -0.012455148622393608, -0.0010080484207719564, -0.01998506672680378, 0.004705353640019894, 0.005977253429591656, -0.016264082863926888, -0.007536684162914753, -0.014085615985095501, -0.03720984235405922, -0.0029057504143565893, -0.012989616952836514, -0.03298821672797203, -0.0024558494333177805, 0.022569460794329643, 0.032798781991004944, -0.0008955732337199152, 0.02228531241416931, -0.03076915629208088, -0.020350400358438492, 0.024950889870524406, -0.009431003592908382, -0.005327772814780474, -0.011440334841609001, 0.005801352672278881, -0.01216423511505127, 0.01372704841196537, 0.010046657174825668, -0.002966639120131731, -0.026493407785892487, -0.010263150557875633, -0.07252535969018936, -0.012691938318312168, 0.03033616952598095, -0.006484660319983959, 0.019727980718016624, -0.04316341504454613, -0.021202843636274338, -0.006680857855826616, 0.02366545982658863, 0.008017029613256454, -0.028550095856189728, 0.007184882182627916, -0.02208234928548336, -0.004610637668520212, -0.019579142332077026, -0.022650646045804024, 0.016128774732351303, 0.004999649710953236, -0.013896184042096138, 0.040348999202251434, 0.007049573585391045, 0.010459347628057003, 0.007259301841259003, 0.015790503472089767, -0.005625451449304819, -0.02022862248122692, 0.026249852031469345, 0.031039772555232048, -0.00556117994710803, -0.03555907681584358, 0.0007306659827008843, -0.0025353431701660156, -0.011460631154477596, -0.0030731945298612118, 0.022731829434633255, 0.011710952036082745, -0.0019332204246893525, 0.0034436017740517855, 0.027048172429203987, 0.011115594767034054, -0.0006659716018475592, -0.022190596908330917, 0.011305026710033417, -0.028577158227562904, -0.016737662255764008, 0.015059837140142918, -0.010411989875137806, -0.015966404229402542, 0.0129760866984725, -0.0027552195824682713, 0.024342002347111702, -0.00023277293075807393, -0.015100429765880108, -0.028387725353240967, -0.013145222328603268, -0.008537966758012772, -0.010290211997926235, 0.018591389060020447, -0.010736730881035328, -0.0059806364588439465, 0.056667204946279526, 0.0015661960933357477, 0.00011110097693745047, -0.013963839039206505, 0.029930243268609047, -0.025816865265369415, -0.0464649423956871, -0.0007522307569161057, -0.007956140674650669, -0.02097281999886036, -0.04210801050066948, -0.0025353431701660156, 0.01679178699851036, -0.0048744892701506615, -0.008044091053307056, -0.0125228026881814, -0.008517671376466751, -0.001183103770017624, 0.004448267165571451, 0.017035342752933502, 0.01011431124061346, -0.02484264224767685, -0.007272832561284304, 0.023760175332427025, 0.040511369705200195, 0.01695415750145912, 0.0052871801890432835, 0.02330012619495392, 0.025708617642521858, -0.0125228026881814, -0.022150004282593727, 0.001548436819575727, 0.01181243360042572, 0.013036975637078285, 0.0010875421576201916, 0.002885454101487994, -0.00835530087351799, 0.02741350419819355, 0.03128333017230034, 0.010743496008217335, 0.011623001657426357, 0.014829813502728939, 0.008138807490468025, -0.011663594283163548, 0.011115594767034054, 0.019010845571756363, -0.0010926162358373404, -0.01994447410106659, 0.0014993874356150627, -0.0028211825992912054, -0.022894199937582016, 0.0028922194615006447, -0.02350308932363987, 0.02555977739393711, 0.007854659110307693, 0.024720866233110428, 0.002811034442856908, -0.013469962403178215, 0.015181615017354488, 0.016182897612452507, -0.003017379902303219, 0.0018165167421102524, 0.018848475068807602, 0.000561953173018992, 0.014599788933992386, 0.028739528730511665, 0.016697069630026817, -0.005990784615278244, 0.0022359732538461685, -0.010628484189510345, 0.03041735291481018, 0.006207277998328209, -0.024463778361678123, -0.02638516016304493, -0.009173917584121227, -0.03136451169848442, -0.03168925270438194, 0.010493175126612186, 0.006359500344842672, 0.08237582445144653, 0.01422092504799366, -0.028901899233460426, 0.012150704860687256, -0.012671642005443573, 0.012631049379706383, 0.0038359963800758123, 0.010966755449771881, -0.030796216800808907, -0.03831937164068222, 0.05298681557178497, -0.013003148138523102, -0.02204175665974617, -0.02574921026825905, 0.007847893983125687, 0.02776530757546425, -0.01761716790497303, 0.0027958122082054615, -0.004837279208004475, -0.006403475534170866, 0.022366497665643692, -0.015452232211828232, 0.006048290524631739, -0.009904582984745502, -0.014518603682518005, 0.009512188844382763, 0.03772401437163353, 0.01753598265349865, -0.007726116105914116, -0.017075933516025543, 0.015655195340514183, -0.010520236566662788, -0.0003875320253428072, -0.008335004560649395, -0.01123737171292305, 0.03756164386868477, 0.007022511679679155, -0.032446980476379395, 0.006410240661352873, 0.028983084484934807, 0.006816166453063488, -0.01675119437277317, -0.010269916616380215, -0.018415488302707672, 0.003974687773734331, 0.005672809202224016, 0.007272832561284304, -0.011893617920577526, -0.017914846539497375]"
Were Ready for You Now: Dragonfly In-Memory DB Now Supports Replication for High Availability,Were Ready for You Now: Dragonfly In-Memory DB Now Supports Replication for High Availability,"Dragonfly is a highly performant in-memory database that can act as a drop-in Redis replacement. Version 1.0 of Dragonfly is production ready and includes database replication, making it easy to migrate from Redis and suitable for high-availability deployments.  High availability refers to a systems ability to operate continuously  without downtime or failure  preferably by using built-in [failover](https://www.techtarget.com/searchstorage/definition/failover) mechanisms rather than over-provisioning. High availability is important to any modern application: from social media to important financial software applications, users expect performant applications with no downtime.  Dragonflys replication process is fast and memory-reliable, and it supports high throughput. This makes it perfect for high-availability solutions, especially where existing Redis deployments are struggling.  Dragonfly makes migration easy, providing an API that is fully compatible with Redis. This means you can use it with your existing applications and libraries without the need to make any code changes.  In this article, we explain what database replication is and how you can leverage it to improve availability. We also explain how the replication process works in Dragonfly and how it differs from replication in Redis. Finally, we will cover how to configure and manage replication in Dragonfly.  ## What is database replication?  Database replication is the process of continuously copying the contents of a primary database to replica databases, which are usually running on different servers. Keeping multiple copies of the same database allows your system to avoid a single point of failure  if your primary node fails, a replica can be automatically promoted to be the new master node, becoming the new destination for data writes and the source of any other remaining replicas. This allows systems to recover from failure without data loss, decreased performance, or downtime.  ## How does replication help with high availability?  Database replication is one of the cornerstones of any highly available in-memory database system. Without replication in place, if your database crashes, you will have to manually restore from a backup. This is time consuming, and even worse, you will have lost any data that was written to your database since your last backup. With a reliable database replication implementation, including a monitoring system to detect instability or failures, your application will be able to deal with a primary database node failing by automatically falling back to a replica node and continuing to operate as normal.  ## How Dragonfly replication works  For developers, replication in Dragonfly works the same as Redis replication and implements the exact same API for compatibility and ease of learning. However, the underlying code is all Dragonfly. One of the key differences is Dragonflys [snapshotting algorithm](/blog/balanced-vs-unbalanced), which makes replication reliable without drastically affecting performance.  Dragonfly uses a [shared-nothing architecture](https://en.wikipedia.org/wiki/Shared-nothing_architecture) that allows data to be replicated in parallel over different connections, with one connection per thread. This shared-nothing architecture is made possible by the fact that Dragonfly was designed to allow multiple threads, making it super fast. Stored data is spread across different [shards](<https://en.wikipedia.org/wiki/Shard_(database_architecture)>) within Dragonfly, each holding a different set of keys. As part of Dragonflys multi-threaded design, each thread is responsible for a specific shard and performs operations on this shard, such as replicating the shards data.  In order for replication to begin, a handshake phase occurs, where connections are opened between replica and master to each [shard](<https://en.wikipedia.org/wiki/Shard_(database_architecture)>) thread to send the data into the replica.  ![](/assets/blog/replication-for-high-availability/replica-connection.png ""The replica establishes connections with the master node and exchanges metadata details."")  Once these connections are established, there is a full synchronization phase. This is where the whole dataset is copied from master to replica. Any updates that happen to the master database while the full database snapshot is being copied are sent to the replica in parallel. The snapshot and the updates happen in parallel thanks to Dragonflys snapshotting algorithm, which is using [fibers](<https://en.wikipedia.org/wiki/Fiber_(computer_science)>).  ![](/assets/blog/replication-for-high-availability/replica-updates.png ""Updates are pushed to the replica along with the full snapshot, which saves significant amounts of memory and makes the process more stable."")  When each shard finishes its part of the full sync, it changes its status to _streaming state,_ which means its ready to begin its final, stable synchronization phase of sending updates to the replica. Once all shards are in this state, the stable synchronization phase begins.  The stable synchronization phase is the standard operating phase of Dragonfly replication. Every time there is an update to the primary database, the change gets streamed asynchronously to the replicas.  ## How replication in Dragonfly is different from that in Redis  Redis uses a single thread for its replication process, whereas Dragonfly is multi-threaded and able to use all CPU threads made available to it for the replication process. Because of this, Dragonfly can replicate shards data _in parallel_, making replication super-fast.  Dragonflys efficient snapshotting algorithm allows it to send update commands to the replica at the same time as sending the full snapshot. Redis, however, sends the full snapshot first  and stores update commands in an in-memory buffer, which can later be sent to the replica (once snapshotting is complete).  Rediss replication method can lead to large memory spikes, as shown below. This happens because it uses the lazy [copy-on-write](https://en.wikipedia.org/wiki/Copy-on-write) operation, which causes memory pages to be duplicated. This means that as the size of your database increases, small writes can use a lot of memory. In turn, this causes the memory to quickly reach 100% capacity, leading to large latency spikes.  Its common for Rediss memory usage to double during replication. This can happen in large spikes, making it difficult to predict memory usage. Therefore, if youre using Redis, you will need to over-provision its servers to avoid the possibility of your system running out of memory and crashing. In Dragonfly, the memory overhead of replication is constant and not affected by the dataset size. This makes it suitable for situations that require high availability but where it is not appropriate to have excess capacity continuously online to handle unexpected traffic spikes.  One final issue worth mentioning that can happen with Redis replication is that the buffer used to store updates while the snapshot is being copied to the replica is finite in size: the higher your workload is, the more likely that this buffer will fill completely. If this happens, the replication process will completely restart. After this, exactly the same problem will happen again: the buffer will reach capacity and replication will restart, causing an [endless replication loop](https://redis.com/blog/the-endless-redis-replication-loop-what-why-and-how-to-solve-it/). In Dragonflys snapshotting algorithm, there is no need for a replication buffer. Instead, it sends the updates to the replica right away. This makes the replication process very stable, and the server can handle a high workload while replicating the data.  ## A comparison of Redis and Dragonfly  benchmark tests  We performed some tests on the performance of Redis and Dragonfly during replication. These tests were run on single instances of Redis and Dragonfly hosted on an AWS c5n.9xlarge instance with 36 virtual CPUs and 96 GiB of RAM. We used Redis Labss [memtier_benchmark](https://github.com/RedisLabs/memtier_benchmark) tool to perform our tests.  The results of these tests show that Dragonflys throughput was 7.6 times faster than that of Redis, while its average latency was 7.6 times lower, and its tail (P99) latency was 3.3 times lower. Also, the full sync phase of replication was 5.5 times faster in Dragonfly than Redis, and there were no noticeable memory spikes for Dragonfly, unlike Redis.  ![](/assets/blog/replication-for-high-availability/benchmark-throughput.png ""Dragonflys throughput while replication was running was 1,205,511.27 operations per second, while Rediss was 159,222.92 operations per second."")  ![](/assets/blog/replication-for-high-availability/benchmark-average-latency.png ""The average latency while replication was running was 0.44763 ms per second for Dragonfly and 3.39067 ms for Redis, showing that its possible to have high throughput and low latency."")  ![](/assets/blog/replication-for-high-availability/benchmark-p99-latency.png ""The P99 latency while replication was running was 2.399 ms per second for Dragonfly and 7.839 ms for Redis. Tail latency is low in Dragonfly because its replication process doesnt cause memory spikes."")  ![](/assets/blog/replication-for-high-availability/benchmark-memory-usage.png ""Dragonflys full sync replication phrase is 5.5 times faster than that of Redis, and while Redis suffers from large memory spikes during replication, Dragonfly has no noticeable memory spikes."")  ## How to configure and manage Dragonfly replication for high availability  Our [replication documentation](/docs/managing-dragonfly/replication) gives the full details of how to manage Dragonfly replication and use replication to migrate from Redis to Dragonfly. The Dragonfly replication management API is fully compatible with the Redis API and consists of two user-facing commands: ROLE and REPLICAOF (SLAVEOF).  Rather than using the API directly, you can use a high-availability monitoring system such as [Redis Sentinel](https://redis.io/docs/management/sentinel/) to manage failover automatically. Dragonfly is fully compatible with Redis Sentinel, which can detect when a master instance has failed and automatically promote a replica to be the next master node.  ## Dragonfly is ready to simplify your in-memory database operations  Dragonflys 1.0 GA release now includes full support for replication, making it perfect for high-availability deployments. It is fast, memory-reliable, and easy to manage, scaling vertically to support millions of operations per second and terabyte-sized workloads. It does this all on a single instance, so you dont need to manage a cluster.  As Dragonfly has the same API as Redis, you can use it as a drop-in replacement in your production environments.  You can [start using Dragonfly](https://github.com/dragonflydb/dragonfly/blob/main/docs/quick-start/README.md) in a Dockerized container in a matter of minutes, and youll be able to see how fast it performs right away. Weve also published some key performance comparisons with Redis [here](/blog/scaling-performance-redis-vs-dragonfly).","[-0.018774859607219696, -0.0027839846443384886, -0.017711129039525986, -0.017790907993912697, 0.0037130876444280148, 0.012006868608295918, -0.02034386433660984, 0.00797798577696085, -0.016474541276693344, -0.019559361040592194, -0.003576796967536211, 0.007160242181271315, -0.00668821157887578, -0.012937633320689201, 0.0008164969622157514, 0.01271823886781931, 0.01709948293864727, -0.021593747660517693, 0.018508926033973694, -0.019014200195670128, 0.0016238525277003646, -0.00798463448882103, -0.012984171509742737, 0.0022670775651931763, -0.022059131413698196, 0.0034903688356280327, 0.007186835631728172, -0.006153021473437548, 0.011601321399211884, 0.004820032976567745, 0.022657480090856552, -0.013655652292072773, 0.004474320448935032, 0.0037130876444280148, -0.01719255931675434, -0.006535300053656101, 0.016354870051145554, -0.008137545548379421, 0.030103599652647972, 0.004487616941332817, 0.02575559727847576, -0.01380191557109356, -0.006867716088891029, -0.006781287956982851, -0.024372747167944908, 0.0080777108669281, -0.0016088937409222126, -0.016580913215875626, 0.017405305057764053, -0.026101309806108475, 0.015304435975849628, 0.021779900416731834, -0.02146078087389469, -0.003752977354452014, 0.017485085874795914, 0.018828045576810837, 0.002636059420183301, 0.001808343455195427, 0.015304435975849628, -0.017272338271141052, 0.007705404423177242, 0.02447911910712719, -0.012824611738324165, -0.005385140422731638, -0.01228609774261713, -0.003131359349936247, 0.005614507477730513, -0.026420429348945618, 0.014200814999639988, -0.0062294770032167435, 0.03813477233052254, 0.018668485805392265, 0.006887660827487707, -0.006276015657931566, 0.012571975588798523, -0.019692327827215195, 0.005926978774368763, -0.000686854706145823, -0.0026992184575647116, -0.011408519931137562, 0.004633880220353603, 0.003536907024681568, -0.014493340626358986, 0.02039705030620098, -0.002582872984930873, 0.04087388142943382, -0.03111414425075054, 0.004238305147737265, -0.007751942612230778, 0.010384677909314632, -0.003410588949918747, 0.011647859588265419, 0.0005763263907283545, 0.0010321518639102578, 0.0004890671698376536, 0.012897743843495846, 0.018508926033973694, 0.007319801952689886, -0.029385581612586975, -0.01699310913681984, -0.017285635694861412, -0.006821177899837494, -0.011973626911640167, -0.009301002137362957, -0.014772570692002773, -0.0037297082599252462, 0.02357494831085205, -0.020928915590047836, 0.00483997818082571, 0.014187517575919628, -0.024213187396526337, 0.03696466609835625, 0.027125151827931404, -0.027111854404211044, 0.004098690114915371, -0.005847198888659477, 0.025808783248066902, -0.0344117134809494, 0.020530017092823982, -0.02038375288248062, 0.020662983879446983, 0.00453083124011755, 0.0154639957472682, -0.02768361009657383, -0.006226153112947941, 0.009925943799316883, 0.0023668024223297834, -0.0011834012111648917, 0.0003340781549923122, 0.00791150238364935, -0.009274408221244812, 0.030422719195485115, -0.0007267446490004659, 0.007831722497940063, -0.029039867222309113, -0.009852812625467777, -0.01705959253013134, -0.0028006054926663637, -0.013655652292072773, -0.01180741935968399, 0.010823467746376991, 0.010617369785904884, -0.020982103422284126, -0.01825628988444805, -0.02667306549847126, 0.031406670808792114, -0.013203565962612629, 0.01003231666982174, 0.005002861842513084, -0.0074793617241084576, 0.01828288473188877, -0.02239154651761055, -0.014400264248251915, -0.001428558025509119, 0.02244473248720169, 0.030342938378453255, -0.023109564557671547, -0.0010936488397419453, -0.013389719650149345, -0.010005723685026169, 0.02647361531853676, 0.028109103441238403, -0.013609114103019238, -0.0034903688356280327, 0.0159559715539217, 0.032390620559453964, -0.005940275266766548, -0.01709948293864727, 0.008682708255946636, -0.02128792554140091, -0.002732460154220462, 0.014692790806293488, -0.03523610532283783, 0.0362466499209404, -0.01063066627830267, -0.004972944501787424, -0.007432823535054922, 0.005468244198709726, -0.012598569504916668, -0.022697368636727333, 0.01543740276247263, -0.0011950357584282756, 0.00318953231908381, 0.02361483871936798, -0.02466527186334133, -0.014466747641563416, -0.018469037488102913, -0.006987385917454958, 0.0027258119080215693, -0.010038965381681919, -0.015743225812911987, 0.0030432690400630236, -0.0031263730488717556, -0.02554285153746605, -0.6097308397293091, -0.009739791043102741, 0.007033924106508493, -0.051617566496133804, -0.009400726296007633, -0.005787363741546869, 0.01704629696905613, 0.006488761864602566, -0.0019163786200806499, -0.004201739095151424, 0.005205635912716389, -0.0075192516669631, -0.0031945183873176575, -0.015450699254870415, -0.03845389187335968, -0.009686604142189026, -0.0031230489257723093, -0.006465492770075798, -0.021779900416731834, -0.0024332855828106403, -0.0531865730881691, 0.02880052849650383, -0.024226482957601547, 0.005614507477730513, -0.012631811201572418, 0.007778536062687635, 0.003164601046591997, 0.0003475825651548803, -0.012153131887316704, 0.03946443647146225, -0.053851403295993805, 0.013489443808794022, 0.032390620559453964, 0.01114258635789156, 0.04563407972455025, -0.003081497037783265, -0.027231523767113686, 0.034784018993377686, 0.004145228303968906, 0.051697347313165665, 0.003187870141118765, -0.004750225692987442, 0.01445345114916563, 0.013482796028256416, 0.008017875254154205, -0.011109345592558384, 0.014652900397777557, -0.012950929813086987, -0.00640898197889328, -8.081865962594748e-05, -0.0044975895434618, -0.02559603750705719, -0.011947033926844597, 0.0015582003397867084, -0.003955751191824675, -0.01487894356250763, 0.05425030365586281, -0.018974309787154198, 0.01228609774261713, 0.0009664997342042625, 0.007293208502233028, 0.013682245276868343, -0.0022305117454379797, -0.01166780386120081, -0.02247132733464241, 0.0038128122687339783, 0.00016381879686377943, -0.012917689047753811, 0.02447911910712719, -0.02687251567840576, 0.025955047458410263, -0.015583665110170841, 0.010510995984077454, -0.007692107930779457, 0.00397237204015255, 0.010351436212658882, 0.032523587346076965, 0.004022234585136175, 0.003365712705999613, 0.025968343019485474, 0.02763042412698269, 0.012133186683058739, -0.008277160115540028, -0.01717926189303398, 0.03640620782971382, 0.015104986727237701, -0.03300226852297783, -0.019984854385256767, 0.00612975237891078, 0.00048075674567371607, 0.02333560772240162, 0.025955047458410263, -0.019014200195670128, -0.020742762833833694, 0.017485085874795914, 0.028321849182248116, -0.022644182667136192, -0.012173076160252094, 0.003766274079680443, -0.0143470773473382, 0.005720880813896656, -0.02893349528312683, -0.019519472494721413, 0.018628597259521484, 0.0138551015406847, -0.0027291360311210155, -0.03294908255338669, -0.0013329884968698025, 0.03305545449256897, -0.003766274079680443, 0.005890412721782923, -0.012857853434979916, -0.0018532195826992393, -0.009500451385974884, 0.008210676722228527, -0.016554320231080055, 0.030342938378453255, -0.001615542103536427, 0.01549058873206377, -0.030502498149871826, 0.004547452088445425, -0.022178800776600838, 0.008868861012160778, -0.0003423885500524193, 0.00800457876175642, -0.007193483877927065, -0.0074793617241084576, -0.016527727246284485, 0.009128144942224026, 0.016567617654800415, 0.020742762833833694, -0.029039867222309113, 0.01010544877499342, -0.007379636634141207, 0.04704352095723152, -0.013589168898761272, 0.01170769426971674, 0.0030116895213723183, 0.017724424600601196, -0.03489039093255997, 0.026234276592731476, -0.0004057553596794605, 0.024306263774633408, -0.013356477953493595, -0.022843632847070694, -0.011880550533533096, -0.027337897568941116, -0.013542630709707737, -0.0028238745871931314, -0.006920902524143457, -0.018761564046144485, -0.005528079345822334, 0.0013612437760457397, 0.021527264267206192, -0.01330993976444006, 0.01389499194920063, 0.0035269344225525856, -0.043054528534412384, -0.012086648494005203, -0.019506175071001053, 0.015131579712033272, 0.017844093963503838, -0.014745976775884628, -0.003929158207029104, -0.037762466818094254, -0.02470516227185726, -0.0052222562953829765, 0.022950004786252975, -0.004341354127973318, -0.024944502860307693, -0.020928915590047836, -0.0040488275699317455, 0.008795728906989098, 0.01721915230154991, -0.008875508792698383, 0.0042183599434792995, -0.02361483871936798, 0.017458492890000343, 0.01337642315775156, -0.004793439991772175, 0.0161554217338562, 0.023109564557671547, -0.004697039257735014, -0.020809246227145195, 0.03669873625040054, 0.005631128326058388, 0.01795046776533127, 0.025090765208005905, -0.0085696866735816, 0.03832092508673668, -0.0007392102270387113, 0.045155398547649384, -0.010923191905021667, -0.03640620782971382, -0.019625844433903694, -0.025143951177597046, -0.013296643272042274, 0.013555927202105522, -0.008277160115540028, 0.035635001957416534, 0.03393303230404854, -0.010790226049721241, 0.02033056691288948, -0.019373208284378052, -0.006389036774635315, -0.008968586102128029, -0.00013722550647798926, 0.0038194607477635145, 0.026460319757461548, -0.014107737690210342, 0.0138551015406847, 0.011661156080663204, 0.005341926123946905, -0.015743225812911987, -0.0021091799717396498, 0.032762929797172546, -0.011056158691644669, 0.008928695693612099, -0.017671238631010056, 0.008263863623142242, -0.001986186020076275, 0.014519933611154556, 0.0036366318818181753, 0.015596962533891201, 0.016487836837768555, -0.018641892820596695, 0.0019346615299582481, 0.023082971572875977, 0.02014441415667534, -0.027071965858340263, -0.006049972493201494, 0.019452989101409912, 0.006947495974600315, -0.008948640897870064, 0.02755064330995083, 0.02122144214808941, 0.031513042747974396, -0.026367243379354477, 0.002898668171837926, -0.016354870051145554, 0.03270974010229111, 0.012445657514035702, 0.02143418788909912, -0.023867474868893623, 0.014586417004466057, 0.0074261752888560295, -0.008297105319797993, 0.014094441197812557, -0.020569907501339912, -0.00902842078357935, -0.021527264267206192, 0.002680935664102435, -0.002586197108030319, 0.0011842323001474142, 0.007160242181271315, -0.018429147079586983, 0.002513065468519926, -0.0021939461585134268, 0.02006463333964348, 0.012106593698263168, 0.011056158691644669, 0.019000902771949768, 0.035581815987825394, -0.000777438108343631, 0.02031726948916912, -0.0030831589829176664, -0.006418954581022263, -0.009939240291714668, -0.004205063451081514, -0.01174093596637249, 0.005810632836073637, -0.028508001938462257, 0.001726901507936418, -0.032629963010549545, 0.00912149716168642, 0.0015881177969276905, -0.0034870447125285864, 0.016886737197637558, -0.013462850823998451, 0.013496092520654202, -0.013775321654975414, -0.036884889006614685, 0.0077984812669456005, 0.005202311556786299, 0.006006758660078049, -0.05007515847682953, -0.003297567367553711, 0.029412174597382545, 0.01177417766302824, 0.02542318031191826, 0.007745294366031885, 0.006492085754871368, -0.00424827728420496, -0.004427782259881496, -0.009247815236449242, -0.009074958972632885, 0.052920639514923096, -0.004869895521551371, -0.020689576864242554, -0.014573120512068272, 0.004381244070827961, 0.008390181697905064, -0.022245284169912338, -0.016461243852972984, 0.04145893082022667, -0.008290456607937813, -0.002252118894830346, -0.012738184072077274, 0.013083896599709988, -0.007093758787959814, -0.0017352119321003556, -0.01603575050830841, -0.02755064330995083, -0.04140574485063553, 0.00533195398747921, 0.0069408477284014225, -0.02667306549847126, 0.011933737434446812, 0.03090139850974083, 0.007140297442674637, -0.025409884750843048, -0.006907606031745672, -0.007213428616523743, -0.008622872643172741, 0.04292156174778938, 0.01611553132534027, -0.003074848558753729, 0.004653824958950281, -0.02789635770022869, -0.015477292239665985, 0.00644222367554903, -0.021926164627075195, 0.02765701711177826, 0.010889950208365917, 0.0005302036297507584, -0.021673528477549553, 0.006232801359146833, -0.0019064061343669891, 0.0011775839375331998, 0.014599713496863842, -0.02241813950240612, -0.03316182643175125, -0.020490126684308052, -0.022165503352880478, -0.006887660827487707, -0.012571975588798523, 0.02973129414021969, -0.0005202311440370977, 0.05563315376639366, 0.01703299954533577, 0.01817651093006134, -0.01493212953209877, 0.00483665382489562, -0.005714232102036476, -0.023734508082270622, 0.00038373281131498516, -0.0014559824485331774, 0.007020627614110708, 0.004241629038006067, 0.03390644118189812, -0.015104986727237701, -0.01824299432337284, -0.007040572352707386, 0.009872756898403168, 0.011568079702556133, 0.02983766607940197, 0.009414022788405418, 0.012498844414949417, 0.03550203517079353, -0.018734969198703766, -0.005863819736987352, 0.013762025162577629, -0.03871982544660568, 0.013030709698796272, 0.0296781063079834, -0.008676059544086456, -0.030529092997312546, 0.00018563360208645463, 0.005162421613931656, -0.00016922055510804057, 0.008310401812195778, -0.0014426857233047485, -0.011428464204072952, -0.026486912742257118, -0.021075179800391197, 0.016501134261488914, -0.021061882376670837, 0.006502058357000351, -0.007845018990337849, -0.0033407814335078, -0.00911484844982624, -0.0005966868484392762, -0.010278305038809776, -0.01170104555785656, -0.02247132733464241, -0.042203545570373535, -0.011853957548737526, 0.0012723224936053157, 0.010643962770700455, 0.008715949021279812, 0.013296643272042274, 0.020902322605252266, -0.034837204962968826, 0.01591608114540577, 0.022059131413698196, -0.01333653274923563, -0.0018831370398402214, -0.0426822230219841, -0.038001805543899536, -0.00795139279216528, -0.004364623222500086, -0.02548966370522976, -0.018828045576810837, -0.00455742422491312, 0.016753770411014557, 0.013243456371128559, 0.022737259045243263, 0.0034903688356280327, -0.007379636634141207, 0.03082161769270897, 0.027337897568941116, 0.018402554094791412, 0.012478899210691452, -0.03438511863350868, 0.012272801250219345, -0.00238508521579206, -0.012651755474507809, -0.019891778007149696, -0.007133648730814457, -0.011395223438739777, -0.002059317659586668, 0.004999537952244282, -0.01607564091682434, -0.02560933493077755, -0.006355795077979565, -0.003593417815864086, -0.0014617997221648693, 0.018814750015735626, 0.04619253799319267, -0.002908640541136265, -0.005867143627256155, 0.020968805998563766, -0.004540803376585245, -0.002448244486004114, 0.031566228717565536, -0.021075179800391197, 0.03398621827363968, 0.01719255931675434, -0.0045341551303863525, 0.027470864355564117, 0.011082751676440239, -0.02332231216132641, -0.025369994342327118, 0.010956433601677418, 0.027231523767113686, 0.019918370991945267, -0.004357974510639906, -0.025901859626173973, -0.018615299835801125, -0.012173076160252094, -0.016660694032907486, 0.005258822347968817, -0.02148737572133541, -0.004231656435877085, -0.011056158691644669, -0.018415849655866623, 0.018721673637628555, -0.027231523767113686, 0.002980110002681613, -0.020011447370052338, -0.028215475380420685, 0.0075724381022155285, 0.006887660827487707, 0.002965151332318783, -0.00966665893793106, -0.02864096872508526, -0.021992648020386696, -0.017830798402428627, 0.00791150238364935, -0.007552493363618851, 0.01807013712823391, -0.011780825443565845, 0.027417678385972977, 0.010883302427828312, 0.0299440398812294, 0.029598327353596687, 0.01611553132534027, 0.016806956380605698, -0.008197380229830742, -0.008450016379356384, 0.004304788075387478, -0.010677204467356205, 0.0047402530908584595, -0.003942454699426889, 0.02989085391163826, 0.021540561690926552, -0.005095938220620155, -0.008775784634053707, 8.564908057451248e-05, 0.03826773911714554, -0.004913109354674816, -0.01494542695581913, -0.03539566323161125, -0.02338879555463791, -0.0022853605914860964, 0.01114258635789156, 0.011827363632619381, 0.0068278261460363865, -0.020583203062415123, -0.005980165209621191, 0.02330901473760605, -0.027470864355564117, 0.0489848330616951, -0.0022687397431582212, 0.02348187193274498, -0.01177417766302824, 0.011335387825965881, -0.0015557071892544627, 0.005780715495347977, -0.022112317383289337, -0.008031172677874565, -0.024226482957601547, -0.016753770411014557, 0.023854177445173264, 0.022950004786252975, 0.021660231053829193, 0.004939702805131674, 0.018814750015735626, 0.00348039623349905, -0.004072096664458513, -0.012405768036842346, -0.004677094053477049, 0.0036632250994443893, 0.0019546065013855696, -0.009819570928812027, -0.042336512356996536, -0.02888030931353569, -0.023960551247000694, -0.009866109117865562, 0.017272338271141052, 0.002931909868493676, 0.025210434570908546, 0.010710446164011955, -0.008509851060807705, 0.01023176684975624, 0.00557129317894578, 0.02560933493077755, -7.78061366872862e-05, 0.02564922347664833, 0.02140759490430355, 0.01330993976444006, -0.022963302209973335, -0.028401629999279976, 0.013137083500623703, -0.017591457813978195, 0.016554320231080055, 0.031513042747974396, -0.028055915609002113, -0.016301684081554413, -0.0029169509653002024, -0.019625844433903694, 0.001796708907932043, -0.030369533225893974, 0.005062696989625692, 0.03111414425075054, -0.004062124527990818, -0.019479582086205482, 0.012445657514035702, -0.0012349257012829185, 0.01723244972527027, -0.03326820209622383, 0.024878019466996193, 0.04012926667928696, -0.03130029886960983, -0.017511678859591484, 0.032550182193517685, 0.005518106743693352, 0.015224656090140343, -0.03300226852297783, 0.02144748531281948, -0.02330901473760605, 0.02136770449578762, -0.015836302191019058, -0.020889025181531906, 0.015025206841528416, 0.03084821067750454, -0.017631348222494125, -0.006548596546053886, 0.0018249641871079803, 0.007160242181271315, -0.0013853439595550299, 0.008868861012160778, 0.004022234585136175, 0.02991744689643383, -0.02019760012626648, -0.004933054558932781, 0.015729928389191628, 0.02143418788909912, -0.0047967638820409775, -0.01811002753674984, -0.013469499535858631, -0.00024079388822428882, -0.009945889003574848, 0.00016018300084397197, 0.011056158691644669, -0.011481651104986668, 0.0066782389767467976, 0.008363588713109493, 0.007392933592200279, -0.021713417023420334, 0.00013120047515258193, 0.003410588949918747, 0.014626307412981987, -0.04457034543156624, -0.018894528970122337, 0.007678811438381672, -0.0038061640225350857, 0.01814991794526577, 0.014599713496863842, 0.0010720418067649007, -0.00029398046899586916, 0.03603390231728554, -0.007053868845105171, 0.026327352970838547, 0.02888030931353569, -0.013815212063491344, -0.01062401756644249, 0.027032075449824333, -0.002308629686012864, -0.005737501196563244, 0.0191072765737772, -0.02006463333964348, -0.025848673656582832, -0.010364732705056667, 0.0161554217338562, 0.012924336828291416, -0.02786976285278797, -0.013629059307277203, 0.033613912761211395, -0.008642817847430706, -0.003147980198264122, -0.012153131887316704, -0.0024548927322030067, 0.033401165157556534, -0.01287779863923788, -0.01697981357574463, 0.019811997190117836, 0.012911040335893631, -0.023149454966187477, -0.012698293663561344, -0.007020627614110708, -0.02671295590698719, -0.0286941546946764, -0.019692327827215195, -0.022723963484168053, 0.012738184072077274, -0.018389256671071053, 0.0001758688740665093, -0.006531975697726011, -0.021726714447140694, -0.01599586196243763, 0.016461243852972984, -0.008769135922193527, 0.01288444735109806, 0.018894528970122337, 0.0001775309647200629, 0.02663317508995533, 0.017963765189051628, -0.0019512823782861233, 0.002847143681719899, -0.007811777759343386, -0.022112317383289337, -0.046458471566438675, -0.013103841803967953, -0.004348002374172211, 0.045474518090486526, 0.020569907501339912, -0.011986923404037952, -0.020809246227145195, -0.000532696780283004, -0.04834659397602081, -0.0009739790693856776, -0.007592383306473494, 0.009753087535500526, 0.012937633320689201, 0.016235200688242912, 0.017790907993912697, 0.012545382604002953, 0.029438767582178116, 0.020077930763363838, -0.005946923512965441, -0.004746901337057352, -0.023681320250034332, -0.015703335404396057, 0.03653917461633682, 0.006764667108654976, -0.04986241087317467, -0.013974771834909916, -0.00529538793489337, -0.015224656090140343, 0.008257214911282063, 0.023721210658550262, 0.004700363148003817, 0.02548966370522976, -0.005491513293236494, 0.01333653274923563, -0.0021939461585134268, 0.009261111728847027, 0.012272801250219345, -0.038028400391340256, 0.0016255145892500877, 0.023774396628141403, -0.004813384730368853, -0.007878260686993599, 0.008317050524055958, 0.010889950208365917, 0.010770280845463276, -0.007958040572702885, -0.025024281814694405, 0.005687639117240906, 0.00862952135503292, 0.003214463358744979, -0.0023003192618489265, 0.007120352238416672, 0.016607506200671196, 0.043267276138067245, -0.02677943930029869, -0.013143731281161308, 0.0024249751586467028, -0.015809709206223488, -0.028561189770698547, 0.0139215849339962, 0.0008991854847408831, -0.006954144220799208, 0.0069607924669981, -0.025835378095507622, 0.0007957209600135684, -0.01933331787586212, -0.01180077064782381, -0.007964689284563065, -0.024878019466996193, -0.029172834008932114, 0.009128144942224026, -0.003756301710382104, 0.0016787011409178376, -0.012857853434979916, 0.000144289355375804, -0.007326450198888779, -0.02989085391163826, 0.011169180274009705, 0.035635001957416534, -0.006598459091037512, 0.0036565768532454967, 0.010989675298333168, -0.007805129513144493, -0.03406599909067154, 0.0022820362355560064, 0.013296643272042274, 0.002931909868493676, -0.005265470594167709, 0.21285265684127808, 0.005893737077713013, 0.02547636814415455, 0.03925168886780739, -0.0180568415671587, 0.004600638523697853, 0.01920035295188427, 0.004301464185118675, 0.005012834444642067, 0.020995398983359337, 0.0029518548399209976, -0.001069548656232655, -0.020689576864242554, 0.0027258119080215693, 0.006575189996510744, 0.0045939902774989605, -0.030156785622239113, -0.03103436529636383, 0.0016903356881812215, 0.0017318876925855875, -0.018641892820596695, -0.011036213487386703, -0.042203545570373535, -0.019652437418699265, 0.0310609582811594, -0.007665514480322599, 0.0021474077366292477, -0.009812922216951847, 0.01281131524592638, 0.010238414630293846, -0.015769818797707558, 0.0009997413726523519, 0.0160889383405447, 0.016660694032907486, -0.007645569741725922, 0.0055613210424780846, 0.021128365769982338, -0.01938650570809841, 0.004677094053477049, 0.014280594885349274, 0.002774012042209506, -0.00532862963154912, 0.02123473957180977, -0.006219504866749048, 0.012212966568768024, -0.008317050524055958, -0.02462538331747055, -0.002873736899346113, -0.003546879393979907, 0.018389256671071053, -0.018947716802358627, 0.006807880941778421, -0.024758348241448402, 0.023787694051861763, 0.0020875728223472834, 0.004467672202736139, 0.012372526340186596, -0.008875508792698383, -0.005159097258001566, 0.01929342932999134, -0.007712052669376135, 0.02997063286602497, -0.0007230049814097583, -0.005551348440349102, -0.04164508730173111, 0.01902749575674534, -0.04260244220495224, 0.05438327044248581, 0.020077930763363838, -0.016248498111963272, -0.01716596633195877, -0.018761564046144485, -0.02017100714147091, 0.005228905007243156, -0.0005169070209376514, -0.012937633320689201, 0.008895453996956348, 0.008922046981751919, 0.0008584645111113787, 0.03098117746412754, 0.0009507099748589098, -0.004929730203002691, -0.018734969198703766, 0.02781657688319683, 0.0017734396969899535, -0.0008509851177223027, 0.023229235783219337, -0.02034386433660984, -0.030502498149871826, -0.012033461593091488, 0.00581728108227253, -0.007259966805577278, -0.029226021841168404, -0.024239780381321907, 0.0323108434677124, -0.023907363414764404, -0.002680935664102435, 0.03100777044892311, -0.012339284643530846, -0.020543312653899193, -0.03486379608511925, 0.0492507666349411, 0.026460319757461548, 0.00954698957502842, -0.01549058873206377, -0.007665514480322599, -0.0323108434677124, 0.007053868845105171, -0.005890412721782923, -0.012365877628326416, 0.00637574028223753, -0.04238969832658768, 0.014094441197812557, -0.018641892820596695, 0.015198063105344772, 0.023162752389907837, 0.03215128183364868, -0.010178579948842525, -0.005122531671077013, 0.00294022005982697, -0.002057655481621623, -0.014267297461628914, 0.03228424862027168, -0.007705404423177242, -0.040076080709695816, -0.03486379608511925, -0.033401165157556534, 0.02039705030620098, -0.00023227573547046632, -0.027138447389006615, 0.0049064611084759235, -0.01114923506975174, 0.014639603905379772, -0.020782653242349625, 0.005212284158915281, 0.021992648020386696, 0.010836764238774776, -0.012831260450184345, -0.020662983879446983, -0.01587619073688984, 0.0032892569433897734, 0.02229847013950348, 0.026034826412796974, 0.011448409408330917, 0.00453083124011755, -0.01594267413020134, -0.001919702859595418, -0.004793439991772175, -5.708207390853204e-05, -0.02225857973098755, -0.02017100714147091, 0.019612548872828484, 0.0077984812669456005, 0.015104986727237701, 0.015065096318721771, -0.004121959209442139, 0.005863819736987352, -0.02228517271578312, 0.010118745267391205, 0.004623907618224621, -0.061377301812171936, 0.0021224766969680786, -0.01009880006313324, -0.006847770884633064, -0.01232598815113306, -0.017298933118581772, -0.16615484654903412, 0.008642817847430706, 0.011494947597384453, 0.00012060470908181742, 0.022099019959568977, 0.0012590258847922087, 0.02687251567840576, -0.011860605329275131, 0.00849655456840992, 0.00022064117365516722, -0.011016268283128738, -0.0020210896618664265, -0.0296781063079834, -0.04824022203683853, 0.007778536062687635, 0.012432361021637917, 0.004361298866569996, 0.02546307072043419, 0.027071965858340263, 0.015703335404396057, 0.012299394235014915, -0.04616594314575195, 0.022218691185116768, -0.007080462295562029, 0.005700935609638691, -0.03087480552494526, -0.011022916994988918, -0.0018814749782904983, 0.007047220598906279, -0.033746879547834396, -0.024239780381321907, 1.3056420357315801e-05, 0.020809246227145195, -0.005870467983186245, 0.030582278966903687, 0.001407782081514597, -0.002458216855302453, 0.015450699254870415, -0.007113703992217779, 0.03728378564119339, 0.011840660125017166, 0.029279207810759544, -0.012119890190660954, 0.003221111837774515, 0.01225950475782156, 0.02567581832408905, 0.008609576150774956, -0.022976599633693695, -0.00304991751909256, 0.007891557179391384, 0.030662057921290398, 0.002085910877212882, -0.0012914364924654365, -0.009500451385974884, 0.006807880941778421, 0.008828970603644848, 0.011169180274009705, 0.008722597733139992, 0.023734508082270622, -0.01010544877499342, 0.018375961109995842, -0.007805129513144493, 0.006036676000803709, -0.012764777056872845, 0.01336977444589138, -0.03520951047539711, -0.004663797561079264, 0.006415630225092173, -0.02567581832408905, 0.0007716208347119391, 0.0030715244356542826, 0.017431898042559624, 0.0028055915609002113, 0.013682245276868343, 3.994186772615649e-05, 0.008782432414591312, -0.00100888276938349, 0.014812460169196129, 0.030662057921290398, -0.0033607264049351215, -0.006295960396528244, 0.017804205417633057, -0.030582278966903687, 0.0033457677345722914, 0.003826108993962407, -0.01719255931675434, -0.012239559553563595, 0.00511588342487812, -0.012472251430153847, 0.004617259372025728, 0.04986241087317467, -0.03648598864674568, 0.0074261752888560295, -0.00536187132820487, -0.004554100334644318, 0.02647361531853676, 0.0038892680313438177, -0.013289994560182095, 0.03632642701268196, 0.006691535469144583, 0.007864964194595814, 0.00529538793489337, -0.015809709206223488, -0.02344198152422905, 0.0300770066678524, 0.011541485786437988, 0.0004799257148988545, -0.017298933118581772, 0.04499584063887596, -0.01701970212161541, -0.028534594923257828, 0.007725349627435207, 0.0181898083537817, 0.02874734252691269, -0.009207924827933311, 0.023827584460377693, 0.017937172204256058, -0.00912149716168642, 0.034677643328905106, -0.025303510949015617, 0.08052446693181992, 0.0013271712232381105, -0.014785867184400558, 0.03199172392487526, 0.01340301614254713, -0.015623555518686771, -0.10844741761684418, -0.024173296988010406, 0.017737722024321556, -0.006259394809603691, -0.033613912761211395, -0.0019030820112675428, 0.0036233351565897465, 0.019665734842419624, -0.029199426993727684, 0.013948178850114346, -0.03076843172311783, -0.002596169477328658, -0.0056510730646550655, 0.0009349202155135572, 0.012538733892142773, 0.0039025647565722466, -0.01019852515310049, 0.008848915807902813, 0.013762025162577629, 0.0307950247079134, 0.016354870051145554, 0.002845481503754854, -0.009400726296007633, 0.0037629499565809965, -0.03590093553066254, -0.004830005578696728, 0.000884226756170392, 0.0010595762869343162, -0.0027789983432739973, 0.009620120748877525, 0.033401165157556534, -0.0023817610926926136, 0.012731535360217094, -0.0052820914424955845, -0.015264546498656273, -0.01068385224789381, -0.04300134256482124, 0.002621100749820471, 0.0144135607406497, -0.03616686910390854, -0.006711480673402548, 0.012651755474507809, 0.0288271214812994, -0.00905501376837492, -0.003852702211588621, 0.0037396808620542288, 0.012532086111605167, 0.012864502146840096, 0.0063956850208342075, -0.005684314761310816, -0.005009510088711977, 0.0014177545672282577, -0.021580452099442482, -0.0022454706486314535, 0.020476829260587692, -0.03709763288497925, 0.023056378588080406, -0.0021607044618576765, -0.004072096664458513, 0.014546527527272701, -0.012093296274542809, 0.0073663401417434216, -0.014599713496863842, 0.009746438823640347, -0.0009016785770654678, -0.014679493382573128, -0.0024050301872193813, 0.00769875617697835, 4.240901762386784e-05, -0.008230621926486492, -0.02025078795850277, 0.013908288441598415, -0.02991744689643383, -0.00914809014648199, -0.02223198674619198, 0.01009880006313324, 0.007346395403146744, 0.014081144705414772, 0.006242773961275816, 0.009041717275977135, -0.026938999071717262, 0.005491513293236494, -0.005986813455820084, -0.03911872208118439, 0.005308684892952442, 0.025263622403144836, 0.04074091464281082, -0.0011692735133692622, 0.020915620028972626, -0.04579363763332367, -0.023707915097475052, 0.0058771162293851376, -0.01549058873206377, -0.030103599652647972, -0.023973846808075905, 0.018402554094791412, 0.0011568078771233559, 0.009912647306919098, 0.013296643272042274, 0.012392471544444561, -0.031486451625823975, -0.016687287017703056, -0.05675007030367851, 0.009699900634586811, 0.01603575050830841, -0.0034471547696739435, 0.02760383114218712, -0.019426396116614342, -0.018867935985326767, -0.010544237680733204, 0.021580452099442482, 0.023255828768014908, -0.03318842127919197, -0.005139152519404888, -0.0044776443392038345, -0.014825756661593914, -0.018854640424251556, -0.013210214674472809, 0.027045371010899544, -0.0066017829813063145, 0.0026676389388740063, 0.019785404205322266, 0.007226725574582815, 0.017285635694861412, 0.009174684062600136, 0.011381926015019417, -0.028428222984075546, -0.019918370991945267, 0.033534131944179535, 0.02469186671078205, -0.016594210639595985, -0.019811997190117836, 0.0025778866838663816, -0.041113220155239105, -0.018455740064382553, 0.002998393028974533, 0.008190732449293137, 0.006053296849131584, 0.01059077586978674, 0.002830522833392024, 0.013230159878730774, 0.0138551015406847, -0.028082510456442833, -0.023122861981391907, 0.026380538940429688, -0.0043114363215863705, -0.01389499194920063, -0.010996324010193348, -0.01180741935968399, -0.002707528881728649, 0.033667098730802536, 0.009334242902696133, 0.03438511863350868, 0.01223291177302599, -0.000910820032004267, -0.028135696426033974, -0.022099019959568977, -0.0067746397107839584, 0.010278305038809776, 0.0085032032802701, -0.0072001321241259575, -0.01323680765926838, 0.021168256178498268, 0.02543647773563862, -0.01493212953209877, -0.022777149453759193, 0.009420671500265598, -0.013476147316396236, -0.03720400854945183, -0.0006523665506392717, 0.003945778589695692, -0.01323680765926838, -0.04156530648469925, -0.016873439773917198, 0.013130434788763523, 0.001485068816691637, -0.002331898780539632, 0.008875508792698383, -0.009334242902696133, 0.0025163895916193724, -0.02864096872508526, -0.005415057763457298, 0.0036399560049176216, -0.04121959209442139, -0.006415630225092173, 0.026008233428001404, 0.042230136692523956, 0.014001364819705486, -0.017684534192085266, 0.046485062688589096, 0.022803742438554764, -0.009041717275977135, -0.009932592511177063, 0.005996786057949066, -0.014679493382573128, 0.012053406797349453, 0.013190269470214844, 0.01902749575674534, -0.029465360566973686, 0.011621265672147274, 0.006595134735107422, 0.010092152282595634, 0.011435112915933132, 0.0201577115803957, 0.016208607703447342, -0.007319801952689886, -0.01334318146109581, 0.015756521373987198, 0.004474320448935032, 0.0022155530750751495, 0.0027690259739756584, 0.005252174101769924, 0.0015291139716282487, -0.01288444735109806, -0.01587619073688984, 0.029332393780350685, 0.007353043649345636, -0.005863819736987352, 0.006734749767929316, -0.009566934779286385, -0.005265470594167709, 0.0143470773473382, 0.006814529653638601, 0.020769355818629265, 0.024944502860307693, -0.01380191557109356, 0.018455740064382553, 0.04395870119333267, -0.0016870115650817752, -0.008709301240742207, -0.021168256178498268, -0.013788619078695774, 0.0144135607406497, 0.016873439773917198, -0.018854640424251556, -0.010118745267391205, 0.004943027161061764, -0.033560726791620255, -0.018522223457694054, 0.01592937856912613, -0.0009764722199179232, 0.08073721826076508, 0.009945889003574848, -0.02469186671078205, -0.008124249055981636, -0.02552955411374569, -0.003912537358701229, -0.0017751018749549985, 0.01908068172633648, -0.02655339613556862, -0.040980253368616104, 0.04079410061240196, 0.005481541156768799, -0.00692755077034235, -0.03914531692862511, 0.0037330323830246925, 0.01380191557109356, -0.01382850855588913, 0.011395223438739777, -0.016275091096758842, -0.0062494222074747086, 0.020835839211940765, -0.010284953750669956, 0.01072374265640974, -0.02134111151099205, -0.017511678859591484, 0.002277050167322159, 0.034597866237163544, -0.005940275266766548, -0.0030947935301810503, -0.02872074954211712, 0.025010984390974045, -0.01339636743068695, -0.01166780386120081, 0.0041053383611142635, 0.00428151898086071, 0.022963302209973335, 0.008297105319797993, -0.017644645646214485, 0.006674914620816708, 0.021075179800391197, 0.003905888879671693, -0.0029452063608914614, 0.002965151332318783, -0.0162219051271677, 0.032603368163108826, 0.0001677662367001176, 0.005538051947951317, -0.018322773277759552, -0.014666196890175343]"
"Open source is dead, long live open source!","Open source is dead, long live open source!","Open source development stands as an awe-inspiring testament to the collaborative spirit of the developer community. It's a movement that has propelled innovation and progress in ways previously unimaginable. But today, as the open source landscape evolves, we find ourselves at a crossroads where sustainability has become a pressing concern. This is where the innovative Business Source License (BSL) model emerges as a potential savior, ushering in a new era of open source viability.  Traditional open source licenses have been the bedrock upon which countless remarkable achievements have been built. They embody the spirit of sharing, fostering a sense of camaraderie that drives collaborative efforts. Yet, as the software world advances and moves to cloud infrastructure, those same licenses turn from business enablers to threats to the company's business model.  In recent years, almost all successful open source pioneers have had to change their licenses to protect their businesses against unfair competition. [MongoDB](https://www.mongodb.com/licensing/server-side-public-license/faq), [CockroachLabs](https://www.cockroachlabs.com/blog/oss-relicensing-cockroachdb/), [Elastic](https://www.elastic.co/pricing/faq/licensing), and now [Hashicorp](https://www.hashicorp.com/blog/hashicorp-adopts-business-source-license) are all open source companies at their core. Those companies are not blind to the open source community. They are the open source community! But after seeing how their innovation is being used by others to compete against them, they had to push the red button and protect their business.  Changing the license is an extremely painful process for them and the community. Some contributors feel they were misled, and some communities split into disjointed groups of interests. Good press is never part of this change because no one will thank you for not allowing them to compete against you. But still, they chose to power through with the change. They are not trying to break open source; they are trying to fix it so they can continue to innovate in the open.  Traditional open source licenses, like the Apache License, seem ideal: ""I share my code, you contribute back."" While this sentiment is noble, it has revealed cracks in its sustainability as other companies can leverage these innovations without necessarily giving back to the project. The developers who laboriously craft these innovations often find themselves competing against their own technology with the backing of some of the largest corporations in the world.  To counter this, copyleft licenses like AGPL emerged. These licenses assert, ""You can use my code if you share yours."" However, this model limits usage as not all companies can share their code. It doesn't even completely eliminate the issue of unfair competition. This isn't a true solution, but rather a patch that went wrong.  Enter the BSL licensing model  an evolution guided by the belief that open source can flourish while fostering sustainable businesses. BSL is not just about sharing code; it's about striking a balance. It states, ""I share my code, you can use it for free however you want as long as you do not compete with me."" This balance addresses both the community foundation of open source and the reality of business.  Take the [open-core](https://en.wikipedia.org/wiki/Open-core_model) model as an example. In open-core, only a limited set of value and functionality of the product is released as open source, while much of the value is kept closed in order for the company to monetize it. With BSL, SaaS companies can make all of the value of their product open, and it can be fully used for free for 99.9% of the use cases. It only restricts commercial usage by direct competition, and only for a few years. This challenges us to reconsider what openness truly means. Is it about unrestricted usage or about enabling open innovation for most while ensuring the sustainability of the business?  In my opinion, this is what progress looks like. You start with a great idea, and then you continue to iterate to make it better. The open source community is just getting larger and more sustainable as a result. The ultimate winner of this evolution in open source is the developer community. BSL licenses allow more companies to make their innovations open, and to invest more in their open innovations, benefiting all of us in the developer ecosystem.  Long live open source!","[0.017978506162762642, -0.007121356204152107, 0.012649506330490112, -0.01845921389758587, -0.004439688287675381, 0.009449359960854053, 0.00271257059648633, 0.014929438941180706, -0.011214247904717922, -0.04732920601963997, 0.020917696878314018, 0.023087752982974052, -0.004202767740935087, -0.013466711156070232, -0.019379429519176483, 0.0021134016569703817, 0.03378695622086525, -0.019928809255361557, 0.002733172383159399, 0.005260326899588108, -0.0035812798887491226, -0.0032258988358080387, -0.021370936185121536, 0.01578097976744175, -0.007032081950455904, 0.02826567180454731, 0.021535750478506088, -0.013885614462196827, 0.005256893113255501, 0.006905037444084883, 0.025463826954364777, 0.007279303390532732, -0.011083769612014294, 0.017044557258486748, -0.028403017669916153, -0.033457327634096146, -0.00052491674432531, 7.317931886063889e-05, 0.008254455402493477, -0.008391800336539745, -0.0015408431645482779, -0.00023498930386267602, -0.01043824665248394, -0.005919584538787603, -0.0014017809880897403, -0.00466287462040782, 0.008329994976520538, -0.023486055433750153, -0.0012043470051139593, 0.005610557273030281, 0.012450356036424637, 0.02925455942749977, -0.017745019868016243, 0.014558606781065464, 0.01865149848163128, -0.020835289731621742, 0.0008206384372897446, 0.01105630025267601, 0.014517403207719326, -0.0018078081775456667, -0.0010867450619116426, 0.023238832131028175, -0.030765358358621597, 0.012141329236328602, -0.00650330213829875, 0.0020155429374426603, -0.012422886677086353, -0.008007233962416649, 0.0034782709553837776, -0.02867770940065384, 0.025463826954364777, 0.021164918318390846, 0.006235478911548853, 0.00516418507322669, 0.0019657553639262915, -0.001273878151550889, -0.023032814264297485, -0.02295040711760521, -0.008453606627881527, -0.019187144935131073, 0.0023091186303645372, -0.0051092468202114105, -0.014517403207719326, -0.0038937407080084085, -0.00379073154181242, -0.006997745484113693, -0.004443122074007988, -0.0022318619303405285, -0.030380791053175926, 0.006012292578816414, -0.007540259510278702, 0.0026129952166229486, 0.01107003539800644, 0.01454487256705761, -0.036314111202955246, 0.018184524029493332, 0.00909912958741188, 0.023486055433750153, 0.012374815531075, -0.0016326928744092584, 0.014043562114238739, -0.0022043928038328886, -0.014833297580480576, -0.018569091334939003, -0.03565485402941704, -0.0030027127359062433, 0.03323757275938988, -0.006935940124094486, 0.023444851860404015, -0.004164997488260269, -0.02623296156525612, 0.02249716781079769, -0.02399423159658909, -0.01844548061490059, 0.03169930726289749, -0.010355839505791664, 0.018733905628323555, -0.014187774620950222, 0.004769317340105772, 0.016083139926195145, 0.027702556923031807, -0.018500419333577156, 0.006678417790681124, -0.013549118302762508, 0.004415653180330992, -0.007821817882359028, -0.028320610523223877, -0.00042555597610771656, -0.008226986043155193, -0.020560598000884056, 0.013219489715993404, 0.03112245537340641, -0.018088381737470627, -0.012965400703251362, -0.024406269192695618, 0.004467157647013664, -0.010191025212407112, -0.022387292236089706, -0.0051710521802306175, -0.02763388492166996, 0.026054412126541138, 0.023870620876550674, -0.01821199245750904, -0.0003163235087413341, -0.005074910819530487, 0.012615170329809189, 0.007354843430221081, -0.012354213744401932, 0.009785856120288372, 0.002834464656189084, 0.0031469252426177263, -0.02701582945883274, 0.0029340400360524654, 0.019379429519176483, 0.0016713212244212627, 0.01096015889197588, 0.004092891234904528, 0.030820297077298164, -0.0070664179511368275, -0.021123714745044708, 0.011997115798294544, -0.021192386746406555, -0.019008595496416092, 0.011420265771448612, 0.017470328137278557, 0.03873138874769211, 0.01781369186937809, 0.003237916622310877, 0.013075277209281921, -0.0037254926282912493, 0.006874134764075279, 0.0344187431037426, -0.041011322289705276, 0.013858146034181118, 0.011969647370278835, 0.019516773521900177, 0.005325566045939922, 0.032633256167173386, -0.008625287562608719, -0.025450093671679497, 0.0006450939108617604, -0.0024001100100576878, 0.015066784806549549, 0.048620253801345825, 0.0023005346301943064, -0.0007858729222789407, 0.027304254472255707, -0.003794165328145027, -0.00044937682105228305, -0.007464719470590353, 0.014737156219780445, 0.009057926014065742, 0.0017769054975360632, -0.01043824665248394, -0.6289318203926086, -0.023005345836281776, 0.0004096754128113389, -0.051092468202114105, 0.00799349881708622, -0.012512161396443844, 0.03134220838546753, -0.011612549424171448, -0.02457108348608017, 0.029144681990146637, -0.01682480424642563, -0.0019348525675013661, -0.008426137268543243, -0.0318915881216526, -0.0033477928955107927, -0.028210734948515892, 0.015465086326003075, -0.034061647951602936, 0.026342837139964104, -0.010898353531956673, -0.0045358301140367985, 0.00516418507322669, -0.018335603177547455, 0.0070011792704463005, -0.006915338337421417, 0.003169243922457099, 0.011619416065514088, -0.013446109369397163, 0.0004485184035729617, 0.011564478278160095, -0.008426137268543243, 0.017072027549147606, -0.003543510101735592, 0.011090637184679508, 0.04960913956165314, 0.0088038370013237, -0.008481075055897236, 0.019818933680653572, 0.03364960849285126, 0.02398049831390381, -0.020203500986099243, -0.01391308382153511, 0.010685468092560768, 0.0052088224329054356, 0.0024241453502327204, -0.0014532854547724128, 0.05142209678888321, -0.00486545916646719, -0.01637156493961811, 9.930712258210406e-05, -0.008110242895781994, -0.0029889780562371016, 0.018926188349723816, -0.001710808021016419, 0.00035065982956439257, -0.005459477659314871, 0.026507651433348656, -0.04095638170838356, 0.0147508904337883, 0.0007923109806142747, 0.0018661798676475883, 0.014572340995073318, -0.0014798961346969008, -0.03356720134615898, -0.004707511980086565, -0.0130066042765975, -0.0077600120566785336, -0.009600440040230751, 0.021549485623836517, -0.007938561029732227, 0.023554727435112, -0.003263668855652213, -0.006396859418600798, -0.048015933483839035, -0.0038937407080084085, 0.019777730107307434, 0.005136716179549694, -0.01198338158428669, 0.015382679179310799, 0.011914708651602268, 0.008357464335858822, -0.015835918486118317, 0.00018981556058861315, -0.012065788730978966, 0.02661752887070179, -0.0035005896352231503, -0.016041936352849007, -0.017745019868016243, 0.015094254165887833, 0.003073102096095681, 0.01572604291141033, 0.028540363535284996, -0.0041443957015872, -0.020917696878314018, 0.01763514243066311, 0.032440971583127975, -0.016014467924833298, 0.0024018266703933477, 0.0048826271668076515, -0.019942544400691986, -0.042714402079582214, -0.018541622906923294, 0.020711679011583328, 0.016536379233002663, 0.0163440965116024, 0.038813795894384384, -0.0288699921220541, -0.005936752539128065, 0.04090144485235214, -0.048373032361269, -0.005483513232320547, 0.011021964251995087, -0.020395783707499504, 0.0016610203310847282, 0.03197399526834488, -0.018994862213730812, 0.020849023014307022, -0.017964771017432213, 0.009291413240134716, -0.023211363703012466, -0.0017296930309385061, 0.019571712240576744, 0.00020998816762585193, 0.007560861296951771, 0.008590951561927795, 0.004024218767881393, 0.006159938871860504, 0.0016601618845015764, 0.0003937948786187917, 0.012821188196539879, 0.0028791017830371857, -0.023650869727134705, 0.01573977619409561, -0.012752515263855457, 0.040214717388153076, 0.014174040406942368, 0.023431116715073586, -0.015520024113357067, 0.002808712422847748, -0.024708427488803864, -0.00038413776201196015, -0.009353218600153923, 0.0022661981638520956, 0.0036224834620952606, -0.028705177828669548, -0.01637156493961811, -0.0194343663752079, 0.005964221898466349, -0.004975335206836462, 0.0006330762407742441, 0.0032688193023204803, -0.017030823975801468, -0.019818933680653572, 0.015176661312580109, -0.0009639926720410585, 0.012347347103059292, -0.017278045415878296, -0.04191780090332031, -0.007560861296951771, -0.006482700351625681, -0.015712307766079903, -0.01271131169050932, -0.020533129572868347, -0.011784231290221214, -0.006915338337421417, -0.02271692082285881, -0.0022249945905059576, 0.0074097816832363605, -0.013150816783308983, -0.03977521136403084, -0.004185599274933338, -0.017250575125217438, -0.013253825716674328, 0.015643635764718056, -0.008048437535762787, 0.004367582034319639, -0.019818933680653572, 0.007814950309693813, 0.0021580387838184834, -0.005504115018993616, 0.02255210652947426, -0.015643635764718056, -0.0007056117174215615, -0.010465715080499649, 0.008858774788677692, 0.007382312323898077, 0.005596823059022427, -0.0019915075972676277, 0.005225990433245897, 0.005510982125997543, 0.023431116715073586, 0.039582930505275726, -0.001609515747986734, 0.017484063282608986, -0.0025065524969249964, -0.01023222878575325, -0.024914445355534554, 0.00951116532087326, 0.015423882752656937, 0.02947431243956089, 0.026741139590740204, 0.023472320288419724, 0.002439596690237522, -0.006029460579156876, 0.004031085874885321, -0.035490039736032486, -0.005432008299976587, -0.004542697221040726, 0.0225246362388134, 0.042494650930166245, 0.017772488296031952, 0.002528871176764369, 0.013590321876108646, -0.04109372943639755, 0.014668483287096024, 0.020327111706137657, -0.0006566824740730226, 0.01861029490828514, 0.035297755151987076, 0.00799349881708622, -0.004285174887627363, -0.010300900787115097, 0.021604422479867935, -0.007499055936932564, 0.020217236131429672, 0.007313639856874943, -0.021535750478506088, 0.020299643278121948, 0.0008167756022885442, -0.018912455067038536, 0.006166805978864431, 0.017566470429301262, 0.022002724930644035, 0.0018524454208090901, 0.02090396173298359, 0.0038868733681738377, 0.04735667631030083, -0.012862391769886017, 0.03782491013407707, -0.037357933819293976, 0.0005854345508851111, 0.009545501321554184, -0.006424328777939081, -0.0022867999505251646, 0.02947431243956089, -0.0014575774548575282, 0.009133465588092804, 0.007608932442963123, -0.027386661618947983, 0.0027829601895064116, -0.028155796229839325, -0.003910908941179514, -0.019928809255361557, -0.0012206567917019129, 0.03010610118508339, -0.0018163921777158976, -0.006767692044377327, 0.013219489715993404, 0.020162297412753105, 0.0012429753551259637, 0.009270811453461647, 0.009167801588773727, 0.01885751634836197, -0.005116114392876625, -0.002855066442862153, 0.0038594042416661978, -0.03180918097496033, -0.018555356189608574, 0.007622666656970978, -0.0147508904337883, -0.038154538720846176, -0.008336862549185753, -0.001819825847633183, -0.008590951561927795, 0.015890857204794884, 0.03147955238819122, -0.0323585644364357, 0.019379429519176483, 0.003054217202588916, 0.02190658263862133, -0.017126964405179024, 0.0031658103689551353, 0.01495690830051899, 0.009078527800738811, -0.00102150603197515, 0.012230603024363518, -0.017470328137278557, -0.012608302757143974, 0.02682354673743248, 0.013494180515408516, 0.003019880736246705, 0.003201863495633006, -0.031232332810759544, 0.0032859875354915857, 0.01023909542709589, -0.008000366389751434, 0.019928809255361557, -0.008639022707939148, -0.019187144935131073, 0.0077188084833323956, 0.013020339421927929, -0.007210630923509598, -0.014613545499742031, -0.004158130381256342, 0.051477037370204926, -0.0020533129572868347, 0.012223736383020878, -0.024461206048727036, -0.02230488508939743, -0.040049903094768524, -0.010026209987699986, -0.017539000138640404, -0.03197399526834488, -0.017044557258486748, 0.02373327687382698, -0.005359902046620846, 0.028183264657855034, 0.005912717431783676, 0.019365694373846054, -0.010060546919703484, -0.009861395694315434, -0.008563482202589512, -0.02336244285106659, 0.007100754417479038, 0.08180288970470428, -0.00737544521689415, -0.0008528287871740758, 0.01801970973610878, -0.004927264526486397, 0.012759382836520672, -0.012306143529713154, 0.002994128502905369, -0.012017717584967613, 0.02005241997539997, 0.005634592846035957, -0.0008918863604776561, 0.001941719907335937, -0.004082590341567993, 0.014077898114919662, 0.0026267298962920904, 0.01718190312385559, -0.005438875872641802, -0.007732543163001537, -0.02045072242617607, 0.014009225182235241, -0.005820008926093578, 0.025092994794249535, 0.04090144485235214, 0.007080152630805969, 0.013878747820854187, 0.009957537986338139, 0.020588068291544914, -0.012134461663663387, -0.012862391769886017, -0.00507147703319788, 0.010623662732541561, 0.0024035435635596514, 0.018157055601477623, -0.017305513843894005, 0.006661249324679375, -0.005747902672737837, -0.009037324227392673, 0.0046354057267308235, 0.010953291319310665, 0.02130226418375969, 0.014503668993711472, 0.010918955318629742, 0.005325566045939922, -0.009881997480988503, -0.03153449296951294, -0.01781369186937809, 0.017909834161400795, -0.02889746055006981, 0.0004721246368717402, -0.009655377827584743, -0.011660619638860226, -0.054388757795095444, 0.01759393885731697, 0.030243445187807083, 0.0005918726092204452, -0.0037838644348084927, 0.012313010171055794, -0.01321262214332819, -0.04406038671731949, -0.03947305306792259, -0.031177394092082977, 0.010094882920384407, -0.006826063618063927, -0.0033580937888473272, 0.0077806138433516026, -0.027084503322839737, -0.011949045583605766, -0.04241224378347397, 0.004463723860681057, 0.005428574979305267, -0.05452610179781914, -0.06576095521450043, -0.01074040587991476, 0.021123714745044708, -0.006084398832172155, -0.004817388020455837, 0.011997115798294544, -0.01076100766658783, 0.017758753150701523, -0.0018266931874677539, -0.012381683103740215, -0.017085760831832886, -0.027496539056301117, 0.012745648622512817, 0.016852274537086487, -0.013363702222704887, 0.001226665684953332, -0.018692702054977417, -0.001941719907335937, 0.003948678728193045, 0.004024218767881393, -0.0023949595633894205, -0.00019614632765296847, -0.003770129755139351, 0.021535750478506088, 0.040434472262859344, 0.02906227484345436, 0.0251479335129261, -0.006527337711304426, 0.0017872063908725977, 0.018747640773653984, -0.020011216402053833, -0.001533117494545877, 0.023087752982974052, 0.01638530008494854, -0.007464719470590353, 0.003773563541471958, -0.006324753165245056, 0.014036694541573524, 0.01291732955724001, -0.01679733581840992, 0.013398039154708385, 0.003831935115158558, 0.00789735745638609, -0.0034937222953885794, 0.020601801574230194, 0.008062171749770641, 0.009881997480988503, -0.002044728957116604, 0.0038044662214815617, -0.008707694709300995, 0.019351959228515625, 0.010294034145772457, -0.0012524179182946682, 0.0023486055433750153, 0.017854895442724228, -0.007444117683917284, -0.03128727152943611, -0.0078012156300246716, 0.0048242551274597645, 0.014874501153826714, -0.009861395694315434, -0.004079157020896673, -0.01722310669720173, -0.0018919322174042463, -0.0002959363046102226, 0.001137391198426485, -0.03414405509829521, -0.009030456654727459, -0.011186778545379639, 0.015684839338064194, 0.027688821777701378, -0.0015030731447041035, 8.621639426564798e-05, -0.03337492048740387, -0.006977143697440624, 0.007650136016309261, -0.01188724022358656, 0.0356823205947876, -0.02274438925087452, -0.02295040711760521, -0.015712307766079903, -0.009820192120969296, 0.0009390988270752132, -0.026974625885486603, -0.013906216248869896, -0.04353847727179527, 0.016852274537086487, 0.030847765505313873, -0.0018318436341360211, 0.004930697847157717, 0.02480456978082657, 0.02025843970477581, -0.0010627096053212881, -0.011447735130786896, -0.013919951394200325, 0.004099758807569742, 0.0088038370013237, 0.008261322975158691, -0.003952112514525652, 0.016632521525025368, 0.004089457914233208, 0.01216879766434431, -0.00011170039942953736, 0.035490039736032486, -0.014297651126980782, -0.02356846258044243, -0.030985111370682716, -0.028018450364470482, -0.005662062205374241, 0.0024825171567499638, -0.01966785453259945, 0.014998111873865128, -0.03403417766094208, -0.018733905628323555, 0.019750261679291725, 0.00758146308362484, 0.009236474521458149, 0.00810337532311678, 0.025958271697163582, 0.009078527800738811, -0.004652573727071285, 0.010836548171937466, -0.009888865053653717, -0.04620297625660896, -0.012697577476501465, -0.03139714524149895, 0.0035400763154029846, 0.016508910804986954, 0.0006541071925312281, 0.004480891861021519, 0.014215243980288506, -0.03257831558585167, -0.005991690792143345, 0.029858877882361412, -0.023019080981612206, -0.010925822891294956, 0.00425427220761776, 0.006259514018893242, 0.023705806583166122, -0.0176076740026474, -0.03139714524149895, -0.01968158781528473, -0.027702556923031807, 0.003045633202418685, 0.01116617675870657, 0.02110997959971428, 0.006784860044717789, -0.005195087753236294, 0.043071500957012177, -0.0021013838704675436, 0.03991255909204483, -0.00041868872358463705, 0.017456592991948128, 0.009483695961534977, -0.017511531710624695, -0.030215976759791374, -0.0033958638086915016, 0.005569353699684143, -0.010726671665906906, 0.02433759532868862, 0.014668483287096024, -0.030820297077298164, -0.012038319371640682, 0.0022370123770087957, 0.005923018325120211, -0.03906101733446121, -0.010088016279041767, 0.008158314041793346, -0.009765254333615303, 0.005579654593020678, -0.018157055601477623, -0.012615170329809189, -0.018335603177547455, 0.010651132091879845, 0.003258518408983946, 0.008089641109108925, 0.0033992973621934652, -0.013157684355974197, 0.008275057189166546, 0.012676975689828396, 0.01454487256705761, 0.015629900619387627, 0.013830676674842834, -0.018157055601477623, -0.015396413393318653, 0.014146571047604084, -0.016467707231640816, -0.0027108537033200264, -0.006379691418260336, 0.04073663055896759, -0.026919689029455185, -0.006568541284650564, -0.00536676961928606, 0.038758859038352966, -5.9713034715969115e-05, -0.0029872613959014416, -0.013535384088754654, 0.030847765505313873, -0.0002944340812973678, -0.01822572760283947, -0.014160305261611938, 0.0021305696573108435, -0.005600256379693747, 0.004470590967684984, -0.0081720482558012, -0.004261139314621687, 0.008014101535081863, 0.009552368894219398, 0.025244075804948807, 0.020766615867614746, -0.015808450058102608, 0.003079969435930252, 0.0023623399902135134, -0.02518913708627224, -0.012848657555878162, -0.021947786211967468, 0.013919951394200325, -0.0024001100100576878, 0.0002665358188096434, 0.004202767740935087, -0.003962413407862186, 0.01700335368514061, 0.003340925555676222, 0.0015992148546501994, -0.02314269170165062, 0.02639777585864067, -0.01782742701470852, -0.002487667603418231, 0.03293541446328163, -0.0043504140339791775, -0.03172677382826805, 0.01495690830051899, -0.010781609453260899, -0.036149296909570694, 0.004130661487579346, 0.0013270993949845433, -0.0068810018710792065, -0.020931430160999298, 0.0051470170728862286, 0.012882993556559086, 0.0007506781839765608, -0.01311648078262806, 0.011296655051410198, -0.008467340841889381, 0.02168682962656021, -0.004539263900369406, -0.03620423376560211, 0.03049066662788391, -0.0022473132703453302, 0.008783235214650631, 0.02172803319990635, 0.009051058441400528, 0.000490580394398421, 0.0024224286898970604, 0.02516166865825653, -0.027784964069724083, -0.02275812439620495, -0.03125980123877525, 0.01453113742172718, -0.002255897270515561, 0.028622770681977272, -0.006568541284650564, -0.012477824464440346, -0.017085760831832886, -0.009277678094804287, -0.007251834496855736, 0.001479037688113749, 0.006894736550748348, 0.004889494273811579, 0.0019108171109110117, 0.010561857372522354, 0.0031881288159638643, 0.009442492388188839, -0.016261689364910126, -0.02087649330496788, -0.01575351133942604, -0.03639651834964752, -0.004137528594583273, -0.03499559313058853, 0.04592828452587128, 0.0066955857910215855, -0.02520287223160267, -0.02067047543823719, -0.0008090499322861433, -0.04752149060368538, 0.001227524015121162, 0.005919584538787603, 0.013123348355293274, 0.03010610118508339, 0.02479083463549614, 0.011214247904717922, 0.030023694038391113, -0.0032396335154771805, 0.005792540032416582, 0.0023056850768625736, 0.0038010324351489544, 0.014036694541573524, -0.012470957823097706, 0.013480446301400661, 0.011784231290221214, -0.025299012660980225, -0.0015082235913723707, 0.026535121724009514, -0.01763514243066311, 0.0043710158206522465, 0.033869363367557526, -0.014187774620950222, 0.0029271726962178946, 0.0295017808675766, 0.0021082512103021145, 0.01962665095925331, 0.009044190868735313, 0.02498311921954155, -0.0326881930232048, -0.01946183666586876, 0.03606688976287842, 0.009971272200345993, 0.01064426451921463, -0.017113231122493744, 0.004171865060925484, -0.01074040587991476, 0.011214247904717922, -0.0028052786365151405, -0.008536013774573803, -0.021164918318390846, 0.01370706595480442, 0.008014101535081863, 0.0020430120639503, 0.04120360314846039, 0.04161563888192177, -0.0033563768956810236, -0.022840531542897224, 0.008117110468447208, -0.00021245608513709158, -0.02068420872092247, 0.020409518852829933, 0.012725046835839748, -0.03112245537340641, 0.004223369527608156, -0.015918325632810593, 0.0033804124686867, -0.004927264526486397, 0.012106992304325104, -0.023403648287057877, -0.015245333313941956, -0.04449989274144173, 0.013672729022800922, 0.018088381737470627, -0.007382312323898077, -0.0052122557535767555, -0.019928809255361557, 0.006451797671616077, -0.011694956570863724, -0.017854895442724228, 0.0147508904337883, -0.008027835749089718, 0.01615181379020214, -0.0005433725309558213, -0.003934944048523903, -0.02417278103530407, 0.0036156163550913334, 0.008501676842570305, -0.027194378897547722, -0.009085394442081451, 0.2249167412519455, -0.0017975072842091322, 0.01155761070549488, 0.017113231122493744, 0.005991690792143345, -0.02255210652947426, 0.009195270948112011, 0.0015648785047233105, -0.007808083202689886, 0.03766009584069252, -0.015863386914134026, 0.00031975714955478907, -0.0048414235934615135, -0.00577880535274744, -0.0076157995499670506, 0.00038456698530353606, -0.029639126732945442, 0.0010421078186482191, -0.005620858166366816, 0.004858591593801975, 0.005325566045939922, -0.001165718655101955, -0.020931430160999298, -0.016028203070163727, -0.0025340216234326363, 0.011035698466002941, 0.002230145037174225, 0.014393792487680912, 0.032468441873788834, 0.004031085874885321, 0.0014095066580921412, 0.00440535182133317, 0.0075951977632939816, -0.005411406513303518, 0.004817388020455837, -0.033045291900634766, 0.030985111370682716, -0.019104737788438797, 0.0037769970949739218, 0.012374815531075, 0.035160407423973083, -0.0004682618018705398, 0.016879742965102196, -0.019008595496416092, 0.008494810201227665, 0.006208009552210569, -0.00796603038907051, -0.0005781381041742861, 0.018981127068400383, -0.001499639474786818, -0.033869363367557526, 0.019214613363146782, 0.008996120654046535, 0.026548855006694794, 0.00942189060151577, 0.012670108117163181, 7.527168781962246e-05, 0.01762140728533268, 0.0017245425842702389, 0.006932506337761879, -0.002657632576301694, 0.00583374360576272, -0.016852274537086487, 0.02128852903842926, -0.022208742797374725, 0.016838539391756058, -0.010870884172618389, 0.03669867664575577, 0.013446109369397163, -0.006190841551870108, -0.0065513732843101025, -0.015107988379895687, 0.00020934436179231852, 0.010280299000442028, -0.0015314006013795733, -0.011289787478744984, 0.01148207113146782, 0.03227615728974342, 0.023801948875188828, 0.021645626053214073, -0.03279807046055794, -0.0047590164467692375, -0.015355209819972515, -0.003924643155187368, -0.003928076941519976, -0.02271692082285881, 0.03093017265200615, -0.024021701887249947, -0.02724931761622429, 0.010829680599272251, 0.0027692255098372698, -0.01432511955499649, 0.015245333313941956, -0.020313376560807228, 0.02377448044717312, 0.002691968809813261, 0.00164900254458189, 0.023005345836281776, -0.01534147560596466, -0.020958900451660156, 0.0014721704646945, 0.06872761249542236, 0.030051162466406822, 0.0025065524969249964, 0.007313639856874943, 0.009387554600834846, -0.008178915828466415, 0.01947556994855404, 0.013514782302081585, -0.021041307598352432, 0.0066131786443293095, -0.021563218906521797, -0.008872509934008121, -0.037330467253923416, -0.001370019861496985, 0.02271692082285881, 0.011008230037987232, -0.007869888097047806, 0.029309498146176338, -0.011784231290221214, -0.01014295406639576, -0.012670108117163181, 0.003632784355431795, -0.012436620891094208, -0.004594201687723398, 0.0004377882869448513, -0.0032653857488185167, 0.014558606781065464, -0.04263199493288994, 0.007244966924190521, 0.018665233626961708, -0.008343730121850967, -0.019324490800499916, -0.010417644865810871, -0.006087832618504763, -0.000545089365914464, 0.008742031641304493, -0.015094254165887833, -0.003625917248427868, -0.0069016036577522755, -0.020230969414114952, 0.01135159283876419, -0.005919584538787603, 0.008213251829147339, 0.01576724648475647, -0.018129585310816765, -0.0017889231676235795, -0.032056406140327454, -0.008130844682455063, -0.021041307598352432, -0.002788110636174679, 0.0048414235934615135, -0.014462465420365334, 0.0020344280637800694, 0.0023674904368817806, -0.021041307598352432, -0.010616795159876347, -0.01800597459077835, 0.0310949869453907, 0.02536768652498722, -0.0577399842441082, 0.0453789047896862, 0.02007989026606083, -0.0082887914031744, -0.0010051962453871965, -0.008590951561927795, -0.17492303252220154, -0.00848794262856245, -0.001145116868428886, -0.029364435002207756, 0.018775109201669693, -0.0008253597188740969, -0.0024773667100816965, 0.01210012473165989, -0.024117842316627502, -0.0073273745365440845, 0.007959162816405296, 0.011035698466002941, -0.03439127653837204, -0.021645626053214073, 0.007272436283528805, 0.0019039498874917626, -0.002733172383159399, 0.03864898160099983, 0.024021701887249947, -0.015053050592541695, 0.01966785453259945, -0.020752882584929466, -0.0014970642514526844, -0.008474208414554596, 0.016934681683778763, -0.010651132091879845, 0.004896361846476793, 0.007073285523802042, -0.012381683103740215, -0.003366677789017558, -0.008590951561927795, -0.0178411602973938, -0.0036156163550913334, -0.013363702222704887, 0.005596823059022427, -0.0037975988816469908, 0.007402914110571146, 0.0011399664217606187, -0.007911091670393944, 0.03873138874769211, 0.011406531557440758, 0.009140333160758018, 0.003708324395120144, -0.0029666596092283726, 0.008240721188485622, 0.013535384088754654, 0.0264115110039711, -0.00583374360576272, 0.01682480424642563, 0.008961783722043037, 0.004834556486457586, -0.0027486237231642008, 0.0013854712015017867, 0.021151183173060417, -0.018747640773653984, 0.013974889181554317, 0.005737601779401302, 0.02679607830941677, 0.008405535481870174, -0.007135090883821249, 0.01885751634836197, -0.016756132245063782, 0.010946424677968025, -0.029364435002207756, -0.009682847186923027, -0.008515411987900734, 0.007519657723605633, 0.021975256502628326, -0.05471838638186455, 0.0018472949741408229, 0.011990249156951904, 0.02233235351741314, 0.016879742965102196, 0.0054148402996361256, 0.010664866305887699, -0.010472582653164864, -0.025450093671679497, 0.019104737788438797, 0.028705177828669548, -0.016426503658294678, -0.010026209987699986, 0.008680226281285286, -0.01277998462319374, 0.013219489715993404, -0.010726671665906906, 0.0015691706212237477, 0.012216868810355663, 0.010925822891294956, -0.0014275332214310765, -0.0030009958427399397, 0.015520024113357067, -0.032660722732543945, -0.005545318592339754, 0.0025855260901153088, -0.025656111538410187, 0.016055671498179436, 0.008117110468447208, 0.010513786226511002, -0.0070664179511368275, 0.012148195877671242, 0.004178732167929411, -0.00019024476932827383, -0.02807338908314705, 0.02783990278840065, 0.017305513843894005, 0.01964038424193859, -0.006699019577354193, -0.002386375330388546, 0.016701193526387215, 0.005119547713547945, -0.054388757795095444, 0.027949778363108635, 0.027702556923031807, -0.006067230831831694, -0.011186778545379639, 0.0011949045583605766, 0.01778622344136238, -0.01034897193312645, -0.010623662732541561, -0.027510274201631546, 0.0425221212208271, -0.0013142232783138752, -0.009435625746846199, -0.0067608249373734, 0.02193405292928219, -0.030051162466406822, -0.11591947078704834, -0.022634513676166534, 0.007526525296270847, -0.004947866313159466, -0.014874501153826714, 0.020945165306329727, -0.00650330213829875, 0.042686935514211655, -0.01073353923857212, 0.014558606781065464, -0.02865023910999298, -0.024667223915457726, -0.004559865687042475, -0.011969647370278835, 0.014270181767642498, -0.006026027258485556, -0.010355839505791664, 0.004278307780623436, -0.013693330809473991, 0.020354580134153366, 0.02928202785551548, -0.009524899534881115, -0.007835552096366882, 0.0010644264984875917, -0.01370706595480442, 0.01216879766434431, -0.03211134299635887, 0.019983747974038124, -0.024694694206118584, -0.005315265152603388, 0.021343467757105827, -0.021769238635897636, -0.0024979684967547655, -0.006331620737910271, 0.009833927266299725, -0.010479450225830078, -0.0052706277929246426, -0.016701193526387215, 0.02701582945883274, -0.01579471491277218, 0.021206121891736984, 0.01579471491277218, 0.030380791053175926, -0.030655480921268463, -0.011083769612014294, -0.016852274537086487, -0.028760116547346115, 0.02966659516096115, 0.030215976759791374, -0.020739147439599037, -0.026246696710586548, 0.0007077577756717801, -0.04136841744184494, -0.028004717081785202, 0.022826796397566795, 0.007141957990825176, -0.0006871559307910502, 0.01613807864487171, -0.023046549409627914, 0.019145941361784935, 0.01593206077814102, 0.019832668825984, -0.01883004792034626, 0.0023125524166971445, -0.013446109369397163, -0.007416648790240288, -0.012972268275916576, 0.008563482202589512, 0.0023537559900432825, -0.01616554707288742, 0.01168808899819851, -0.0066955857910215855, -0.03321010619401932, -1.2869420061178971e-05, -0.029391905292868614, -0.005287795793265104, -0.014792094007134438, -0.02435133047401905, -0.010699202306568623, -0.009222740307450294, 0.0075127906166017056, -0.014064163900911808, 0.0029185886960476637, -0.03771503269672394, 0.0002588101488072425, 0.0023606230970472097, 0.016028203070163727, 0.011495805345475674, 0.02723558247089386, -0.04579094052314758, 0.0111455749720335, 0.006304151378571987, -0.011159309186041355, -0.017978506162762642, 0.01168808899819851, 0.0065307714976370335, 0.0007515365723520517, 2.851525459846016e-05, 0.00536676961928606, 0.023664603009819984, 0.002283366397023201, 0.01311648078262806, -0.0413958877325058, 0.02352725900709629, 0.010177290067076683, -0.004020784981548786, -0.002976960502564907, -0.005184786859899759, -0.014393792487680912, -0.009209005162119865, -0.005799407139420509, 0.002037861617282033, -0.013789473101496696, 1.6940153727773577e-05, 0.016948416829109192, -0.009092262014746666, -0.022867999970912933, -0.017360452562570572, 0.011674354784190655, -0.016453972086310387, -0.0030628012027591467, 0.008268189616501331, 0.017868630588054657, -0.03851163387298584, 0.004817388020455837, 0.0008755765738897026, -0.023225098848342896, -0.009318881668150425, -0.0026696501299738884, 0.02867770940065384, -0.0008442446705885231, -0.028293142095208168, 0.0031640934757888317, -0.02211260050535202, 0.006276682484894991, 0.0042714402079582214, -0.00869396049529314, 0.0017271178076043725, -0.011791097931563854, 0.021384671330451965, 0.012354213744401932, 0.021796707063913345, -0.020835289731621742, -0.03507800027728081, 0.0038456697948276997, -0.01947556994855404, -0.025079261511564255, -0.013590321876108646, -0.014970642514526844, -0.0182394627481699, 0.028128327801823616, 0.020601801574230194, 0.04521409049630165, 0.012134461663663387, -0.025930801406502724, -0.04573599994182587, 0.01738792099058628, -0.014393792487680912, 0.006644081324338913, 0.02417278103530407, -0.02351352386176586, -0.0033031555358320475, 0.0528230220079422, 0.0069805774837732315, -0.009346351027488708, -0.018294399604201317, 0.0128898611292243, 0.007856153883039951, -0.03477584198117256, 0.00024292958551086485, -0.003794165328145027, -0.0008034702623263001, -0.024845773354172707, 0.002949491376057267, 0.005923018325120211, 0.019805198535323143, 0.004113493021577597, -0.021247325465083122, -0.012498426251113415, -0.009524899534881115, -0.024310126900672913, 0.022648248821496964, 0.0028310311026871204, -0.032221220433712006, 0.01076100766658783, -0.0074715870432555676, 0.01718190312385559, 0.001171727548353374, -0.011001362465322018, 0.03150702267885208, -0.002118552103638649, -0.0011408247519284487, -0.00797289703041315, -0.007341108750551939, -0.023856887593865395, 0.03711071237921715, 0.01361779123544693, -0.008151446469128132, 0.003989882301539183, -0.021041307598352432, -0.008865642361342907, -0.015094254165887833, -0.010342104360461235, -0.0007918817573226988, 0.013652127236127853, -0.010500052012503147, -0.023692073300480843, 0.02908974513411522, -0.023225098848342896, -0.03356720134615898, 0.00253573851659894, 0.028705177828669548, 0.01239541731774807, -0.007437250576913357, 0.011722425930202007, 0.008762633427977562, -0.030957641080021858, 0.011694956570863724, -0.0012833205983042717, -0.014929438941180706, -0.0036224834620952606, 0.01841801032423973, 0.014970642514526844, 0.016673725098371506, 0.02251090295612812, 0.0006386558525264263, 0.015465086326003075, -0.012292408384382725, 0.018115852028131485, -0.00891371350735426, -0.003052500309422612, -0.017964771017432213, -0.010410777293145657, 0.013782605528831482, -0.03908848762512207, -0.009250209666788578, -0.01453113742172718, -0.04356594383716583, 0.010905221104621887, 0.010218493640422821, -0.012003983370959759, 0.057190604507923126, 0.04675235599279404, -0.003773563541471958, 0.028705177828669548, 0.0029615091625601053, 0.007663870230317116, 0.010575591586530209, 0.02270318567752838, 0.0076776049099862576, -0.022620778530836105, 0.005383937619626522, -0.0012215152382850647, -0.02296414226293564, -0.017745019868016243, 0.02330750599503517, 0.006836364511400461, -0.010266564786434174, 0.005995124578475952, 0.0014344004448503256, 0.001430966891348362, 0.022181274369359016, -0.002455048030242324, 0.001785489497706294, 0.001629259204491973, -0.027386661618947983, 0.003231049282476306, 0.024406269192695618, -0.024516144767403603, -0.0026954023633152246, -0.036176763474941254, 0.021453343331813812, 0.011791097931563854, -0.033704549074172974, -0.010431379079818726, 0.012031452730298042, 0.031040048226714134, -0.011427133344113827, -0.007705074269324541, 0.01157134585082531, 0.0013846127549186349, 0.015904590487480164, -0.009085394442081451, 0.0003236199845559895, -0.027070768177509308, 0.007038949057459831, 0.010019343346357346, -0.01884378120303154, 0.006441496778279543, -0.02110997959971428]"
Dragonfly Cache Design,Dragonfly Cache Design,"I talked in my [previous post](/blog/redis-analysis-part-2-simplicity/) about Redis eviction policies. In this post, I would like to describe the design behind Dragonfly cache.  If you have not heard about [Dragonfly](https://github.com/dragonflydb/dragonfly) - please check it out. It uses - what I hope - novel and interesting ideas backed up by the research from recent years [[1]](https://doi.org/10.1007/s00778-014-0377-7) and [[2]](https://arxiv.org/abs/2003.07302). It's meant to fix many problems that exist with Redis today. I have been working on Dragonfly for the last 7 months and it has been one of the more interesting and challenging projects I've ever done!  Anyway, back to cache design. We'll start with a short overview of what LRU cache is and its shortcomings in general, and then analyze Redis implementation specifically.  ## LRU  The least recently used (LRU) cache policy evicts items, as the name implies, that were least recently used. It works this way because a cache algorithm strives to optimize the hit ratio, or the probability that its items will be accessed in the future.  If a cache is full, it needs to vacate items to make room for new additions. The cache frees space for new additions by removing the least valuable items, **assuming** that the _least recently used_ item is also the _least valuable_.  The assumption is reasonable, but unfortunately, this algorithm behaves poorly if the assumption above does not hold. Consider, for example, an access pattern with [Long tail distribution](https://en.wikipedia.org/wiki/Long_tail). Here, the y-axis represents the normalized access frequency of the items in cache and the x-axis represents the items ordered from highest frequency to lowest.  ![long tail distribution](https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Long_tail.svg/1920px-Long_tail.svg.png)  In this case, lots of newly added ""yellow"" items with low access frequency could push out rare but valuable ""green"" items responsible for the vast majority of hits. As a result, the LRU policy may sweep its contents together with valuable ""green"" entities due to traffic fluctuations.  ![](/assets/blog/dragonfly-cache-design/lru.svg)  ### LRU implementation efficiency  LRU is a simple algorithm that can be implemented efficiently. Indeed, it maintains all the items in a double-linked list. When an item is accessed, LRU moves it to the head of the list. To vacate LRU items, it pops from the tail of the list. See the diagram above. All operations are done in `O(1)`, and the memory overhead per item is 2 pointers, i.e. 16 bytes on 64bit architecture.  ### LRU in Redis  Redis implements a few eviction policy heuristics. Some of them are described as ""approximated LRU"". Why approximated? Because Redis does not maintain an exact global order among its items like in classic LRU. Instead, it stores the last access timestamp in each entry.  When it needs to evict an item, Redis performs random sampling of the entire keyspace and selects K candidates. Then it choosed the item with the least recently used timestamp among those K candidates and vacates it. This way, Redis saves 16 bytes per entry needed for ordering items in one global order. This heuristic is a very rough approximation of an LRU.Redis maintainers [have recently discussed](https://github.com/redis/redis/issues/8947) the possibility of adding an additional heuristic to Redis by implementing a classic LRU policy with global order but eventually decided against it.  ## Dragonfly Cache  Dragonfly implements cache that:  - is resistant to fluctuations of recent traffic, unlike LRU. - Does not require random sampling or other approximations like in Redis. - Has **zero** memory overhead per item. - Has very small `O(1)` run-time overhead.  It's a novel approach for cache design has not been suggested before in academic research.  Dragonfly Cache (dash cache) is based on another famous cache policy from [1994 paper](https://api.semanticscholar.org/CorpusID:6259428) - ""2Q: A Low Overhead High Performance Buffer Management Replacement Algorithm"".  2Q addresses the issues with LRU by introducing two independent buffers. Instead of considering just recency as a factor, 2Q also considers access frequency for each item. It first admits recent items into a so-called _probationary buffer_ (see below). This buffer holds only a little part of the cache space, say less than 10%. All newly added items compete with each other inside this buffer.  ![](/assets/blog/dragonfly-cache-design/2q-cache.svg)  Only if a probationary item was accessed at least once, will it be proven as _worthy_, and upgraded to the protected buffer. By doing so, it evicts the least recently used item from the protected buffer back to probationary buffer. You can read [this post](https://arpitbhayani.me/blogs/2q-cache) for more details.  2Q improves LRU by acknowledging that just because a new item was added to the cache - does not mean it's useful. 2Q requires an item to have been accessed at least once before to be considered as a high quality item. In this way, 2Q cache has been proven to be more robust and to achieve a higher hit rate than LRU policy.  ### Dashtable in 60 seconds  For a deep dive on Dashtables use in Dragonfly, I recommend you reading this [post](https://github.com/dragonflydb/dragonfly/blob/main/docs/dashtable.md) or [the original paper](https://arxiv.org/abs/2003.07302).  For our purposes today, we need to know the following facts about Dashtable in Dragonfly implementation:  1. It's comprised of segments of constant size. Each segment holds 56 regular buckets with multiple slots. Each slot has space for a single item. 2. Dashtable's routing algorithm uses item's hash value to compute its segment id. In addition, it predefines 2 out of 56 buckets where the item can reside within the segment. The item can reside in any free slot in those two buckets. 3. In addition to regular buckets, a Dashtable segment manages 4 stash buckets that may gather overflow items that do not have space in their assigned buckets. The routing algorithm never assigns stash buckets directly. Instead, only if its 2 home buckets are full, the item is allowed to reside in any of 4 stash buckets. This greatly increases segment's utilization. 4. Once a segment becomes full, and there is no free place for a new item in its home buckets nor in stash buckets, the Dashtable grows by adding a new segment and splitting the contents of the full segment roughly in half.  ![](/assets/blog/dragonfly-cache-design/segment.svg)  The point at which a segment becomes full is a convenient time to add any type of eviction policy to Dashtable, because this is when Dashtable grows. Moreover, in order to prevent growth of Dashtable, we can only evict items from a full segment. This constitutes a very precise eviction framework that operates in `O(1)` run-time complexity.  ### 2Q Implementation  Dragonfly expands on the ideas above. A naive solution would be to divide hashtable entries into two buffers: a probationary buffer with FIFO ordering, and the protected buffer employing LRU linked-list. That would work but it would require using additional metadata and waste precious memory.  Instead, Dragonfly leverages the unique design of [Dashtable](https://github.com/dragonflydb/dragonfly/blob/main/docs/dashtable.md) and uses its weak ordering characteristics for its advantage.  To explain how 2Q works with Dashtable, we need to explain how we define probationary and protected buffers there, how we promote a probationary item into protected buffer and how we evict items from the cache.  ![](/assets/blog/dragonfly-cache-design/dash-cache.svg)  We overlaid the following semantics on the original Dashtable:  1. Slots within a bucket now have rank or precedence. A slot on the left has the highest rank `(0)`, and the last slot on the right has the lowest rank `(9)`. 2. Stash buckets within a segment serve as a probationary buffer. When a new item is added to the full segment, it's been added into a stash bucket at slot 0. All other items in the bucket are shifted right, and the last item in the bucket is evicted. This way the bucket serves as a FIFO queue for probationary items. 3. Every cache hit ""promotes"" its item: - if the item was in a stash bucket, it's moved immediately into its home bucket to the last slot. - if it was in a home bucket at slot `i`, it's swapped out with an item at slot `i-1`. - an item at slot `0` stays in the same place. 4. When a probationary item is promoted to the protected bucket, it's moved to the last slot there. The item that was there before is demoted back into the probationary bucket.  Basically, Dash-Cache eviction policy is comprised of an ""eviction"" step described by (2) and the positive reinforcement step described by (3).  That's it. No additional metadata is needed. High quality items will come to reside at high rank slots in their home buckets very quickly, while newly added items compete with each other within stash/probationary buckets. In our implementation each bucket has 14 slots, meaning that each probationary item can be shifted 14 times before being evicted from the cache, unless it proves its usefulness and is promoted. Each segment has 56 regular buckets and 4 stash buckets; therefore we have `6.7%` of total space allocated for a probationary buffer. It's enough to catch high quality items before they are evicted.  I hope you enjoyed reading how Dragonfly cache design utilizes seemingly unrelated concepts together to its advantage.  _I want to thank [Ben Manes](https://twitter.com/benmanes), the author of wonderful [caffeine package](https://github.com/ben-manes/caffeine) for early comments and the guidance on how to use caffeine simulator in order to compare Dragonfly Cache to other caches._","[0.006960730534046888, 0.011263727210462093, -0.009864550083875656, -0.03948632627725601, 0.0007395776337943971, 0.008395062759518623, -0.01068718172609806, 0.006257626228034496, -0.02549455314874649, 0.0032694339752197266, -0.0020020888186991215, 0.0014993695076555014, -0.015215172432363033, 0.010117667727172375, 0.00047635301598347723, 0.004503381438553333, 0.019293176010251045, -0.016930745914578438, 0.015538600273430347, -0.006837686989456415, 0.005821701604872942, -0.00929503608494997, -0.01328163594007492, -0.006208409089595079, -0.02384928986430168, -0.019532231613993645, 0.022794634103775024, -0.0008301022462546825, -6.56962874927558e-05, 0.027533555403351784, 0.03552081808447838, 0.0002430103486403823, -0.0037967620883136988, -0.01742292009294033, -0.015243296511471272, -0.01510267611593008, 0.017085429280996323, 0.000524691422469914, 0.03706764802336693, -0.011734806932508945, 0.029699116945266724, -0.008866142481565475, -0.008029448799788952, -0.027027320116758347, -0.004007693380117416, 0.026155471801757812, 0.0014404845423996449, -0.014582378789782524, 0.004267841577529907, -0.017268236726522446, 0.013183201663196087, 0.014765185303986073, -0.035239577293395996, -0.008535683155059814, 0.016227642074227333, 0.014976116828620434, 0.006665426772087812, 0.006183800287544727, 0.009752053767442703, -0.019729100167751312, 0.014167547225952148, 0.028531963005661964, -0.00626114197075367, -0.006025602109730244, -0.003274707356467843, 0.0013517176266759634, 0.0067533147521317005, -0.01188949029892683, 0.016438573598861694, -0.002404615981504321, 0.03754575923085213, 0.026914823800325394, -0.002557541010901332, -0.00478462316095829, 0.0430862195789814, -0.020193148404359818, -0.006612693890929222, -0.007227909751236439, 0.00602911738678813, 0.02009471505880356, 0.011833242140710354, 0.01842132769525051, -0.018154148012399673, 0.033861491829156876, -0.006946668494492769, 0.04758608341217041, -0.015468290075659752, 0.008662242442369461, -0.013907399028539658, 0.010026264004409313, -0.020361894741654396, -0.0024977773427963257, 0.015144862234592438, 0.01830882951617241, -0.010862957686185837, 0.010420002974569798, -0.0040112086571753025, 0.013197263702750206, -0.007895858958363533, -0.02415865659713745, -0.007168146315962076, -0.004580723121762276, -0.026689831167459488, -0.014118329621851444, -0.026942947879433632, -0.017001057043671608, 0.01089108269661665, -0.013661311939358711, 0.003933867439627647, 0.007185723632574081, -0.01773228496313095, 0.03923320770263672, 0.027322623878717422, -0.010518437251448631, 0.006552929989993572, -0.005139690823853016, 0.036786407232284546, -0.022864945232868195, 0.004063941538333893, -0.02391960099339485, 0.02885539084672928, 0.014933930709958076, 0.029417874291539192, -0.02068532258272171, 0.01178402453660965, -0.014322230592370033, -0.023441489785909653, 0.0062224711291491985, 0.009576277807354927, -0.01130591332912445, 0.0010581716196611524, 0.02171185426414013, -0.017633849754929543, -0.009998139925301075, -0.027561679482460022, 0.0024011004716157913, -0.02411646954715252, -0.023989912122488022, -0.014933930709958076, -0.009850488044321537, 0.00558264646679163, 0.020080652087926865, -0.015397979877889156, -0.0191666167229414, -0.008500528521835804, 0.03889571875333786, -0.018477575853466988, 0.010258288122713566, -0.01783072017133236, -0.01341522578150034, 0.0015916518168523908, -0.02171185426414013, -0.010954361408948898, 0.003554191207513213, 0.021655606105923653, 0.017127616330981255, -0.028742894530296326, -0.007895858958363533, -0.026985134929418564, -0.03304589167237282, 0.014343323186039925, 0.005280311685055494, 0.0011530907358974218, -0.0044787731021642685, 0.02780073508620262, 0.03462084382772446, 0.03971131891012192, -0.015060489065945148, 0.00014029123121872544, -0.020038466900587082, -0.00021455661044456065, 0.03313026577234268, -0.02054470218718052, 0.021036874502897263, -0.006145129911601543, 0.008535683155059814, 0.02573360875248909, 0.0009430383797734976, -0.022963378578424454, -0.018646320328116417, 0.017507292330265045, 0.0044049471616744995, 0.022204026579856873, 0.007154084276407957, -0.022035282105207443, -0.02470707707107067, -0.0012576774461194873, -0.02123374305665493, -0.015229234471917152, 0.0006547656957991421, -0.022344646975398064, 0.011453565210103989, -0.05205782502889633, -0.007424779236316681, -0.6088318824768066, -0.017366670072078705, 0.0036209861282259226, -0.02742105908691883, -0.027772611007094383, -0.010595778934657574, -0.003471576375886798, 0.004513928201049566, 0.003863557009026408, 0.013253511860966682, 0.0011908825254067779, -0.012205886654555798, 0.01503236498683691, -0.0014791552675887942, -0.03490208834409714, -0.008395062759518623, 0.01266290433704853, -0.010518437251448631, 0.01549641415476799, -0.0006156555027700961, -0.0349864587187767, 0.042551860213279724, -0.01659325696527958, 0.006447464227676392, 0.01773228496313095, 0.027435122057795525, -0.011727776378393173, 0.016199517995119095, 0.003884650068357587, 0.037433262914419174, -0.02896788902580738, 0.012726183980703354, 0.0016549312276765704, 0.01652294583618641, 0.048120442777872086, -0.017015118151903152, 0.004260810557752848, 0.011256696656346321, -0.0016628411831334233, 0.040217552334070206, -0.009280974045395851, -0.017029181122779846, 0.019630666822195053, 0.01673387736082077, 0.00541038578376174, -0.013373039662837982, 0.01566515862941742, -0.009266912005841732, -0.0034364212770015, 0.005480696447193623, 0.0059763845056295395, -0.005368199665099382, -0.0028809690847992897, -0.005276795942336321, 0.011762931011617184, -0.001484428532421589, 0.02844759076833725, -0.031555309891700745, 0.02466489188373089, 0.002583907451480627, 0.014680813066661358, 0.007846641354262829, -0.009590339846909046, -0.013682405464351177, -0.02470707707107067, 0.0033713839948177338, -0.013155077584087849, -0.024453960359096527, 0.01587609015405178, -0.031695932149887085, 0.020150963217020035, -0.007006432395428419, 0.009266912005841732, -0.005255702883005142, 0.008732552640140057, -0.005709205288439989, 0.032792773097753525, -0.01604483462870121, 0.00015984631318133324, 0.028053853660821915, 0.01329569797962904, -0.0015415557427331805, -0.02896788902580738, -0.002111070090904832, 0.02099468745291233, 0.004461195319890976, -0.014329261146485806, -0.005238125566393137, -0.010989516973495483, 0.01790102943778038, 0.01314101554453373, 0.007530244532972574, -0.010363753885030746, -0.019180679693818092, 0.011087951250374317, 0.03343962877988815, -0.010602809488773346, -0.011502782814204693, 0.010862957686185837, -0.034789588302373886, 0.004847902804613113, -0.019630666822195053, 0.016579193994402885, -0.004496350418776274, 0.026957010850310326, 0.011200448498129845, -0.018097899854183197, -0.03878322243690491, 0.027224190533161163, -0.014322230592370033, -0.015004240907728672, -0.03234278783202171, 0.005452572368085384, 0.005361168645322323, 0.010905144736170769, -0.02652108669281006, 0.038558229804039, 0.00033792940666899085, 0.0005831369780935347, -0.01968691498041153, 0.01300742570310831, -0.007572431117296219, 0.0033713839948177338, -0.0009711625170893967, 0.0021321631502360106, 0.008430218324065208, -0.00169008644297719, 0.006127552129328251, -0.012030110694468021, 0.016424510627985, 0.021655606105923653, -0.009759084321558475, 0.020966563373804092, -0.011066858656704426, 0.022864945232868195, -0.0359426811337471, 0.02016502432525158, -0.00929503608494997, -0.005870919208973646, -0.04893604293465614, -0.007895858958363533, -0.007748207077383995, 0.01092623732984066, -0.01889943704009056, -0.027702301740646362, 0.005944745149463415, -0.028503838926553726, -0.011362162418663502, -0.004317059181630611, 0.013830057345330715, 0.00029706148779951036, -0.0035084893461316824, -0.0017630334477871656, 0.015285482630133629, -0.01068718172609806, 0.013837088830769062, -0.0035911041777580976, -0.01573546975851059, -0.00783257931470871, -0.020263459533452988, 0.011566062457859516, 0.03197717294096947, -0.011341068893671036, -0.0019528715638443828, -0.043929941952228546, -0.022077469155192375, 0.0063595762476325035, 0.013682405464351177, -0.021416550502181053, -0.029952233657240868, -0.009843457490205765, -0.0075583690777421, 0.008662242442369461, 0.00941456388682127, -0.0027702301740646362, 0.006405278109014034, -0.009885643608868122, 0.01828070543706417, -0.006162707228213549, -0.009955953806638718, 0.011727776378393173, 0.017057305201888084, 0.004426040221005678, -0.007881796918809414, 0.02487582340836525, 0.013921461068093777, 0.019841596484184265, 0.024102408438920975, -0.016649505123496056, 0.016312014311552048, 0.014962054789066315, 0.0213040541857481, -0.0253539327532053, -0.033692747354507446, -0.013183201663196087, 0.006967761553823948, 0.002743863733485341, -0.007614617235958576, -0.00676737679168582, 0.03973944112658501, 0.0215431097894907, -0.00720681669190526, 0.0012198855401948094, -0.019293176010251045, -0.012487128376960754, -0.035267699509859085, 0.00287745357491076, -0.007249003276228905, 0.03844572976231575, 0.004496350418776274, 0.007375561632215977, 0.007277127355337143, -0.011776993051171303, 0.0003790170594584197, -0.029952233657240868, 0.043479956686496735, 0.00304092513397336, 0.013696467503905296, -0.00721384771168232, 0.03068346157670021, -0.00016116464394144714, 0.011566062457859516, 0.0018702568486332893, 0.0015371612971648574, 0.018365079537034035, -0.012958208099007607, 0.0031903348863124847, 0.024453960359096527, 0.016340138390660286, -0.02247120626270771, 0.006215440109372139, 0.019771287217736244, -0.010089543648064137, 0.026605458930134773, 0.02652108669281006, 0.013787871226668358, 0.01783072017133236, -0.01403395738452673, 0.016269829124212265, -0.02978348918259144, 0.012255104258656502, 0.006524805910885334, 0.019911907613277435, -0.012775401584804058, 0.010898113250732422, 0.004067457281053066, 0.01465268898755312, 0.023933662101626396, -0.020882191136479378, 0.009491905570030212, -0.012908991426229477, 0.0037159051280468702, -0.005002585705369711, -0.0018491637893021107, -0.0008661363390274346, -0.019180679693818092, -0.0007879160111770034, 0.01882912777364254, 0.025072691962122917, 0.010919206775724888, 0.001374568440951407, 0.015004240907728672, 0.006957214791327715, -0.029277253895998, 0.020811880007386208, -0.0191666167229414, -0.017479168251156807, -0.0318928025662899, 0.009231756441295147, -0.014568316750228405, 0.004134252201765776, -0.025438304990530014, -0.013450381346046925, -0.024608643725514412, 0.037433262914419174, 0.008838018402457237, 0.01656513288617134, -0.010848895646631718, 0.008887236006557941, 0.016776062548160553, -0.012241042219102383, -0.033242762088775635, 0.013576939702033997, 0.019729100167751312, -0.007734145037829876, -0.02875695750117302, -0.007140021771192551, 0.013155077584087849, 0.006950183771550655, -9.140353358816355e-05, 0.011024671606719494, 0.007909920997917652, -0.0029917077627032995, 0.00489711994305253, -0.024003973230719566, -0.018576009199023247, 0.03099282830953598, 0.0036948120687156916, -0.022935254499316216, 0.006102943327277899, 0.016986994072794914, 0.024200841784477234, -0.023961788043379784, 0.0021585295908153057, 0.05267655849456787, -0.003415327984839678, 6.564136128872633e-05, -0.015215172432363033, 0.003705358598381281, -0.0053084357641637325, -0.00714705279096961, -0.014582378789782524, -0.023441489785909653, -0.011073889210820198, 0.0191666167229414, 0.01776040904223919, -0.006770892534404993, -0.004949852824211121, 0.03442397713661194, 0.01489174459129572, -0.017254173755645752, 0.004186984617263079, -0.02213371731340885, -0.019982218742370605, 0.05630457401275635, 0.0173807330429554, 0.007530244532972574, 0.013928491622209549, -0.011643403209745884, -0.006837686989456415, 0.012248072773218155, -0.018505699932575226, 0.041905004531145096, 0.004949852824211121, -0.0009368861792609096, -0.007994293235242367, -0.007931014522910118, -0.005311951506882906, 0.023793041706085205, 0.015594848431646824, -0.012318383902311325, -0.014807372353971004, 0.005814670585095882, -0.011467627249658108, -0.008310690522193909, 0.0030778381042182446, 0.015215172432363033, 0.009154414758086205, 0.030599089339375496, 0.01165043469518423, 0.022893069311976433, 0.009224725887179375, 0.02161341905593872, -0.021247806027531624, -0.004605331923812628, 0.007396655157208443, 0.005842795129865408, 0.02504456788301468, -0.014779248274862766, 0.03377712145447731, -0.00343993678689003, -0.00783257931470871, 0.006556445732712746, 0.002439771080389619, 0.002837024861946702, 0.012845711782574654, -0.00045306270476430655, 0.033861491829156876, 0.04243936389684677, -0.015369854867458344, 0.01632607728242874, 0.027941355481743813, -0.00994892232120037, -0.0056037395261228085, 0.028742894530296326, -0.02463676780462265, -0.03985194116830826, -0.008852080442011356, 0.00208294577896595, -0.0002643232000991702, -0.006187316030263901, -0.0036948120687156916, -0.009048949927091599, -0.03591455519199371, -0.010708275251090527, -0.006268172990530729, -0.02411646954715252, -0.00664081797003746, 0.0018931077793240547, 0.001622412703000009, 0.0015257358318194747, -0.008479434996843338, -0.017788533121347427, -0.031245945021510124, -0.03670203313231468, -0.010377815924584866, -0.04553302004933357, 0.00015797870582900941, 0.029867861419916153, 0.024243028834462166, 0.03532394766807556, 0.012873835861682892, -0.00275792577303946, 0.013169139623641968, 0.010490313172340393, -0.023061813786625862, -0.004809231963008642, -0.041736260056495667, -0.022794634103775024, -0.0011706682853400707, 0.010349691845476627, -0.0030919001437723637, -0.01965879090130329, 0.008880204521119595, 0.03484584018588066, 0.0018122508190572262, 0.02728043869137764, -0.0035049738362431526, -0.004939306061714888, 0.03020535223186016, 0.025817982852458954, 0.02618359588086605, 0.005086957942694426, -0.03329901024699211, 0.03220216557383537, -0.003993631340563297, -0.01687449775636196, 0.01006845012307167, -0.002109312219545245, -0.018843188881874084, -0.004134252201765776, -0.0011284820502623916, 0.009470812045037746, -0.01312695350497961, -0.0015477078268304467, -0.018801003694534302, -0.0071259597316384315, 0.016649505123496056, 0.02071344666182995, -0.004099096637219191, 0.001586378552019596, 0.0051607838831841946, -0.007776331156492233, -0.017085429280996323, 0.025297684594988823, -0.01563703455030918, 0.015412041917443275, -0.0011161777656525373, -0.006310359109193087, 0.013963647186756134, -0.008662242442369461, -0.017704160884022713, -0.028911639004945755, -0.007987262681126595, 0.0302334763109684, 0.034958336502313614, -0.007572431117296219, -0.03459272161126137, -0.04010505601763725, 0.018505699932575226, -0.01448394451290369, -0.008577870205044746, -0.004408462438732386, -0.024144593626260757, -0.02470707707107067, -0.025649236515164375, 0.014188640750944614, -0.03388961777091026, -0.0013982981909066439, -0.028433529660105705, -0.02009471505880356, 0.020122839137911797, -0.01442769542336464, 0.007776331156492233, -0.016424510627985, -0.01854788511991501, -0.020038466900587082, -0.013211325742304325, 0.010862957686185837, -0.020460328087210655, 0.006876357831060886, -0.006011540070176125, 0.013274605385959148, 0.012170732021331787, 0.03751763328909874, 0.012775401584804058, 4.872291538049467e-05, 0.006623240653425455, 0.010209071449935436, -0.008669272996485233, -0.00019489166152197868, -0.0036842653062194586, 0.0028264783322811127, -0.010785616934299469, 0.019771287217736244, 0.013098829425871372, -0.0062224711291491985, -0.017366670072078705, -0.014181609265506268, 0.026886699721217155, -0.006841202732175589, -0.016410449519753456, -0.03037409670650959, -0.03779887408018112, -0.01278243213891983, 0.009168476797640324, -0.004566661082208157, 0.002269268501549959, -0.014737061224877834, -0.0038459792267531157, 0.011798086576163769, -0.025916416198015213, 0.0272523146122694, 0.005835764110088348, 0.0008112063515000045, -0.02504456788301468, 0.0010133488103747368, 0.0012357054511085153, 0.008584900759160519, -0.023483676835894585, -0.022246213629841805, -0.024889884516596794, -0.02370866946876049, 0.022119654342532158, 0.011263727210462093, 0.014469882473349571, -0.011137168854475021, 0.0007611101609654725, 0.004872511141002178, -0.016241705045104027, -0.011348099447786808, -0.005793577525764704, 0.024791449308395386, -0.030149102210998535, -0.01835101656615734, -0.031049076467752457, -0.03892384096980095, -0.029839737340807915, -0.0016127449925988913, 0.023202434182167053, -0.0030672915745526552, 0.01618545688688755, -0.008486466482281685, -0.004415493458509445, 0.004499866161495447, -0.004239717498421669, 0.02525549940764904, -0.005034225061535835, 0.02408834546804428, 0.021964970976114273, 0.010954361408948898, -0.02947412244975567, -0.015847966074943542, 0.021079059690237045, -0.020811880007386208, 0.010300475172698498, 0.02030564658343792, -0.029108509421348572, -0.011073889210820198, -0.004809231963008642, -0.017226049676537514, -0.01137622445821762, -0.024060221388936043, 0.01077155489474535, 0.040836285799741745, 0.01314101554453373, -0.00026542178238742054, -0.006791985593736172, -0.007600555196404457, 0.003958475776016712, -0.015004240907728672, 0.006095912307500839, 0.013253511860966682, -0.007094320375472307, -0.011221541091799736, 0.013935523107647896, 0.019574416801333427, 0.025410180911421776, -0.010743430815637112, 0.00427838834002614, -0.006633786950260401, 0.010947330854833126, -0.014026926830410957, 5.182646054890938e-05, -0.005937714129686356, 0.02858821116387844, -0.014125361107289791, 0.003362595336511731, 0.003000496653839946, -0.0014756396412849426, -0.012304321862757206, 0.006584569811820984, -0.009330191649496555, 0.03006472997367382, -0.010469219647347927, -0.006324421148747206, -0.0011601217556744814, 0.015679221600294113, 0.005364684388041496, -0.00795210711658001, -0.02504456788301468, -0.008198193274438381, -0.00843724887818098, -0.010497343726456165, 0.01549641415476799, -0.004134252201765776, -0.023033689707517624, -0.0151167381554842, -0.016790125519037247, 0.009280974045395851, -0.02947412244975567, -0.020460328087210655, 0.022583702579140663, -0.030767833814024925, 0.00546311866492033, -0.005993962287902832, -0.004060426261276007, 0.008317721076309681, 0.016860436648130417, -0.012086358852684498, -0.015004240907728672, 0.033242762088775635, -0.0037967620883136988, 0.028180411085486412, 0.015862029045820236, 0.0012708606664091349, -0.032005298882722855, 0.018126023933291435, -0.019771287217736244, -0.01680418848991394, 0.027997605502605438, -0.016030773520469666, -0.04204562306404114, -0.04418306052684784, -0.006166222970932722, 0.016129206866025925, -0.004760014824569225, 0.0009395228116773069, 0.014905806630849838, 0.0063701230101287365, 0.012831649743020535, -0.006303328089416027, -0.009899705648422241, 0.059004493057727814, -0.015580786392092705, -0.003202639054507017, 0.013422257266938686, 0.0036104393657296896, 0.001713816192932427, -0.020122839137911797, -0.010715305805206299, -0.0059131053276360035, -0.034930210560560226, -0.013091797940433025, -0.011474658735096455, 0.004137767478823662, -0.0008301022462546825, -0.008275534957647324, -0.0055931927636265755, -0.008641148917376995, -0.025100816041231155, 0.016297953203320503, -0.010391877964138985, 0.01975722424685955, 0.017774472013115883, -0.007171661593019962, -0.013000394217669964, 0.0077411760576069355, -0.0024098893627524376, -0.0031973659060895443, -0.0034452099353075027, -0.012339476495981216, -0.041736260056495667, -0.00952002964913845, -0.022344646975398064, 0.04651736468076706, 0.016297953203320503, -0.013358977623283863, -0.007614617235958576, 0.017788533121347427, -0.033242762088775635, -0.005438509862869978, -0.0046264249831438065, 0.002597969491034746, 0.0033397444058209658, 0.005737329367548227, 0.028292907401919365, 0.01687449775636196, 0.00676034577190876, 0.018238520249724388, 0.0008195557165890932, 0.00652832118794322, -0.015201110392808914, -0.020558763295412064, 0.03099282830953598, 0.01041297148913145, -0.030177228152751923, -0.02597266435623169, -0.012001986615359783, 0.01563703455030918, 0.007045102771371603, 0.016705753281712532, -0.01652294583618641, 0.02683045156300068, -0.005860372446477413, 0.0037299671676009893, 0.0003051911189686507, -0.022485269233584404, -0.0035366134252399206, -0.024144593626260757, 3.5237600968685e-05, 0.010799678973853588, -0.00310068903490901, -0.03670203313231468, -0.007354468572884798, 0.008064603433012962, -0.0012102179462090135, -0.011362162418663502, -0.01683231256902218, -0.003701843088492751, 0.014195671305060387, 0.008191162720322609, 0.01200901810079813, -0.0008265867363661528, 0.011657465249300003, 0.042861223220825195, -0.0056142862886190414, -0.014596440829336643, -0.006784954573959112, 0.0028704223223030567, -0.02844759076833725, 0.003575284266844392, 0.01367537397891283, 0.014751123264431953, 0.03318651393055916, -0.02254151739180088, 0.01212854590266943, -0.006447464227676392, -0.003206154564395547, -0.01390036754310131, -0.01080670952796936, -0.022836821153759956, 0.04257998242974281, 0.000557649414986372, 0.014821434393525124, -0.014455819502472878, 0.004995554685592651, -0.001159242819994688, -0.01989784464240074, 0.004123705439269543, 0.038670726120471954, -0.027083570137619972, 0.004250264260917902, 0.01694480888545513, 0.004531505983322859, -0.018632257357239723, -0.0026471868623048067, -0.006117005366832018, 0.008929422125220299, -0.004883057903498411, 0.22409333288669586, -0.011467627249658108, 0.02823665924370289, 0.033242762088775635, 0.004102612379938364, 0.017774472013115883, 0.02133217826485634, 0.0010247741593047976, -0.012037142179906368, 0.021571233868598938, -0.003912774380296469, 0.006190831307321787, -0.01906818337738514, 0.001408844836987555, 0.0006820109556429088, 0.007523213513195515, -0.020122839137911797, -0.03878322243690491, -0.010525467805564404, -0.0012295532505959272, -0.0069642458111047745, -0.012487128376960754, -0.030964704230427742, 0.005347106605768204, 0.029811613261699677, -0.007776331156492233, 0.0021181011106818914, -0.029558496549725533, -0.008479434996843338, -0.004644002299755812, 0.00012381223496049643, -0.02768823876976967, 0.005955291446298361, 0.006869326811283827, -0.016101082786917686, -0.0014914595521986485, 0.031836554408073425, -0.012501190416514874, 0.01089108269661665, -0.0035190358757972717, 0.03220216557383537, -0.0338052436709404, 0.02037595584988594, -0.016888560727238655, -0.0027561679016798735, 0.0069994013756513596, -0.009105198085308075, 0.0025364479515701532, 0.005378746427595615, 0.008120852522552013, -0.0230899378657341, -0.010096574202179909, 0.01424488890916109, 0.018941624090075493, 0.0014281801413744688, -0.004436586983501911, 0.0028299938421696424, -0.004686188884079456, 0.0016637200023978949, 0.03040222078561783, -0.018154148012399673, 0.03268027678132057, 0.010103605687618256, 0.00547014968469739, -0.019729100167751312, 0.013253511860966682, -0.02652108669281006, 0.030289724469184875, 0.01415348518639803, -0.01842132769525051, -0.02377898059785366, -0.021500922739505768, -0.024144593626260757, 0.00967471208423376, -0.009555184282362461, -0.019054120406508446, 0.007572431117296219, 0.023441489785909653, 0.014779248274862766, 0.020643135532736778, 0.0046264249831438065, -0.017085429280996323, -0.00564241036772728, -1.616315421415493e-05, 0.003765122266486287, -0.02875695750117302, 0.02775854989886284, -0.001306894700974226, -0.017985401675105095, -0.005494758486747742, -0.0022059890907257795, -0.016058897599577904, -0.026703892275691032, -0.010729368776082993, 0.037292640656232834, -0.016269829124212265, -0.0028458137530833483, 0.025269560515880585, -0.019729100167751312, -0.0190400592982769, -0.03529582545161247, 0.045336149632930756, 0.037911370396614075, 0.009013794362545013, -0.015918277204036713, 0.01252228394150734, -0.04139876738190651, 0.002098765689879656, 0.0012752549955621362, -0.03462084382772446, 0.014694875106215477, -0.02851790189743042, 0.011080920696258545, -0.004014724399894476, 8.964577136794105e-05, 0.006074819248169661, 0.018126023933291435, -0.016312014311552048, 0.014990178868174553, 0.008184131234884262, -0.016579193994402885, -0.012016048654913902, 0.02027752250432968, 0.009941891767084599, -0.016719814389944077, -0.028700709342956543, -0.03906446322798729, 0.017268236726522446, -0.006563476752489805, -0.03374899551272392, 0.0025311748031526804, -0.008479434996843338, -0.01013876125216484, -0.027744486927986145, 0.003736998187378049, -0.0008503164863213897, -0.00034342240542173386, -0.02425709180533886, -0.008240380324423313, -0.03068346157670021, -0.011179354973137379, 0.016058897599577904, 0.04682673141360283, 0.01728229783475399, 0.01266290433704853, -0.03580205887556076, -0.00507641164585948, -0.006911512929946184, 0.008528652600944042, -0.027547618374228477, -0.02947412244975567, 0.012416818179190159, -0.0012796494411304593, -0.008620056323707104, 0.004176438320428133, -0.025986727327108383, -0.0029565526638180017, -0.028939764946699142, 0.0010713548399508, 0.0027227706741541624, -0.04249561205506325, 0.008549745194613934, 0.009906736202538013, -0.0009781935950741172, -0.008029448799788952, -0.017226049676537514, -0.1802196353673935, 0.0069009666331112385, 0.017408857122063637, -0.011397317051887512, 0.01264181174337864, 0.006334967911243439, 0.032764650881290436, 0.01818227209150791, -0.02787104621529579, 0.013766777701675892, 0.0041588605381548405, 0.012311352416872978, -0.029024137184023857, -0.04508303478360176, 0.00781851727515459, 0.004039332736283541, 0.013105859979987144, 0.0095833083614707, 0.027674177661538124, 0.003348533296957612, 0.02989598549902439, -0.051382847130298615, 0.02044626697897911, 0.013436319306492805, 0.003933867439627647, 0.01594640128314495, -0.006225986871868372, -0.0006907997885718942, 0.013014456257224083, -0.050004761666059494, -0.005551006644964218, 0.0022059890907257795, 0.03504270687699318, 0.007762269116938114, 0.0138652129098773, 0.007382592651993036, 0.02061501145362854, 0.009562215767800808, -0.004679157864302397, 0.03442397713661194, 0.028911639004945755, 0.036673907190561295, -0.005705689545720816, 0.003573526395484805, -0.00377566902898252, 0.016480760648846626, -0.009625494480133057, -0.011453565210103989, -0.003997146617621183, -0.004348698537796736, 0.032005298882722855, -0.0077411760576069355, 0.01958847977221012, -0.0006033512181602418, 0.004376823082566261, 0.0016171394381672144, 0.0057408446446061134, 0.01341522578150034, 0.016438573598861694, 0.004355730023235083, 0.0015951674431562424, -0.029164757579565048, 0.015988586470484734, 0.002304423600435257, 0.023314930498600006, -0.0414268933236599, -0.03102095238864422, 0.006475588772445917, -0.022977441549301147, -0.0031499064061790705, 0.0016725088935345411, 0.01551047619432211, 0.015383916907012463, 0.03391773998737335, 0.0148776825517416, 0.024313339963555336, -0.011327006854116917, -0.020432204008102417, 0.02027752250432968, -0.015327668748795986, -0.001712058437988162, 0.023582110181450844, -0.03394586592912674, -0.019124431535601616, 0.0023448520805686712, -0.02256964147090912, -0.011826210655272007, 0.0029442482627928257, -0.004253779537975788, -0.004668611101806164, 0.025536740198731422, -0.018097899854183197, 0.02202121913433075, -0.020080652087926865, 0.0010986000997945666, 0.03127406910061836, 0.010750461369752884, -0.009843457490205765, 0.0272523146122694, -0.009273942559957504, -0.007663834374397993, -0.013886305503547192, -0.04336746037006378, -0.008732552640140057, 0.005280311685055494, -0.009611432440578938, -0.02384928986430168, 0.011397317051887512, 0.0430862195789814, -0.002097007818520069, -0.0053189825266599655, 0.01116529293358326, 0.03462084382772446, 0.013886305503547192, -0.00620137806981802, 0.020980626344680786, 0.0039373827166855335, -0.006806047633290291, 0.035098955035209656, -0.02913663350045681, 0.07053539901971817, -0.024032097309827805, -0.024032097309827805, 0.029811613261699677, 0.026816390454769135, -0.013935523107647896, -0.11564655601978302, -0.02202121913433075, 0.007182208355516195, -0.00930909812450409, -0.024580519646406174, 0.0008226317586377263, -0.016382325440645218, 0.04120190069079399, -0.049976639449596405, 0.03414273262023926, -0.026549210771918297, 0.00016621820395812392, -0.003223732113838196, 0.005818186327815056, 0.002608516253530979, 0.009344253689050674, 0.005252187605947256, 0.0007857187883928418, -0.0052205477841198444, 0.030936580151319504, 0.027772611007094383, -0.000574787613004446, -0.0030760804656893015, 0.01587609015405178, -0.012156669981777668, -0.01563703455030918, -0.00569514324888587, 0.021739978343248367, 0.009604401886463165, -0.0065072281286120415, 0.010743430815637112, 0.00895051471889019, -0.0017261204775422812, 0.0007896737661212683, -0.015454228036105633, -0.01166449673473835, -0.0037616067565977573, -0.005674049723893404, 0.03535207360982895, -0.03979568928480148, 0.001239220960997045, 0.012191824615001678, 0.010947330854833126, 0.003990115597844124, -0.010455157607793808, 0.01204417273402214, -0.0065177748911082745, 0.032455284148454666, 0.010012201964855194, -0.0039479294791817665, -0.005723267327994108, -0.00994892232120037, -0.017029181122779846, -0.004816262982785702, 0.029221005737781525, -0.03909258544445038, 0.012311352416872978, 0.010237195529043674, -0.007727114018052816, 0.006120521109551191, -0.007698989938944578, 0.002348367590457201, -0.008261472918093204, -0.009576277807354927, 0.023582110181450844, -0.008465372957289219, -0.008500528521835804, 0.003292284905910492, 0.005329528823494911, -0.01923692785203457, -0.012409786693751812, 0.01913849264383316, -0.022386834025382996, 0.024847697466611862, -0.011741838417947292, -0.010933268815279007, 0.009590339846909046, 0.0006828898331150413, 0.006865811534225941, -0.010476251132786274, -0.018252581357955933, -0.013394133187830448, 0.0004381217295303941, -0.04075191169977188, 0.016776062548160553, 0.01429410558193922, 0.02521331235766411, 0.0007057407055981457, 0.021079059690237045, -0.023891476914286613, -0.009400501847267151, 0.015018302947282791, -0.005948260426521301, -0.043929941952228546, -0.020699383690953255, 0.03163968399167061, -0.012838680297136307, 0.025930479168891907, 0.021627482026815414, 0.005551006644964218, -0.02930537797510624, -0.019265051931142807, -0.05661394074559212, 0.01676200143992901, -0.005512335803359747, -0.024172717705368996, 0.020952502265572548, -0.02230246178805828, -0.003012801054865122, -0.002743863733485341, -0.0001536941563244909, 0.028560087084770203, -0.033692747354507446, 0.015918277204036713, -0.013591001741588116, -0.0255929883569479, -0.026717955246567726, -0.03082408383488655, 0.021557170897722244, -0.008247410878539085, 0.00816303864121437, 0.03329901024699211, 0.005361168645322323, 0.019096307456493378, 0.0014642142923548818, -0.004211593419313431, -0.0035682532470673323, -0.026057036593556404, 0.022625889629125595, 0.032595906406641006, -0.005044771824032068, 0.0010151065653190017, -0.014455819502472878, -0.021796226501464844, 0.023666484281420708, -0.0074318102560937405, -0.0033608374651521444, 0.025958603248000145, 0.016846373677253723, -0.012979301624000072, 0.01742292009294033, 0.007375561632215977, -0.0050834426656365395, -0.02796947956085205, 0.01027235109359026, -0.01944785937666893, -0.01697293296456337, -0.004000662360340357, -0.0094637805595994, 0.004749468062072992, 0.025410180911421776, 0.010511405766010284, 0.021275930106639862, 0.00783257931470871, -0.00967471208423376, -0.047361090779304504, -0.014596440829336643, 0.010448127053678036, 0.0013842361513525248, 0.00033133779652416706, -0.02518518827855587, -0.032314661890268326, 0.020980626344680786, 0.013787871226668358, 0.006271688267588615, -0.02827884629368782, 0.015693282708525658, -0.01982753537595272, -0.0368989035487175, 0.009224725887179375, -0.01873069256544113, -0.011263727210462093, -0.020572826266288757, -0.003733482677489519, 0.011502782814204693, 0.017633849754929543, -0.00968877412378788, 0.001949356053955853, -0.0027544102631509304, 0.009259880520403385, -0.01842132769525051, 0.0024766840506345034, 0.007565400097519159, -0.05678268522024155, 0.025747671723365784, 0.0003370505291968584, 0.04257998242974281, 0.00149233837146312, -0.012001986615359783, 0.03388961777091026, 0.02449614554643631, 0.013063673861324787, -0.015060489065945148, 0.006215440109372139, -0.00010722337174229324, -0.0009263396495953202, -0.0007927498663775623, 0.013787871226668358, -0.0215431097894907, 0.008388031274080276, 0.017408857122063637, 0.015243296511471272, 0.012262134812772274, 0.014273012988269329, 0.01549641415476799, -0.004074488300830126, 0.00158022646792233, -0.0043311212211847305, 0.0037580912467092276, -0.0066056628711521626, 0.019363487139344215, 0.01504642702639103, 0.0148776825517416, -0.006426371168345213, -0.04044254869222641, 0.023680545389652252, 0.014554254710674286, 0.013211325742304325, 0.018871312960982323, -0.02872883342206478, -0.001470366376452148, 0.025002380833029747, 0.0008955788216553628, 0.015847966074943542, 0.03253965824842453, -0.003083111485466361, 0.01930723898112774, 0.042833101004362106, 0.017169801518321037, -0.01089108269661665, -0.0036702032666653395, -0.0018825611332431436, 0.01590421423316002, 0.0063068438321352005, -0.022358709946274757, -0.016269829124212265, 0.007684927433729172, -0.028321033343672752, 0.015847966074943542, 0.0074318102560937405, -0.01127075869590044, 0.08515996485948563, 0.022738385945558548, -0.021486861631274223, -0.003954960498958826, -0.014737061224877834, 0.007916951552033424, 0.012585562653839588, 0.009217694401741028, -0.005020163021981716, -0.032933395355939865, 0.024608643725514412, -0.01353475358337164, -0.009695805609226227, -0.04460492357611656, 0.011080920696258545, -0.004795169923454523, -0.029080385342240334, 0.002608516253530979, 0.00840209424495697, -0.013548815622925758, 0.023343056440353394, 0.006461526732891798, 0.011755900457501411, -0.014111299067735672, -0.02411646954715252, 0.005477180704474449, 0.02188059873878956, -0.0010704760206863284, 0.012451973743736744, -0.02164154313504696, 0.024903947487473488, -0.0008604236063547432, -0.027786673977971077, -0.01718386448919773, -0.005572099704295397, 0.012585562653839588, -0.003983084578067064, -0.009203632362186909, 0.021275930106639862, 0.020727507770061493, -0.007340406533330679, 0.004587754141539335, -0.021838413551449776, -0.024889884516596794, 0.01806977577507496, -0.004953368101269007, 0.006377154029905796, -0.01649482175707817, -0.02185247465968132]"
Migrating from a Redis Cluster to Dragonfly on a single node,Migrating from a Redis Cluster to Dragonfly on a single node,"## Introduction  At its core, Redis is a single-threaded system. To scale horizontally, you need to use a deployment topology called _Redis Cluster_ that automatically partitions data across multiple Redis nodes. Instead of consistent hashing (which is a commonly used technique in other systems), Redis employs a different form of sharding where every key is conceptually part of a _hash slot_.  Once you move from a single Redis instance to a Redis Cluster, you enter the world of distributed systems. It has its pros but there are quite a few limitations as well:  - Shard/Node management - This includes adding/removing nodes, rebalancing data, and so on. - Dealing with eventual consistency and possible data loss - Redis replication is asynchronous, which can lead to stale reads from replicas. Even worse, there can be data loss due to primary node failures and split-brain scenarios. - Application level complexities - Redis Cluster does not support multi-key operations on keys that belong to different slots. Doing so results in the (in)famous `CROSSSLOT` error.  Just like [""The Best Code is No Code At All""](https://blog.codinghorror.com/the-best-code-is-no-code-at-all/), perhaps the ideal distributed system is one that doesn't need to be distributed. In the case of Redis, you can achieve this by using a single-node solution like Dragonfly.  Thanks to its [API compatibility](https://dragonflydb.io/docs/category/command-reference), Dragonfly can act as a _drop-in replacement_ for Redis. Dragonfly addresses most of the shortcomings of Redis Cluster, thereby dramatically reducing operational complexity and improving reliability.  - Dragonfly relies on _vertically_ scaling a single node. This makes it quicker, cheaper, and more predictable than Redis Cluster and other multi-node approaches. - Unlike Redis, Dragonfly has a [multi-threaded, shared-nothing architecture](https://dragonflydb.io/blog/scaling-performance-redis-vs-dragonfly) that can scale vertically up to `1TB` of memory on each instance.  In this blog post, you will learn how to migrate data from a Redis Cluster to a single-node Dragonfly instance. We will use Dragonfly's [emulated cluster mode](https://www.dragonflydb.io/docs/managing-dragonfly/clustermode) that makes it easier to migrate your existing application(s) from a Redis Cluster to Dragonfly. We will use a [sample application](https://github.com/dragonflydb/redis-cluster-application-example) to demonstrate the migration process and cover everything step by step.  ## Prerequisites  Before you begin, make sure you have the following installed:  - [Docker](https://docs.docker.com/engine/install/) and [Docker Compose](https://docs.docker.com/compose/install/#installation-scenarios) - Redis CLI - [RIOT](https://developer.redis.com/riot/) (for migration) - [Go programming language](http://go.dev/) (version 1.18 or above)  Clone the repository and navigate to the correct directory:  ```shell git clone git@github.com:dragonflydb/redis-cluster-application-example.git cd redis-cluster-application-example ```  ## Start Dragonfly and Redis Cluster  To keep things simple, you will use Docker Compose:  ```shell docker compose -p migrate-to-dragonflydb up ```  Verify that the Docker containers are running:  ```shell docker compose -p migrate-to-dragonflydb ps ```  Expected output:  ```shell NAME                                    COMMAND                  SERVICE             STATUS              PORTS migrate-to-dragonflydb-dragonfly-1      ""entrypoint.sh drago""   dragonfly           running (healthy)   0.0.0.0:6380->6379/tcp migrate-to-dragonflydb-rediscluster-1   ""docker-entrypoint.s""   rediscluster        running             6379/tcp, 0.0.0.0:7000-7002->7000-7002/tcp ```  From the Redis container, start a Redis Cluster:  ```shell docker exec -it migrate-to-dragonflydb-rediscluster-1 /bin/bash ./start-cluster.sh  # expected output Redis Cluster ready ```  At this point, you should have:  1. A Dragonfly instance accessible on port `6380` 2. A three-node Redis Cluster accessible on ports `7000`, `7001`, and `7002`  Before starting the migration process, let's quickly take a look at the sample application.  ## Application Overview  You can access the source code [here](https://github.com/dragonflydb/redis-cluster-application-example) under `/app`.  The application is a web service written in Go that serves data from Redis with the Go Redis client. The application loads sample data into the Redis Cluster during startup - this is dummy user data stored as a `HASH`.  ```go // main.go func loadData() { fmt.Println(""loading sample data into redis....."")   user := map[string]string{}   for i := 0; i < 100; i++ { key := ""user:"" + strconv.Itoa(i) name := ""user-"" + strconv.Itoa(i) email := name + ""@foo.com"" user[""name""] = name user[""email""] = email   err := client.HMSet(context.Background(), key, user).Err() if err != nil { log.Fatal(""failed to load data"", err) } }   fmt.Println(""data load complete"") } ```  It also provides a REST API to fetch user data given its ID.  ```go func main() { r := mux.NewRouter() r.HandleFunc(""/{id}"", func(w http.ResponseWriter, r *http.Request) { id := mux.Vars(r)[""id""] hashName := ""user:"" + id fmt.Println(""getting data for"", hashName)  var user User err := client.HMGet(context.Background(), hashName, ""name"", ""email"").Scan(&user)  if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return }  err = json.NewEncoder(w).Encode(user) if err != nil { http.Error(w, err.Error(), http.StatusInternalServerError) return } })  log.Fatal(http.ListenAndServe("":8080"", r)) } ```  Once the application is running, you can use any `HTTP` client (`curl` for example) to query data from Redis using the API exposed by the application - more on this later.  This blog post makes use of [RIOT](https://developer.redis.com/riot/), which is a data migration tool for Redis. Instead of using the `REPLICAOF` command, it implements client-side replication using `DUMP` & `RESTORE`, or [type-based replication](https://developer.redis.com/riot/#_replicate_type_based) (e.g. `GET` and `SET`) for migration in `snapshot` or `live` modes.  ## Preparing for the migration  ### 1. Start the client application  In a new terminal:  ```shell cd app  export REDIS_HOSTS=""localhost:7000,localhost:7001,localhost:7002"" export LOAD_DATA=true  go run main.go ```  The application will load seed data (100 `HASH`es) into the source Redis Cluster. You should see the following output:  ```shell loading sample data into redis..... data load complete ```  ### 2. Verify data in source Redis Cluster  Once the data load is complete, connect to each node in the Redis Cluster and check the number of keys:  ```shell redis-cli -p 7000 -c DBSIZE  # output (integer) 28  redis-cli -p 7001 -c DBSIZE  # output (integer) 36  redis-cli -p 7002 -c DBSIZE  # output (integer) 36 ```  If you add them up, they should be `100` - same as what our application loaded during startup.  You can test the application using `curl`:  ```shell curl -X GET http://localhost:8080/1  # expected output {""name"":""user-1"",""email"":""user-1@foo.com""}  curl -X GET http://localhost:8080/2  # expected output {""name"":""user-2"",""email"":""user-2@foo.com""} ```  You have verified that the application is working as expected.  ## Migrate data from Redis Cluster to a single node Dragonfly instance (in Cluster Mode)  ### 1. Verify data in Dragonfly  ```shell redis-cli -p 6380 -c DBSIZE  # expected output (integer) 0 ```  As expected, there is _no data_ in the Dragonfly instance yet.  ### 2. Use the RIOT tool to initiate the migration  Use the following `riot` command:  ```shell riot --info -h localhost -p 7000 --cluster replicate-ds -h localhost -p 6380 --batch 10 ```  We are using Redis Cluster as the source (note the port number and `--cluster` flag). This will migrate data from Redis Cluster node `localhost:7000` to Dragonfly instance `localhost:6380`. The `--batch` flag specifies the number of keys to be migrated in a single batch.  You should see similar output from the migration job (_timings and other statistics might differ_):  ```shell Executing step: [snapshot-replication] Job: [SimpleJob: [name=scan-reader]] launched with the following parameters: [{}] Executing step: [scan-reader] Scanning   0%                                                                         0/10 (0:00:00 / ?) ?/s Step: [scan-reader] executed in 79ms Closing with items still in queue Job: [SimpleJob: [name=scan-reader]] completed with the following parameters: [{}] and the following status: [COMPLETEScanning 100%  100/100 (0:00:00 / 0:00:00) ?/s Step: [snapshot-replication] executed in 856ms Executing step: [verification] Job: [SimpleJob: [name=RedisItemReader]] launched with the following parameters: [{}] Executing step: [RedisItemReader] Verifying   0%                                                                        0/10 (0:00:00 / ?) ?/s Step: [RedisItemReader] executed in 147ms Closing with items still in queue Job: [SimpleJob: [name=RedisItemReader]] completed with the following parameters: [{}] and the following status: [COMPVerifying 100%  100/100 (0:00:00 / 0:00:00) ?/s >0 T0 0 0 Verification completed - all OK Step: [verification] executed in 368ms Job: [SimpleJob: [name=snapshot-replication]] completed with the following parameters: [{}] and the following status: [COMPLETED] in 1s443ms ```  ### 3. Verify data in Dragonfly  ```shell redis-cli -p 6380 -c DBSIZE  # expected output (integer) 100  redis-cli -p 6380 -c HMGET user:42 name email  # expected output 1) ""user-42"" 2) ""user-42@foo.com"" ```  If the migration was successful, you should see `100` items in the Dragonfly instance.  ### 4. Switch the application to use Dragonfly  Before you start the application, shut down the previous instance to avoid port `8080` collision  ```shell export REDIS_HOSTS=""localhost:6380"" export LOAD_DATA=false  go run main.go  # expected output connected to redis localhost:6380 ```  Notice that we changed the `REDIS_HOSTS` value to point to Dragonfly and we are not using the data load option anymore. This will just start the web server and serve data from Dragonfly.  You can test it like this:  ```shell curl -X GET http://localhost:8080/4 curl -X GET http://localhost:8080/5 curl -X GET http://localhost:8080/42 ```  The application will continue to work as expected and serve data from Dragonfly.  All we did was point to Dragonfly instead of Redis Cluster with no code changes required.  Once you have completed the steps in this tutorial, use this command to stop the Redis Cluster and Dragonfly instance:  ```shell docker compose -p migrate-to-dragonflydb down -v ```  ## Conclusion and next steps  In this tutorial, we used the RIOT tool to migrate data from a Redis Cluster to Dragonfly.  without making any application code changes! Thanks to the Dragonfly [Cluster Mode](https://www.dragonflydb.io/docs/managing-dragonfly/clustermode), a single Dragonfly instance can achieve the same capacity as a multi-node Redis Cluster. The migration technique you would use depends on the source cluster. This could vary from a `REPLICAOF` command [(Dragonfly supports a primary/secondary replication model)](https://dragonflydb.io/docs/managing-dragonfly/replication), the `MIGRATE` command, or even a custom application.  Due to Dragonfly's hardware efficiency, you can run a single node instance on a small `8GB` instance and scale vertically to large `768GB` machines with `64` cores. This reduces infrastructure costs and decreases the complexity that's inherent in distributed data systems. Rather than spending your time and effort maintaining a Redis Cluster, you can use Dragonfly, which provides the same semantics as single-node Redis, along with the ability to emulate a Redis Cluster if required. At the time of writing, [Dragonfly has implemented more than 200 Redis commands](https://dragonflydb.io/docs/about/faq#when-will-you-support-x-command), which represents good coverage for the vast majority of use cases.  If you want to learn more, check out our documentation on [how to fire up a Dragonfly instance](https://dragonflydb.io/docs/getting-started/), bring along a [client of your choice](https://dragonflydb.io/docs/development/sdks) and start building with familiar [Redis commands](https://dragonflydb.io/docs/category/command-reference)!","[-0.012292653322219849, -0.005204163957387209, 0.00013511469296645373, -0.021844469010829926, -0.006728754378855228, 0.01826767809689045, -0.028614336624741554, 0.009003649465739727, -0.020309600979089737, -0.02762763574719429, 0.009640893898904324, -0.0025130046997219324, -0.014869039878249168, -0.000772573403082788, -0.0003924964112229645, 0.035466428846120834, 0.011799302883446217, -0.019035112112760544, 0.013409544713795185, -0.016266867518424988, -0.007537301164120436, -0.005742053035646677, -0.0006278229411691427, -0.009332549758255482, -0.012422842904925346, -0.015855740755796432, 0.039221376180648804, -0.0018706211121752858, 0.012128203175961971, 0.019939588382840157, 0.02070702239871025, -0.006355315446853638, 0.0013507186667993665, -0.003455167403444648, 0.0017361488426104188, 0.010593334212899208, 0.0294639952480793, -0.013382135890424252, 0.010840009897947311, -0.015937967225909233, 0.02696983516216278, -0.024475673213601112, 0.001727583701722324, -0.013930303044617176, -0.009236619807779789, 0.02910768799483776, -0.010449440218508244, -0.04522380977869034, 0.011621148325502872, -0.02039182558655739, 0.011052425019443035, 0.0318211168050766, -0.030752189457416534, 0.007667491212487221, -0.010785193182528019, 0.002956677693873644, 0.01345065701752901, 0.00746192829683423, 0.01024387776851654, -0.005515933968126774, 0.013251946307718754, 0.026353146880865097, -0.002048775553703308, 0.008921423926949501, -0.01982995495200157, 0.002656898694112897, -0.0014680607710033655, -0.02562682516872883, -0.009812195785343647, -0.013334170915186405, 0.02380416728556156, 0.03998880833387375, 0.006557452026754618, -0.0010697828838601708, 0.018651394173502922, -0.022351523861289024, -0.0007464498048648238, -0.0007053372100926936, -0.0009250324219465256, -0.010182209312915802, -0.0026449074503034353, 0.004375061020255089, -0.00895568449050188, 0.02894323691725731, 0.005553620867431164, 0.03160184994339943, -0.019610688090324402, 0.01156633161008358, -0.00832529179751873, 0.011956900358200073, -0.008051208220422268, -0.0015211644349619746, 0.001640219590626657, -0.0011357342591509223, -0.00022055170848034322, -4.6813707740511745e-05, 0.007975835353136063, 0.018541760742664337, -0.009421627037227154, -0.01049740519374609, -0.037467241287231445, 0.005039713811129332, -0.006872648373246193, -0.010141096077859402, -0.01833619922399521, 0.0016736234538257122, 0.01789766550064087, -0.025133473798632622, 0.025983134284615517, 0.014170126989483833, -0.015513136982917786, 0.02968326397240162, 0.02326970547437668, -0.012340618297457695, -0.0022097995970398188, -0.0037583725061267614, 0.038645800203084946, -0.029135094955563545, 0.024777164682745934, -0.02380416728556156, 0.03582273796200752, 0.01071667205542326, 0.007722307927906513, -0.025722753256559372, 0.02363971807062626, -0.005478247534483671, -0.007653786800801754, -0.005584455095231533, 0.018665099516510963, -0.014403097331523895, 0.007174140308052301, 0.014869039878249168, -0.020213671028614044, -0.003138258121907711, -0.01310805231332779, -0.015965374186635017, -0.012093942612409592, -0.008092320524156094, -0.005443986970931292, -0.03354784473776817, 0.012765447609126568, 0.010956495068967342, -0.00983275193721056, -0.020446643233299255, -0.009503851644694805, 0.021090740337967873, -0.0033575252164155245, 0.02732614427804947, -0.008948832750320435, -0.007934723049402237, 0.012655814178287983, -0.039002109318971634, -0.007448224350810051, -0.008434925228357315, 0.028258027508854866, 0.03343820944428444, -0.021008513867855072, -0.0015785506693646312, 0.013354727998375893, 0.004402469377964735, 0.02585979551076889, 0.029875122010707855, -0.02321488782763481, 0.0040119001641869545, 0.0076400828547775745, 0.03439750149846077, 0.01499237772077322, -0.027942832559347153, 0.00861307978630066, -0.006701346021145582, 0.009914977476000786, 0.03357525169849396, -0.02916250377893448, 0.0388924740254879, 0.011518366634845734, 0.010141096077859402, -0.007006264291703701, 0.01141558587551117, 0.00021359256061259657, -0.023612309247255325, 0.0008402377716265619, 0.0012702065287157893, 0.012710630893707275, 0.03204038366675377, -0.006961725652217865, -0.02018626406788826, -0.01270377915352583, 0.015444615855813026, 0.0034757237881422043, -0.007180992513895035, -0.013327319175004959, 0.0205425713211298, 0.003319838549941778, -0.012964158318936825, -0.5915822386741638, -0.0002995649119839072, 0.0073522948659956455, -0.0508425235748291, -0.006992559880018234, -0.006876074243336916, 0.008482890203595161, 0.015321278013288975, -0.013950859196484089, -0.009654597379267216, 0.008099173195660114, -0.008188250474631786, 0.009729971177875996, 0.003350673010572791, -0.0340137854218483, -0.010237026028335094, 0.019692912697792053, -0.01086741778999567, -0.007626378443092108, 0.012498215772211552, -0.044017840176820755, 0.03269818425178528, 0.008229362778365612, 0.017335793003439903, -0.01071667205542326, -0.01326565071940422, -0.009928681887686253, -0.00202650623396039, -0.0036042004358023405, 0.015704995021224022, -0.04486750066280365, -0.005505655892193317, 0.02417418174445629, -0.003991343546658754, 0.05076029896736145, -0.012354321777820587, -0.02607906237244606, 0.037083521485328674, 0.008626784197986126, 0.04097551107406616, 0.011771894060075283, 0.0014158135745674372, 0.024475673213601112, -0.0024393447674810886, -0.004080420825630426, -0.03212260827422142, 0.017280977219343185, -0.01429346390068531, -0.0006543747731484473, 0.021638907492160797, -0.008441777899861336, -0.02395491488277912, 0.0008286748779937625, -0.005221294239163399, -0.01628057099878788, -0.02424270287156105, 0.03727538138628006, -0.0166642889380455, 0.015746107324957848, -0.0016856146976351738, 0.006057249382138252, 0.02114555612206459, -0.030834414064884186, -0.001259928452782333, -0.02246115729212761, 0.004621736239641905, -0.018212860450148582, -0.030231431126594543, 0.020789247006177902, -0.034726403653621674, 0.027435777708888054, -0.014745702035725117, -0.0045018247328698635, -0.023146366700530052, -0.008859755471348763, 0.028203211724758148, 0.016842441633343697, 0.019035112112760544, 0.005022583529353142, 0.02091258578002453, 0.012710630893707275, 0.0009969794191420078, -0.019555870443582535, -0.016006486490368843, 0.024338630959391594, 0.0029035741463303566, -0.030368471518158913, -0.014471618458628654, 0.0012899063294753432, 0.00954496394842863, 0.005293241236358881, 0.028422478586435318, -0.020282192155718803, -0.028258027508854866, 0.022968212142586708, 0.030039571225643158, -0.025763865560293198, -0.010730376467108727, -0.00022526252723764628, -0.021268894895911217, -0.005211016163229942, -0.027668748050928116, -0.015595361590385437, 0.015102011151611805, 0.024146772921085358, -0.022598199546337128, -0.035987187176942825, 0.00026037951465696096, 0.03801540657877922, -0.012333765625953674, -0.00011102530697826296, -0.010757784359157085, -0.021625202149152756, 0.005457691382616758, -0.002927556401118636, -0.021995216608047485, 0.024585306644439697, 0.0014372263103723526, 0.034726403653621674, -0.02732614427804947, 0.020816655829548836, -0.012642109766602516, 8.779243216849864e-05, -0.011264839209616184, 0.0010398050071671605, -0.011607443913817406, 0.007030246313661337, -0.015609066002070904, 0.008380108512938023, 0.019432533532381058, 0.000823107548058033, -0.03395896777510643, 0.03116331435739994, -0.00905846618115902, 0.051746997982263565, -0.004155793692916632, 0.008284179493784904, 0.0011871249880641699, 0.015855740755796432, -0.034287869930267334, 0.022940805181860924, 0.0012273810571059585, 0.03278040885925293, -0.015348686836659908, -0.017349496483802795, -0.012292653322219849, -0.02039182558655739, -0.010600186884403229, 0.01090167835354805, -0.018829548731446266, -0.00964774563908577, -0.009490147233009338, -0.0030354768969118595, 0.020802952349185944, -0.01621204987168312, 0.01134706474840641, -0.012943602167069912, -0.024736052379012108, -0.001760987681336701, -0.014622364193201065, -0.00016958928608801216, 0.0351923443377018, -0.03464417904615402, 0.0030851545743644238, -0.03853616490960121, -0.01767839677631855, -0.009942385368049145, 0.02784690260887146, 0.00019635526405181736, -0.02342045120894909, -0.027216510847210884, -0.009606633335351944, 0.0022217908408492804, -0.00024903073790483177, 0.002721993485465646, -0.011956900358200073, -0.025942020118236542, 0.01577351614832878, -0.0010543656535446644, 0.013306763023138046, 0.012847673147916794, 0.011991160921752453, 0.005899651441723108, -0.004268853459507227, 0.017143934965133667, 0.02173483557999134, 0.02106333151459694, 0.01937771588563919, -0.008558263070881367, 0.022132256999611855, -0.0001798674202291295, 0.03631608933210373, -0.00872956495732069, -0.019117336720228195, -0.012292653322219849, 0.0018517778953537345, -0.001108325901441276, 0.0026825941167771816, -0.008195102214813232, 0.013587698340415955, 0.028477294370532036, -0.012525624595582485, 0.024434560909867287, -0.024324927479028702, -0.008051208220422268, -0.016390204429626465, -0.00011702088522724807, 0.012429695576429367, 0.014156422577798367, 0.0018346476135775447, 0.01278600376099348, 0.01090853102505207, -0.004409321118146181, -0.012607849203050137, 0.0020367843098938465, 0.04297632351517677, -0.022598199546337128, 0.004525806754827499, -0.0036042004358023405, 0.011525219306349754, -0.017870256677269936, 0.004693683236837387, 0.0028573223389685154, 0.009126986376941204, -0.0032016399782150984, -0.0021549828816205263, -0.004008473828434944, 0.011278543621301651, 0.018007298931479454, -0.034370094537734985, -0.006009284872561693, 0.041962213814258575, -0.011963753029704094, 0.011429289355874062, 0.031930748373270035, 0.01973402500152588, 0.017938777804374695, -0.013491769321262836, -0.007790828589349985, -0.04653941094875336, 0.01369733177125454, 0.01819915696978569, 0.01377270556986332, -0.02696983516216278, 0.0355212464928627, 0.009339401498436928, 0.0033112734090536833, 0.02158408984541893, -0.021693723276257515, 0.012203576043248177, -0.019473645836114883, 0.008647340349853039, -0.00688635278493166, -0.018253972753882408, 0.014526435174047947, -0.007763420231640339, -0.0013275928795337677, -0.003717259969562292, 0.024352336302399635, 0.01695207506418228, 0.020241079851984978, 0.025393852964043617, 0.018870661035180092, -0.012539329007267952, 0.018980294466018677, 0.0001403608184773475, 0.001152864540927112, -0.009997202083468437, -0.0029172783251851797, 0.007729160133749247, 0.002158408984541893, -0.0077086035162210464, -0.006745884660631418, -0.02488679811358452, 0.022365229204297066, 0.016033895313739777, 0.011799302883446217, 0.007167288567870855, -0.012210427783429623, 0.006896630860865116, -0.01344380434602499, -0.018582873046398163, 0.01345065701752901, 0.0037994850426912308, 0.002317720092833042, -0.05511822924017906, -0.009072169661521912, 0.019048815593123436, 0.015102011151611805, 0.016910962760448456, 0.015485728159546852, -0.004402469377964735, -0.0115320710465312, 0.003549383720383048, -0.010922234505414963, -0.006146326661109924, 0.055803436785936356, -0.012169315479695797, -0.00807176437228918, -0.010627594776451588, 0.024352336302399635, 0.016910962760448456, -0.02703835628926754, -0.026243513450026512, 0.0542137511074543, -0.006266238167881966, -0.007180992513895035, -0.014026232995092869, 0.018980294466018677, 0.01219672430306673, -0.030176613479852676, -0.024338630959391594, -0.021981511265039444, -0.03360265865921974, 0.016677992418408394, -0.01053166575729847, -0.02938177064061165, 0.005289814900606871, 0.03765909746289253, 0.00771545572206378, -0.013553437776863575, -0.01782914437353611, -0.01804841123521328, 0.008215658366680145, 0.03423305228352547, 0.006091509945690632, -0.002590090734884143, -0.010990755632519722, -0.02894323691725731, -0.019788842648267746, -0.01134021207690239, -0.01924067549407482, 0.019692912697792053, 0.006653381511569023, 0.0035459576174616814, -0.021268894895911217, -0.004573771730065346, -0.0015100297750905156, -0.0017815439496189356, 0.0201177429407835, -0.029491404071450233, -0.027750972658395767, -0.012971010059118271, -0.006197717506438494, 0.007900462485849857, -0.0013267362955957651, 0.017500244081020355, 0.022228186950087547, 0.046676453202962875, 0.0200355164706707, 0.01760987751185894, -0.01826767809689045, 0.011813007295131683, -0.024105660617351532, -0.017705805599689484, 0.004364782478660345, 0.012847673147916794, 0.013087496161460876, 0.0024479099083691835, 0.01855546608567238, -0.021035922691226006, -0.017363201826810837, -0.0058825211599469185, 0.005687236320227385, 0.008626784197986126, 0.0029601037967950106, 0.005762609653174877, 0.004570345394313335, 0.013580846600234509, -0.009531260468065739, -0.022735241800546646, 0.00224577309563756, -0.025476079434156418, -0.009599780663847923, 0.02836766093969345, 0.0010766349732875824, -0.02798394486308098, -0.011264839209616184, 0.0008689309470355511, -0.004111255053430796, 0.0043031140230596066, -0.0175961721688509, -0.0040153260342776775, -0.03595978021621704, -0.02047405205667019, 0.001540007651783526, -0.01813063584268093, -0.01175133790820837, -0.014060492627322674, -0.024790870025753975, -0.010709820315241814, -0.0077497162856161594, -0.028614336624741554, -0.01131280418485403, -0.017856551334261894, -0.031409990042448044, -0.008818642236292362, 0.0020093759521842003, 0.028422478586435318, 0.011703372932970524, 0.004608031827956438, 0.019912179559469223, -0.0158283319324255, 0.013135460205376148, 0.007187844719737768, -0.011648556217551231, 0.0032547437585890293, -0.024434560909867287, -0.046731267124414444, 0.006492357235401869, 0.0004543793620541692, 0.004467564169317484, -0.012347470037639141, 0.0183499027043581, 0.005406300537288189, -0.0011006173444911838, 0.008633635938167572, 0.01002461090683937, 0.005790018010884523, 0.026133880019187927, 0.016746513545513153, 0.008674748241901398, 0.00962033774703741, -0.02844988740980625, 0.010408327914774418, -0.004536084830760956, -0.002745975973084569, -0.02224189043045044, 0.000573862693272531, -0.020199967548251152, 0.026188695803284645, 0.006108640227466822, 0.007126175798475742, -0.01575981266796589, 0.005005453247576952, -0.00427227932959795, -0.0011348777916282415, 0.009983498603105545, 0.036590173840522766, -0.004954062402248383, 0.0032153441570699215, 0.020199967548251152, -0.016856146976351738, -0.006351889576762915, 0.03963249921798706, -0.008421220816671848, 0.03447972610592842, 0.02121407724916935, -0.02173483557999134, 0.020460346713662148, -0.001800387166440487, -0.025750162079930305, -0.03409601002931595, -0.0007288912893272936, 0.02261190488934517, 0.016746513545513153, 0.015951670706272125, -0.025476079434156418, -0.0035836442839354277, 0.0102712856605649, -0.01034665945917368, 0.0026534725911915302, -0.020611092448234558, 0.006064101587980986, -0.009777935221791267, -0.020350713282823563, 0.014718294143676758, -0.0201177429407835, -0.021830765530467033, -0.019281787797808647, -0.04229111224412918, 0.005793443880975246, 0.02673686295747757, -0.0038508758880198, 0.003717259969562292, -0.03828949108719826, -0.019391421228647232, -0.036727212369441986, -0.000375152041669935, -0.015389799140393734, 0.0046559968031942844, -0.00639300188049674, 0.02321488782763481, 0.007722307927906513, 0.048430588096380234, 0.03711093217134476, 0.021899286657571793, -0.0060812318697571754, -0.020282192155718803, -0.009168099611997604, -0.007770272437483072, -0.006896630860865116, -0.0054371352307498455, 0.0009661450167186558, -0.0037892069667577744, 0.023146366700530052, -0.015348686836659908, 0.009914977476000786, -0.0008633636170998216, 0.01989847607910633, -0.0001539579388918355, -0.014718294143676758, -0.04322299733757973, -0.04325040429830551, 0.0009250324219465256, 0.0235711969435215, 0.0067767188884317875, 0.016527246683835983, -0.014718294143676758, -0.010812601074576378, 0.008852902799844742, -0.030368471518158913, 0.04429192468523979, 0.005231572315096855, 0.02798394486308098, -0.013423248194158077, 0.004094125237315893, -0.004063290543854237, -0.005855112802237272, -0.01723986305296421, 0.0044607119634747505, -0.027833199128508568, -0.014964968897402287, 0.023091550916433334, 0.02784690260887146, 0.00877067819237709, 0.009079022333025932, 0.016705401241779327, 0.012025421485304832, -0.008373256772756577, -0.009325697086751461, -0.004769056104123592, 0.006965151522308588, -0.008654192090034485, -0.00213785283267498, -0.04840317741036415, -0.015855740755796432, -0.018761027604341507, -0.012779152020812035, 0.017198750749230385, 0.006413558032363653, 0.007612674497067928, -0.0034363241866230965, -0.013848078437149525, -0.0010920522036030889, -0.00727692199870944, 0.02976548857986927, -0.0012085377238690853, 0.0206247977912426, 0.011264839209616184, 0.0004389621608424932, -0.03135517239570618, 0.011175761930644512, 0.014403097331523895, -0.019172154366970062, 0.029710670933127403, 0.04412747174501419, -0.010894826613366604, -0.0005126221221871674, 0.005416578613221645, -0.03012179769575596, 0.000739169423468411, -0.03335598483681679, 0.011148354038596153, 0.033109311014413834, 0.003981065470725298, -0.030669964849948883, -0.007050802931189537, -0.0004470990097615868, 0.016047600656747818, -0.037165746092796326, 0.012354321777820587, 0.016170937567949295, -0.011141501367092133, -0.009332549758255482, 0.01034665945917368, -0.014375689439475536, 0.02631203457713127, -0.02195410244166851, 0.034150827676057816, -0.017719510942697525, 0.02143334411084652, -0.020062925294041634, -0.0069069089367985725, 0.024434560909867287, 0.007660639006644487, -0.013868634589016438, -0.003806337248533964, 0.024420855566859245, 0.015937967225909233, 0.0027391237672418356, 0.0038680059369653463, -0.005327501799911261, 0.026846496388316154, -0.02498272806406021, 0.010840009897947311, 0.012114498764276505, 0.004337374120950699, 0.003081728471443057, 0.0025729606859385967, -0.010230173356831074, 0.0103123988956213, -0.023461563512682915, -0.022200778126716614, 0.012402286753058434, -0.020145151764154434, -0.0005631563253700733, -0.007770272437483072, -0.002829913981258869, -0.02289969101548195, -0.018295086920261383, -0.006458096671849489, 0.028833603486418724, -0.04311336204409599, -0.014622364193201065, 0.016856146976351738, -0.0044607119634747505, 0.014307168312370777, -0.0027117154095321894, -0.0026894460897892714, 0.002591803902760148, 0.050431396812200546, -0.008537706919014454, 0.01584203727543354, 0.02673686295747757, -0.012388582341372967, -0.030039571225643158, 0.01348491758108139, -0.010175356641411781, -0.00935995765030384, 0.005957894027233124, -0.02017255872488022, -0.03483603522181511, -0.013094347901642323, 0.0030971455853432417, 0.00026145012816414237, -0.010778340511023998, 0.009716266766190529, 0.012587293051183224, 0.013251946307718754, 0.0002781521179713309, -0.010223321616649628, -0.0032324744388461113, 0.01218987163156271, -0.020432937890291214, -0.002446196973323822, 0.01245025172829628, 0.0115320710465312, -0.015554249286651611, -0.009736822918057442, -0.010045167058706284, -0.015184235759079456, -0.0063758715987205505, -0.022365229204297066, -0.009154395200312138, -0.0003963506896980107, -0.005022583529353142, 0.0005785735556855798, -0.010120539925992489, -0.019062520936131477, -0.01754135638475418, -0.0060812318697571754, 0.014252351596951485, 0.01811693236231804, 0.023023029789328575, -0.006478653289377689, 0.03357525169849396, 0.009031057357788086, 0.0017515660729259253, -0.008859755471348763, -0.013368431478738785, -0.002180678304284811, -0.06292961537837982, -0.021693723276257515, -0.016513541340827942, 0.048649854958057404, 0.02202262356877327, -0.013861781917512417, -0.004762203898280859, -0.0035562359262257814, -0.06386149674654007, -0.017061708495020866, -0.004676552955061197, -0.007818236947059631, 0.0041283853352069855, 0.011244283057749271, 0.026133880019187927, 0.026284625753760338, 0.025818683207035065, 0.010997608304023743, -0.005742053035646677, 0.009668301790952682, -0.01850064843893051, -0.014759406447410583, 0.024914206936955452, -0.004799890331923962, -0.051884040236473083, -0.033109311014413834, -0.012128203175961971, -0.0047930385917425156, 0.00927773304283619, 0.015513136982917786, -0.01090167835354805, 0.014279760420322418, -0.010771488770842552, -0.007564709521830082, -0.0003265450068283826, -0.0030303378589451313, 0.001525447005406022, -0.0366998054087162, -0.0154035035520792, 0.033273760229349136, -0.014964968897402287, 0.0015203079674392939, 0.011730781756341457, 0.01567758619785309, -0.0003049180959351361, -0.012950453907251358, -0.024927910417318344, 0.006711624097079039, -0.006088084075599909, 0.005142495036125183, 0.00015588509268127382, 0.011237431317567825, 0.015883149579167366, 0.043579306453466415, -0.018802139908075333, -0.026339441537857056, 0.009044761769473553, -0.009120134636759758, -0.03919396549463272, 0.012436547316610813, 0.01828138157725334, -0.01480051875114441, 0.004073568619787693, -0.016116119921207428, -0.000999548938125372, -0.005385744385421276, -0.0030526069458574057, -0.01982995495200157, -0.019473645836114883, -0.012361174449324608, 0.02363971807062626, -0.009565521031618118, -0.008633635938167572, -0.014636068604886532, 0.011518366634845734, -0.0021686870604753494, -0.02614758349955082, -0.005515933968126774, 0.04330522194504738, -0.018308790400624275, 0.00898309238255024, -0.013683628290891647, -0.008914572186768055, -0.025654232129454613, -0.00046936830040067434, 0.011408733204007149, -0.005365188233554363, -0.0153623903170228, 0.22957248985767365, 0.0015785506693646312, 0.009490147233009338, 0.041578494012355804, -0.004039308521896601, 0.005731774959713221, 0.025010136887431145, 7.724663009867072e-05, -0.01407419703900814, 0.021227780729532242, -0.004909524228423834, -0.0016110981814563274, -0.008503446355462074, -0.003134832251816988, 0.015732403844594955, 0.003506558248773217, -0.0375494658946991, -0.05259665846824646, 0.007845645770430565, 0.002136139664798975, -0.002406797371804714, 0.004344226326793432, -0.04996545612812042, -0.010147948749363422, 0.03108108974993229, -0.018377311527729034, -0.009202360175549984, -0.00016145242261700332, 0.016184641048312187, 0.01344380434602499, -0.023009324446320534, -0.012278948910534382, 0.019035112112760544, 0.012806559912860394, -0.017253568395972252, -0.00595104182139039, 0.030560331419110298, -0.02350267581641674, -0.0010338093852624297, 0.02328340895473957, 0.021638907492160797, -0.00920921191573143, 0.023105254396796227, -0.012059682048857212, 0.012744891457259655, -0.005005453247576952, -0.014882744289934635, 0.005522786173969507, 0.009586077183485031, 0.0073934076353907585, -0.0170891173183918, 0.013635663315653801, -0.003600774332880974, 0.01760987751185894, -0.0048170206137001514, 0.0025404130574315786, 0.018541760742664337, -0.02173483557999134, 0.005443986970931292, 0.015115715563297272, 0.0005002027028240263, 0.021748540922999382, 0.007345442660152912, -0.008715861476957798, -0.042537789791822433, 0.015965374186635017, -0.03469899296760559, 0.030368471518158913, 0.015129419043660164, -0.007893609814345837, -0.008859755471348763, -0.012340618297457695, -0.03779613971710205, -0.0015571379335597157, 0.012546180747449398, -0.020145151764154434, 0.011895231902599335, 0.0031502493657171726, 0.020227376371622086, 0.03815244883298874, -0.007934723049402237, 0.006177160888910294, -3.498314254102297e-05, 0.01108668465167284, 0.009366810321807861, -0.00857881922274828, 0.041797760874032974, -0.02496902458369732, -0.027518002316355705, -0.014540139585733414, -0.007006264291703701, -0.0076811951585114, -0.02121407724916935, -0.026791680604219437, 0.033273760229349136, -0.008640488609671593, 0.0035767920780926943, 0.02902546152472496, -0.013245093636214733, -0.035987187176942825, -0.04952692240476608, 0.0590924434363842, 0.031272947788238525, -0.004710813518613577, -0.026942426338791847, 0.009901273064315319, -0.020597388967871666, 0.01745912991464138, -0.009503851644694805, -0.015472023747861385, 0.004190054256469011, -0.02739466354250908, 0.005666680168360472, -0.019487349316477776, 0.015458320267498493, 0.017445426434278488, 0.017513947561383247, 0.00192029878962785, -0.01329305861145258, 0.0022269298788160086, -0.01244339905679226, -0.03228705748915672, 0.03132776543498039, -0.0034226200077682734, -0.028120985254645348, -0.03867320716381073, -0.03132776543498039, 0.022433750331401825, -0.01828138157725334, -0.03987917676568031, 0.009908124804496765, -0.009483295492827892, 0.022557087242603302, -0.015869446098804474, 0.006177160888910294, 0.032807815819978714, 0.012313209474086761, -0.01915844902396202, -0.025380149483680725, -0.020282192155718803, 0.002627777401357889, 0.032369282096624374, 0.02511977031826973, 0.01737690530717373, 0.003730964148417115, -0.014087901450693607, 0.00788675807416439, -0.0006509487284347415, 0.005457691382616758, -0.022159665822982788, -0.021474456414580345, 0.026627229526638985, -0.002021367195993662, 0.0029549647588282824, -4.640552560886135e-06, -0.011203170754015446, 0.012128203175961971, -0.015718698501586914, 0.0066602337174117565, -0.013505473732948303, -0.05040398985147476, 0.003919396549463272, 0.004450433887541294, -0.007242661435157061, -0.014197534881532192, -0.03157443925738335, -0.17245344817638397, 0.011305952444672585, 0.034726403653621674, -0.013238241896033287, 0.0318211168050766, -0.00046165971434675157, 0.032807815819978714, 0.007030246313661337, -0.0006518052541650832, 0.0016410760581493378, -0.009565521031618118, -0.004381912760436535, -0.02622980810701847, -0.037467241287231445, 0.020213671028614044, 0.015965374186635017, 0.012162463739514351, 0.012518771924078465, 0.04390820488333702, 0.013025826774537563, 0.028340253978967667, -0.04163331165909767, 0.004399043042212725, -0.01686985045671463, -0.002972095040604472, -0.023817872628569603, -0.0012470807414501905, -0.006252534221857786, 0.01034665945917368, -0.015170532278716564, -0.013621958903968334, -0.009092725813388824, 0.016856146976351738, -2.319272607564926e-05, 0.022803762927651405, 0.003417480969801545, 0.018980294466018677, 0.01521164458245039, -0.009764231741428375, 0.039385825395584106, 0.03157443925738335, 0.0530351921916008, -0.005101382732391357, 0.0015425772871822119, 0.00451210280880332, 0.02984771318733692, -0.015115715563297272, -0.0201177429407835, 0.010360362939536572, 0.015704995021224022, 0.03743983060121536, 0.009750527329742908, 0.0022800336591899395, -0.006557452026754618, 0.0164176132529974, 0.005091104656457901, 0.015348686836659908, 0.006882926449179649, 0.024256406351923943, -0.007379703223705292, 0.010250729508697987, -0.018870661035180092, -0.010147948749363422, -0.013430100865662098, 0.007523597218096256, -0.030094388872385025, -0.007612674497067928, 0.021625202149152756, -0.021090740337967873, 0.012093942612409592, -0.007660639006644487, 0.002370823873206973, -0.01009313203394413, 0.017883960157632828, 0.0049917493015527725, 0.017349496483802795, -0.016623174771666527, 0.027449481189250946, 0.02762763574719429, -0.005776313599199057, -0.006321054883301258, 0.02187187783420086, -0.018308790400624275, 0.012539329007267952, 0.001609385129995644, 0.0007438802276737988, -0.007468780502676964, -0.025325331836938858, -0.01392345130443573, 0.015663882717490196, 0.03130035847425461, -0.02924472838640213, -0.003796058939769864, -0.0017113100038841367, -0.018363606184720993, 0.01458125188946724, 0.008558263070881367, -0.01848694495856762, 0.03817985579371452, 0.007838793098926544, 0.007790828589349985, 0.012594145722687244, -0.01606130413711071, -0.0003824323939625174, 0.03478122130036354, 0.017938777804374695, 0.0015639900229871273, -0.0012762021506205201, 0.03615163639187813, -0.012292653322219849, -0.03064255602657795, 0.015732403844594955, 0.022063735872507095, 0.049252837896347046, -0.012655814178287983, 0.03264336660504341, 0.029436588287353516, -0.009216063655912876, 0.018363606184720993, -0.003068024292588234, 0.05936652794480324, -0.0013036105083301663, -0.012463955208659172, 0.025078658014535904, 0.019281787797808647, -0.022598199546337128, -0.1063992902636528, -0.008606228046119213, 0.006146326661109924, 0.01776062324643135, -0.027065763249993324, -0.004813594743609428, 0.00019699764379765838, 0.02505124919116497, -0.032451506704092026, 0.011216875165700912, -0.04097551107406616, -0.005361761897802353, -0.011778746731579304, 0.0051904600113630295, -0.007324886508285999, 0.0006094079581089318, 0.0066499556414783, -0.003068024292588234, 0.015376094728708267, 0.02518829144537449, 0.026037950068712234, -0.0006920613232068717, 0.0015057472046464682, -0.001805526320822537, -0.019185857847332954, 0.015896853059530258, -0.0016162372194230556, -0.003160527441650629, -0.008722713217139244, 0.009990350343286991, 0.019322900101542473, 0.0006021275767125189, 0.009784787893295288, 0.007571561727672815, 0.009387366473674774, -0.016403907909989357, -0.011723930016160011, 0.001357570756226778, 0.034671586006879807, -0.027285030111670494, -0.010853714309632778, 0.008167693391442299, 0.0026294903364032507, -0.01791136898100376, 0.0010458005126565695, -0.005067122168838978, -0.006972003728151321, 0.019692912697792053, -0.0005357479676604271, -0.004888967610895634, -0.011490958742797375, -0.009538112208247185, -0.01484163198620081, 0.00839381292462349, 0.023338226601481438, -0.015937967225909233, 0.013841225765645504, 0.011107241734862328, -0.013621958903968334, 0.007468780502676964, 0.0011965465964749455, -0.013642515055835247, -0.001408104901202023, 0.02836766093969345, 0.02342045120894909, -0.002427353523671627, -0.01789766550064087, 0.020720725879073143, -0.014855335466563702, -0.012258392758667469, -0.018007298931479454, 0.013238241896033287, -0.03521975502371788, -0.0039707873947918415, -0.021008513867855072, 0.010696115903556347, -0.0026911592576652765, -0.002040210412815213, 0.006502635311335325, -0.00042739923810586333, -0.019281787797808647, -0.0054816738702356815, -0.002482170471921563, -0.035247161984443665, 0.017637284472584724, 0.025914613157510757, 0.04163331165909767, -0.004234592895954847, 0.02165261097252369, -0.05651605501770973, -0.012183019891381264, -0.0007584409322589636, -0.018075818195939064, -0.021556681022047997, -0.001355001237243414, -0.00403588218614459, -0.01319027692079544, 0.036809440702199936, 0.001617950270883739, 0.02710687555372715, -0.03560347110033035, -0.008715861476957798, -0.06101102754473686, 0.00905846618115902, 0.011662260629236698, -0.010449440218508244, 0.0063724457286298275, -0.024996431544423103, -0.014636068604886532, -0.02172113209962845, 0.011573183350265026, 0.003115988802164793, -0.004580623470246792, 0.010655003599822521, -0.010449440218508244, -0.018528057262301445, -0.004892393946647644, -0.031190723180770874, 0.017568763345479965, -0.017555059865117073, -0.0008590810466557741, 0.033630069345235825, -0.007592117879539728, -0.011511514894664288, 0.020350713282823563, 0.020569980144500732, -0.022502271458506584, -0.029491404071450233, 0.015129419043660164, 0.023900097236037254, 0.0018295085756108165, 0.0001814733841456473, 0.0025352740194648504, -0.023297112435102463, -0.014320872724056244, 0.010010906495153904, 0.012354321777820587, 0.022639311850070953, 0.026202401146292686, -0.0037104079965502024, 0.004806742537766695, 0.014677180908620358, -0.022653017193078995, -0.02621610462665558, 0.023680830374360085, -0.008256770670413971, -0.029080279171466827, -0.0018963165348395705, 0.003438037121668458, 0.008496594615280628, 0.025804979726672173, 0.01053166575729847, 0.030752189457416534, 0.005697514396160841, -0.005385744385421276, -0.017335793003439903, -0.009962941519916058, -0.011648556217551231, 0.019048815593123436, 0.016294274479150772, -0.015170532278716564, -0.003806337248533964, 0.029217321425676346, 0.01351917814463377, -0.002869313582777977, -0.03595978021621704, 0.004001621622592211, -0.01995329186320305, -0.055803436785936356, 0.010004054754972458, -0.016993189230561256, -0.022050032392144203, -0.02681908942759037, -0.007187844719737768, 0.006238829810172319, -0.001575981150381267, -0.005097956396639347, -0.0002483883290551603, -0.025325331836938858, 0.020679613575339317, -0.003943379037082195, -0.0020316452719271183, -0.008969388902187347, -0.03483603522181511, -0.0004229025507811457, 0.00018297227506991476, 0.020295897498726845, 0.02165261097252369, 0.012354321777820587, 0.03461676836013794, 0.027161693200469017, -0.004632014315575361, -0.022433750331401825, 0.005628993734717369, -0.0013412970583885908, 0.0034140548668801785, 0.010846861638128757, 0.005622141528874636, -0.016828738152980804, 0.014855335466563702, 0.019542166963219643, 0.02894323691725731, 0.00962033774703741, 0.016294274479150772, 0.014019380323588848, -0.022132256999611855, 0.009716266766190529, 0.023379338905215263, 0.011477254331111908, -0.006053823512047529, -0.00429283594712615, -0.0066293990239501, -0.026832792907953262, -0.017253568395972252, -0.005539916455745697, 0.02836766093969345, 0.0049917493015527725, 0.0013121756492182612, 0.023091550916433334, -0.012607849203050137, 0.0013370144879445434, 0.01436198502779007, -0.003417480969801545, 0.015609066002070904, 0.01739061065018177, 0.004854707047343254, 0.019692912697792053, 0.03376711159944534, 0.01288878545165062, -0.020350713282823563, -0.0020624797325581312, -0.013320467434823513, 0.02173483557999134, 0.020871473476290703, -0.0045052506029605865, -0.015129419043660164, 0.0005909929750487208, -0.017404314130544662, 0.0008697874727658927, 0.002194382483139634, -0.021392231807112694, 0.09351735562086105, -0.0017695528222247958, -0.037741322070360184, -0.02203632891178131, -0.016239458695054054, 0.009318845346570015, -0.007626378443092108, 0.011470402590930462, -0.018747324123978615, -0.05081511661410332, 0.023393042385578156, 0.002449622843414545, -0.03601459786295891, -0.011984309181571007, 0.0011271691182628274, 0.011689669452607632, -0.028258027508854866, 0.017788032069802284, 0.006430688314139843, -0.010922234505414963, 0.03338339179754257, -0.01769210211932659, 0.009586077183485031, -0.020062925294041634, -0.014677180908620358, -0.0018757602665573359, 0.03667239844799042, 0.007386555429548025, -0.010887973941862583, -0.020967401564121246, 0.027353551238775253, -0.015321278013288975, -0.03571310266852379, -0.010237026028335094, -0.009791639633476734, 0.01930919475853443, 0.01774691790342331, -0.016184641048312187, 0.021556681022047997, 0.02866915427148342, 0.0006162600475363433, -0.007516745012253523, -0.020981106907129288, -0.02091258578002453, 0.006077805534005165, 0.020419234409928322, 0.0002327570109628141, -0.022488566115498543, -0.018802139908075333]"
Dragonfly Is Production Ready (and we raised $21m),Dragonfly Is Production Ready (and we raised $21m)," We are pleased to announce that [Dragonfly 1.0](https://github.com/dragonflydb/dragonfly/releases/tag/v1.0.0), the most performant in-memory datastore for cloud workloads, is now generally available. Were also excited to share that weve raised $21m from fantastic investors (Redpoint and Quiet Capital) who share our vision of enabling the software development community to power high-scale, real-time applications and accelerate human innovation. Dragonfly 1.0 comes with full support for Redis most common data types and commands, as well as snapshotting, replication and high availability.  ## Background  For the last 15 years, Redis has been the primary technology for developers looking to provide a real-time experience to their users. Over this period, the amount of data the average application uses has increased dramatically, as has the available hardware to serve that data. Readily available cloud instances today have at least 10X the CPUs and 100X more memory than their equivalent counterparts had 15 years ago. However, the single-threaded design of Redis has not evolved to meet modern data demands nor to take full advantage of modern hardware.  The misalignment between the data demands of the modern application and the underlying system design of Redis has hindered developer productivity and innovation. The largest web scale companies in the world have attempted to solve the problem by throwing massive amounts of resources at it, including large dedicated teams who solely own the caching and data layer. Developers at companies that are not technology giants like Google, Facebook, Microsoft have been saddled with unnecessary overhead and complexity and forced to make very tough choices. They are forced to choose between keeping data workloads small, which limits the experience they can deliver in their application, or dedicating time and resources to managing complex and expensive infrastructure configurations (which comes at the expense of building valuable features for customers). My co-founder Roman and I experienced this tradeoff firsthand as heavy Redis users in our previous roles (we worked together at both Google and Ubimo and Roman was a principal engineer on, probably, the largest in-memory managed service in the world, AWS Elasticache).  As engineers, we want a single Redis endpoint that is ultra-performant, extremely efficient in its memory utilization, and, most importantly, scales effortlessly. We dont want to be forced to choose between delivering a great user experience and keeping our infrastructure simple and affordable. As founders, we want to provide a solution that gives developers superpowers to build any application with the peace of mind that the infrastructure will support them in their quest to innovate and not bog them down. This is why we built Dragonfly.  While we are just beginning this journey, the excitement and adoption of Dragonfly by a diverse group of developers has energized us since we made the project public nine months ago. In that short period, many developers have replaced their legacy Redis instances with Dragonfly, increasing performance while reducing infrastructure complexity. Most of them came to Dragonfly because they needed more scale, and theyve stayed because their latency has dropped, their infrastructure bill has gone down, and it just works.  ## Dragonfly 1.0  Dragonfly is a drop-in Redis replacement that can, unlike Redis, scale vertically to support millions of operations per second and terabyte sized workloads, all on a single instance. This makes the [community edition](https://github.com/dragonflydb/dragonfly) of a single Dragonfly instance as powerful as a cluster of Redis instances and much more cost effective than any managed Redis service.  Since its launch in May last year, our team has dedicated countless hours to enhancing the performance, stability, and resilience of Dragonfly. Our incredible community has identified hundreds of [issues](https://github.com/dragonflydb/dragonfly/issues) and [contributed](https://github.com/dragonflydb/dragonfly/graphs/contributors) fixes for many of them as well. Our early adopters have helped harden Dragonfly through their production usage and get us to where we are today, Dragonfly 1.0. We encourage you to put it to the test, push its limits, and share your feedback with us. We eagerly await your thoughts and insights!  Dragonfly 1.0 is the result of a large investment in development hours that we have made in four critical areas: performance, scale, efficiency, and reliability.  **Performance**  The best applications in the world have an incredibly snappy user experience with real-time responses and interactions. Building these types of applications requires a constant flow of data to be transmitted in a low latency and efficient manner. If the underlying infrastructure cannot handle the peak throughput demand, the application will experience delays, lags, or dropouts, which can significantly impact the quality and usability of the application. The largest, most successful software companies in the world know that even 10 additional milliseconds of latency can have a material impact on their business, and are investing billions of dollars in ensuring peak performance.  Dragonfly was designed so that any engineering team, not only the ones with the most resources, can deliver this type of experience. Dragonfly uses asynchronous, multi-threaded processing to fully utilize the hardwares computing, memory and networking resources to deliver consistent sub-millisecond latency with throughput as high as 4 million queries per second ([25X Redis](/blog/scaling-performance-redis-vs-dragonfly)) on a single instance.  Achieving this level of performance from the underlying infrastructure simplifies application code and makes it extremely easy for developers to build real time applications and pipelines.  ![throughput chart](/assets/blog/scaling-performance-redis-vs-dragonfly/throughput.png ""Dragonfly throughput is 25X higher than Redis for both GET and SET operations."")  **Scale**  Scaling a software architecture to meet the demands of a growing business is one of the biggest challenges we have in the software industry and involves a constant battle of trade offs. It is particularly challenging in regards to in-memory workloads due to the inability to decouple compute and storage as with stateless systems.  A common tradeoff we see in architectures utilizing Redis is the tradeoff between scale (memory) and complexity; keep the architecture simple and limit scale, or adopt a more complicated cluster architecture in order to scale your data. However, with modern hardware there is no reason to scale out for workloads with dozens of gigabytes of memory or 100,000 queries per second.  We designed Dragonfly to take advantage of modern hardware and scale vertically first, which is as simple as increasing the size of a cloud instance. A single Dragonfly instance can scale up to 4 million queries per second and 1 terabyte of data, allowing it to accommodate a wide range of in-memory use cases. For those seeking even more, keep an eye out for upcoming Dragonfly releases!  **Efficiency**  We are big believers that systems should be efficient, minimizing wasted resources as much as possible. Not only does efficiency save money on hardware, but it simplifies many of the operational challenges that come with modern software architectures. This is why we optimized Dragonflys main hashtable to require 30% less memory for small keys when compared to Redis. We also added specific memory optimizations to popular data types such as strings that are up to 12.5% more efficient and sets that are up to 40% more efficient in memory vs other memory stores. This allows developers to do more with less resources and translates to immediate cost savings.  **Reliability**  Reliability is critical for all systems, but especially so for in-memory systems. Snapshotting and replication are two of the most common causes of outages in Redis and we knew from the get-go that we have to make these processes highly reliable with Dragonfly. Dragonfly supports [7.5X higher throughput](https://github.com/dragonflydb/benchmarks/tree/main/benches/replication) with replication when compared with Redis while the snapshotting phase is 12X faster. The result is that developers no longer need to fret that snapshotting or replication will bring down their instance. They just work as expected.  ![Consistency issues between Redis cluster nodes](/assets/blog/dragonfly-production-ready/snapshotting.png)  ## The Future  Dragonfly 1.0 is a huge milestone but its only the beginning of the journey for us and for the community that has formed around this project. While we believe the 4 critical areas outlined above are essential for a modern in-memory datastore, we also believe that any great developer tool should be simple to use. Building simple things is hard, which is why weve taken almost a year to arrive at this GA and why weve raised capital to continue to invest in building this system the right way. We want to enable all developers and companies to create ultra-fast applications that are both simple and scalable.  There are still many challenges to solve in order for us to fulfill our vision of unleashing the next wave of developer innovation. We will invest this new capital in continuing to evolve Dragonfly so that it can address more use cases, handle larger workloads, and make the developer experience simpler.  The first step in this next phase of development will include using SSD storage to transparently extend the main memory while preserving low-latency characteristics of Dragonfly. This will allow for even more efficient use of the hardware and much lower total cost of ownership.  We will also be launching a cloud offering of Dragonfly for those who do not want to manage the underlying infrastructure, you can sign up for the [wait list here](/cloud).  If you would like to follow along on our journey, provide feedback or join the community please [join our Discord](https://discord.com/invite/HsPjXGVH85) or [follow us on Twitter](https://twitter.com/dragonflydbio).","[-0.006714784074574709, -0.003109206911176443, -0.01672491431236267, -0.018062354996800423, -0.0005006788414902985, 0.012643649242818356, -0.017152342945337296, 0.0013632941991090775, -0.016807641834020615, -0.03477348014712334, 0.008982919156551361, 0.013353734277188778, 0.0009393114596605301, -0.026817772537469864, 0.01265054289251566, 0.017703866586089134, 0.007555855438113213, -0.019399797543883324, 0.006428681779652834, -0.010892565362155437, 0.0072456244379282, -0.0008962237625382841, -0.0130159268155694, 0.0060150399804115295, -0.02046147733926773, 0.0014899719972163439, 0.016256120055913925, -0.013691541738808155, 0.004612105432897806, -0.0015546034555882215, 0.01788311079144478, -0.01622854359447956, -0.006056404206901789, 0.0050464291125535965, -0.021095728501677513, -0.010575440712273121, 0.001271948334760964, 0.011843941174447536, 0.02683155983686447, -0.002907556714490056, 0.025645786896348, -0.008803674951195717, -0.003257428528741002, -0.012533344328403473, -0.024680623784661293, 0.01182325929403305, 0.0004502662632148713, -0.013801845721900463, 0.022819235920906067, -0.013084867037832737, 0.008527914062142372, 0.036676231771707535, -0.01207833830267191, 0.00011956831440329552, 0.006456258241087198, 0.020695874467492104, 0.012829788029193878, 0.007776464335620403, 0.021840283647179604, 0.006201178766787052, 0.0015028982888907194, 0.030692216008901596, -0.022184984758496284, 0.0009772286284714937, -0.014656705781817436, 0.003405650146305561, -0.012622966431081295, -0.027355507016181946, 0.018034780398011208, -0.0013184830313548446, 0.04315662011504173, 0.011692272499203682, 0.020433900877833366, -0.010092858225107193, 0.010685744695365429, -0.025356238707900047, 0.00550143513828516, 0.0053601074032485485, 0.024032585322856903, -0.00028696394292637706, 0.0010392748517915606, 0.004401837475597858, -0.006039169151335955, 0.02604564093053341, -0.000984122627414763, 0.043542686849832535, -0.032043445855379105, 0.010216950438916683, -0.01693173497915268, 0.011733637191355228, 0.014160335063934326, 0.003674517385661602, 0.008755416609346867, 0.0028162107337266207, 0.0013029715046286583, -0.0006782001000829041, -0.005680679809302092, 0.005101581569761038, -0.018034780398011208, -0.021674826741218567, -0.020847544074058533, -0.01811750791966915, -0.008831251412630081, -0.011671590618789196, -0.014270639978349209, -0.02160588651895523, 0.033587709069252014, -0.01251955609768629, 0.011926669627428055, 0.026997016742825508, -0.01956525444984436, 0.025962913408875465, 0.021550733596086502, -0.011416511610150337, 0.007576537784188986, 0.0053497664630413055, 0.025769880041480064, -0.01702825166285038, 0.02330181747674942, -0.029699476435780525, 0.03455287218093872, 0.022281501442193985, 0.021274972707033157, -0.025011537596583366, -0.010444453917443752, 0.010072176344692707, -0.02345348708331585, -0.01702825166285038, 0.017896898090839386, 0.00480513833463192, 0.0016442259075120091, 0.015718385577201843, 0.0071697901003062725, -0.011023552156984806, -0.012898728251457214, 0.004860290326178074, -0.0015839030966162682, 0.0014925572322681546, 0.0030626722145825624, -0.011058022268116474, -0.0006915572448633611, 0.017565986141562462, -0.010658168233931065, -0.014573977328836918, -0.029010074213147163, 0.024184253066778183, -0.01038240734487772, 0.016242332756519318, 0.0044914595782756805, -0.007459339220076799, 0.012188643217086792, -0.037917159497737885, -0.011264842934906483, 0.0030247552786022425, 0.028348246589303017, 0.026652315631508827, -0.01513928733766079, 0.009368984960019588, -0.004894760437309742, 0.0017872769385576248, 0.013388204388320446, 0.03560076653957367, -0.011809471063315868, -0.002638689475134015, 0.028789464384317398, 0.02862400747835636, 0.024460013955831528, -0.03276042640209198, 0.008245258592069149, -0.02494259551167488, 0.0032005528919398785, 0.03077494539320469, -0.0255492702126503, 0.03218132629990578, -0.005577269475907087, -0.0001177370868390426, 0.0015218568732962012, 0.00938277319073677, -0.00013206373841967434, -0.02528729848563671, 0.018503572791814804, 0.0066079264506697655, 0.015125499106943607, 0.02236422896385193, -0.010623698122799397, -0.026872923597693443, -0.009175952523946762, -0.005108475219458342, 0.002907556714490056, 6.355432560667396e-05, 0.0020578675903379917, -0.00763168977573514, -0.0005463517736643553, -0.015773538500070572, -0.5978502035140991, -0.01265054289251566, 0.008003967814147472, -0.03568349406123161, 0.0005997805274091661, -0.01327100582420826, 0.0074386573396623135, 0.008079801686108112, -0.0005045567522756755, 0.011644015088677406, -0.0016356083797290921, -0.01028589066118002, 0.008072908036410809, -0.018489785492420197, -0.036869265139102936, 0.01480837445706129, 0.006080533377826214, -0.0017519451212137938, -0.01952388882637024, -0.0017260924214497209, -0.042246609926223755, 0.023867128416895866, -0.00614947360008955, 0.0027903581503778696, -0.001471013412810862, 0.006752701476216316, -0.003510784124955535, 0.009665428660809994, -0.012705694884061813, 0.02862400747835636, -0.03344982862472534, 0.017552196979522705, 0.03987506404519081, 0.011912882328033447, 0.04467330873012543, -0.020006472244858742, -0.022336654365062714, 0.02683155983686447, -0.0019286045571789145, 0.0467139407992363, -0.008576171472668648, -0.007673054002225399, 0.016697337850928307, 0.015842478722333908, -9.840149141382426e-05, -0.006352847442030907, 0.018931003287434578, -0.02270893193781376, -0.0009298321674577892, -0.0025370025541633368, -0.01257470902055502, -0.025121841579675674, 0.006704443134367466, -0.011968034319579601, -0.00894155539572239, -0.020282233133912086, 0.04627272114157677, -0.012305841781198978, 0.0024094630498439074, -0.007100849878042936, 0.012491980567574501, 0.002002715365961194, -0.01169916708022356, -0.031740110367536545, -0.01922055333852768, 0.012105914764106274, 0.002211259678006172, -0.01603551022708416, 0.016104452311992645, -0.02519078180193901, 0.029699476435780525, -0.007314564660191536, 0.010396195575594902, -0.007059485651552677, 0.0031109305564314127, 0.017938263714313507, 0.04436996951699257, 0.007590325549244881, -0.009913613088428974, 0.014339580200612545, 0.025921547785401344, 0.002200918737798929, -0.006780277471989393, -0.034635599702596664, 0.03708987683057785, 0.02061314694583416, -0.020530417561531067, -0.012043868191540241, 0.011740530841052532, -0.00654588034376502, 0.020682087168097496, 0.025728516280651093, -0.008851933293044567, -0.023232877254486084, 0.027107320725917816, 0.025218358263373375, -0.027576114982366562, -0.009796415455639362, 0.007087061647325754, -0.012133491225540638, -0.0028231048490852118, -0.02463926002383232, -0.006304589565843344, 0.0019716923125088215, 0.02221256121993065, 0.008596854284405708, -0.03325679525732994, 0.004822373390197754, 0.02057178132236004, -0.006370082497596741, 0.004708621650934219, -0.004084711894392967, -0.036014407873153687, -0.006118450779467821, -0.0032781106419861317, -0.021826494485139847, 0.030113117769360542, -0.012305841781198978, 0.008424503728747368, -0.02768642082810402, -0.0031333360821008682, -0.009389667771756649, 0.014863526448607445, 0.004674151539802551, 0.0014822161756455898, 0.005291167180985212, 0.002783464267849922, -0.004615552257746458, 0.004415625706315041, 0.021785130724310875, 0.025232145562767982, -0.034580450505018234, 0.013650177046656609, -0.013829422183334827, 0.037172604352235794, 0.010561652481555939, 0.011106280609965324, -0.006511410232633352, 0.011837047524750233, -0.018241601064801216, 0.008045331574976444, -0.00010281797585776076, 0.015994146466255188, -0.020902695134282112, -0.03435983881354332, 0.0011625055922195315, -0.01762113720178604, 0.004398390185087919, 0.0017717654118314385, -0.01496004220098257, -0.007569643668830395, -0.0032901752274483442, -0.0118715176358819, 0.018255388364195824, 0.0028868746012449265, 0.015773538500070572, -0.011733637191355228, -0.0537734255194664, -0.006318377330899239, -0.043046317994594574, -0.002864469075575471, 0.02270893193781376, -0.024818504229187965, 0.0036607293877750635, -0.03981991112232208, -0.036621082574129105, -0.023963645100593567, 0.03629016876220703, -0.016256120055913925, -0.012278265319764614, -0.010437559336423874, -0.01279531791806221, 0.006973310373723507, 0.01786932349205017, 0.003431502962484956, -0.005880606826394796, -0.022143620997667313, 0.013801845721900463, 0.01008596457540989, -0.006077086552977562, 0.012878046371042728, 0.005163627676665783, -0.0005472135380841792, -0.008569277822971344, 0.04602453485131264, 0.0019130930304527283, 0.009355196729302406, 0.048120319843292236, 0.005329084116965532, 0.022626202553510666, -0.0053049554117023945, 0.027493387460708618, -0.015539141371846199, -0.01733158901333809, -0.02225392498075962, -0.012161066755652428, -0.00301269069314003, -0.009368984960019588, -0.012016292661428452, 0.034883785992860794, 0.023219089955091476, 0.013629495166242123, 0.013326157815754414, -0.011912882328033447, -0.013450250029563904, -0.005928864702582359, -0.011664696969091892, -0.012636754661798477, 0.005391130689531565, 0.002412910107523203, 0.016394000500440598, 0.023412121459841728, 0.0003197105834260583, -0.011809471063315868, 0.0011116621317341924, 0.038661714643239975, -0.013960408046841621, 0.002499085385352373, -0.014877314679324627, 0.003691752441227436, -0.007100849878042936, 0.017152342945337296, -0.004315662197768688, -0.002892045071348548, 0.0032712167594581842, 0.0006661355146206915, -0.01207833830267191, 0.03499409183859825, 0.024556530639529228, -0.016711125150322914, 0.00038261860026977956, 0.011961139738559723, 0.009892931208014488, -0.01050649955868721, 0.03077494539320469, 0.026224885135889053, 0.034084077924489975, -0.04362541437149048, 0.022515898570418358, -0.011885305866599083, 0.022322865203022957, -0.0021216373424977064, 0.024983961135149002, -0.02709353342652321, 0.011692272499203682, 0.016049299389123917, -7.40030882298015e-05, 0.012753953225910664, -0.017400529235601425, 0.00022513313160743564, -0.022915752604603767, -0.0030592253897339106, 0.014070712961256504, -0.0043914965353906155, 0.0059805698692798615, -0.005525564309209585, -0.005173968616873026, -0.003805503947660327, 0.01922055333852768, 0.021743766963481903, -0.00141930824611336, 0.017593560740351677, 0.03496651351451874, -0.015222015790641308, 0.015704598277807236, -0.0024611682165414095, 0.003950278740376234, -0.016462940722703934, -0.005797878373414278, -0.0077971466816961765, 0.000675183953717351, -0.021426642313599586, -0.01887585036456585, -0.03226405382156372, 0.007686842232942581, -0.004081265069544315, -0.01767629012465477, 0.007362823002040386, -0.01609066314995289, 0.021178456023335457, -0.0027317588683217764, -0.03579379618167877, 0.005129157565534115, 0.006314930506050587, 0.005225673783570528, -0.04277055338025093, -0.00803843792527914, 0.02848612703382969, 0.011485451832413673, 0.01842084527015686, 0.007935027591884136, -0.0026180073618888855, -0.008286622352898121, -0.000570911739487201, 0.002100955229252577, 0.004067476838827133, 0.05487646907567978, -0.010134221985936165, -0.024266982451081276, -0.008817463181912899, 0.007121531758457422, 0.012188643217086792, -0.019744498655200005, -0.007045697420835495, 0.04679666832089424, -0.015387472696602345, -0.0267901960760355, -0.020695874467492104, 0.018214024603366852, -0.02110951580107212, -0.009196634404361248, -0.023770611733198166, -0.045886654406785965, -0.011981822550296783, -0.008907085284590721, 0.0009470672230236232, -0.006011593155562878, 0.0013693264918401837, 0.03306376188993454, 0.006218413822352886, -0.023232877254486084, -0.02917552925646305, -0.013526084832847118, 0.0013046949170529842, 0.05551072210073471, 0.01569080911576748, -0.0029747735243290663, 0.0020595912355929613, -0.03529742732644081, 0.003657282330095768, -0.006659632083028555, -0.01966177113354206, 0.024184253066778183, -0.00028976466273888946, 0.003016137517988682, -0.023232877254486084, 0.0005739278858527541, -0.014753221534192562, 0.003822739003226161, 0.018903426826000214, -0.02097163535654545, -0.02753475122153759, -0.02290196344256401, -0.004026113077998161, -0.019703134894371033, 0.014560189098119736, 0.04117114096879959, 0.015084135346114635, 0.059123191982507706, 0.016311272978782654, 0.018255388364195824, -0.0018768993904814124, 0.006156367715448141, -0.01617339253425598, -0.018434632569551468, 0.008507231250405312, 0.006725125014781952, 0.013429568149149418, -0.003064395859837532, 0.03350498154759407, -0.009313832968473434, -0.02530108578503132, 0.0011961139971390367, 0.01613202691078186, 0.006735466420650482, 0.010341043584048748, -0.006142579950392246, 0.008624429814517498, 0.018999943509697914, -0.002700735814869404, -0.01638021320104599, 0.018503572791814804, -0.03576622158288956, -0.00012883216550108045, 0.0381377674639225, -0.0035469778813421726, -0.017304012551903725, 0.005346319172531366, -0.010796049609780312, 0.01150613371282816, 0.008934661746025085, -0.007066379766911268, -0.0071697901003062725, -0.03540773317217827, -0.016917947679758072, -0.0027300354558974504, -0.025618210434913635, -0.013195171020925045, -0.019606618210673332, -0.006831982638686895, -0.014436096884310246, 0.013546766713261604, -0.006152920890599489, -0.01647672988474369, -0.025370026007294655, -0.031078282743692398, -0.026376554742455482, 0.009568911977112293, 0.02261241525411606, 0.017055828124284744, 0.006411446724087, 0.023439697921276093, -0.004239827860146761, 0.02339833416044712, 0.01916540041565895, -0.018351905047893524, 0.005267038010060787, -0.028651583939790726, -0.039902638643980026, -0.0029575384687632322, 0.010637486353516579, -0.020447690039873123, -0.022819235920906067, 0.005491094198077917, 0.004001983907073736, 0.01351919025182724, 0.02370167151093483, 0.0017381570069119334, -0.00667341984808445, 0.025631999596953392, 0.023991219699382782, 0.025232145562767982, 0.008224576711654663, -0.03320164233446121, 0.007983285002410412, 0.0016864518402144313, -0.004088159184902906, -0.006352847442030907, 3.069997183047235e-05, -0.0001449900446459651, 0.0032884518150240183, -0.014587764628231525, -0.0019441160839051008, -0.010189374908804893, -0.008886403404176235, -0.003698646556586027, -0.014904890209436417, -0.004432860761880875, 0.03598682954907417, -0.010913247242569923, 0.000879850413184613, 0.012354100123047829, -0.014849738217890263, -0.003674517385661602, 0.02195058763027191, -0.01179568376392126, 0.04387360066175461, 0.016917947679758072, 0.013250323943793774, 0.027700208127498627, 0.020254656672477722, -0.013339946046471596, -0.03052675910294056, 0.009396561421453953, 0.014477460645139217, 0.01941358484327793, 0.011547498404979706, -0.018889639526605606, -0.0003550424880813807, -0.01967555843293667, -0.01227137167006731, 0.0005101581336930394, -0.005577269475907087, -0.002811040263622999, -0.021440429612994194, -0.02171619050204754, -0.003957172390073538, -0.026128370314836502, -0.016063086688518524, -0.022033317014575005, -0.044039055705070496, -0.00908633042126894, 0.005759960971772671, 0.010189374908804893, -0.027203837409615517, -0.03226405382156372, -0.0026093898341059685, -0.021150881424546242, 0.0007872119313105941, -0.012788423337042332, -0.0004386325890664011, -0.015649445354938507, 0.03240193426609039, -0.0025818138383328915, 0.036014407873153687, 0.01607687585055828, 0.007480021100491285, 0.03171253204345703, 0.002761058509349823, -0.010582334361970425, 0.01055475790053606, -0.008679582737386227, 0.00801775511354208, -0.011189009062945843, 0.01757977344095707, 0.014084501191973686, -0.01480837445706129, -0.02244695834815502, 0.001508068758994341, 0.022336654365062714, -0.020296020433306694, -0.003048884216696024, -0.04381844773888588, -0.027893241494894028, -0.01643536426126957, 0.0030282021034508944, -0.0044742245227098465, 0.005353213287889957, -0.032732848078012466, -0.014160335063934326, 0.033891044557094574, -0.023715458810329437, 0.03670381009578705, -0.000813926279079169, 0.029589172452688217, -0.011009763926267624, 0.0011039064265787601, 0.013946620747447014, 0.005825454369187355, -0.008741628378629684, -0.019386008381843567, -0.017745230346918106, -0.030085541307926178, 0.019330857321619987, 0.015897629782557487, 0.0177314430475235, 0.012733271345496178, 0.026114581152796745, 0.011285524815320969, 0.007431763224303722, -0.004643128253519535, 0.009010495617985725, -0.005201544612646103, -0.006049510557204485, -0.008024649694561958, -0.04831335321068764, -0.030057966709136963, -0.041750237345695496, -0.012960773892700672, 0.011519921943545341, 0.006118450779467821, 0.008845038712024689, 0.00466725742444396, -0.010534076020121574, 0.006270119454711676, 0.0033660095650702715, 0.029285835102200508, -0.006528645288199186, 0.025866396725177765, 0.020999211817979813, 0.007362823002040386, -0.027755361050367355, -0.026321401819586754, 0.012678119353950024, -0.023936068639159203, 0.024073949083685875, 0.03435983881354332, -0.03424953669309616, -0.021867860108613968, 0.012705694884061813, -0.012609179131686687, -0.0028885980136692524, -0.025314873084425926, 0.0027972522657364607, 0.013512296602129936, -0.008245258592069149, -0.025163205340504646, -0.011630226857960224, -0.009272469207644463, 0.02265377901494503, -0.04064719378948212, 0.026707468554377556, 0.02190922386944294, -0.019606618210673332, -0.0038365270011126995, 0.019055096432566643, -0.0135398730635643, 0.03140919655561447, 0.00015834721853025258, 0.015153075568377972, -0.012560920789837837, 0.019592830911278725, -0.023039843887090683, -0.025852607563138008, 0.004484565928578377, 0.023274241015315056, -0.009486183524131775, -0.016573244705796242, 0.011954246088862419, 0.014098289422690868, 0.012912516482174397, 0.011209690943360329, -0.007480021100491285, 0.02404637262225151, -0.029313411563634872, -0.01742810569703579, 0.008438291028141975, 0.01722128503024578, -0.006738913245499134, -0.008948449045419693, -0.02654201164841652, -0.0062459902837872505, -0.009699898771941662, -0.006314930506050587, 0.01095461193472147, -0.01782795786857605, 0.007948814891278744, 0.005356660578399897, 0.0016511199064552784, -0.025811243802309036, -0.007018121425062418, -0.02434970997273922, 0.015070347115397453, -0.03720017895102501, 0.0009194911108352244, -0.005156733561307192, 0.0030764604452997446, 0.007928133010864258, 0.01174742542207241, -9.894008690025657e-05, -0.005187756847590208, 0.02917552925646305, -0.013374416157603264, 0.028458550572395325, 0.03549046069383621, -0.0014641194138675928, -0.02454274334013462, 0.026100793853402138, -0.00801775511354208, -0.004339791368693113, 0.014339580200612545, -0.020254656672477722, -0.024487590417265892, -0.00767994811758399, 0.014987618662416935, -0.000609259819611907, -0.02503911219537258, -0.0026180073618888855, 0.02663852833211422, 0.029065225273370743, 0.0031195480842143297, -0.012898728251457214, -0.024266982451081276, 0.03422195836901665, -0.030637064948678017, -0.038413528352975845, 0.012581602670252323, 0.007321458775550127, -0.010864989832043648, -0.007349034771323204, -0.006407999899238348, -0.03190556541085243, -0.030802521854639053, -0.021881647408008575, -0.022295288741588593, 0.014587764628231525, -0.004005430731922388, 0.01697309873998165, -0.020378749817609787, -0.021343912929296494, -0.023715458810329437, 0.019344644621014595, -0.014987618662416935, 0.01862766593694687, 0.012285159900784492, 0.0032781106419861317, 0.019854802638292313, 0.012622966431081295, 0.0026507540605962276, -0.0017605626489967108, -0.020875118672847748, -0.015856266021728516, -0.053552817553281784, -0.02434970997273922, -0.008100483566522598, 0.037310484796762466, 0.010789155028760433, -0.0019113695016130805, -0.011326889507472515, 0.004998170770704746, -0.04359783977270126, -0.021178456023335457, -0.010933930054306984, 0.014084501191973686, 0.022929539903998375, 0.02095784805715084, 0.017304012551903725, 0.030499184504151344, 0.021771343424916267, 0.024087736383080482, -0.027107320725917816, -0.002454274334013462, -0.009823990985751152, -0.015911418944597244, 0.04345995932817459, -0.0032970693428069353, -0.033174067735672, -0.027355507016181946, -0.0021216373424977064, -0.021647250279784203, 0.015649445354938507, 0.018158871680498123, -0.0026524777058511972, 0.017317799851298332, -0.011788789182901382, -0.0013529531424865127, -0.006511410232633352, 0.009996341541409492, 0.020530417561531067, -0.029258258640766144, 0.0029558148235082626, 0.018931003287434578, -0.013560554943978786, -0.010065281763672829, -0.007604113779962063, 0.012485085986554623, 0.005504881963133812, -0.0006872484809719026, -0.012726377695798874, 0.005477305967360735, -0.0010823624907061458, 0.0056737856939435005, -0.0008268525707535446, -0.004498353693634272, 0.005653103813529015, 0.03902020305395126, -0.01832432858645916, -0.022033317014575005, -0.005877159535884857, 0.0009643022785894573, -0.034525297582149506, 0.026252461597323418, -0.002281923545524478, -0.015346108004450798, 0.01902751997113228, -0.013953514397144318, 0.006863005924969912, -0.02015813998878002, -0.017800383269786835, -0.010775366798043251, -0.01786932349205017, -0.018710393458604813, -0.002000991953536868, -0.004729303997009993, -0.0028610220178961754, -0.012781529687345028, 0.0059150769375264645, 0.02065451070666313, -0.022639991715550423, -0.004932677838951349, 0.022543475031852722, -0.022543475031852722, -0.017965838313102722, 0.03629016876220703, -0.014698069542646408, -0.03265012055635452, -0.0036193651612848043, 0.01891721598803997, 0.012705694884061813, -0.0019441160839051008, 0.23230119049549103, 0.014505037106573582, 0.013408886268734932, 0.044480275362730026, 0.005094687454402447, 0.0068664527498185635, 0.013146912679076195, 0.0022784764878451824, -0.003943384625017643, 0.0075007034465670586, -0.000562294211704284, 0.007486915215849876, -0.009175952523946762, -0.005249802954494953, 0.0123954638838768, 0.011009763926267624, -0.025314873084425926, -0.026872923597693443, -0.00077945610973984, 0.005477305967360735, -0.013002138584852219, -0.018407057970762253, -0.03943384438753128, -0.020792391151189804, 0.027700208127498627, -0.02135770209133625, 0.004377708304673433, -0.01209902111440897, 0.020185716450214386, 0.015166863799095154, -0.014422308653593063, 0.006463151890784502, 0.01107870414853096, -0.00033823828562162817, -0.002099231816828251, -0.022088468074798584, 0.0362350158393383, -0.013112442567944527, -0.010823625139892101, 0.016200967133045197, 0.008955343626439571, -0.010244526900351048, 0.01931706815958023, 0.0007811796385794878, 0.02190922386944294, -0.012312735430896282, -0.032539814710617065, 0.0024835739750415087, -0.002019950421527028, 0.017069615423679352, -0.02006162330508232, 0.013939726166427135, 0.003605577163398266, 0.019192976877093315, -0.0018768993904814124, -0.009251786395907402, 0.004467330873012543, 0.002892045071348548, 0.00623564887791872, 0.016793854534626007, -0.009727474302053452, 0.020599357783794403, 0.004481118638068438, 0.001698516309261322, -0.050905510783195496, 0.007038803305476904, -0.050409138202667236, 0.07506218552589417, 0.018558725714683533, -0.011471663601696491, -0.02734171785414219, -0.003788268892094493, -0.03027857467532158, 0.0012314459308981895, -0.02275029569864273, -0.021771343424916267, 0.012560920789837837, 0.009568911977112293, 0.013119337148964405, 0.024818504229187965, 0.007948814891278744, -0.010885671712458134, -0.006194285117089748, -4.351855750428513e-05, -0.015373684465885162, -0.018834486603736877, 0.021371489390730858, -0.015125499106943607, -0.02156452275812626, -0.024528954178094864, 0.012657436542212963, -0.007638583891093731, -0.015166863799095154, -0.01480837445706129, 0.02474956400692463, -0.019744498655200005, -0.011499240063130856, 0.03491136059165001, -0.005818560253828764, -0.02639034204185009, -0.02150936983525753, 0.043349653482437134, 0.0277415718883276, -0.0010522011434659362, -0.017538409680128098, -0.000844518537633121, -0.030581912025809288, 0.016793854534626007, -0.01117522083222866, -0.0036193651612848043, -0.0037055404391139746, -0.03245708718895912, 0.010465135797858238, -0.021771343424916267, 0.002593878423795104, 0.028899768367409706, 0.01857251301407814, -0.009362091310322285, 0.007617902010679245, 0.012016292661428452, 0.004594870377331972, -0.015594293363392353, 0.0065079634077847, -0.005222226958721876, -0.043487533926963806, -0.03121616318821907, -0.014449884183704853, 0.013264111243188381, -0.004556952975690365, -0.03758624568581581, 0.003812398063018918, -0.009237999096512794, 0.012767741456627846, -0.0337531641125679, -0.016986887902021408, 0.016849007457494736, 0.013498508371412754, 5.660644092131406e-05, -0.02042011357843876, -0.030002813786268234, -0.004329449962824583, -0.0006062436732463539, 0.020433900877833366, 0.000922938110306859, 0.007935027591884136, -0.020833754912018776, 0.011961139738559723, -0.005622080527245998, 0.008858826942741871, -0.01916540041565895, -0.027603691443800926, 0.022019527852535248, 0.0029540914110839367, -9.220763604389504e-05, 0.027355507016181946, -0.0117750009521842, 0.00772820645943284, -0.015042770653963089, -0.004294979851692915, 0.010106646455824375, -0.04390117526054382, -0.001577009097672999, 0.019896166399121284, 0.007411080878227949, -0.013374416157603264, -0.028348246589303017, -0.1750531792640686, 0.01643536426126957, -0.00231467024423182, -0.019358433783054352, 0.04591423273086548, 0.0032901752274483442, 0.010017024353146553, -0.01891721598803997, 0.014056924730539322, -0.0009186293464154005, 0.005990911275148392, 0.0024680623319000006, -0.03242951259016991, -0.035821374505758286, 0.02618352137506008, 0.019634194672107697, -0.010692638345062733, 0.021026788279414177, 0.03835837543010712, 0.021592099219560623, 0.024280769750475883, -0.04784455895423889, 0.011285524815320969, -0.011657802388072014, 0.015745962038636208, -0.0225021094083786, 0.004236380569636822, 0.01578732579946518, 0.01038240734487772, -0.027493387460708618, -0.02091648429632187, -0.009348303079605103, 0.033146489411592484, 0.0023456932976841927, 0.018255388364195824, -0.008527914062142372, 0.02105436474084854, 0.013202065601944923, -0.009300044737756252, 0.043349653482437134, 0.02404637262225151, 0.033725589513778687, -0.003640047274529934, 0.001391732133924961, 0.0053497664630413055, 0.005198097787797451, 0.004639681428670883, -0.03571106866002083, -0.004363920073956251, 0.00958959385752678, 0.043652988970279694, -0.01762113720178604, -0.00044466485269367695, -0.004336344078183174, 0.004980935715138912, 0.006125344429165125, 0.010499605908989906, 0.021399065852165222, 0.027024593204259872, -0.019551465287804604, 0.009093224070966244, -0.015704598277807236, 0.012705694884061813, 0.000492492166813463, 0.016559457406401634, -0.029561595991253853, -0.004126076120883226, 0.01811750791966915, -0.022474534809589386, 0.002292264485731721, -0.010127328336238861, 0.0019975448958575726, 0.006632055621594191, 0.033174067735672, -0.005542799364775419, 0.0040778182446956635, -0.01028589066118002, 0.029589172452688217, 0.03576622158288956, -0.008955343626439571, -0.007087061647325754, 0.012767741456627846, -0.02225392498075962, 0.015401260927319527, -0.013215852901339531, -0.0033418803941458464, -0.0029627089388668537, 0.0004980936064384878, -0.01882069930434227, 0.006318377330899239, 0.034828633069992065, -0.04649332910776138, 0.01483594998717308, -0.004091606009751558, -0.008003967814147472, 0.01717991940677166, 0.005335978232324123, 0.01085809525102377, 0.026059428229928017, 0.012953880243003368, 0.001882069860585034, 0.028058698400855064, -0.01738674007356167, 0.002168172039091587, 0.028844617307186127, 0.02614215761423111, 0.00015802406414877623, 0.007273200433701277, 0.03251224011182785, -0.00010351815581088886, -0.026211097836494446, 0.029699476435780525, 0.02301226742565632, 0.02463926002383232, -0.004822373390197754, 0.02604564093053341, 0.00645970506593585, -0.015704598277807236, 0.028899768367409706, -0.020930271595716476, 0.07936406135559082, -0.005118816625326872, -0.006687208078801632, 0.019689345732331276, 0.018145084381103516, -0.01545641291886568, -0.09960492700338364, -0.03380831703543663, 0.009058753959834576, -0.010644380934536457, -0.016352636739611626, 0.009031177498400211, -0.005642762407660484, 0.0289824977517128, -0.035325005650520325, 0.021330125629901886, -0.02349485084414482, -0.007014674600213766, -0.007804040797054768, 0.0012943539768457413, 0.012685013003647327, 0.020447690039873123, -0.0041777812875807285, 0.007056038361042738, -0.005446282681077719, 0.03251224011182785, 0.018931003287434578, -0.012154173105955124, 0.0028937687166035175, 0.010230738669633865, -0.0269832294434309, -0.0043914965353906155, -0.010644380934536457, 0.00039963822928257287, 0.010189374908804893, 0.01786932349205017, 0.020626934245228767, -0.0035642129369080067, 0.016669761389493942, -0.00484305527061224, 0.0009074265253730118, -0.010871883481740952, -0.041750237345695496, 0.003431502962484956, 0.03218132629990578, -0.02663852833211422, -0.006070192437618971, 0.0026421365328133106, 0.029809780418872833, -0.01792447455227375, -0.017538409680128098, 0.01643536426126957, 0.00571514992043376, 0.016159603372216225, 0.027520963922142982, -0.00680785346776247, -0.012588496319949627, 0.0029023862443864346, -0.008789886720478535, -0.000849258154630661, 0.007583431899547577, -0.018158871680498123, 0.03620744124054909, -0.005728938151150942, -0.015180651098489761, 0.005918523762375116, -0.012512662447988987, 0.001175431883893907, -0.007879874669015408, 0.016669761389493942, -0.017841747030615807, -0.0006695825722999871, -0.001427925773896277, 0.0005558310658670962, 0.0021905775647610426, -0.01451882440596819, -0.01723507232964039, 0.0237430352717638, -0.017441892996430397, -0.008148741908371449, -0.022529685869812965, -0.002524937968701124, 0.004074370954185724, 0.015966570004820824, 0.0003824031737167388, 0.006142579950392246, -0.028761887922883034, -0.003857209114357829, -0.014146546833217144, -0.01633884757757187, 0.023922279477119446, 0.02683155983686447, 0.0225986260920763, -0.004443201702088118, 0.03022342175245285, -0.038303226232528687, -0.020392537117004395, -0.004346685018390417, -0.012622966431081295, -0.016752490773797035, -0.009362091310322285, 0.029285835102200508, -0.004636234603822231, 0.020902695134282112, 0.00841760914772749, 0.011857729405164719, -0.03510439395904541, -0.0122989472001791, -0.05906803905963898, 0.002783464267849922, 0.02097163535654545, -0.012671224772930145, 0.03071979247033596, -0.014973830431699753, -0.023660307750105858, -0.021426642313599586, 0.011664696969091892, 0.021095728501677513, -0.03962687775492668, -0.008555489592254162, -0.012457510456442833, -0.0036434943322092295, -0.026569588109850883, -0.009279362857341766, 0.02734171785414219, -0.002900662599131465, 0.0028075932059437037, 0.021343912929296494, -0.000922938110306859, 0.002419804222881794, -0.0006333888741210103, 0.010196268558502197, -0.028706736862659454, -0.015759749338030815, 0.004332897253334522, 0.02539760246872902, -0.00736971665173769, -0.02221256121993065, -0.0040778182446956635, -0.03027857467532158, -0.0016537051415070891, 0.024763351306319237, 0.015428836457431316, -0.006018487270921469, 0.010017024353146553, 0.0008962237625382841, 0.0150151951238513, -0.005122263450175524, -0.010823625139892101, -0.045390285551548004, -0.0020389091223478317, -0.013657071627676487, -0.01682143099606037, -0.013264111243188381, -0.000132925488287583, -0.008134953677654266, 0.04282570630311966, 0.022419381886720657, 0.010582334361970425, 0.014132759533822536, -0.010892565362155437, -0.02499774843454361, -0.01548398844897747, -0.017207495868206024, -0.00017978333926294, 0.025921547785401344, -0.01622854359447956, -0.0027024592272937298, 0.029258258640766144, 0.00337979756295681, -0.01872418262064457, -0.028155213221907616, 0.011540604755282402, -0.01643536426126957, -0.03689684346318245, -0.002238835906609893, 0.01672491431236267, -0.0059702289290726185, -0.026748832315206528, -0.012767741456627846, 0.030609488487243652, -0.0016261290293186903, -0.004812031984329224, -0.0009117352892644703, -0.009727474302053452, -0.014973830431699753, -0.02768642082810402, 0.006094321608543396, 0.003088525030761957, -0.04456300288438797, -0.003605577163398266, 0.01857251301407814, 0.029864933341741562, 0.005042982287704945, -0.002948920940980315, 0.02667989209294319, 0.015745962038636208, -0.003214340889826417, -0.010665062814950943, 0.00567723298445344, 0.005222226958721876, -0.0023456932976841927, 0.016904158517718315, -0.002933409297838807, -0.020006472244858742, 0.017786594107747078, 0.0068285358138382435, 0.022474534809589386, 0.022543475031852722, 0.016200967133045197, 0.02046147733926773, -0.010561652481555939, -0.012423040345311165, 0.006428681779652834, 0.002612836891785264, -0.00231467024423182, -0.008679582737386227, 0.011464769951999187, 0.0009177675819955766, -0.011519921943545341, -0.035325005650520325, 0.038468681275844574, -0.016421576961874962, -0.004556952975690365, 0.015525353141129017, -0.01748325675725937, -0.007121531758457422, 0.039902638643980026, 0.012581602670252323, 0.012533344328403473, 0.031105857342481613, -0.0059702289290726185, 0.013836315833032131, 0.03902020305395126, 0.004653469659388065, 0.011905987747013569, -0.012064550071954727, -0.003912361338734627, -0.01008596457540989, 0.019248127937316895, -0.004963700659573078, -0.015470201149582863, 0.005873712711036205, -0.02097163535654545, -0.021137092262506485, 0.011988716199994087, 0.0071904719807207584, 0.09155270457267761, 0.028348246589303017, -0.02503911219537258, -0.009451713413000107, -0.022240137681365013, -0.002604219364002347, 0.010451347567141056, 0.004498353693634272, -0.014367155730724335, -0.028058698400855064, 0.038716867566108704, -0.007011227309703827, -0.022681355476379395, -0.023825764656066895, 0.007238730322569609, 0.0034004796762019396, -0.018393268808722496, 0.007014674600213766, -0.014973830431699753, -0.010920141823589802, 0.0300303902477026, -0.004467330873012543, 0.008838145062327385, -0.023563791066408157, -0.02270893193781376, -0.001141823478974402, 0.012388570234179497, 0.006483834236860275, -0.006407999899238348, -0.03369801491498947, 0.027562327682971954, -0.015028983354568481, -0.011685378849506378, 0.0024939149152487516, -0.007921239361166954, 0.027920816093683243, 0.013829422183334827, -0.01723507232964039, 0.008314198814332485, 0.01647672988474369, -0.011837047524750233, -0.00567723298445344, -0.014339580200612545, -0.018641453236341476, 0.022515898570418358, 0.006742360070347786, 0.00019680298282764852, -0.017069615423679352, -0.014298215508460999]"
Rate Limiting with Dragonfly,Rate Limiting with Dragonfly,"for rate limiting with Dragonly. If you want to jump to the section on using this API [click here](#using-clthrottle-with-dragonfly).*  At my previous company, we faced the challenge of handling over 300K incoming requests per second. Although we successfully constructed a stateless auto-scaling system that could handle the volume, there were some backend services that struggled with the load. Consequently, we developed a rate limiter to manage the traffic to these services. Despite several iterations and multiple post-mortem analyses, our solution remained imperfect. In reality, creating a reliable rate limiter for high throughput workloads is a significant challenge.  This problem was not unique to our team. Rate limiters are used in a variet of use cases to regulate the rate of executing actions or accessing resources. Common use cases include:  - **API requests:** Requests can be limited based on a specific number of requests at a given time to prevent overloading of a server or database. - **Login attempts:** The number of login attempts can be limited to a specific period to prevent brute force attacks. - **Form submissions:** To prevent spamming, the rate at which a user can submit a form can be limited. - **Managing quotas:** To limit the number of actions a customer can perform based on their service tier, to enforce usage-based pricing. - **Resource allocation:** To limit the rate at which different users or processes can access a resource for fair usage.  As developers, we all need to use or build a rate limiter at some point in our careers. There are many algorithms to choose from, let's look at some of most common ones first.  ## Rate Limiting Algorithms  - **Fixed Window Algorithm:** The fixed window algorithm divides time into fixed intervals or windows and allows a maximum number of requests within each window. When the limit is reached, any further requests within the same window are throttled. This algorithm is simple to implement but can lead to uneven rate limiting, as clients can make many requests at the end of one window and the beginning of the next. - **Sliding Window Algorithm:** an improved approach to rate limiting that provides a more balanced and fair experience compared to the fixed window algorithm. Instead of dividing time into fixed intervals or windows, the Sliding Window algorithm considers a continuous rolling window of time - **Token Bucket Algorithm:** In this algorithm, tokens are generated at a fixed rate and are used to represent a request. Requests are allowed as long as tokens are in the bucket. - **Leaky Bucket Algorithm:** This algorithm is similar to the token bucket algorithm, but requests are stored in a bucket that leaks at a fixed rate instead of tokens. Requests are only allowed if the bucket is not full.  Each algorithm fits a slightly different use case. In the case of Dragonfly, we were looking for an algorithm that would be versatile enough to cover a wide range of use cases but will require low computational and memory overhead. We decided to implement a variation of the leaky bucket algorithm called the ""Generic Cell Rate Algorithm"" (GCRA). Now, let's delve into the specifics of this algorithm.  ## Generic Cell Rate Algorithm (GCRA)  Although its name can be confusing (""Cell Rate""), GCRA is a form of a leaky bucket algorithm that was used to regulate traffic in a communication technology called Asynchronous Transfer Mode (ATM). In ATM, data was split into fixed-size packets called ""cells"" (Hence the name). GCRA was used by ATM network's scheduler to control the flow of ""cells"". If too many cells came in too quickly, GCRA would delay or drop them out.  In GCRA emission interval (T) represents the rate at which the bucket is drained. Each request has a ""cost"" which is a multiplier of the ""emission interval"" to represent the increment time units to be added to the bucket. GCRA uses a single time variable called theoretical arrival time (TAT) to mark the next time a request can arrive without being rejected.  TAT is seeded on the first request to be the arrival time of the request plus a request cost. When a subsequent request arrives, we calculate the earliest arrival time of a request by subtracting burst capacity ( + T) from TAT. If the earliest arrival time is in the past, we allow the request. Otherwise, the request is rejected. After a successful request, a new TAT is calculated by adding the request cost (fill the bucket).  The description is confusing enough, and a code sample will not make it much more clear, so instead, let's look at a visual abstraction.  ![](/assets/blog/introducing-a-rate-limiting-api-by-dragonfly/image-2.png)  As you can see, the algorithm requires storing a single variable (TAT) and performing only a few simple arithmetic operations. This makes it perfect for in-memory data stores. Now Let's see how it is implemented in Dragonfly.  ## Using CL.THROTTLE with Dragonfly  Dragonfly is an in-memory datastore that scales vertically to support millions of operations per second and terabyte-sized workloads on a single instance. It is fully compatible with the Redis ecosystem and requires no code changes to implement. Using Dragonfly's CL.THROTTLE command (shout out to the [redis-cell](https://github.com/brandur/redis-cell) project that origingally added this commannd for Redis) you can run various rate limiter configurations to best suit your use case.  ## The CL.THROTTLE Command  ```shell CL.THROTTLE emailGW 20 120 60 1             |     |  |  |   apply 1 token |     |   120 tokens / 60 seconds |      20 Capacity  key ""emailGW""  ```  Let's take a look at each of the parameters in the CL.THROTTLE emailGW 20 120 60 1 command. emailGW is a bucket with a capacity of 20 leaking at the rate of 120 unites per 60 seconds (2 unites per second). A single token is applied against the rate limit of the key emailGW.  **Key**: The key name (emailGW) is used to identify the rate limiter in Dragonfly. It can be any string you choose and is used to store the state of the rate limiter.  **Capacity**: Represents the bucket capacity. Or the maximum number of units allowed in a time window. In this case, 20.  **Leak rate**: This parameter sets the rate at which the bucket leaks, which is the number of units (requests) leaking from the bucket on every time window. In this case, the rate is 120 units per 60 seconds (two units every second).  **Time window**: This parameter sets the time window for the rate limiter. In this case, the time window is 60 seconds.  **Apply Unit**: This parameter sets the cost of the request. In this case, a single unit (1) should be applied against the rate limit of the key. If omitted, the default value is 1.  ### Response  ```shell 127.0.0.1:6379> CL.THROTTLE emailGW 20 120 60 1 1) (integer) 0    limited? 2) (integer) 21   RateLimit-Limit 3) (integer) 20   RateLimit-Remaining 4) (integer) -1   Retry-After 5) (integer) 0    RateLimit-Reset ```  Let's look at the meaning of each item in the result array.  1.  **Limited:** This is a binary value (0 or 1). If the returned value is 1, it indicates that the request is limited (throttled). If it's 0, the request is not limited, and the client can proceed. 2.  **RateLimit-Limit:** The total limit of the key (max_burst +1). 3.  **RateLimit-Remaining:** The remaining limit for the key. 4.  **Retry-After:** If the request is limited (throttled), this value indicates the number of seconds the client should wait before retrying the request. If the request is not limited, this value will be -1. 5.  **RateLimit-Reset:** This value represents the number of seconds remaining until the token bucket is fully drained, allowing the client to make a burst of requests up to the capacity limit.  ### Example  I assume you have a Dragonfly instance running. If not, please refer to the [getting started](/docs/getting-started/) guide to get a Dragonfly running on your machine. Also, ensure you are connected to Dragonfly using the [redis-cli](https://redis.io/docs/ui/cli/) tool.  Let's start with a simple example where you have an application that accepts new user registrations. Suppose, after each registration, you have to send a welcome email, where the email gateway has a 120 emails per minute limit.  ![](/assets/blog/introducing-a-rate-limiting-api-by-dragonfly/image-3.png ""Fixed window like"")  A trivial use of CL.THROTTLE will look like this (with capacity = 0).  ```shell 127.0.0.1:6379> CL.THROTTLE emailGW 0 120 60 1) (integer) 0 2) (integer) 1 3) (integer) 0 4) (integer) -1 5) (integer) 2 ```  In this case, a request is allowed every 0.5 seconds. Any additional request during the 0.5 seconds will be rejected. This is nice, but in most cases, we are not getting an email precisely every 0.5 seconds. This ""Discrete"" behavior can be useful in cases where the operation occupies the CPU for 0.5 seconds. But in most cases, we would like a more smooth behavior. For this, we can use the capacity parameter.  **Allow burst**  The capacity parameter allows us to define the number of units the limiter will accept in the given window without limiting when the requests are coming. In the following example, we allow up to 10 requests to run simultaneously.  ```shell 127.0.0.1:6379> CL.THROTTLE emailGW 10 120 60 1) (integer) 0 2) (integer) 11 3) (integer) 10 4) (integer) -1 5) (integer) 0 ```  Note: In this configuration, we theoretically allow 130 requests per 60 seconds as the bucket capacity is 10 leaking at a rate of 120 units per minute. To smooth this behavior, you can configure CL.THROTTLE emailGW 10 1200 600. (Now it will allow a max of 121 requests per minute and not 130)  **With request cost**  Not all requests are equal. Some take more resources than others. For example, an HTTP server can count a simple GET request as a single unit but a more complex ""Search"" request as two units or more. The ""Apply units"" parameter allows to assign a cost factor to every request. In the next example, we apply a cost of 2 units for emails with attachments, so 120 emails could be sent per minute but only 60 emails with attachments (or 90 emails and 15 with attachments)  ```shell 127.0.0.1:6379> CL.THROTTLE emailGW 10 120 60 2 1) (integer) 0 2) (integer) 11 3) (integer) 9 4) (integer) -1 5) (integer) 1 ```  **What if we keep the same key and change the other parameters?**  Rate limiting parameters are provided with every call to CL.THROTTLE so that limits can easily be reconfigured on the fly. In most cases, you will use the exact same parameters (configuration) for a given key. But in some cases, like with the usage of apply units, requests for the same key with a different configuration makes sense.  ## Conclusion  Rate limiters are an essential part of software, especially software that deals with heavy traffic, in order to regulate resource access and prevent overloading or spamming. We added CL.THROTTLE to Dragonfly to simplify the work of developers and allow you to create realtime applications easily while protecting your users and backend resources.  The IETF is currently publishing a standard for [HTTP rate-limiting headers](https://datatracker.ietf.org/doc/draft-ietf-httpapi-ratelimit-headers/) to be used with RESTful API servers, for example. So maybe in my next post, I will create a real example using the Dragonfly rate limiter for a RESTful API server. Stay tuned!","[-0.0053900848142802715, -0.002505200682207942, -0.01982869952917099, -0.024072635918855667, 0.01397376786917448, -0.013384726829826832, -0.01683381386101246, 0.007089789025485516, -0.02702494151890278, -0.03815285861492157, 0.007891736924648285, -0.0065859099850058556, 0.010304678231477737, -0.012156965211033821, 0.008693684823811054, 0.025719113647937775, 0.010723394341766834, -0.02696816623210907, -0.005666863173246384, -0.0021397110540419817, -0.0012579229660332203, 0.001955192070454359, -0.031254686415195465, -0.01448474358767271, -0.02441328763961792, -0.00025704034487716854, 0.025222331285476685, -0.03417860344052315, 0.005730735138058662, 0.02197195775806904, 0.015897024422883987, -0.00509556382894516, -0.011752442456781864, 0.022695841267704964, -0.011284048669040203, -0.0076788305304944515, 0.014002155512571335, 0.006632039789110422, 0.023533273488283157, -0.0013209078460931778, 0.01622348092496395, 0.006028804462403059, 0.002835205988958478, -0.014399581588804722, -0.009048528969287872, 0.015570566989481449, 0.007693024352192879, -0.015613148920238018, 6.814119115006179e-05, -0.0122208371758461, 0.016592519357800484, 0.022738421335816383, -0.034803129732608795, -0.009793702512979507, -0.012660844251513481, 0.012533100321888924, -0.004013288766145706, 0.016904782503843307, 0.009559505619108677, 0.001127517782151699, -0.017543502151966095, 0.02544943243265152, -0.012561487965285778, -0.01192276831716299, 0.0038252214435487986, -0.013136335648596287, -0.0019126107217743993, -0.005237501580268145, 0.0033302137162536383, -0.019033847376704216, 0.0012029221979901195, -0.0021858408581465483, 0.02689719758927822, -0.004460392519831657, 0.013895702548325062, -0.020041605457663536, -0.006532683502882719, -0.023093266412615776, 0.003424247493967414, 0.006046546623110771, 0.015471210703253746, 0.02493845671415329, -0.008324647322297096, 0.02449844963848591, 0.0017130108317360282, 0.0013102625962346792, -0.007763992995023727, 0.0022639066446572542, -0.007107531186193228, 0.0071749514900147915, -0.010858234949409962, -0.009332404471933842, 0.003793285461142659, 0.020197736099362373, 0.01579766720533371, 0.004687493201345205, -0.0152583047747612, 0.0053936331532895565, -0.005500086583197117, -0.030175957828760147, -0.014406678266823292, -0.002258583903312683, -0.013796346262097359, -0.016989944502711296, -0.03372440114617348, -0.019715148955583572, 0.018636422231793404, -0.011880186386406422, 0.01737317629158497, -0.013434404507279396, -0.009857574477791786, 0.022553903982043266, 0.03196437284350395, -0.019445467740297318, 0.007221081294119358, -0.00042913982179015875, 0.03707413002848625, -0.019161591306328773, 0.004683944396674633, -0.017557695508003235, 0.011766636744141579, -0.00029518609517253935, 0.04309229180216789, -0.004240389447659254, 0.003220211947336793, -0.00988596212118864, 0.006057192105799913, -0.004084257874637842, 0.006287840660661459, -0.01244793739169836, -0.0034136020112782717, 0.01686220057308674, -0.015329273417592049, -0.0035786046646535397, -0.010155643336474895, 0.01619509421288967, 0.00363183137960732, -0.021063556894659996, -0.010666619054973125, -0.02192937768995762, -0.009133691899478436, 0.033326976001262665, 0.006976238917559385, 0.0051416936330497265, -0.006965593434870243, 0.03874899819493294, 0.004506522323936224, 0.0017715601716190577, 4.726636689156294e-05, -0.02080806903541088, -0.015939606353640556, -0.007487214636057615, 0.006270098499953747, -0.008196903392672539, 0.0030002084095031023, 0.016635099425911903, 0.0010290484642609954, 0.009005947969853878, -0.017912540584802628, -0.01505959127098322, 0.01295181643217802, 0.026201702654361725, 0.016606712713837624, 0.005585249047726393, 0.022042926400899887, 0.03275922313332558, -0.002109549241140485, -0.01295181643217802, -0.0031705338042229414, -0.0011115497909486294, 0.0017103494610637426, 0.027323009446263313, -0.009289823472499847, 0.02952304482460022, 0.008906591683626175, 0.02601718343794346, -0.003175856312736869, -0.00534750334918499, 0.0011195337865501642, -0.03596701845526695, 0.006823655683547258, 0.004843624774366617, 0.024725550785660744, 0.030857259407639503, -0.027862373739480972, 0.0015666375402361155, 0.019984830170869827, -0.0025300397537648678, 0.0039032872300595045, -0.011766636744141579, -0.007004626095294952, 0.02691139094531536, -0.02296552248299122, -0.023306172341108322, -0.6186213493347168, -0.008558844216167927, -0.008998851291835308, 0.0011603408493101597, 0.006273646838963032, -0.0027110103983432055, 0.01572669856250286, 0.006940754130482674, -0.017188657075166702, 0.025222331285476685, 0.01569831185042858, -0.009509827010333538, -0.002336649689823389, -0.004392972216010094, -0.022099701687693596, -0.015471210703253746, -0.0013244563015177846, 0.0013013913994655013, -0.02079387567937374, -0.0012384065194055438, -0.0436316542327404, 0.011376308277249336, -0.003349730046465993, 0.007579474244266748, 0.002796173095703125, 0.006514941342175007, 0.009467246010899544, 0.01579766720533371, 0.012341484427452087, 0.008700782433152199, -0.016521550714969635, 0.021546145901083946, 0.018097057938575745, 0.001877126283943653, 0.04879818856716156, -0.004070064052939415, -0.017188657075166702, 0.027862373739480972, 0.01424345001578331, 0.039458684623241425, -0.018423516303300858, -0.01447055023163557, 0.0378405936062336, 0.004091354552656412, -0.0008232387481257319, 0.005173629615455866, 0.013384726829826832, -0.002409392734989524, -0.018153833225369453, -0.006887527648359537, -0.013476986438035965, 0.008232387714087963, 0.015130560845136642, 0.01395247783511877, -0.0014566357713192701, -0.01585444249212742, 0.01721704564988613, -0.019715148955583572, -0.0013333273818716407, -0.007221081294119358, -0.003991998266428709, 0.00650784419849515, -0.012887944467365742, -0.020580967888236046, -0.02133323810994625, -0.001568411709740758, -0.005698799155652523, -0.018097057938575745, 0.010652425698935986, -0.006557522341609001, 0.03363923728466034, 0.006106870248913765, 0.019076429307460785, -0.027095910161733627, -0.00457749143242836, 0.012575681321322918, 0.038890935480594635, -0.02445586770772934, -0.0010246129240840673, 0.005280083045363426, 0.019615791738033295, -0.008565940894186497, -0.016691874712705612, -0.009233048185706139, 0.026244284585118294, -0.0011496954830363393, -0.005443311296403408, -0.0019906763918697834, 0.01046080980449915, 0.025321688503026962, 0.026840422302484512, 0.028841743245720863, -0.012880847789347172, -0.03202114999294281, 0.01781318336725235, 0.012887944467365742, -0.0076859272085130215, -0.03165211156010628, -0.007387857884168625, -0.022170670330524445, 0.010155643336474895, -0.015017010271549225, -0.010091771371662617, 0.013995058834552765, 0.04383036494255066, -0.0012410678900778294, -0.02949465811252594, -0.013838927261531353, 0.030431445688009262, -0.007281404919922352, -0.011298242025077343, -0.014328612014651299, 0.006699460092931986, -0.006025256123393774, 0.010155643336474895, -0.01626606285572052, 0.016521550714969635, 0.0028103666845709085, 0.008204000070691109, -0.018210608512163162, 0.0007167854928411543, -0.00836013164371252, 0.03358246386051178, -0.0015568793751299381, 0.003935222979635, 0.008232387714087963, 0.009304016828536987, 0.0003921029274351895, -0.007008174899965525, 0.00483652763068676, 0.01067371666431427, -0.032844386994838715, 0.03159533441066742, -0.01041113119572401, 0.061317093670368195, -0.009644667617976665, 0.028884325176477432, -0.01778479665517807, 0.023689404129981995, -0.030772097408771515, -0.01068081334233284, -0.035342492163181305, -0.001877126283943653, -0.009474342688918114, -0.011802121065557003, 0.006121064070612192, -0.01943127252161503, -0.0020882587414234877, 0.01934611052274704, 0.004172968678176403, -0.012831169180572033, -0.009800799190998077, 0.0086652971804142, 0.02238357812166214, -0.0162944495677948, 0.020084187388420105, 0.006703008431941271, -0.04700976982712746, -0.00835303496569395, -0.02749333530664444, -0.004336197394877672, 0.02242615818977356, 0.0003193598531652242, -0.013178916648030281, -0.031141133978962898, 0.0022390675731003284, 0.011333726346492767, 0.015116366557776928, -0.015641536563634872, -0.026712678372859955, -0.01828157715499401, -0.02850109338760376, -0.004506522323936224, 0.016933169215917587, 0.018082864582538605, 0.010254999622702599, -0.028344962745904922, 0.018480289727449417, -0.0017431725282222033, -0.0060784826055169106, 0.013271176256239414, 0.013100851327180862, -0.007228177972137928, -0.0011550181079655886, 0.03173727169632912, 0.010368550196290016, 0.019033847376704216, 0.03420699015259743, -0.02894110046327114, 0.03216308727860451, 0.01637961156666279, 0.006593007128685713, -0.03704574331641197, 0.005297825206071138, 0.00650074752047658, 0.003064080374315381, 0.008800138719379902, 0.012809879146516323, -0.01497442927211523, 0.04442650452256203, 0.026272671297192574, -0.012526003643870354, 0.004776204004883766, -0.01571250520646572, -0.006514941342175007, -0.020978394895792007, 0.005833640228956938, -0.005915254354476929, 0.04979174956679344, -0.015017010271549225, 0.01039693783968687, 0.01825319044291973, -0.02026870660483837, -0.006259453482925892, 0.0013111496809870005, 0.03136823698878288, -0.020737100392580032, 0.013498276472091675, -0.009098207578063011, -0.002345520770177245, 0.012589875608682632, 0.02341972291469574, 0.02649977244436741, 0.017699632793664932, -0.008807235397398472, 0.020978394895792007, -0.00010395828576292843, 0.02757849730551243, 0.01727382093667984, -0.022014539688825607, -0.0037471556570380926, 1.7423408280592412e-05, -0.002519394503906369, 0.005152339115738869, 0.018608033657073975, 0.04471037909388542, 0.009630474261939526, -0.012802781537175179, 0.0386638343334198, -0.030914034694433212, 0.023164235055446625, -0.001512523740530014, 0.015811862424016, -0.018593840301036835, 0.007884640246629715, 0.011326629668474197, 0.012313096784055233, -0.0036229602992534637, -0.01243374403566122, 0.00966595858335495, 0.0034827967174351215, 0.01585444249212742, -0.003262793179601431, -0.002794398693367839, 0.01576928049325943, 0.00965886190533638, 0.02146098203957081, 0.015329273417592049, 0.025137169286608696, 0.009729830548167229, 0.017146077007055283, 0.017046719789505005, 0.011603408493101597, -0.027833987027406693, -0.004226195625960827, 0.0028973035514354706, -0.012384065426886082, -0.022539708763360977, -0.008558844216167927, 0.011319532990455627, 0.0019303528824821115, -0.019956443458795547, -0.010659522376954556, -0.010084674693644047, 0.020226124674081802, -0.0008338840561918914, 0.009509827010333538, 0.015229917131364346, -0.010077578015625477, 0.03397988900542259, -0.026670096442103386, -0.03778382018208504, 0.010744685307145119, 0.030147571116685867, -0.012809879146516323, -0.038436733186244965, -0.0056491210125386715, 0.0018105929484590888, 0.005702347960323095, 0.01527249813079834, 0.007001077756285667, -0.010482100769877434, -0.005329761188477278, -0.004662653896957636, -0.003740058746188879, 0.0024785874411463737, 0.03145339712500572, -0.0022035830188542604, -0.029239170253276825, 0.006940754130482674, 0.024569418281316757, 0.024995232000947, -0.017997702583670616, 0.0035874757450073957, 0.052687279880046844, -0.006965593434870243, -0.015229917131364346, -0.019488047808408737, 0.023675210773944855, -0.01046790648251772, 0.0015435726381838322, -0.0375567190349102, -0.01571250520646572, -0.012348581105470657, 0.03761349618434906, 0.007366567384451628, 0.02448425628244877, -0.0021556790452450514, 0.03250373527407646, 0.012873751111328602, -0.022284220904111862, -0.01199373695999384, -0.025747502222657204, -0.005833640228956938, 0.038890935480594635, 0.0034615059848874807, -0.00034619495272636414, 0.0023951989132910967, -0.030800484120845795, 0.007331083063036203, -0.01222793385386467, -0.03446247801184654, 0.011120820418000221, -0.01068081334233284, 0.005049434024840593, -0.0043007126078009605, -0.0061600967310369015, 0.00996402744203806, 0.019970636814832687, 0.011653086170554161, -0.013626020401716232, 0.00013262305583339185, 0.00784205924719572, 0.009197563864290714, 0.013484083116054535, -0.017032526433467865, 0.030289508402347565, 0.01582605578005314, 0.024072635918855667, 0.010013706050813198, 0.029892083257436752, -0.00917627289891243, 0.016124123707413673, 0.004786849487572908, -0.01477571576833725, -0.017018331214785576, -0.006387197412550449, -0.0010175160132348537, -0.01725962571799755, 0.033326976001262665, -0.009481439366936684, -0.03508700430393219, -0.006021707784384489, 0.020140962675213814, 0.0064084879122674465, 0.020027412101626396, -0.006546877324581146, 0.0044461991637945175, 0.008317549712955952, -0.034803129732608795, 0.012554391287267208, 0.0076788305304944515, -0.00421909848228097, -0.02086484432220459, 0.026613321155309677, 0.0020013218745589256, -0.023604242131114006, -0.007217532955110073, -0.009651764295995235, -2.108274020429235e-05, 0.012235031463205814, -0.007884640246629715, -0.00235794042237103, -0.031850822269916534, -0.03781220689415932, -0.004765558987855911, -0.007387857884168625, -0.010638231411576271, -0.02997724525630474, 0.021248076111078262, -0.009552408009767532, -0.005734283942729235, -0.02689719758927822, -0.013044076040387154, -0.025350075215101242, -0.02550620771944523, -0.02144678868353367, 0.025633951649069786, 0.0013679247349500656, 0.01880674809217453, 0.0229939091950655, -0.008487875573337078, -0.015315079130232334, 0.01782737672328949, -0.007693024352192879, -0.022553903982043266, 3.243498576921411e-05, -0.03960062190890312, -0.02333456091582775, -0.000412728259107098, 0.004744268022477627, 0.01887771673500538, -0.0020616452675312757, 0.004304261412471533, -0.0167060699313879, 0.00943176168948412, 0.0117027647793293, -0.008324647322297096, -0.004006192088127136, 0.0335540771484375, 0.027848180383443832, 0.017174463719129562, 0.014946041628718376, -0.035825081169605255, 0.01586863584816456, -0.014300225302577019, 0.0014566357713192701, -0.0036336055491119623, 0.0003173638542648405, -0.011795024387538433, 0.019005460664629936, 0.009850477799773216, 0.009076916612684727, -0.006571716163307428, 0.011064045131206512, -0.009822090156376362, 0.011042754165828228, 0.010489197447896004, 0.011724055744707584, -0.0016234125941991806, 0.007494311314076185, 0.009545311331748962, 0.0004486562393140048, -0.015102173201739788, 0.006798816379159689, -0.027720436453819275, 0.013285370543599129, 0.019658373668789864, -0.029750145971775055, 0.03457602858543396, -0.009126595221459866, -0.04036708548665047, -0.010240806266665459, -0.00431845523416996, 0.026173314079642296, 0.0010237257229164243, -0.0016695423983037472, -0.02293713577091694, -0.03108436055481434, -0.004790397826582193, -0.036421217024326324, 0.01120598241686821, -0.0290688443928957, 0.005673960316926241, -0.01928933523595333, 0.012029221281409264, 0.0005952512728981674, -0.019019654020667076, 0.007196241989731789, -0.022695841267704964, 0.006784623023122549, 0.006525586359202862, 0.003757801139727235, 0.02087903767824173, -0.01454861555248499, 0.005407826974987984, -0.01880674809217453, -0.01931772381067276, -0.017543502151966095, -0.013909895904362202, 0.0026098797097802162, -0.01635122485458851, 0.033866338431835175, 0.022710034623742104, 0.023008104413747787, -0.00994983408600092, 0.025307495146989822, 0.003818124532699585, -0.004478135146200657, 0.012078899890184402, -0.0011213079560548067, 0.0006449294742196798, -0.0135337607935071, -0.009020142257213593, 0.00996402744203806, 0.016549937427043915, 0.010844041593372822, -0.0048791090957820415, -0.010325969196856022, -0.006546877324581146, -0.010226611979305744, 0.001889545819722116, -0.01882094144821167, -0.04158775135874748, -0.019218366593122482, 0.0405941866338253, -0.002817463595420122, -0.017586082220077515, -0.01884932816028595, -0.013342144899070263, 0.03168049827218056, -0.004903947934508324, 0.03463280200958252, 0.0013599407393485308, 0.0290688443928957, -0.01689058728516102, -0.006784623023122549, 0.007004626095294952, 0.037868984043598175, -0.013044076040387154, -0.02139001339673996, -0.023164235055446625, -0.01874997280538082, 0.0050600795075297356, -0.0011461470276117325, 0.016975751146674156, -0.010098868049681187, -0.0038394152652472258, -0.013207304291427135, -0.025633951649069786, -0.003697477513924241, -0.017458338290452957, 0.004226195625960827, -0.005524925421923399, -0.01673445664346218, -0.03003402054309845, -0.018522871658205986, -0.007614958565682173, -0.007834961637854576, 0.01924675516784191, 0.01295181643217802, 0.015882831066846848, -0.01351247075945139, -0.002331326948478818, 0.01978611759841442, -0.016535744071006775, 0.025208137929439545, -0.0018168027745559812, 0.026059765368700027, 0.00027566964854486287, 0.019445467740297318, -0.020722907036542892, -0.0178841520100832, 0.0009997737361118197, 0.005351051688194275, 0.011092432774603367, 0.02543523907661438, -0.017486726865172386, -0.002986014587804675, 0.004087806213647127, -0.002145033795386553, -0.006514941342175007, -0.027223654091358185, 0.00650074752047658, 0.02957982011139393, -0.005049434024840593, -0.0378405936062336, -0.022284220904111862, -0.011220176704227924, 0.010943397879600525, -0.012419549748301506, 0.01295891311019659, 0.01928933523595333, -0.012838266789913177, -0.007622055243700743, 0.02546362578868866, 0.01789834536612034, 0.01571250520646572, -0.007487214636057615, 0.025790082290768623, -0.006181387696415186, -0.01477571576833725, -0.03960062190890312, -0.016649294644594193, 0.02909723110496998, 0.006951399613171816, -0.020992588251829147, -0.02752172388136387, 0.013931186869740486, 0.0035874757450073957, 0.018977072089910507, -0.0038252214435487986, -0.0031013390980660915, 0.03312826156616211, -0.01784157007932663, -0.01018403097987175, 0.010042093694210052, -0.007064949721097946, -0.0002597016573417932, -0.020240318030118942, -0.028827549889683723, -0.007057853043079376, -0.010730491019785404, -0.009282726794481277, 0.029664982110261917, -0.002640041522681713, -0.02600299008190632, -0.00042647848022170365, -0.003069403115659952, -0.014577003195881844, -0.01395247783511877, -0.0031705338042229414, 0.023519080132246017, -0.04221227765083313, 0.0006103321793489158, -0.013824733905494213, -0.008069159463047981, 0.024115217849612236, 0.01096468884497881, -0.017032526433467865, 0.005925899837166071, 0.042041949927806854, -0.009758218191564083, 0.027166878804564476, 0.011766636744141579, -0.014129899442195892, -0.031254686415195465, 0.026286864653229713, 0.0008604974136687815, -0.026144927367568016, 0.012405356392264366, -0.0356263667345047, -0.03622250631451607, -0.017500920221209526, -0.006113966926932335, 0.001421151333488524, -0.024597806856036186, 0.0028103666845709085, 0.015130560845136642, 0.013406016863882542, 0.021503563970327377, -0.023263592272996902, -0.0021308399736881256, 0.01505959127098322, -0.02847270667552948, -0.001820351229980588, 0.030715322121977806, -0.008544650860130787, -0.0005757348844781518, -0.0037152196746319532, 0.005659766495227814, -0.012320193462073803, -0.014378290623426437, -0.02791914902627468, -0.0043752300553023815, 0.028259798884391785, 0.0019250302575528622, -0.0020634194370359182, -0.022284220904111862, -0.024171993136405945, -0.023121653124690056, 0.014193771407008171, -0.007721411529928446, 0.01568411849439144, 0.018977072089910507, -0.004911045078188181, 0.002978917909786105, 0.02146098203957081, 0.004563297610729933, -0.015897024422883987, -0.004815237130969763, -0.00571299297735095, -0.028770774602890015, -0.024782326072454453, -0.027663661167025566, 0.028657224029302597, 0.012582778930664062, -0.02232680283486843, -0.01775640808045864, -0.005602991208434105, -0.0541350431740284, 0.004169420339167118, -0.027138492092490196, 0.00774270249530673, 0.021716469898819923, 0.006596555467694998, 0.01825319044291973, 0.016649294644594193, 0.008565940894186497, 0.02343391627073288, -0.01984289288520813, 0.01476152241230011, 0.012327291071414948, -0.023689404129981995, 0.03460441529750824, 0.010815653949975967, -0.02896948717534542, -0.02026870660483837, 0.00996402744203806, -0.006099773570895195, 0.01498862262815237, 0.03145339712500572, -0.015300885774195194, 0.02244035340845585, -0.02333456091582775, 0.004967819899320602, 0.0010521133663132787, 0.014207965694367886, -0.015343466773629189, -0.031254686415195465, -0.00945305172353983, 0.041928403079509735, -0.02090742625296116, -0.02500942535698414, 0.027862373739480972, 0.015102173201739788, -0.02695397287607193, -0.018735777586698532, -0.018948685377836227, -0.01636541821062565, 0.021730665117502213, 0.00136526336427778, 0.016549937427043915, 0.0019143848912790418, 0.006309131626039743, 0.019019654020667076, 0.0103898411616683, -0.009424664080142975, 0.011645989492535591, 0.009836283512413502, -0.013704086653888226, 0.024739744141697884, -0.0027837534435093403, -0.007199790794402361, -0.0014016348868608475, -0.017515113577246666, 0.03920319676399231, -0.02847270667552948, -0.009254339151084423, -0.01403763983398676, -0.017401564866304398, -0.00887820404022932, 0.03914642333984375, 0.01569831185042858, -0.013796346262097359, -0.009623377583920956, 0.026755260303616524, -0.002114871982485056, -0.008310453034937382, 0.0038145761936903, 0.013036979362368584, -0.02702494151890278, -0.0016154285985976458, 0.018537065014243126, -0.00673494441434741, -0.009715636260807514, -0.009027238935232162, 0.0035555397626012564, -0.005152339115738869, -0.015925411134958267, 0.22380739450454712, -0.014704747125506401, 0.02498103864490986, 0.030232733115553856, -0.004726525861769915, 0.009098207578063011, 0.007898833602666855, 0.018664808943867683, -0.0386638343334198, 0.035910241305828094, -0.012625359930098057, 0.006287840660661459, -0.020481612533330917, -0.01300859171897173, -0.0012996172299608588, 0.01169566810131073, -0.03315665200352669, -0.029863694682717323, 3.315576395834796e-05, 0.0038926417473703623, -0.013689892366528511, -0.0028671419713646173, -0.03321342542767525, 0.0023632629308849573, 0.04425618052482605, -0.008211096748709679, 0.007043659221380949, -0.005922351032495499, 0.014101511798799038, 0.01982869952917099, -0.014506034553050995, 0.010496294125914574, 0.009225951507687569, 0.013853120617568493, -0.01636541821062565, -0.007820768281817436, 0.04019676148891449, -0.005986222997307777, 0.006163645535707474, 0.0019463208736851811, 0.007735605351626873, -0.01826738379895687, 0.023277785629034042, -0.02391650527715683, 0.017103495076298714, 0.013704086653888226, 0.012064705602824688, -0.008019480854272842, 0.010013706050813198, 0.020169349387288094, -0.02045322395861149, 0.010581457056105137, 0.008026577532291412, 0.035370878875255585, 0.0025300397537648678, -0.01737317629158497, -0.010567262768745422, 0.010773072950541973, -0.006436875555664301, 0.04800333455204964, -0.02295132912695408, 0.014846685342490673, -0.009133691899478436, 0.005496538244187832, -0.029381107538938522, 0.009524020366370678, -0.03951546177268028, 0.024186186492443085, -0.009793702512979507, -0.006259453482925892, -0.029806921258568764, -0.01454861555248499, -0.01395247783511877, 0.006497198715806007, -0.013036979362368584, -0.010297581553459167, -0.0038855450693517923, 0.03568314015865326, 0.03679025545716286, 0.02594621479511261, 0.002045677276328206, -0.006199129857122898, 0.006192032713443041, -0.019473854452371597, -0.0077497991733253, -0.014427969232201576, 0.0154995983466506, -0.00216632429510355, -0.029721757397055626, -0.010155643336474895, -0.0018088187789544463, -0.014456355944275856, -0.028742387890815735, -0.018026089295744896, 0.014399581588804722, -0.01046080980449915, 0.012135675176978111, -0.007465923670679331, -0.000250387005507946, -0.023277785629034042, -0.02288036048412323, 0.0439155288040638, 0.030374670401215553, 0.02488168142735958, 0.0036868322640657425, 0.02434231899678707, -0.03906125947833061, -0.007664636708796024, -0.006113966926932335, -0.03554120287299156, -0.0025158459320664406, -0.02693977765738964, 0.025761695578694344, -0.011780830100178719, -0.007969803176820278, -0.010219515301287174, 0.006117515731602907, 0.000749608559999615, 0.026187509298324585, 0.010148546658456326, -0.016478968784213066, -0.004822333808988333, -0.00793431792408228, 0.0038216731045395136, -0.025832664221525192, -0.0228519719094038, -0.0405941866338253, 0.005262340884655714, 0.003090693848207593, -0.021673889830708504, -0.012036317959427834, -0.014371193945407867, -0.020069992169737816, -0.019473854452371597, -0.006145902909338474, 0.0001964950206456706, 0.005131048616021872, -0.04334777966141701, -0.016535744071006775, -0.004020385909825563, -0.009751121513545513, 0.02136162668466568, 0.03006240911781788, 0.004772655665874481, 0.036449603736400604, -0.03886254504323006, -0.0027979472652077675, 0.014591197483241558, -0.006905269809067249, -0.021673889830708504, -0.01425764337182045, 0.00989305879920721, -0.0012472777161747217, -0.003030370222404599, 0.01554218027740717, -0.015442823059856892, -0.019104816019535065, -0.010581457056105137, 0.030686933547258377, -0.0026631064247339964, -0.03247534856200218, 0.00010850473336176947, -0.0014122802531346679, -0.01927514187991619, -0.002781979274004698, -0.01402344647794962, -0.18292932212352753, 0.020580967888236046, -0.0007775525446049869, -0.02593202143907547, 0.009204660542309284, 0.013377630151808262, 0.004236840642988682, 0.021205494180321693, -0.01620928756892681, 0.00571299297735095, 0.0008840058580972254, -0.0009305791463702917, -0.026599127799272537, -0.0405941866338253, 0.016095736995339394, -0.020254511386156082, 0.00711817666888237, 0.023107459768652916, 0.04831559956073761, 0.01724543236196041, 0.0508137010037899, -0.04224066436290741, 0.031197909265756607, 0.009027238935232162, 0.00027943987515755, -0.02502361871302128, -0.0017972863279283047, 0.010638231411576271, 0.005241050384938717, -0.05598023533821106, -0.021602921187877655, 0.026712678372859955, 0.022128090262413025, 0.0024892326910048723, -0.005837188567966223, 0.011802121065557003, 0.015471210703253746, 0.0012348581803962588, -0.004534909967333078, 0.021517757326364517, 0.03860705718398094, 0.0458458811044693, -0.010148546658456326, 0.011518245562911034, 0.005734283942729235, 0.028344962745904922, -0.01555637363344431, -0.026272671297192574, -0.004570394288748503, -0.010311774909496307, 0.0219577644020319, -0.015669923275709152, -0.0035839274059981108, -0.001226874184794724, -0.014307321980595589, -0.0027890761848539114, -0.006124612409621477, 0.014193771407008171, 0.0016145415138453245, -0.007962705567479134, 0.005578152369707823, -0.01069500669836998, 0.002684397157281637, 0.002813915256410837, 0.0008906591683626175, -0.022227445617318153, -0.0405941866338253, 0.024328123778104782, -0.018934492021799088, 0.011284048669040203, -0.01068791002035141, 0.001807931694202125, 0.010162740014493465, -0.0028990779537707567, 0.009069819934666157, 0.021020974963903427, -0.01672026328742504, 0.006380100268870592, 0.0219577644020319, -0.003388762939721346, -0.004279422108083963, 0.024129411205649376, -0.023575855419039726, 0.0023153589572757483, -0.015996379777789116, 0.0018097058637067676, 0.0127389095723629, 0.005638475995510817, -0.007884640246629715, -0.017543502151966095, 0.03863544762134552, -0.01578347384929657, 0.01887771673500538, -0.020467419177293777, -0.018522871658205986, 0.010616941377520561, 0.018040284514427185, -0.019686760380864143, 0.017188657075166702, -0.016649294644594193, 0.006532683502882719, -0.0016109930584207177, -0.02854367531836033, -0.01193696167320013, 0.033326976001262665, 0.028217218816280365, -0.029239170253276825, 0.02295132912695408, 0.022241640836000443, -0.0038216731045395136, -0.0003045007470063865, 0.003042789874598384, 0.027138492092490196, 0.016663488000631332, -0.010325969196856022, 0.00844529364258051, 0.03324181213974953, -0.009538214653730392, 0.02638622187077999, -0.018082864582538605, 0.04942271113395691, -0.0027358494699001312, -0.0029239170253276825, 0.01779899001121521, 0.00636945478618145, -0.011241466738283634, -0.11269854754209518, -0.003601669566705823, 0.023263592272996902, 0.01169566810131073, -0.022241640836000443, -0.003271664259955287, -0.033809565007686615, 0.027635272592306137, -0.013313758186995983, 0.03324181213974953, -0.025250719860196114, -0.01373957097530365, -0.027337204664945602, -0.007813671603798866, 0.020467419177293777, 0.004353939555585384, 0.010879525914788246, -0.01723123900592327, -0.004038128070533276, 0.0309991966933012, 0.02235518954694271, -0.019559016451239586, -0.005432666279375553, -0.0028192379977554083, -0.03670509159564972, -0.009524020366370678, -0.01424345001578331, 0.015457017347216606, 0.0193319171667099, 0.0002510523481760174, 0.007217532955110073, 0.009928543120622635, 0.0193319171667099, -0.01294471975415945, 0.002137936884537339, -0.030317896977066994, -0.015244110487401485, 0.0052091144025325775, 0.04226905107498169, -0.03312826156616211, -0.009353695437312126, 0.009978221729397774, 0.027252040803432465, 0.0061565483920276165, -0.007487214636057615, 0.006287840660661459, -0.016691874712705612, 0.03003402054309845, 0.011518245562911034, -0.007905931212008, -0.010240806266665459, 0.0006919463630765676, -0.031197909265756607, -0.005241050384938717, 0.01293762307614088, -0.010077578015625477, 0.006142354570329189, 0.004421359859406948, -0.008771751075983047, 0.018579646944999695, 0.007402051705867052, -0.01242664735764265, -0.01982869952917099, 0.014832491055130959, 0.017529308795928955, 0.002790850354358554, -0.02587524615228176, 0.003402956761419773, -0.003358601126819849, -0.01169566810131073, -0.007622055243700743, 0.01985708624124527, -0.0248532947152853, 0.01249051932245493, -0.011724055744707584, 0.008097547106444836, -0.0020403547678142786, 0.0008906591683626175, 0.018210608512163162, 0.008225291036069393, -0.012412453070282936, -0.007884640246629715, -0.008722072467207909, -0.038919322192668915, 0.00624880800023675, 0.010794362984597683, 0.030175957828760147, 0.0008556182729080319, 0.013164723291993141, -0.04544845595955849, -0.0031882759649306536, 0.00044422069913707674, -0.021531950682401657, -0.00570589629933238, -0.019147397950291634, 0.02238357812166214, -0.01222793385386467, 0.032333411276340485, 0.00785625260323286, 0.015953799709677696, -0.015329273417592049, -0.003697477513924241, -0.05651959776878357, 0.00989305879920721, 0.012781491503119469, -0.021134525537490845, 0.004762010183185339, -0.031850822269916534, 0.026215896010398865, 0.0012162288185209036, 0.011035657487809658, 0.011560826562345028, -0.022028733044862747, 0.010482100769877434, -0.0228519719094038, -0.01554218027740717, -0.011823412030935287, -0.024129411205649376, -0.0005171855445951223, -0.004563297610729933, 0.008402712643146515, 0.01625186763703823, 0.004542007111012936, -0.011461470276117325, -0.0033355362247675657, 0.012057608924806118, -0.006202678196132183, -0.01148985791951418, 0.015897024422883987, 0.052658893167972565, -0.0056526693515479565, -0.01351956743746996, 0.0152583047747612, -0.02601718343794346, -0.017472533509135246, -0.009786605834960938, -0.007050755899399519, -0.012029221281409264, 0.021503563970327377, 0.023675210773944855, 0.014420871622860432, -0.009488536044955254, -0.0060820309445261955, -0.019544823095202446, 0.035484429448843, -0.013831830583512783, -0.011759540066123009, 0.00785625260323286, -0.012114384211599827, -0.006330422125756741, 0.008842719718813896, 0.005489441100507975, 0.023703599348664284, -0.0012978429440408945, -0.01737317629158497, -0.025264913216233253, 0.0024732646998018026, -0.014662166126072407, 0.017415758222341537, -0.000341315841069445, -0.008317549712955952, -0.008487875573337078, 0.05041627585887909, 0.022582290694117546, 0.010340162552893162, -0.045533619821071625, -0.0008556182729080319, 0.0015293789329007268, -0.05243179202079773, 0.007111079525202513, 0.012895041145384312, -0.02026870660483837, -0.007735605351626873, -0.0022656808141618967, 0.0015072011156007648, 0.01474732905626297, -0.002327778609469533, 0.009928543120622635, -0.021730665117502213, 0.014789910055696964, -0.011603408493101597, 0.0022603580728173256, 0.005709444638341665, -0.039458684623241425, -0.026797840371727943, -0.008530456572771072, 0.02289455384016037, -0.005514280404895544, 0.021588725969195366, 0.027166878804564476, 0.01636541821062565, 0.006617845967411995, -0.020538387820124626, 0.0013599407393485308, -0.0016695423983037472, 0.005940093193203211, 0.03213470056653023, 0.011298242025077343, -0.02637202851474285, 0.0042120018042624, 0.0189202968031168, 0.03358246386051178, 0.0168480072170496, 0.008260775357484818, 0.009580795653164387, -0.009495633654296398, 0.005670411977916956, 0.012866653501987457, 0.005890415050089359, -0.031226297840476036, 0.004985562060028315, 0.021759051829576492, -0.0009021916193887591, -0.02144678868353367, -0.01928933523595333, 0.024242961779236794, -0.0012171159032732248, 0.030914034694433212, 0.01778479665517807, -0.03318503871560097, -0.005187823437154293, 0.011291145347058773, -0.008892398327589035, -1.8019436538452283e-05, 0.007969803176820278, -0.027876567095518112, 0.005815898068249226, 0.011099529452621937, 0.007955608889460564, 0.0037719947285950184, 0.00010756217670859769, -0.010496294125914574, -0.004247486125677824, 0.013590536080300808, -0.03397988900542259, -0.019587405025959015, 0.008338840678334236, -0.02296552248299122, -0.01046080980449915, 0.0021308399736881256, 0.0020137412939220667, 0.08777428418397903, 0.012419549748301506, -0.025719113647937775, 0.004520716145634651, 0.010716297663748264, 0.023164235055446625, 0.005613636691123247, 0.008232387714087963, -0.020240318030118942, -0.027720436453819275, 0.02693977765738964, 0.000852069875691086, -0.03199275955557823, -0.04167291522026062, 0.009112400934100151, 0.019218366593122482, -0.019956443458795547, -0.0029540786053985357, -0.005794607102870941, -0.01271761953830719, 0.03349729999899864, -0.004978465382009745, -0.012192449532449245, -0.010120159015059471, -0.021588725969195366, -0.005588797386735678, 0.01723123900592327, -0.012540196999907494, -0.0094601484015584, -0.02136162668466568, 0.008005287498235703, -0.006287840660661459, -0.02289455384016037, -0.02647138386964798, -0.00937498640269041, 0.017515113577246666, -0.012078899890184402, -0.021162914112210274, 0.006461714394390583, 0.0006263001705519855, 0.0012730038724839687, 0.018026089295744896, -0.02537846378982067, -0.03224824741482735, -0.0030445640441030264, 0.016138318926095963, -0.0028227863367646933, -0.016393806785345078, -0.00987886544317007]"
Building a Real-Time Ad Server with Dragonfly,Building a Real-Time Ad Server with Dragonfly,"## Introduction  Ad-serving systems frequently need to accommodate millions, or even billions, of requests daily, constructing and delivering personalized ads within just a few milliseconds. Beyond handling the substantial daily volume of requests, these platforms must be capable of managing spiky traffic with sudden surges in user activity as well.  In this blog post, we will construct a real-time ad cache server utilizing the cutting-edge technologies of Bun, ElysiaJS, and Dragonfly. Not just for the enjoyment of exploring new tools, but also to leverage their exceptional developer experience and performance capabilities. Let's take a brief look at the technologies we will be using in this post:  - [Bun](https://bun.sh/), an all-in-one JavaScript/TypeScript runtime and toolkit that reached 1.0 a month ago, stands out for speed and efficiency, making it a perfect choice for high-performance applications. - [ElysiaJS](https://elysiajs.com/) is a TypeScript framework supercharged by Bun with end-to-end type safety and outstanding developer experience. - Last but not least, [Dragonfly](https://github.com/dragonflydb/dragonfly), our high-throughput, multi-threaded in-memory data store, often acts as a robust drop-in replacement for Redis, capable of handling up to 4 million QPS and managing 1TB of workload on a single machine.  The code snippets provided throughout this blog post can be found in the [dragonfly-examples](https://github.com/dragonflydb/dragonfly-examples/tree/main/ad-server-cache-bun) repository. We strongly encourage you to clone this repository and follow along with the provided code examples as you read through this blog post. Engaging with the code firsthand is an excellent way to get your hands dirty and gain practical experience with the concepts and technologies we are covering.  ---  ## Ad Serving Functionalities  In this section, we will delve into a sample architecture, showcasing the practical application of Dragonfly in the context of an ad server. Within an ad-serving platform, two fundamental and commonly utilized functionalities include:  - Ad Metadata Management - Ad User Preference Management  We will explore each of these in detail below.  ### Ad Metadata Management  Effectively managing a diverse array of advertisements is a critical requirement for an ad-serving platform. This entails maintaining comprehensive details for each advertisement, including elements such as the ad title, description, image URL, click URL, and more. The system must be agile, swiftly incorporating new ads, updating existing entries, and retrieving ads when they are requested for display. The `Hash` data type that Dragonfly supports is a perfect candidate for this.  ```shell dragonfly$> HGETALL ad:metadata:1 1) ""id"" 2) ""1"" 3) ""title"" 4) ""Dragonfly - a data store built for modern workloads"" 5) ""category"" 6) ""technology"" 7) ""clickURL"" 8) ""https://www.dragonflydb.io/"" 9) ""imageURL"" 10) ""https://www.dragonflydb.io/blog"" ```  ### Ad User Preference Management  Ad prioritization tailored to user preferences not only enhances the overall user experience but also significantly boosts ad effectiveness, driving higher engagement and conversion rates. By serving ads that align with user preferences, ad platforms can maximize their value for both advertisers and users. Let's assume we categorize ads into various categories (such as `sports`, `technology`, `fashion`, etc.), and we also track the categories each user is interested in. Both ad categories and user preferences can be efficiently stored using the `Set` data type that Dragonfly supports, with each ad category having a category-set, and each user having a preference-set. Upon a user's visit, we can retrieve their preferences, search for corresponding ads for each category, and subsequently display ads that align with the user's preferences.  ```shell dragonfly$> SMEMBERS ad:category:technology 1) ""1"" 2) ""2"" ```  ```shell dragonfly$> SMEMBERS ad:user_preference:1 1) ""sports"" 2) ""technology"" ```  As shown above, the ad category `technology` has two ads with IDs `1` and `2`. And the user with ID `1` has two preferences: `sports` and `technology`.  ---  ## Run Dragonfly & Ad Server Application  ### 1. Prerequisites  - Make sure [Docker](https://www.docker.com/products/docker-desktop/) is installed and running locally, which will be used to run Dragonfly. - Make sure [Bun](https://bun.sh/) is installed locally. We will be using Bun to run our TypeScript application.  ### 2. Start Dragonfly  First of all, let's make sure that we have Dragonfly running locally so that it is easier to run the sample application. There are a few ways to [get started with Dragonfly](https://www.dragonflydb.io/docs/getting-started). For this blog post, we will be using Docker to run Dragonfly with just one command:  ```shell docker run -p 6379:6379 --ulimit memlock=-1 docker.dragonflydb.io/dragonflydb/dragonfly ```  Upon successful execution, you should see Dragonfly outputting logs similar to the following:  ```text I20231024 15:43:44.752050     1 init.cc:70] dragonfly running in opt mode. I20231024 15:43:44.752230     1 dfly_main.cc:798] Starting dragonfly df-v1.11.0-c6f8f3882a276f6016042016c94401242d9c5365 W20231024 15:43:44.752424     1 dfly_main.cc:837] SWAP is enabled. Consider disabling it when running Dragonfly. I20231024 15:43:44.752456     1 dfly_main.cc:842] maxmemory has not been specified. Deciding myself.... I20231024 15:43:44.752461     1 dfly_main.cc:851] Found 6.58GiB available memory. Setting maxmemory to 5.26GiB I20231024 15:43:44.758332     9 uring_proactor.cc:157] IORing with 1024 entries, allocated 102720 bytes, cq_entries is 2048 I20231024 15:43:44.782545     1 proactor_pool.cc:147] Running 5 io threads I20231024 15:43:45.196280     1 snapshot_storage.cc:112] Load snapshot: Searching for snapshot in directory: ""/data"" W20231024 15:43:45.196475     1 server_family.cc:466] Load snapshot: No snapshot found I20231024 15:43:45.207091    11 listener_interface.cc:83] sock[13] AcceptServer - listening on port 6379 ```  ### 3. Clone the Example Repository  As previously mentioned, all the code examples featured in this post are accessible in the [dragonfly-examples](https://github.com/dragonflydb/dragonfly-examples) repository. Clone the repository to your local machine using the command provided below. Once the repository is cloned, proceed by navigating to the `ad-server-cache-bun` subdirectory, where you'll find all the code snippets used in this blog post.  ```shell git clone git@github.com:dragonflydb/dragonfly-examples.git cd dragonfly-examples/ad-server-cache-bun ```  ### 4. Install Dependencies & Run the Application  Within the `dragonfly-examples/ad-server-cache-bun` directory, use Bun to install the dependencies for the real-time ad server application. As shown below, Bun will install the dependencies listed in the `package.json` file, including ElysiaJS and ioredis.  ```shell bun install # bun install v1.0.6 (969da088) #  + bun-types@1.0.7 #  + @sinclair/typebox@0.31.18 #  + elysia@0.7.17 #  + ioredis@5.3.2 # #  21 packages installed [38.00ms] ```  Then, use Bun to run the application:  ```shell bun dev # $ bun run --watch src/index.ts # Ad server API is running at localhost:3888 ```  ### 5. Interact with the Ad Server API  Now that the ad server API is running, we can interact with it using `curl` or a similar tool. For instance, we can create ads with the following requests:  ```shell curl --request POST \ --url http://localhost:3888/ads \ --header 'Content-Type: application/json' \ --data '{ ""id"": ""1"", ""title"": ""Dragonfly: An In-Memory Data Store Built for Modern Workloads"", ""category"": ""technology"", ""clickURL"": ""https://www.dragonflydb.io"", ""imageURL"": ""https://www.dragonflydb.io/blog"" }'  curl --request POST \ --url http://localhost:3888/ads \ --header 'Content-Type: application/json' \ --data '{ ""id"": ""2"", ""title"": ""Dragonfly Cloud: Fully Managed Dragonfly Service"", ""category"": ""technology"", ""clickURL"": ""https://www.dragonflydb.io/cloud"", ""imageURL"": ""https://www.dragonflydb.io/blog"" }' ```  Similarly, we can create or update user preferences with the following request:  ```shell curl --request POST \ --url http://localhost:3888/ads/user_preferences \ --header 'Content-Type: application/json' \ --data '{ ""userId"": ""1"", ""categories"": [ ""sports"", ""technology"" ] }' ```  Finally, we can retrieve ads for a specific user with the following request. Since the user with ID `1` has two preferences, `sports` and `technology`, we expect to see both `technology` ads created above:  ```shell curl --request GET \ --url http://localhost:3888/ads/user_preferences/1 ```  ```json [ { ""id"": ""1"", ""title"": ""Dragonfly: An In-Memory Data Store Built for Modern Workloads"", ""category"": ""technology"", ""clickURL"": ""https://www.dragonflydb.io"", ""imageURL"": ""https://www.dragonflydb.io/blog"" }, { ""id"": ""2"", ""title"": ""Dragonfly Cloud: Fully Managed Dragonfly Service"", ""category"": ""technology"", ""clickURL"": ""https://www.dragonflydb.io/cloud"", ""imageURL"": ""https://www.dragonflydb.io/blog"" } ] ```  Please note that while the example ad server API provided does not adhere strictly to the RESTful style, it serves sufficiently for the purposes of our demonstration.  ---  ## Implementation Details  Now that we have the ad server API up and running, let's take a look at some key places in the codebase.  ### 1. Client Initialization  Dragonfly is fully compatible with the [Redis RESP protocol](https://redis.io/docs/reference/protocol-spec/), which is supported by many client libraries and SDKs. In this example, we use the [ioredis](https://github.com/redis/ioredis) package to interact with Dragonfly. TypeScript allows import-aliasing. Although this is not required, it can be helpful to make the code clearer as we are emphasizing the connection to Dragonfly:  ```typescript import {Redis as Dragonfly} from 'ioredis';  const client = new Dragonfly(); ```  Also, it is notable that we are not passing any connection parameters to the client constructor. This is because we are running Dragonfly locally using Docker, as explained above, and the default connection address `localhost:6379` is sufficient.  ### 2. Key Name Management  Just like Redis, Dragonfly is a key-value in-memory data store. Data is stored in Dragonfly as key-value pairs, where the key is a `String`, and the value can be one of the supported data types (such as `String`, `Hash`, `Set`, `Sorted-Set`, etc.). Key-value data stores are often categorized as NoSQL databases. Millions or even billions of keys can be stored in Dragonfly, and thus it is good practice to use a naming convention for keys within your application. A common practice is to use semicolon-separated key segments, where each segment represents a level of hierarchy:  ```typescript export class AdMetadataStore { private client: Dragonfly; static readonly AD_PREFIX = ""ad""; static readonly AD_METADATA_PREFIX = `${AdMetadataStore.AD_PREFIX}:metadata`; static readonly AD_CATEGORY_PREFIX = `${AdMetadataStore.AD_PREFIX}:category`; static readonly AD_USER_PREFERENCE_PREFIX = `${AdMetadataStore.AD_PREFIX}:user_preference`;  // ...  // Sample: 'ad:metadata:1' private metadataKey(metadataId: string): string { return `${AdMetadataStore.AD_METADATA_PREFIX}:${metadataId}`; }  // Sample: 'ad:category:technology' private categoryKey(metadataCategory: string): string { return `${AdMetadataStore.AD_CATEGORY_PREFIX}:${metadataCategory}`; }  // Sample: 'ad:user_preference:1' private userPreferenceKey(userId: string): string { return `${AdMetadataStore.AD_USER_PREFERENCE_PREFIX}:${userId}`; }  // ... } ```  Combining key prefixes and helper methods, we can easily construct keys for different purposes. And whenever a value needs to be accessed (i.e., by `userId`), we are confident that the key is constructed correctly.  ### 3. Dragonfly Compatibility  As previously mentioned, Dragonfly is fully wire-protocol compatible and supports 220+ Redis commands. The ioredis package we are using in this example provides strongly-typed methods for each of the supported commands. If a command is supported by Dragonfly, then we can use the corresponding ioredis method directly. For instance, in the `createAdMetadata` method below, we use both the `HMSET` command and the `SADD` command. By doing so, a piece of ad metadata information is stored as a hash value, and its ID is added to the corresponding category-set.  ```typescript export class AdMetadataStore { // ...  async createAdMetadata(metadata: AdMetadata): Promise<void> { await this.client.hmset(this.metadataKey(metadata.id), metadata); await this.client.sadd(this.categoryKey(metadata.category), metadata.id); }  // ... } ```  ### 4. End-to-End Type Safety  The rest of the code example should be straightforward to follow, as explained in the [Ad Serving Functionalities](#ad-serving-functionalities) section above. It is worth mentioning that Bun, ElysiaJS, and ioredis provide a great developer experience along with Dragonfly, and we are able to leverage the power of these tools to ensure end-to-end type safety throughout the codebase. For instance, each command (like `HMSET` or `SADD`) is already strongly-typed as shown above.  Another example can be illustrated by the handler for the `POST /ads` endpoint below. We are passing `context.body`, which is originally of type `unknown`, to the `createAdMetadata` method. Since we also specified an input schema hook `{ body: AdMetadata }`, ElysiaJS will magically and automatically validate the input and infer the type of `context.body` as `AdMetadata`.  ```typescript const app = new Elysia() .decorate(""adMetadataCache"", new AdMetadataStore(client)) .post( ""/ads"", async (context) => { await context.adMetadataCache.createAdMetadata(context.body); context.set.status = 201; return; }, { body: AdMetadata } // Input Schema Hook ) .listen(3888); ```  ---  ## Conclusion  In this blog post, we guided you through the process of building a robust ad-serving application, demonstrating the seamless integration and high compatibility of Dragonfly within our tech stack.  While we have focused on the practical aspects of setting up and utilizing Dragonfly, it's important to note that we've only scratched the surface of its capabilities. Dragonfly offers plenty of advantages, most notably its exceptional performance:  - If you are interested in how Dragonfly can handle BigKeys smoothly (which is likely to happen in our ad-serving scenario as well), check out our handling BigKeys with Dragonfly [blog post](https://www.dragonflydb.io/blog/fearlessly-handling-bigkeys-with-dragonfly). - You can also read more about the detailed 4 million QPS benchmark results in the scalability and performance [blog post](https://www.dragonflydb.io/blog/scaling-performance-redis-vs-dragonfly). - Finally, if you have encountered problems with Redis snapshotting, check out how Dragonfly tackles them with its balanced snapshotting algorithm [here](https://www.dragonflydb.io/blog/balanced-vs-unbalanced).  Happy coding, and until our paths cross again in the very near future, let's keep building amazing things!","[0.005565090570598841, 0.014760353602468967, -0.015775391831994057, -0.024050777778029442, -0.008324726484715939, 0.005667299497872591, -0.02918236143887043, -0.0005899030948057771, -0.014703962951898575, -0.029746271669864655, 0.015507535077631474, -0.013865146785974503, 0.0094948410987854, -0.009960067458450794, 0.0030979826115071774, 0.0017049477901309729, 0.014104808680713177, -0.01092576328665018, 0.02164006046950817, -0.006573080085217953, -0.012095877900719643, -0.01225095335394144, -0.00830357987433672, 0.00612547667697072, -0.021146638318896294, 0.008768806234002113, 0.02144269272685051, -0.012962889857590199, -0.0009868431370705366, -0.000166860205354169, 0.022443633526563644, -0.006019743159413338, -0.004585296381264925, 0.006950195413082838, -0.004335061181336641, -0.017156973481178284, 0.004765042569488287, 0.006037365645170212, 0.020032916218042374, -0.00153136916924268, 0.026405103504657745, -0.01920114830136299, -0.0015075791161507368, -0.0239097997546196, -0.02013160102069378, 0.02281017415225506, -0.0030926959589123726, -0.015803588554263115, 0.003039829432964325, -0.0018785264110192657, 0.008677170611917973, 0.015803588554263115, -0.029774468392133713, -0.007059453055262566, -0.00841636210680008, 0.021259421482682228, 0.0025534566957503557, 0.015408851206302643, 0.020906977355480194, -0.014133003540337086, 0.003270680084824562, 0.02255641482770443, -0.016734041273593903, -0.0019631129689514637, 0.0001659790868870914, -0.02035716362297535, -0.0073942746967077255, -0.013484506867825985, 0.0025657922960817814, -0.017072387039661407, 0.038120340555906296, 0.02097746543586254, -0.0012159317266196012, -0.03245304152369499, 0.0192293431609869, -0.014562985859811306, 0.000912829942535609, 0.011539015918970108, 0.016734041273593903, -0.00041808668174780905, 0.0053818197920918465, -0.009833186864852905, -0.017791371792554855, 0.03070491924881935, 0.006259405054152012, 0.018425771966576576, -0.012652738951146603, 0.004546527285128832, -0.0009339765529148281, 0.012236854992806911, 0.0038099195808172226, 0.003124415874481201, -0.006569555960595608, 0.02385340817272663, 0.0027296787593513727, 0.0059563033282756805, 0.0032160512637346983, 0.01172933541238308, -0.015479340218007565, -0.002428339095786214, -0.01946900598704815, 0.008888637647032738, -0.026405103504657745, -0.01681862771511078, -0.03146619722247124, -0.006929048802703619, 0.01338582206517458, -0.002500590169802308, 0.014182345941662788, 0.010587417520582676, -0.011870313435792923, 0.03377823159098625, 0.017749078571796417, -0.0152678731828928, -0.0032601067796349525, 0.009586476720869541, 0.025516944006085396, -0.012222757562994957, -0.0007744956528767943, -0.004454892128705978, 0.015084602870047092, 0.03513161465525627, 0.00013602135004475713, -0.015451144427061081, 0.018242500722408295, 0.0060126944445073605, 0.00827538501471281, -0.024642882868647575, -0.0010749541688710451, -0.014238736592233181, 0.004014336969703436, 0.006255880929529667, 0.00963581819087267, -0.006439151708036661, -0.01882050931453705, -0.0032618690747767687, -0.01457708328962326, -0.005970401223748922, -0.011348696425557137, -0.015535730868577957, 0.001185973989777267, 0.02650378830730915, -0.012335539795458317, -0.020244382321834564, -0.008310629054903984, 0.041024480015039444, 0.010361853055655956, 0.0006427697371691465, -0.009325668215751648, -0.00025662328698672354, -0.006925524212419987, -0.023317694664001465, -0.018383478745818138, -0.00018503308820072562, 0.010911665856838226, 0.01515509095042944, -0.02251412160694599, 0.004187034443020821, -0.005339526571333408, 0.002153432695195079, 0.02940792590379715, 0.013110916130244732, -0.005889338906854391, -0.010108093731105328, 0.02584119327366352, 0.026616569608449936, 0.013132062740623951, -0.02302164025604725, -0.0008674527634866536, -0.0176926888525486, -0.0007890339475125074, 0.029464317485690117, -0.032142892479896545, 0.008663073182106018, -0.006766924634575844, 0.010411195456981659, 0.010904616676270962, 0.012335539795458317, -0.0073942746967077255, -0.044774483889341354, 0.021992504596710205, -0.013984977267682552, 0.022725587710738182, 0.02544645592570305, -0.016846822574734688, 0.007873598486185074, -0.02564382366836071, 0.0005806514527648687, -0.006044414360076189, -0.022218069061636925, -0.0037605774123221636, 0.026348711922764778, -0.002546407748013735, -0.025122206658124924, -0.6094743609428406, -0.010982154868543148, 0.025319576263427734, -0.02854796312749386, -0.029013188555836678, -0.007655083201825619, 0.005646152421832085, 0.014859038405120373, 0.010707248002290726, 0.002983438316732645, -0.008423411287367344, -0.009353863075375557, 0.015972761437296867, 0.0017349055269733071, -0.03146619722247124, -0.009889578446745872, 0.01590227335691452, -0.005762459244579077, 0.009438449516892433, -0.006396858487278223, -0.03755643218755722, 0.019412614405155182, -0.002472394611686468, 0.0033376445062458515, 0.007908843457698822, 0.0007026852108538151, -0.004148265812546015, 0.015507535077631474, 0.0022838369477540255, 0.04226508364081383, -0.041701171547174454, 0.03321431949734688, 0.02345867082476616, 0.01237078383564949, 0.058026377111673355, 0.001860904274508357, -0.01304042711853981, 0.030451159924268723, 0.0074718124233186245, 0.052500054240226746, 0.00592105882242322, -0.014844940975308418, 0.03270680084824562, 0.015972761437296867, 0.00607965886592865, 0.013209600932896137, 0.033496275544166565, -0.027532923966646194, -0.005124535411596298, 0.00734493276104331, -0.0016379833687096834, -0.029351534321904182, -0.005737788043916225, -0.016452085226774216, -0.010679053142666817, -0.011158376932144165, 0.019750960171222687, -0.0176926888525486, 0.003108555916696787, -0.0005057571106590331, 0.024262243881821632, 0.0078383544459939, -0.028026346117258072, -0.022048896178603172, -0.01966637372970581, 0.004338585305958986, 0.007337883580476046, -0.01427398156374693, 0.012349637225270271, -0.025545140728354454, 0.014436105266213417, 0.013829901814460754, -0.00014835689216852188, -0.014619376510381699, -0.004955362528562546, 0.01700189709663391, 0.037669211626052856, 0.008606682531535625, -0.0020124551374465227, 0.01749531924724579, 0.02632051706314087, 0.012497663497924805, -0.021259421482682228, -0.013047476299107075, 0.042772602289915085, 0.0006119308527559042, -0.018496260046958923, -0.009128299541771412, 0.012377833016216755, 0.006492018233984709, 0.01722746156156063, 0.030845897272229195, -0.02234494872391224, -0.027998149394989014, 0.03312973305583, 0.03772560507059097, -0.010552172549068928, -0.0035896420013159513, 0.004060154780745506, -0.012666836380958557, -0.0031438004225492477, -0.012836010195314884, -0.024008484557271004, 0.0031614224426448345, 0.043195534497499466, -0.008465704508125782, -0.029266947880387306, 0.01655077002942562, 0.03177634999155998, -0.02252821996808052, -0.00032050375011749566, -0.011926704086363316, -0.025770703330636024, -0.011052642948925495, 0.02608085423707962, -0.030366573482751846, 0.017791371792554855, -0.012420126236975193, 0.03597748279571533, -0.02255641482770443, 0.003138513769954443, -0.004000239074230194, 0.009346814826130867, -0.004680456127971411, 0.00905781053006649, -0.004285718780010939, 0.009600574150681496, -0.018919192254543304, -0.0038804083596915007, 0.028449278324842453, 0.0038804083596915007, -0.008606682531535625, 0.01016448438167572, -0.004014336969703436, 0.026658862829208374, -0.016635356470942497, 0.0023825212847441435, -0.00757754547521472, 0.027969954535365105, -0.03555455058813095, -0.0007066502002999187, -0.0023966191802173853, -0.0024900168646126986, -0.0061325253918766975, -0.02055453322827816, 0.008536193519830704, -0.010918715037405491, 0.006558982655405998, 0.009262227453291416, 0.008811099454760551, -0.009093054570257664, -0.012286197394132614, 0.00389098166488111, 0.020413555204868317, -0.013865146785974503, -0.0028036918956786394, -0.00795113667845726, -0.017565807327628136, -0.001250295084901154, -0.00306273833848536, 0.01569080539047718, 0.024149462580680847, -0.01084822602570057, -0.011863264255225658, -0.04525380581617355, -0.016705844551324844, -0.0009533609845675528, 0.008705366402864456, -0.009917773306369781, -0.0249671321362257, 0.0045993938110768795, -0.015028211288154125, -0.003668941790238023, 0.018707726150751114, 0.01660715974867344, 0.00463463831692934, -0.031748153269290924, 0.007457714527845383, 0.009988262318074703, -0.00038702753954567015, 0.0004815266001969576, 0.012793716974556446, 0.009734502993524075, -0.017579905688762665, 0.052020732313394547, 0.0011930229375138879, 0.016494378447532654, 0.014548887498676777, 0.00769032770767808, 0.004007288254797459, 0.020159795880317688, 0.024882545694708824, -0.01725565828382969, -0.021160736680030823, -0.025023523718118668, -0.021583668887615204, 0.0019278685795143247, 0.0006070847739465535, -0.011651798151433468, 0.02472746931016445, 0.018002837896347046, -0.009967115707695484, 0.02056863158941269, -0.005818850360810757, 0.011961949057877064, -0.018172012642025948, -0.0018062754534184933, -0.0066858623176813126, 0.029097774997353554, -0.018848704174160957, 0.006449725013226271, 0.005431161727756262, -0.007151088211685419, -0.01303337886929512, 0.002800167538225651, 0.026193637400865555, -0.014302176423370838, -0.008218993432819843, -0.0239097997546196, -0.002176341600716114, -0.004292767960578203, -0.011574260890483856, -0.0043209632858633995, -0.00993187166750431, 0.006026792339980602, 0.004514807369560003, -0.0018344708951190114, 0.005790654569864273, 0.012723227962851524, -0.03530079126358032, 0.0005445259739644825, 0.0446053110063076, -0.004451367538422346, -0.004088350106030703, -0.0035543974954634905, 0.013146160170435905, 0.04246244952082634, -0.01790415495634079, 0.027293263003230095, -0.031043266877532005, 0.019046073779463768, 0.005318379495292902, 0.015775391831994057, -0.03293236717581749, 0.01617012917995453, 0.011454429477453232, 0.009593524970114231, 0.017579905688762665, -0.022725587710738182, -0.0011498484527692199, -0.01765039563179016, 0.0011604218743741512, 0.006766924634575844, -0.009741552174091339, 0.028576157987117767, -0.023782920092344284, 0.016226520761847496, 0.0019402041798457503, 0.02656017802655697, 0.01927163638174534, 0.011250011622905731, 0.0005555398529395461, 0.021992504596710205, -0.010256120003759861, 0.008155553601682186, -0.00196487526409328, -0.004849629011005163, -0.02874533087015152, -0.003468048758804798, -0.007422470487654209, -0.004158839117735624, -0.027476532384753227, -0.02584119327366352, -0.028829917311668396, 0.0305357463657856, 0.003616075264289975, 0.0041658878326416016, 0.0212453231215477, -0.01183506939560175, 0.007901794277131557, -0.01193375326693058, -0.029041383415460587, 0.009797942824661732, -0.01139803882688284, 0.000284378242213279, -0.04336470738053322, 0.0027807829901576042, 0.005646152421832085, 0.005938681308180094, -0.015169189311563969, -0.006421529222279787, 0.0010203253477811813, 0.004056630190461874, 0.0078383544459939, -0.011327549815177917, -0.017340244725346565, 0.055150434374809265, 0.0033887489698827267, -0.010538075119256973, 0.0015392991481348872, 0.028844015672802925, 0.0313534177839756, -0.026672961190342903, -0.02427634224295616, 0.04446433484554291, -0.022937053814530373, -0.022443633526563644, -0.018693629652261734, -0.0006877063424326479, -0.004433745518326759, -0.016029153019189835, -0.021273517981171608, -0.04375944659113884, -0.014774451963603497, 0.00827538501471281, 0.006269978359341621, -0.024910740554332733, 0.015775391831994057, 0.038345906883478165, 0.012554055079817772, -0.027561118826270103, 0.0035896420013159513, -0.010319559834897518, 0.02190791815519333, 0.056729383766651154, -0.008190798573195934, -0.0033235468436032534, -0.003616075264289975, -0.013569093309342861, -0.00871241558343172, -0.037500038743019104, -0.0015639702323824167, 0.027955856174230576, 0.0018979108426719904, -0.00797228328883648, 0.012539956718683243, -0.001959588611498475, 0.007062977645546198, 0.014020221307873726, 0.006121952086687088, -0.027800781652331352, -0.02099156379699707, 0.008359971456229687, -0.012236854992806911, 0.006044414360076189, 0.004638162907212973, 0.017608100548386574, 0.013202551752328873, 0.03411657735705376, 0.025728410109877586, 0.008959125727415085, 0.013160258531570435, 0.0069396221078932285, -0.012871254235506058, -0.006943146698176861, -0.008345873095095158, 0.00464521162211895, 0.019624080508947372, 0.0033517424017190933, 0.027955856174230576, -0.0022626903373748064, 0.004592345096170902, -0.004070728085935116, 0.005871716886758804, 0.020822390913963318, -0.0016538434429094195, 0.01437266543507576, 0.002870656317099929, 0.02187972329556942, -0.009593524970114231, -0.004077776800841093, -0.004127119202166796, -0.005980974528938532, 0.014816745184361935, 0.03468048945069313, 0.010636758990585804, -0.02412126585841179, -0.013110916130244732, 0.007225101813673973, 0.00420818105340004, 0.02103385701775551, -0.009071907959878445, -0.00907895714044571, -0.0455639585852623, -0.009135347791016102, -0.013674826361238956, -0.02343047596514225, -0.006886755581945181, -0.026419201865792274, 0.0013181405374780297, -0.026588374748826027, 0.0027737340424209833, -0.0036336975172162056, -0.0012115262215957046, -0.027138186618685722, -0.03406018763780594, -0.028040442615747452, -0.0022996969055384398, 0.011849166825413704, 0.008204896003007889, 0.031719960272312164, -0.0016247667372226715, 0.022500023245811462, -0.001502292463555932, 0.002675049938261509, -0.01989193819463253, -0.0021886772010475397, -0.045648545026779175, -0.021118443459272385, -0.01920114830136299, 0.01812971942126751, -0.010354803875088692, -0.015324264764785767, -0.0006017981213517487, 0.006904377602040768, 0.00816260278224945, 0.015211482532322407, -0.009988262318074703, 0.0069960132241249084, 0.0014159437268972397, 0.022189872339367867, 0.006551933474838734, 0.006432102527469397, -0.03093048371374607, 0.019384419545531273, 0.01158835832029581, -0.008113260380923748, -0.03276319429278374, -0.004172936547547579, -0.012321441434323788, 0.003954421728849411, 0.0011965472949668765, -0.010439391247928143, -0.021837430074810982, -0.008085064589977264, 0.0030997449066489935, 0.0041447412222623825, 0.017114680260419846, 0.03355266898870468, 0.008691268973052502, -0.0258552897721529, 0.01942671276628971, -0.011574260890483856, 0.0015454668318852782, 0.03713349997997284, -0.021104345098137856, 0.046297043561935425, 0.0029587673489004374, -0.0025939876213669777, 0.01791825145483017, -0.004768567159771919, -0.01726975478231907, -0.01812971942126751, -0.003623124212026596, 0.015281971544027328, 0.014859038405120373, -0.007168710697442293, -0.03552635386586189, -0.03597748279571533, -0.01250471267849207, -0.017777275294065475, -0.009692209772765636, -0.008754708804190159, -0.0021393350325524807, -0.03515981137752533, -0.006735204719007015, 0.0019472530111670494, -0.01882050931453705, -0.016409792006015778, -0.03451131656765938, -0.01282896101474762, 0.02474156767129898, 0.015310166403651237, 0.011306403204798698, -0.014266932383179665, -0.024614688009023666, 0.0028336497489362955, -0.01676223613321781, -0.00689732888713479, -0.009642867371439934, 0.008014576509594917, 0.007323786150664091, 0.03157898038625717, 0.03693613037467003, 0.03645680472254753, 0.010820030234754086, 0.017720883712172508, 0.004511282779276371, 0.006139574106782675, -0.0027684473898261786, 0.003771150717511773, -0.006005645263940096, -0.00829653162509203, -0.018609043210744858, 0.01722746156156063, 0.030451159924268723, 0.0015357746742665768, 0.001480264705605805, -0.022626902908086777, -0.0019525396637618542, -0.026799840852618217, -0.018905095756053925, -0.03730267286300659, -0.04443613812327385, -0.031522590667009354, 0.028336497023701668, -0.010122191160917282, 0.007366079371422529, -0.020427653566002846, -0.015296068973839283, 0.023740626871585846, -0.017128776758909225, 0.02739194594323635, -0.0072955903597176075, 0.012018339708447456, -0.026024464517831802, -0.004937740042805672, 0.014520691707730293, 0.006083182990550995, -0.016311107203364372, -0.012173415161669254, -0.02764570526778698, -0.029577098786830902, 0.019158855080604553, 0.02782897651195526, 0.0027702096849679947, 0.012441272847354412, 0.020681412890553474, -0.002962291706353426, -0.002812502905726433, -0.010820030234754086, 0.016015054658055305, 0.011778677813708782, -0.00652726273983717, -0.023162618279457092, -0.028562059625983238, -0.022020699456334114, -0.023712432011961937, 0.00585409440100193, 0.028181420639157295, 0.004564149770885706, 0.029351534321904182, 0.0070206839591264725, 0.00036720256321132183, -0.008500948548316956, -0.022838370874524117, 0.033270712941884995, -0.002555218990892172, 0.015803588554263115, 0.03234025835990906, 0.004719224758446217, -0.01680452935397625, -0.03335529938340187, 0.01903197541832924, -0.011870313435792923, 0.02699720859527588, 0.03420116379857063, -0.025488749146461487, -0.004715700633823872, -0.0031843313481658697, -0.004687504842877388, -0.016635356470942497, -0.010989203117787838, 0.017551710829138756, 0.00024098357243929058, -0.0004696316027548164, -0.01880641095340252, -0.010608564130961895, 0.011087887920439243, 0.018284793943166733, -0.043421097099781036, 0.017847763374447823, 0.012067682109773159, -0.005875241011381149, -0.001642388990148902, 0.022260362282395363, 0.01748122088611126, 0.034821465611457825, -0.005565090570598841, 0.01989193819463253, 0.0037112352438271046, 0.011214767582714558, -0.02187972329556942, -0.00025243801064789295, 0.01657896488904953, 0.019750960171222687, -0.020878782495856285, -0.0026027988642454147, 0.01791825145483017, 0.01791825145483017, 0.013604337349534035, -0.011503771878778934, 0.008571437560021877, 0.027969954535365105, -0.009015517309308052, -0.011856216005980968, 0.0018133242847397923, -0.003926225937902927, 0.012032438069581985, -0.01172933541238308, -0.019807351753115654, 0.002891802927479148, -0.007330834865570068, -0.013414017856121063, 0.007711474318057299, -0.023712432011961937, -0.0076480344869196415, -0.013315333984792233, -0.015028211288154125, -0.018693629652261734, -0.01946900598704815, 0.008169651962816715, -0.002470632316544652, -0.04559215530753136, -0.011990143917500973, 0.006062036380171776, -0.01836938038468361, 0.027575217187404633, 0.004352683201432228, -0.022189872339367867, -0.0072955903597176075, 0.03047935664653778, -0.015620317310094833, 0.021118443459272385, 0.015465241856873035, -0.010432342067360878, -0.036823347210884094, 0.018228402361273766, -0.015747196972370148, -0.004352683201432228, 0.009480742737650871, -0.01770678535103798, -0.029351534321904182, -0.014506594277918339, 0.0008458655793219805, 0.012871254235506058, -0.010904616676270962, -0.008888637647032738, 0.0327913872897625, 0.01570490375161171, 0.0046205404214560986, -0.012984036467969418, -0.012427174486219883, 0.004014336969703436, -0.019384419545531273, -0.03510342165827751, -0.0005850570159964263, -0.0018661909271031618, 0.007873598486185074, 0.010213826783001423, -0.000659510784316808, -0.014873135834932327, -0.019313929602503777, -0.030338378623127937, -0.023994386196136475, 0.0313534177839756, -0.010305462405085564, 0.008486851118505001, -0.006432102527469397, -0.018947388976812363, -0.022683294489979744, 0.022641001269221306, -0.006269978359341621, 0.02324720472097397, 0.01900378055870533, -0.0011172473896294832, 0.0017507654847577214, 0.018933290615677834, -0.013258942402899265, -0.006224160548299551, -0.01636749878525734, -0.02233085036277771, -0.05125945433974266, -0.009826138615608215, -0.02343047596514225, 0.06016923859715462, 0.019144756719470024, -0.012617494910955429, -0.01324484497308731, -0.0003075073764193803, -0.03606206923723221, -0.02365604043006897, -0.006816266570240259, 0.006735204719007015, 0.015817686915397644, 0.012857156805694103, 0.04601508751511574, 0.0005973925581201911, 0.014760353602468967, 0.0055016507394611835, -0.033947404474020004, -0.01655077002942562, -0.006615373771637678, -0.019511299207806587, 0.022048896178603172, 0.027124088257551193, -0.04550756886601448, -0.023359987884759903, -0.010016458109021187, -0.016409792006015778, -0.0045007094740867615, 0.03583650290966034, -0.02608085423707962, 0.0071933818981051445, -0.004007288254797459, -0.010721346363425255, -0.001164827379398048, -0.008381118066608906, 0.04088350385427475, -0.02849157154560089, 0.01071429718285799, 0.02213348262012005, -0.03028198704123497, -0.012462419457733631, -0.014238736592233181, 0.018947388976812363, -0.008705366402864456, -0.012229805812239647, 0.002030077390372753, 0.021625962108373642, -0.008451607078313828, -0.008909784257411957, 0.01615603268146515, -0.011616554111242294, 0.01380170602351427, 0.030986875295639038, -0.00646029831841588, -0.00960762333124876, -0.014788549393415451, 0.004134167917072773, -0.03383462131023407, 0.008240140043199062, -0.01612783595919609, -0.019609984010457993, -0.001403608126565814, -0.022471828386187553, 0.022485926747322083, 0.0036477951798588037, -0.01147557608783245, -0.007041831035166979, -0.017509417608380318, -0.017114680260419846, 0.011228865012526512, 0.0010326608316972852, -0.02166825532913208, -0.013921537436544895, 0.035949286073446274, 0.0010088708950206637, -0.02385340817272663, -0.0003061857132706791, 0.026193637400865555, -0.020075209438800812, -0.011066741310060024, 0.024868447333574295, -0.006354565266519785, -0.030169205740094185, 0.011524918489158154, 0.00336936442181468, -0.0039015549700707197, -0.01677633449435234, 0.213270902633667, -0.002527023432776332, 0.027800781652331352, 0.03930455446243286, -0.014020221307873726, 0.027476532384753227, 0.0007264751475304365, 0.011651798151433468, 0.0016952555160969496, 0.013562044128775597, 0.008085064589977264, 0.009910725057125092, -0.010904616676270962, -0.008634877391159534, 0.020681412890553474, -0.012744374573230743, -0.03555455058813095, -0.039671093225479126, -0.0196381788700819, -0.002366661326959729, -0.0074718124233186245, -0.010679053142666817, -0.049849677830934525, 0.0033852243795990944, 0.04026320204138756, -0.023923898115754128, -0.0014362091897055507, -0.016734041273593903, 0.02498123049736023, -0.0016864445060491562, -0.020653218030929565, -0.011546065099537373, 0.0021393350325524807, 0.038571469485759735, -0.010855274274945259, -0.011524918489158154, 0.025897584855556488, -0.009600574150681496, 0.0070171598345041275, 0.009100103750824928, 0.003515628632158041, -0.012406027875840664, 0.007422470487654209, 0.002414241200312972, 0.004550051875412464, -0.022175775840878487, -0.012525859288871288, -0.01969457045197487, -0.00426457216963172, 0.016198325902223587, -0.01791825145483017, -0.00020331612904556096, 0.006224160548299551, 0.007366079371422529, -0.0018221354112029076, -0.01573309861123562, 0.0065096402540802956, 0.0236701387912035, 0.006305222865194082, 0.02915416657924652, -0.004719224758446217, 0.0183411855250597, 0.005357148591428995, 0.012095877900719643, -0.020455848425626755, 0.023388182744383812, -0.026405103504657745, 0.022641001269221306, 0.03248123824596405, -0.010664954781532288, -0.019779156893491745, -0.01093986164778471, -0.019736863672733307, 0.016973702237010002, -0.00469102943316102, -0.012342588044703007, 0.012490615248680115, 0.0144643010571599, 0.009128299541771412, 0.02943612076342106, 0.0005665537319146097, -0.008768806234002113, -0.0022591659799218178, 0.004821433685719967, 0.0037817240227013826, -0.015366557985544205, 0.024459611624479294, -0.01880641095340252, -0.033750034868717194, -0.03566733002662659, -0.006999537348747253, -0.012821911834180355, -0.02324720472097397, -0.0004890160053037107, 0.029887249693274498, -0.00873356219381094, 0.0034874333068728447, 0.025108110159635544, -0.0013868670212104917, -0.01900378055870533, -0.02252821996808052, 0.04914478957653046, 0.03851507976651192, 0.003940323833376169, -0.03163537383079529, -0.008670122362673283, -0.03047935664653778, 0.028421083465218544, -0.01615603268146515, 0.00083529221592471, 0.0036583684850484133, -0.03823312371969223, 0.020047014579176903, -0.024022581055760384, -0.006481444928795099, 0.01083412766456604, 0.026898525655269623, -0.015761295333504677, 0.002035364042967558, -0.002588700968772173, -0.008677170611917973, -0.01370302215218544, 0.02145678922533989, 0.009508938528597355, -0.025770703330636024, -0.02495303377509117, -0.03267860785126686, -0.00034473426057957113, 0.0032319112215191126, -0.023092130199074745, 0.009036663919687271, 0.006594227161258459, 0.0002084926381940022, -0.014887234196066856, -0.006640044506639242, 0.01239193044602871, 0.017622198909521103, -0.010953959077596664, -0.009360912255942822, -0.013639582321047783, 0.01570490375161171, 0.01315320935100317, 0.03332710266113281, 0.021076150238513947, 0.009064859710633755, -0.025094011798501015, 0.008839295245707035, 0.005610908381640911, -0.017340244725346565, -0.014422007836401463, -0.024642882868647575, 0.02966168522834778, 0.01140508707612753, -0.00481438497081399, -0.00010264931188430637, 0.0031473247800022364, 0.011073789559304714, -0.01810152269899845, 0.006580129265785217, 0.0035332508850842714, -0.06575194746255875, 0.0028724183794111013, -0.005847045686095953, 0.009417302906513214, -0.011419185437262058, -0.03112785331904888, -0.18090245127677917, 0.00926927663385868, 0.019624080508947372, -0.020286675542593002, 0.03953011706471443, -0.0007097341003827751, 0.017312048003077507, -0.004669882822781801, -0.004430220928043127, -0.00652726273983717, 0.0008837532950565219, -0.015648512169718742, -0.0512312576174736, -0.030620332807302475, 0.010686101391911507, 0.012969939038157463, 0.019328027963638306, 0.008197846822440624, 0.03425755351781845, 0.011468526907265186, 0.03321431949734688, -0.04065793752670288, 0.00010771569213829935, -0.01746712438762188, 0.017354341223835945, -0.008775855414569378, 0.018721824511885643, -0.02166825532913208, 0.00012269456055946648, -0.020949270576238632, -0.018298892304301262, -0.0005299876211211085, 0.024417318403720856, 0.0034204688854515553, 0.015747196972370148, 0.00397556833922863, 0.01660715974867344, 0.006203013937920332, 0.005702543538063765, 0.04531019926071167, 0.0362030453979969, 0.03783838450908661, -0.010220875963568687, 0.017185168340802193, 0.009417302906513214, 0.015634415671229362, -0.020385360345244408, 0.006016219034790993, -0.023388182744383812, 0.003237198106944561, 0.039473727345466614, -0.011341647244989872, -0.009276325814425945, 0.0040672034956514835, 0.03377823159098625, 0.0007172235054895282, 0.0036266485694795847, 0.043449293822050095, 0.015859980136156082, -0.004768567159771919, -0.009276325814425945, -0.015634415671229362, 0.008211945183575153, -0.0044760387390851974, 0.0022133481688797474, -0.015578024089336395, -0.019821450114250183, 0.02008930779993534, -0.015465241856873035, 0.009241080842912197, -0.01992013491690159, 0.0018714775796979666, -0.0006996013107709587, 0.013695972971618176, 0.002077657263725996, 0.017608100548386574, -0.00795113667845726, 0.0010018220636993647, 0.027109991759061813, -0.0009366198792122304, -0.00839521549642086, 0.013977928087115288, -0.025939878076314926, 0.017340244725346565, -0.0032865400426089764, -0.0017666254425421357, 0.0003550873079802841, 0.01704419031739235, -0.012955840677022934, 0.014506594277918339, 0.026799840852618217, -0.033750034868717194, -0.0023895702324807644, -0.008536193519830704, -0.009389108046889305, 0.004426696337759495, 0.016719942912459373, -0.002357850316911936, 0.021781038492918015, 0.015211482532322407, 0.022880664095282555, -0.013759412802755833, -0.019609984010457993, 0.010009408928453922, 0.025714313611388206, 0.010206777602434158, 0.0018168487586081028, 0.014859038405120373, 0.05038539320230484, -0.010122191160917282, -0.013139111921191216, 0.032142892479896545, 0.02412126585841179, 0.03332710266113281, 0.0019331552321091294, 0.031748153269290924, -0.0031490870751440525, -0.0027790209278464317, 0.02035716362297535, -0.03222747892141342, 0.0791730135679245, -0.0025851766113191843, -0.010227924212813377, 0.025037620216608047, 0.013287138193845749, -0.022034797817468643, -0.10584598034620285, -0.016212422400712967, 0.01924344152212143, 0.01050987932831049, -0.005332477390766144, 0.0035085799172520638, 0.002098803874105215, 0.040150418877601624, -0.04392861947417259, 0.030394768342375755, -0.03273499757051468, 0.0020882305689156055, -0.006590702570974827, -0.01018563099205494, 0.005244366358965635, 0.0033182601910084486, 0.013526800088584423, -0.012539956718683243, 0.01927163638174534, 0.030845897272229195, 0.016297010704874992, -0.023035738617181778, -0.010002360679209232, -0.005399441812187433, -0.021752843633294106, 0.004535953979939222, -0.011891460046172142, 0.011750482022762299, 0.008430460467934608, 0.018651336431503296, 0.008233091793954372, -0.005064620170742273, 0.0019243441056460142, -0.005494601558893919, 0.013435164466500282, 7.974045001901686e-05, -0.013103866949677467, 0.006030316464602947, 0.034793268889188766, -0.029351534321904182, 0.0018538553267717361, -0.01721336506307125, 0.019962428137660027, -0.020709607750177383, 0.0001428499526809901, -0.0010555697372183204, -0.008402264676988125, 0.021301714703440666, 0.0038169682957232, -0.007944087497889996, -0.017749078571796417, -0.01677633449435234, 0.0024864922743290663, -0.006058512255549431, 0.035244397819042206, -0.01614193432033062, 0.01468986552208662, -0.004278670065104961, -0.020399458706378937, 0.02169645205140114, 0.01071429718285799, -0.005039948970079422, 0.00010358548752265051, 0.023472769185900688, 0.010291364043951035, 0.0192293431609869, -0.02317671664059162, 0.011694091372191906, -0.0006009169737808406, -0.013963830657303333, -0.008930930867791176, 0.01471806038171053, -0.020399458706378937, 0.0028794673271477222, -0.01681862771511078, -0.0060338410548865795, 0.021358106285333633, -0.009685160592198372, -0.0006951957475394011, -0.0005907842423766851, -0.016437986865639687, -0.014774451963603497, -0.013879244215786457, -0.012469467706978321, 0.003159660380333662, 0.0022838369477540255, 0.026038561016321182, -0.00797228328883648, 0.0027561120223253965, -0.04533839598298073, 0.0022433060221374035, -0.0017111155902966857, -0.0027525874320417643, -0.003700661938637495, -0.018637238070368767, 0.006823315750807524, -0.008515046909451485, 0.01005170214921236, 0.016212422400712967, 0.038825228810310364, -0.03654139116406441, -0.011651798151433468, -0.06766924262046814, 0.00818374939262867, 0.026235930621623993, -0.005906961392611265, 0.017777275294065475, -0.026475591585040092, -0.00029803544748574495, -0.011961949057877064, 0.0026151344645768404, 0.008035723119974136, -0.019046073779463768, -0.013977928087115288, -0.016875017434358597, -0.02058272808790207, -0.01722746156156063, -0.01227209996432066, 0.0282801054418087, -0.01945490762591362, -0.010333657264709473, 0.0278712697327137, 0.0003108115342911333, 0.01227914821356535, 0.017763176932930946, -0.00797228328883648, -0.026165440678596497, -0.025728410109877586, -0.004289243370294571, 0.017326146364212036, -0.008522095158696175, -0.012547005899250507, 0.000589462579227984, -0.030366573482751846, -0.00011817887570941821, 0.007732620928436518, 0.012377833016216755, -0.003912128042429686, -0.00012853191583417356, 0.008127358742058277, 0.017326146364212036, 0.015028211288154125, -0.023078031837940216, -0.04313914477825165, -0.002014217432588339, -0.01968047209084034, -0.012497663497924805, -0.0071969060227274895, -0.005825899075716734, -0.0010978629579767585, 0.03211469575762749, 0.004003763664513826, 0.038148537278175354, 0.01786186173558235, -0.005395917221903801, -0.031099656596779823, 0.002555218990892172, -0.02031487040221691, 0.02653198316693306, 0.016198325902223587, -0.01227914821356535, -0.007309688255190849, 0.01897558383643627, 0.006139574106782675, -0.00010391590330982581, -0.017396634444594383, 0.024163559079170227, -0.0042998166754841805, -0.039473727345466614, -0.0094948410987854, 0.02825191058218479, -0.011419185437262058, -0.015253775753080845, -0.005198548547923565, 0.033073343336582184, -0.00695372000336647, -0.0036759907379746437, -0.011179523542523384, -0.02209118939936161, 0.013956781476736069, -0.022626902908086777, 0.001452950295060873, 0.013392871245741844, -0.033496275544166565, 0.008218993432819843, 0.008204896003007889, 0.013414017856121063, -0.0008617255371063948, 0.0008965294109657407, 0.027575217187404633, 0.01680452935397625, 0.006435627117753029, -0.02699720859527588, 0.0033587911166250706, 0.010312510654330254, 0.016719942912459373, 0.014006123878061771, -0.0055827125906944275, -0.009445498697459698, 0.02231675386428833, 0.01036890223622322, -0.0021358104422688484, 0.03208649903535843, 0.022500023245811462, 0.022232167422771454, 0.009276325814425945, -0.014943624846637249, 0.008726513013243675, -0.0045993938110768795, -0.013512702658772469, 0.02343047596514225, 0.007091172970831394, -0.015028211288154125, -0.007330834865570068, -0.03245304152369499, 0.03290417045354843, -0.0002812943421304226, 0.02080829255282879, 0.025164499878883362, -0.02471337281167507, 0.0020829439163208008, 0.025587433949112892, -0.002303221495822072, 0.012758472003042698, 0.03363725543022156, -0.010122191160917282, 0.01791825145483017, 0.028110932558774948, -0.004328012000769377, 0.0003749122843146324, 0.010467586107552052, -0.02699720859527588, 0.004409074317663908, -0.005903436802327633, -0.03366544842720032, -0.012187512591481209, -0.0018203732324764132, -0.02450190670788288, -0.008007527329027653, 0.012843058444559574, 0.022189872339367867, 0.10003770142793655, 0.041870344430208206, -0.0027279164642095566, -0.013843999244272709, -0.014182345941662788, -0.0022996969055384398, -0.0043421098962426186, 0.002155194990336895, -0.011489673517644405, -0.037246279418468475, 0.02278197929263115, 0.00210409052670002, -0.02758931554853916, -0.0358646996319294, -0.006520213559269905, 0.011355745606124401, -0.0366823710501194, -0.008726513013243675, -0.0025305477902293205, -0.02605265937745571, 0.018482161685824394, -0.014548887498676777, 0.009508938528597355, -0.01721336506307125, -0.02966168522834778, 0.002865369664505124, 0.015324264764785767, 0.009748600423336029, -0.008571437560021877, -0.033073343336582184, 0.016931409016251564, 0.007591643370687962, -0.02430453710258007, -0.022415436804294586, -0.008522095158696175, 0.008493900299072266, 0.01876411773264408, -0.03245304152369499, 0.014414958655834198, 0.021569572389125824, 0.01271617878228426, 0.006446200422942638, -0.02653198316693306, -0.023740626871585846, -0.008218993432819843, 0.019539494067430496, -0.019313929602503777, -0.0071722352877259254, -0.03673876076936722]"
Balanced vs Unbalanced,Balanced vs Unbalanced," Balance is essential in life. When our focus is limited to improving a single aspect of our life, we weaken the whole system. And if you don't provide stability for your system, it will eventually collapse under its own weight and break (or, in the case of Jerry - float).  Take Redis, for example. It supports a relatively high throughput, but its persistency mechanism is not designed to support high loads: the higher the write throughput in Redis, the more fragile the system becomes. To understand why, I need to explain how Redis BGSAVE snapshotting works.  The BGSAVE algorithm allows Redis to produce a point-in-time snapshot of its in-memory data to the disk, or sync with its secondary replica, as a background process. Redis does this by calling Linux ""fork()"" to open a child process that can access the parents memory. From this point onward, both processes have the same contents, and their physical memory usage stays the same, but as soon as one of them writes into memory, it creates a private copy of the page.  ![](/assets/blog/balanced-vs-unbalanced/fork-memory.svg)  This feature is called Copy-on-Write, and it's part of Linux's memory management system. The moment a memory page is duplicated by one of the processes, Linux must allocate an additional 4Kb of physical memory.  The Redis child process does not alter its memory pagesit only scans the entries and writes them into an RDB snapshot. Meanwhile, the parent Redis process continues handling incoming writes. With each write that touches an existing memory page, it effectively allocates more physical memory. Suppose our Redis instance uses 40GB of physical memory. After the fork(), the parent process can potentially duplicate each page, requiring an additional 40GB of RAM: 80GB in total.  But if Redis's write throughput is low enough, it might finish the snapshot process before it duplicates all the pages. In this case, it may end up peaking somewhere between 40GB and 80GB. This uncertain behavior during BGSAVE causes huge headaches to the teams that manage Redis deployments: they need to mitigate the risk of OOM with memory over-provisioning.  KeyDB, a Redis fork that was released with a promise of making Redis faster, can sustain higher throughput due to its multi-threaded architecture. But what happens when BGSAVE is triggered in KeyDB? The KeyDB parent process can handle more write traffic, so it alters more memory pages shared with the child process before BGSAVE finishes. As a result, physical memory usage increases, putting the whole system at greater risk.  Is this KeyDB's fault? No, because KeyDB is not more memory hungry, and its BGSAVE algorithm is the same as that of Redis. But, unfortunately, by solving one problem within the unbalanced architecture of Redis, it introduces others.  This narrow approach is not unique to KeyDB. AWS ElastiCache introduced a similar, closed-source feature that [increases the throughput](https://aws.amazon.com/blogs/database/boosting-application-performance-and-reducing-costs-with-amazon-elasticache-for-redis/) of its Redis instances on multi-CPU machines. Based on my tests, it suffers from the same problem: under a high throughput scenario, it either fails to produce a snapshot or reduces the throughput to ridiculous rates of less than 15K qps.  ## Dragonfly snapshotting  Let's take a step back and formalize the problem. The main challenge of performing point-in-time snapshotting is preserving the snapshot isolation property when records are altered in parallel: if a snapshot starts at time `t` and ends at `t+u`, it should reflect the state of all entries as they were at time `t`.  Therefore, we need a scheme for handling records that must be modified due to incoming updates, but have not yet been serialized. And this leads us to the question: how do we even recognize which entries in our snapshotting routine have already been serialized and which haven't?  Dragonfly uses _versioning_ for that. It maintains a monotonically increasing counter that increases with every update. Each dictionary entry in the store captures its last update version, which is then used to determine whether the entry should be serialized. When snapshotting starts, it assigns the next version to itself, thus preserving the following variant for all entries in the store: `entry.version < snapshot.version`.  Then it kicks off the main traversal loop that iterates over the dictionary and starts serializing it to disk. This is done asynchronously, as shown conceptually below with the `fiber_yield()` call.  ```cpp showLineNumbers=199  snapshot.version = next_version++;  for (entry : table) { if (entry.version < snapshot.version) { entry.version = snapshot.version; SendToSerializationSink(entry); fiber_yield(); } }  ```  The loop is not atomic, and Dragonfly can accept incoming writes in parallel. Each of these write requests can modify, delete or add entries to the dictionary. By checking the entry version in the traversal loop, we ensure that no entry is serialized twice, or that the entries that have been modified after the snapshotting started are not serialized.  The loop above is only part of the solution. We also need to handle updates happening in parallel:  ```cpp showLineNumbers=299  void OnPreUpdate(entry) { uint64_t old_version = entry.version;  // Update the version to the newest one. entry.version = next_version++;  // Regular version update  if (snapshot.active && old_version < snapshot.version) { SendToSerializationSink(entry); } }  ```  We make sure that entries that have not been serialized yet (have `version` smaller than `snapshot.version`) will be serialized before they are updated.  Both the main traversal loop and the `OnPreUpdate` hook are enough to make sure that we serialize each existing entry exactly once and entries that are added after the snapshot has started won't be serialized at all. Dragonfly does not rely on OS generic memory management.  By avoiding an unbalanced `fork()` call and by pushing entries to the serialization sink during the update, Dragonfly establishes a natural back-pressure mechanism, which is a must have for every reliable system. As a result of all these factors, Dragonfly's memory overhead is constant during the snapshotting no matter how big the dataset size is.  Is it really this simple? Not quite. While the high-level algorithm as described above is accurate, I have not shown how we coordinate snapshotting across multiple threads, or how we maintain the `uint64_t` version per entry without wasting 8 bytes on each key, etc.  While the snapshotting issue may not seem very significant at first glance, it's actually a cornerstone of the balanced foundation that makes Dragonfly a reliable, performant and scalable system. A feature like snapshotting is one of those things that differentiate Dragonfly from other attempts to build a high-performing memory store, and I think the developer community recognizes this.  ![](/assets/blog/balanced-vs-unbalanced/starthist-keydb-df.png)","[-0.007936290465295315, 0.008949285373091698, 0.01440548524260521, -0.011254722252488136, -0.013175918720662594, -0.001359683577902615, -0.011988270096480846, -0.00971776433289051, 0.006696245167404413, -0.0295654758810997, 0.02724606730043888, 0.01672489382326603, -0.01240045391023159, 0.005634346976876259, 0.01724187098443508, 0.015970386564731598, 0.02295655943453312, 0.003133297897875309, 0.013210849836468697, -0.02199246734380722, -0.0027420721016824245, -0.004603886976838112, -0.014216857962310314, -0.0018198975594714284, -0.012086075730621815, 0.016165999695658684, 0.03392484784126282, -0.0030127863865345716, 0.008390391245484352, 0.01368590909987688, 0.018122127279639244, -0.011198832653462887, -0.0014173195231705904, -0.008544087409973145, -0.01917005330324173, 9.88434039754793e-05, 0.0013474577572196722, -0.005078946240246296, 0.022677112370729446, -0.028056463226675987, 0.02834988199174404, -0.006043037865310907, -0.01647339202463627, -0.00311408587731421, -0.006182761397212744, 0.01234456431120634, -0.010709800757467747, -0.02343161776661873, 0.007038567680865526, -0.02538774535059929, 0.01563505083322525, 0.02330586686730385, -0.025681165978312492, 0.011331569403409958, 0.003264288417994976, -0.016878589987754822, 0.008027110248804092, 0.004691213835030794, 0.0017814736347645521, -0.015579162165522575, -0.004156772047281265, 0.02821015939116478, -0.018639104440808296, 0.001494167372584343, -0.019966477528214455, -0.007202742621302605, 0.006657821126282215, -0.014321651309728622, 0.006696245167404413, -0.011101026087999344, 0.032052554190158844, 0.043537817895412445, -0.014119052328169346, 0.011820601299405098, 0.014098093844950199, -0.023543396964669228, -0.000867158523760736, 0.005152301397174597, 0.003410998033359647, 0.0036712330766022205, 0.003164735622704029, 0.021279877051711082, -0.010639938525855541, 0.02294258587062359, 0.00717479782178998, 0.012016214430332184, -0.009200787171721458, 0.008292585611343384, -0.0006523337215185165, 0.020595232024788857, 0.002487076912075281, 0.02428393065929413, 0.006870899349451065, 0.00753807881847024, -0.0007776481797918677, 0.0028678232338279486, 0.013958370313048363, 0.02114015445113182, -0.027148261666297913, -0.002345606917515397, -0.025234051048755646, -0.0131340017542243, -0.002649505389854312, -0.01318290550261736, -0.01856924220919609, -0.01509012933820486, 0.006168789230287075, -0.017283787950873375, -0.0018583214841783047, 0.01050720177590847, -0.035126470029354095, 0.02063714899122715, 0.0019858190789818764, -0.0047994996421039104, -0.0014164461754262447, 0.01117787417024374, 0.010968288406729698, -0.020078256726264954, -0.005585443694144487, -0.012072104029357433, 0.033030617982149124, -0.016040248796343803, 0.03529413789510727, -0.01675283908843994, 0.009822556748986244, -0.012114020995795727, -0.011736767366528511, 0.0058823563158512115, -0.0017675013514235616, -0.018541298806667328, 0.00035345659125596285, 0.04373343288898468, -0.023180115967988968, -0.003950679674744606, -0.021321794018149376, -0.00772670516744256, -0.0025045424699783325, -0.023780927062034607, -0.007929304614663124, -0.04051979258656502, 0.016920506954193115, 0.027329901233315468, -0.016417501494288445, -0.03775326907634735, -0.010479256510734558, 0.008306557312607765, -0.003622329793870449, 0.030487651005387306, -0.00122956617269665, -0.014021245762705803, 0.001856575021520257, -0.007789581082761288, -0.010828565806150436, -0.004293002188205719, -0.0006763486890122294, 0.01992456056177616, -0.01556518953293562, 0.015369576402008533, -0.01465698704123497, -0.0246751569211483, 0.02577897161245346, 0.010416381061077118, -0.007202742621302605, 0.004240605980157852, 0.015579162165522575, 0.02540171891450882, 0.012924416922032833, 0.0018705473048612475, 0.011799642816185951, -0.01319687720388174, 0.021223988384008408, 0.0349029116332531, -0.03942995145916939, 0.020497426390647888, -0.006825489457696676, 0.027790989726781845, -0.019714975729584694, 0.003887804225087166, -0.0029586434829980135, -0.01771692931652069, 0.009605985134840012, 0.005847425200045109, 0.006238650996237993, 0.040240347385406494, -0.016892561689019203, -0.01342742145061493, 0.020301813259720802, -0.009214759804308414, 0.0060814619064331055, 0.005777563434094191, -0.007251645904034376, 0.013469338417053223, -0.016780782490968704, -0.024353792890906334, -0.6201484203338623, -0.004747103434056044, -0.014335623010993004, -0.028755079954862595, -0.010241727344691753, 0.0019735933747142553, 0.00034909023088403046, 0.011268693953752518, -0.008753672242164612, 0.019351694732904434, 0.004719158634543419, -0.0011640707962214947, 0.0111149987205863, 0.00558893708512187, -0.023780927062034607, -0.025583358481526375, 0.019952505826950073, -0.015159991569817066, -0.0032817539758980274, -0.012966333888471127, -0.0272320955991745, 0.04180524870753288, -0.020483454689383507, 0.008062041364610195, 0.003307952079921961, 0.01337851770222187, 0.009438317269086838, 0.00122956617269665, 0.007328493520617485, 0.025345828384160995, -0.028643302619457245, 0.019253887236118317, 0.013811660930514336, -0.00825066864490509, 0.045018889009952545, 0.0022408145014196634, -0.02246752567589283, 0.03884311020374298, 0.004851895850151777, 0.04493505135178566, -0.006235157605260611, -0.017172008752822876, 0.02224396914243698, -0.003066929057240486, 0.013909466564655304, -0.01233757846057415, 0.018820745870471, -0.017870625481009483, -0.007038567680865526, -0.004237113054841757, -0.00031830742955207825, 0.004359371028840542, 0.001659215660765767, 0.013755771331489086, -0.007677802350372076, 0.008523128926753998, 0.023082310333848, -0.02746962569653988, 0.014237816445529461, -0.0023194088134914637, -0.010430353693664074, 0.018415547907352448, -9.769723692443222e-05, -0.008027110248804092, -0.02603047341108322, -0.003901776624843478, -0.010220768861472607, -1.958038228622172e-05, 0.012470315210521221, -0.007838483899831772, 0.010835551656782627, -0.0004623972054105252, 0.0012094809208065271, -0.027665238827466965, 0.020609205588698387, 0.0014286719961091876, 0.028405772522091866, 0.006266595795750618, -0.0012548910453915596, 0.03196872025728226, 0.0022844779305160046, -0.015355604700744152, -0.004387315362691879, -0.03196872025728226, 0.03333801031112671, 0.020455509424209595, -0.01771692931652069, -0.0020941048860549927, 0.00952913798391819, -0.010122962296009064, 0.009640916250646114, 0.017884599044919014, 0.003568186890333891, -0.038899000734090805, 0.024116262793540955, 0.030515596270561218, -0.012058131396770477, -0.01038843672722578, 0.0037201361265033484, -0.028978638350963593, -0.013895494863390923, -0.009598999284207821, -0.017870625481009483, 0.019225943833589554, 0.02369709312915802, 0.022886697202920914, -0.022495470941066742, -0.015607106499373913, 0.042084693908691406, -0.026156224310398102, 0.01978483609855175, -0.028866859152913094, 0.005519075319170952, -0.012868527323007584, -0.0027997081633657217, -0.03043176233768463, 0.045018889009952545, -0.01057007722556591, 0.0008907368173822761, -0.0015526765491813421, 0.022327803075313568, 0.0035210303030908108, 0.005547020118683577, -0.010171865113079548, -0.005854411516338587, 0.012295661494135857, 0.012854554690420628, 0.0015937202842906117, -0.0006191494176164269, 0.013273725286126137, 0.009075036272406578, -0.002960389945656061, 0.02917425148189068, -0.019477445632219315, 0.048064857721328735, 0.0002125324244843796, 0.018890606239438057, -0.0030477172695100307, 0.017018312588334084, -0.04191702604293823, 0.02175493724644184, -0.005718180909752846, 0.020217979326844215, -0.03054353967308998, -0.021643158048391342, -0.008914354257285595, -0.010248713195323944, 0.00380047713406384, 0.018974440172314644, -0.00708747049793601, -0.011555126868188381, -0.02148946188390255, -0.02368311956524849, 0.020176062360405922, -0.008055055513978004, 0.00571468798443675, -0.00978063978254795, -0.020958513021469116, -0.01087048277258873, -0.014140010811388493, -0.01928183250129223, 0.023124227300286293, -0.03090682066977024, -0.0016295243985950947, -0.038172438740730286, -0.02454940602183342, 0.0076219127513468266, 0.010835551656782627, -0.005445720627903938, -0.03322622925043106, -0.026533478870987892, -0.02795865759253502, -0.0038074632175266743, 0.0031752148643136024, -0.012665928341448307, 0.011394444853067398, -0.008537101559340954, 0.022202052175998688, 0.008243681862950325, -0.005323462653905153, 0.0016417502192780375, 0.010730759240686893, -0.007129387930035591, -0.01795445941388607, 0.04077129438519478, 0.018401574343442917, -0.002242560964077711, 0.00011407107376726344, -0.018499381840229034, 0.029733143746852875, 0.01992456056177616, 0.018736911937594414, -0.025108300149440765, -0.01732570491731167, 0.0008558059926144779, -0.01391645334661007, -0.011128970421850681, 0.008362446911633015, 0.01344139315187931, 0.04236414283514023, 0.023124227300286293, 0.0026791966520249844, 0.009675847366452217, -0.02053934335708618, -0.009696805849671364, -0.02942575328052044, 0.00849518459290266, -0.002731592860072851, 0.010402409359812737, -0.016920506954193115, -0.0027263532392680645, 0.019030330702662468, 0.005253600887954235, -0.01374878454953432, 0.003866845741868019, 0.0295654758810997, -0.006752134300768375, -0.0012714831391349435, -0.003073915373533964, 0.014908489771187305, -0.0069267889484763145, -0.00947324838489294, 0.01771692931652069, 0.009445303119719028, 0.026547450572252274, -0.0007536332122981548, 0.02931397408246994, 0.019365666434168816, -0.004869361408054829, -0.015970386564731598, -0.006371388211846352, 0.03272322565317154, -0.007684788201004267, -0.012896471656858921, 0.01930977776646614, 0.015690941363573074, 0.023725036531686783, -0.0030127863865345716, 0.021782882511615753, -0.025946639478206635, 0.01869499497115612, -0.014091107062995434, 0.016906533390283585, -0.01611011102795601, 0.02053934335708618, 0.011471292935311794, 0.025597332045435905, 0.014866571873426437, -0.006975691765546799, -0.020441537722945213, -0.011094040237367153, -0.02772112749516964, -0.010898427106440067, 0.007971221581101418, 0.006863913033157587, -0.023138199001550674, 0.019687030464410782, 0.005347914062440395, 0.037054650485515594, 0.018387602642178535, -0.0035035647451877594, 0.011094040237367153, 0.015439438633620739, -0.021293850615620613, 0.004230126738548279, -0.023012448102235794, -0.004495601169764996, -0.01282661035656929, -0.009864473715424538, -0.002527247415855527, -0.019225943833589554, -0.03859160840511322, -0.011261708103120327, -0.016459418460726738, 0.027888795360922813, 0.006137351505458355, -0.0002584883477538824, 0.01721392571926117, -0.007684788201004267, 0.01251921895891428, -0.02016209065914154, -0.021056320518255234, -0.0018268837593495846, 0.018611159175634384, -0.005948724690824747, -0.02114015445113182, -0.014216857962310314, 0.0017806004034355283, 0.03652370348572731, 0.020944541320204735, -0.002953403862193227, 0.0022250956390053034, -0.005134835839271545, -0.024088317528367043, -0.0003041167510673404, -0.0014845613623037934, 0.03277911618351936, -0.010793634690344334, -0.010919385589659214, 0.0029865882825106382, 0.00028250328614376485, 0.00862093549221754, -0.02199246734380722, -0.005347914062440395, 0.01142239011824131, -0.0013902480714023113, -0.006587959360331297, -0.016878589987754822, 0.00340575841255486, -0.031577493995428085, -0.001777980593033135, -0.02843371592462063, -0.024731045588850975, -0.022327803075313568, 0.0050440155901014805, 0.012686886824667454, -0.020930569618940353, 0.014077135361731052, 0.057845499366521835, 0.021796854212880135, -0.0346793532371521, -0.020204007625579834, -0.027707155793905258, -0.0012548910453915596, 0.04214058443903923, 0.019519362598657608, -0.018289797008037567, 0.013175918720662594, -0.01781473681330681, 0.005669278092682362, 0.008159847930073738, -0.030683264136314392, 0.028042491525411606, -0.0058823563158512115, 0.015942443162202835, -0.015397521667182446, -0.01355317234992981, -0.005009084939956665, -0.0119673116132617, 0.01478273794054985, -0.004561970010399818, -0.048903197050094604, -0.0006208959384821355, -0.01977086439728737, -0.015397521667182446, 0.0021831784397363663, 0.01930977776646614, 0.04186113923788071, 0.019323749467730522, 0.028182214125990868, 0.007761636283248663, -0.0036607536021620035, -0.00021842701244167984, -0.013217835687100887, -0.027120316401124, 0.026044446974992752, 0.00640981225296855, 0.018122127279639244, -0.007286576554179192, 0.018373630940914154, 0.005002098623663187, -0.0029743623454123735, -0.0013579369988292456, 0.005822973791509867, 0.02454940602183342, 0.00971776433289051, 0.02112618088722229, 0.009752695448696613, 0.02306833676993847, -0.01831774041056633, 0.011939366348087788, 0.013832619413733482, -0.03727820888161659, 0.02150343544781208, 0.024255987256765366, -0.023291895166039467, -0.03861955553293228, -0.0179684329777956, 0.018834717571735382, -0.016431475058197975, 0.010234740562736988, 0.015844635665416718, -0.010220768861472607, -0.0395696721971035, -0.021168097853660583, 0.0019264366710558534, -0.010185837745666504, 0.0029411781579256058, 0.0019211970502510667, -0.0003333713684696704, -0.008830520324409008, -0.010842537507414818, -0.024130234494805336, 0.015313687734305859, -0.018653078004717827, -0.041330188512802124, -0.04784129932522774, -0.023780927062034607, 0.04272742196917534, 0.025611303746700287, 0.00996228028088808, 0.00383191485889256, -0.016026277095079422, 0.008166833780705929, 0.01221881341189146, -0.030599430203437805, 0.015173964202404022, -0.04004473239183426, -0.028070436790585518, 0.007740677800029516, 0.0123934680595994, -0.000796423526480794, -0.027790989726781845, 0.005250107496976852, 0.0062176925130188465, 0.018164044246077538, 0.034260183572769165, 0.0017919528763741255, -0.003950679674744606, 0.009605985134840012, 0.02420009672641754, 0.025499524548649788, 0.01276373490691185, -0.02749756909906864, 0.0359368659555912, 0.016305724158883095, -0.02358531393110752, -0.022621221840381622, -0.007440272253006697, 0.0050684669986367226, -0.009983238764107227, -0.008830520324409008, -0.00409738952293992, -0.014028231613337994, 0.005829959642142057, -0.018974440172314644, 0.012121006846427917, 0.01319687720388174, 0.009878446348011494, -0.003091380698606372, 0.0012767227599397302, 0.01319687720388174, -0.005330448504537344, 0.0017526557203382254, 0.014698904007673264, -0.03711054101586342, 0.028028517961502075, 0.01770295761525631, 0.003072168678045273, 0.01167389191687107, 0.029537532478570938, -0.023529425263404846, -0.02014811709523201, -0.004436218645423651, 0.016529280692338943, 0.02013414539396763, -0.011464307084679604, -0.019323749467730522, -0.0270085372030735, -0.001766628003679216, 0.0024608788080513477, 0.008509156294167042, -0.025862805545330048, -0.0005684996722266078, -0.017004340887069702, -0.010178851895034313, 0.025709109380841255, -0.024493515491485596, 0.014545208774507046, -0.027050454169511795, -0.026421699672937393, -0.0037899978924542665, 0.028866859152913094, 0.021713020280003548, -0.027162233367562294, -0.0515020526945591, -0.011331569403409958, -0.015551216900348663, -0.006451729219406843, -0.02783290669322014, 0.01172978151589632, -0.004757582675665617, 0.0245633777230978, 0.0021639664191752672, 0.03403662517666817, 0.02394859492778778, 0.004125334322452545, 0.008537101559340954, -0.004205674864351749, -0.00892134103924036, 0.002081878948956728, -0.005061481148004532, -0.0019858190789818764, -0.014272747561335564, 0.017437484115362167, 0.010297616012394428, -0.017032286152243614, -0.005292024463415146, 0.01532765943557024, 0.022928614169359207, 0.003386546391993761, -0.01842951960861683, -0.05496719479560852, -0.03043176233768463, -0.0063329641707241535, 0.01943552866578102, -0.0016670750919729471, 0.001947395270690322, -0.028196187689900398, -0.00892134103924036, 0.00017334437870886177, -0.0076219127513468266, 0.04088307544589043, 0.005721674300730228, 0.012721817940473557, -0.01471287664026022, 0.0009204280795529485, -0.006853433791548014, 0.01117787417024374, -0.010674869641661644, -0.018471436575055122, -0.013154960237443447, -0.014070148579776287, 0.022006439045071602, 0.0035018182825297117, 0.01556518953293562, 0.014768766239285469, 0.01831774041056633, -0.003646781435236335, 0.00935448333621025, -0.022565333172678947, -0.017661040648818016, 0.012127993628382683, -0.0021692062728106976, -0.022034384310245514, -0.015579162165522575, -0.03325417637825012, -0.022034384310245514, -0.001589353894814849, 0.017032286152243614, -0.004872854333370924, 0.02677100896835327, 0.00509990518912673, -0.013595089316368103, -0.0043733431957662106, 0.002581390319392085, 0.033645398914813995, 0.011317597702145576, 0.032304055988788605, 0.011555126868188381, 0.007028088439255953, -0.03909461572766304, -0.004872854333370924, 0.02661731280386448, -0.00027617206797003746, 0.01831774041056633, 0.02503843791782856, -0.03311445191502571, -0.01675283908843994, 0.00934749748557806, -0.01556518953293562, 0.006126872263848782, -0.032052554190158844, 0.0038109563756734133, -0.016892561689019203, 0.008718742057681084, -0.018639104440808296, 0.004925250541418791, -0.00610940670594573, 0.007052539847791195, -0.028531523421406746, 0.02746962569653988, 0.02639375440776348, -0.017367621883749962, -0.008187792263925076, 0.011918407864868641, -0.012966333888471127, 0.03191282972693443, -0.03820038586854935, 0.01683667302131653, -0.006682272534817457, 0.007768622599542141, -0.022160135209560394, -0.000662376347463578, -0.0049182646907866, 0.02783290669322014, -0.0026791966520249844, -0.011135957203805447, 0.0017282040789723396, -0.005809001158922911, 0.006434263661503792, -0.02235574834048748, -0.019756892696022987, 0.029509587213397026, -0.017535289749503136, -0.0059661902487277985, 0.00424759229645133, -0.00886545144021511, 0.017144063487648964, -0.010646925307810307, -0.029146306216716766, -0.0018006856553256512, -0.009319552220404148, 0.008446280844509602, 0.012547163292765617, -0.002668717410415411, -0.004925250541418791, -0.0012837089598178864, -1.7124306395999156e-05, -0.018499381840229034, -0.02333381213247776, 0.001052292063832283, 0.0008064661524258554, -0.04725446179509163, -0.011569099500775337, -0.006965212523937225, 0.007761636283248663, 0.01795445941388607, -0.0059976279735565186, -0.00637837452813983, -0.01821993477642536, 0.02087467908859253, -0.007314521353691816, 0.0051662735641002655, 0.013406462967395782, -0.0049182646907866, -0.025974584743380547, 0.003531509544700384, -0.017898570746183395, 0.007209728471934795, 0.02101440355181694, -0.01214895211160183, -0.03294678404927254, -0.015704913064837456, 0.023641202598810196, 0.030347928404808044, -0.019197998568415642, 0.012225799262523651, 0.00952913798391819, 0.01368590909987688, 0.011492251418530941, -0.015802718698978424, -0.014992323704063892, 0.01613805629312992, -0.012176896445453167, -0.027329901233315468, 0.03054353967308998, -0.017311731353402138, -0.029844922944903374, -0.008439294993877411, 0.004670255351811647, -0.031102433800697327, -0.026351837441325188, -0.016082165762782097, -0.005096411798149347, 0.02028784155845642, 0.008055055513978004, 0.0037585601676255465, 0.012777707539498806, -0.022271914407610893, -0.0297890342772007, 0.012875513173639774, 0.0026110815815627575, -0.0044886148534715176, 0.012288674712181091, -0.01221881341189146, 0.02005031146109104, 0.0019281832501292229, 0.006147830747067928, 0.004942716099321842, -0.0015238586347550154, -0.015732858330011368, -0.04949003830552101, -0.030683264136314392, -0.0027997081633657217, 0.03568536415696144, 0.02480090782046318, -0.0026617313269525766, -0.010046114213764668, 0.010108989663422108, -0.04376137629151344, -0.04669556766748428, -0.0047156657092273235, 0.006808023899793625, 0.021223988384008408, 0.0002217017754446715, 0.0025534455198794603, 0.01532765943557024, 0.03238788992166519, 0.014028231613337994, 0.002053934382274747, 0.005735646467655897, -0.010339532978832722, -0.005229149013757706, 0.040994852781295776, -0.0017247110372409225, -0.024214070290327072, -0.013350573368370533, -0.01234456431120634, -0.004848402924835682, 0.023124227300286293, 0.011087053455412388, -0.0021639664191752672, 0.018150072544813156, 0.0004250648489687592, 0.02074892818927765, 0.01746542751789093, 0.009417358785867691, 0.015718884766101837, -0.03722231835126877, 0.004216154105961323, 0.017018312588334084, -0.001513379393145442, -0.0148386275395751, 0.014098093844950199, 0.006881378591060638, -0.011254722252488136, -0.01215593796223402, -0.0359368659555912, 0.013902480714023113, 0.020860707387328148, 0.004603886976838112, 0.010115975514054298, 0.015495327301323414, 0.010681855492293835, 0.028922749683260918, -0.019952505826950073, -0.000472876476123929, -0.01197429746389389, -0.0037341085262596607, -0.025303911417722702, 0.01307112630456686, -0.0038109563756734133, 0.001312526874244213, 0.019868670031428337, -0.0031210719607770443, 0.015662996098399162, 0.0001698512933216989, 0.005354900378733873, -0.01576080173254013, -0.00498114014044404, -0.027804961428046227, 0.01928183250129223, -0.004265057388693094, -0.0036921915598213673, -0.0013535707257688046, -0.004796006716787815, 0.003201412968337536, -0.018722938373684883, 0.009158870205283165, 0.0015945936320349574, -0.013085098937153816, 0.023487508296966553, 0.018876634538173676, -0.0034354496747255325, -0.03775326907634735, -0.01746542751789093, 0.00952913798391819, 0.01545341033488512, -0.010171865113079548, 0.20980869233608246, -0.010192823596298695, 0.011268693953752518, 0.03434401750564575, -0.014852600172162056, -0.004872854333370924, 0.022383691743016243, 0.009179828688502312, -0.01093335822224617, 0.022928614169359207, -0.001541324076242745, -0.0018600680632516742, -0.01441945694386959, -0.0035419887863099575, 0.01203018706291914, -0.0011186606716364622, -0.0081319035962224, -0.028755079954862595, 0.0010549118742346764, -0.006856927182525396, 0.009794612415134907, -0.019575251266360283, -0.016333667561411858, -0.006664807442575693, 0.023361757397651672, -0.01300825085490942, -0.01057007722556591, -0.01598436012864113, 0.02309628203511238, 0.004666762426495552, -0.01611011102795601, 0.007670816034078598, 0.007059526164084673, -0.0010540385264903307, -0.026938676834106445, 0.0011928887106478214, 0.023976540192961693, -0.009452289901673794, 0.010786647908389568, 0.003133297897875309, 0.015062185004353523, -0.020832762122154236, 0.014824654906988144, -0.0028119338676333427, 0.01979880966246128, 0.011394444853067398, -0.02234177477657795, -0.010598021559417248, 0.002843371592462063, 0.032192278653383255, -0.01844349130988121, 0.015411493368446827, 0.01318989135324955, 0.013399476185441017, -0.0014007273130118847, 0.001557042938657105, 0.006130365189164877, 0.010318574495613575, -0.0014181927544996142, 0.016221890226006508, -0.004272043704986572, 0.023138199001550674, -0.003971638157963753, 0.01489451713860035, -0.03361745551228523, 0.027790989726781845, -0.03775326907634735, 0.04605283960700035, 0.017158037051558495, -0.029537532478570938, -0.002549952594563365, -0.014014258980751038, -0.006315498612821102, 0.01282661035656929, -0.013972342014312744, -0.014643014408648014, 0.006011600140482187, 0.018736911937594414, 0.008453266695141792, 0.03113037906587124, -0.0196730587631464, -0.02088865265250206, -0.01502026803791523, -0.008299571461975574, -0.006762613542377949, -0.0031193254981189966, 0.021293850615620613, -0.02906247228384018, -0.022299857810139656, -0.007635884918272495, -0.003110592719167471, -0.0016382571775466204, -0.021531378850340843, -0.019323749467730522, 0.021196043118834496, -0.034120459109544754, 0.010584048926830292, 0.018960468471050262, -0.024325847625732422, -0.04250386729836464, -0.029230140149593353, 0.05767782777547836, 0.040128566324710846, -0.011003219522535801, 0.010702813975512981, -0.0009352736524306238, -0.02611430734395981, 0.016082165762782097, -0.003922735340893269, -0.013657964766025543, 0.0010645178845152259, -0.03554563969373703, 0.012295661494135857, -0.009445303119719028, -0.01441945694386959, 0.018653078004717827, 0.019631141796708107, 0.0018967455253005028, 0.003957665991038084, -0.005686743184924126, -0.00696171959862113, -0.005627361126244068, 0.03263939172029495, -0.0018670542631298304, -0.019142109900712967, -0.02236972004175186, -0.032052554190158844, 0.03504263609647751, -0.029230140149593353, -0.03191282972693443, 0.016878589987754822, -0.005732153542339802, 0.008334502577781677, -0.027050454169511795, -0.017283787950873375, 0.014824654906988144, 0.0032590487971901894, -0.02235574834048748, -0.02088865265250206, -0.004628338385373354, -0.007684788201004267, 0.020916596055030823, 0.01094034407287836, -0.004680734593421221, 0.015411493368446827, -0.016040248796343803, 0.014077135361731052, -0.0035943849943578243, -0.017996376380324364, -0.036831095814704895, -0.0031018599402159452, 0.01831774041056633, 0.0017404298996552825, 0.009487220086157322, 0.004547997377812862, -0.010989246889948845, -0.009759681299328804, -0.03431607410311699, 0.014056176878511906, 0.005829959642142057, -0.04222441837191582, 0.020231951028108597, 0.006902337074279785, -0.012728803791105747, -0.0222299974411726, -0.033142395317554474, -0.17862242460250854, 0.013776729814708233, 0.01057007722556591, -0.0139863146468997, 0.020720982924103737, 0.005749619100242853, 0.027679210528731346, 0.01683667302131653, -0.004170744214206934, -0.002352593233808875, -0.0029935743659734726, 0.014684932306408882, -0.03923433646559715, -0.03677520528435707, 0.006266595795750618, -0.004031020682305098, -0.003016279311850667, 0.016571197658777237, 0.015173964202404022, 0.02063714899122715, 0.02147549018263817, -0.04057568311691284, -0.0007182657136581838, -4.128936416236684e-05, 0.01087746862322092, -0.01907224766910076, 0.0028119338676333427, 0.002787482226267457, 0.016026277095079422, -0.03881516680121422, -0.02624005824327469, -0.012058131396770477, 0.024367764592170715, 0.00880257599055767, 0.014363568276166916, -0.0041218409314751625, 0.001746542751789093, 0.0028765560127794743, 0.003772532334551215, 0.035601530224084854, 0.024591322988271713, 0.0296772550791502, -0.0021674595773220062, 0.003905269782990217, 0.007761636283248663, 0.020930569618940353, -0.0030285052489489317, -0.01397932879626751, -0.0010383196640759706, 0.0025796436239033937, 0.016794756054878235, 0.0023980033583939075, -0.0018198975594714284, 0.008460253477096558, 0.0028206666465848684, -0.0032031594309955835, -0.012903458438813686, 0.03361745551228523, 0.004149785730987787, 0.004090403206646442, 0.0066613140515983105, -0.021782882511615753, 0.022551361471414566, -0.013511255383491516, 0.0053863381035625935, -0.024493515491485596, -0.005819480400532484, 0.012114020995795727, -0.019463472068309784, -0.005292024463415146, 0.0004973280592821538, 0.006587959360331297, 0.0005580204306170344, 0.009822556748986244, -0.016319695860147476, -0.005815987475216389, -0.008418336510658264, 0.004237113054841757, -0.00519421836361289, 0.007579995784908533, -0.0009239211212843657, 0.010646925307810307, -0.03579714149236679, -0.01509012933820486, -0.009054077789187431, -0.0005187232163734734, 0.013329614885151386, -0.006469194311648607, -0.0032695280387997627, -0.008278612978756428, 0.01795445941388607, -0.037082597613334656, 0.004582928493618965, 0.018010349944233894, 0.01172978151589632, 0.014258775860071182, -0.0009151884005405009, -0.0015945936320349574, 0.023962566629052162, 0.007733691483736038, -0.015830663964152336, 0.0027892289217561483, -0.02675703540444374, -0.016221890226006508, 0.007810539565980434, 0.0012627504765987396, 0.017661040648818016, -0.004359371028840542, 0.03350567817687988, -0.0004872854333370924, -0.026435671374201775, 0.0119673116132617, 0.01964511349797249, 0.04714268445968628, -0.006287554278969765, 0.030012590810656548, 0.014307678677141666, 0.0012042413000017405, 0.012980306521058083, -0.018345685675740242, 0.07131483405828476, -0.017898570746183395, -0.012854554690420628, 0.02846166118979454, 0.015355604700744152, -0.02895069308578968, -0.12239772081375122, -0.021433573216199875, -0.0007942403317429125, 0.0053025041706860065, -0.0098365293815732, 0.005913794040679932, -0.022383691743016243, 0.01784268207848072, -0.01699036918580532, 0.03079504333436489, -0.05373762920498848, -0.038032714277505875, -0.016319695860147476, 0.003286993596702814, 0.0033725742250680923, -0.004422246478497982, -0.004139306489378214, -0.0020434551406651735, 0.01514601893723011, 0.050999049097299576, 0.02148946188390255, -0.010486243292689323, 0.014810683205723763, 0.014391512610018253, -0.03350567817687988, 0.00729356287047267, -0.002600602339953184, 0.007328493520617485, -0.01696242392063141, 0.019505390897393227, 0.020860707387328148, 0.009969266131520271, 0.014866571873426437, -0.007607940584421158, -0.011708823032677174, 0.005826466716825962, -0.024242013692855835, -0.01708817481994629, 0.010060086846351624, -0.013539199717342854, -0.011506224051117897, 0.015718884766101837, 0.034874968230724335, -0.008348474279046059, -0.0025045424699783325, 0.011506224051117897, -0.02334778383374214, 0.03238788992166519, -0.0030337448697537184, -0.021699048578739166, -0.01380467414855957, 0.0007060399511829019, -0.017074203118681908, -0.007115415297448635, 0.008062041364610195, -0.023501479998230934, 0.01342742145061493, 0.03286295011639595, 0.020930569618940353, 0.009005174972116947, 0.0015858608530834317, 0.00355596118606627, 0.009675847366452217, 0.028503578156232834, 0.010549118742346764, -0.005019564181566238, -0.007559037301689386, -0.018499381840229034, 0.01613805629312992, -0.021810825914144516, -0.025681165978312492, 0.01598436012864113, -0.014740820974111557, 0.008592990227043629, -0.029984647408127785, 0.01637558452785015, -0.008348474279046059, 0.011813615448772907, 0.0025726575404405594, 0.0037585601676255465, -0.010591035708785057, -0.014153982512652874, -0.006182761397212744, -0.03507057949900627, 0.017675012350082397, 0.007223701104521751, 0.02611430734395981, -0.0013902480714023113, 0.006395839620381594, -0.03054353967308998, -0.01942155510187149, 0.003776025492697954, 0.0026931690517812967, -0.013630020432174206, -0.0204135924577713, 0.025192134082317352, 0.008048069663345814, 0.025960613042116165, 0.0021290357690304518, 0.002829399425536394, -0.007775608450174332, -0.0025674179196357727, -0.028252076357603073, 0.016068194061517715, 0.011939366348087788, 0.0015421973075717688, -0.000776774890255183, -0.013140987604856491, -0.015830663964152336, -0.023291895166039467, -0.0037026708014309406, 0.014643014408648014, -0.02331983856856823, 0.007866429165005684, 0.02150343544781208, -0.027022510766983032, -0.03881516680121422, -0.028671246021986008, -0.006298033520579338, 0.0015308447182178497, -0.009340510703623295, 0.014335623010993004, -0.01611011102795601, 0.008634907193481922, -0.0012837089598178864, -0.0035035647451877594, -0.02480090782046318, -0.014077135361731052, 0.014936434105038643, 0.02811235375702381, -0.0052955178543925285, -0.027693182229995728, 0.023655176162719727, -0.031102433800697327, 0.009543109685182571, 0.016934478655457497, -0.002722860313951969, 0.011981283314526081, 0.005749619100242853, -0.004509573336690664, 0.02468912862241268, -0.00547017203643918, -0.03725026547908783, -0.03308650851249695, 0.009892418049275875, -0.039737340062856674, -0.007964234799146652, -0.00039624690543860197, -0.011981283314526081, -0.0007169558084569871, 0.01612408272922039, 0.012358536943793297, 0.02677100896835327, 0.029593421146273613, 0.007160825654864311, -0.022565333172678947, -0.017758846282958984, -0.0008719614706933498, -0.010039128363132477, 0.038535721600055695, -0.022202052175998688, -0.02566719241440296, 0.015173964202404022, 0.023655176162719727, 0.02005031146109104, -0.021210016682744026, 0.015858609229326248, -0.023040393367409706, -0.02860138565301895, -0.012365522794425488, 0.007363424636423588, -0.035713307559490204, -0.02614225260913372, -0.014866571873426437, 0.02672909013926983, 0.018401574343442917, -0.0023281415924429893, -0.010234740562736988, -0.010884454473853111, 0.0012767227599397302, -0.02330586686730385, -1.6728605260141194e-05, -0.003252062713727355, -0.03459551930427551, -0.007181784138083458, 0.008669838309288025, 0.038899000734090805, -0.005145315080881119, -0.009361469186842442, 0.05041221156716347, 0.027022510766983032, 0.013574130833148956, -0.010227754712104797, -0.005955711007118225, -0.0010933357989415526, 0.01057007722556591, 0.02209027297794819, 0.0296772550791502, -0.03931817039847374, 0.012232786044478416, 0.005064974073320627, -0.0011701836483553052, 0.006664807442575693, 0.005690236575901508, -0.00013939595373813063, -0.0037865047343075275, 0.010591035708785057, 0.024814879521727562, -0.0034511685371398926, -0.01532765943557024, 0.0003087014483753592, 0.019589224830269814, -0.01458712574094534, -0.0054038031958043575, -0.01397932879626751, 0.028363855555653572, 0.0036921915598213673, 0.025709109380841255, -0.0012487780768424273, -0.021810825914144516, -0.00036284426460042596, 0.0002447343140374869, 0.01845746487379074, 0.0018233907176181674, 0.037054650485515594, -0.0038179424591362476, 0.012665928341448307, 0.026295948773622513, 0.030096424743533134, -0.007922317832708359, 0.0003030251828022301, -0.002515021711587906, 0.043677542358636856, 0.006741655059158802, -0.019980449229478836, -0.017185980454087257, 0.008998188190162182, -0.041330188512802124, 0.0012880753492936492, 0.0329747274518013, -0.0013911213027313352, 0.09668860584497452, -0.00024931898224167526, -0.015788746997714043, -0.008299571461975574, -0.01361604779958725, 0.004411767236888409, -0.008432308211922646, 0.007363424636423588, 0.014503291808068752, -0.03641192615032196, 0.04202880710363388, 0.0002735522575676441, -0.02379489876329899, -0.017144063487648964, 0.01538354903459549, 0.01458712574094534, 0.0003362094867043197, 0.0052955178543925285, 0.001525605097413063, -0.02196452207863331, 0.03881516680121422, -0.009934335015714169, 0.03501468896865845, 0.005550513043999672, -0.023263949900865555, -0.0114293759688735, 0.027190178632736206, 0.003173468168824911, -0.011527182534337044, -0.0256392490118742, 0.010989246889948845, 0.01699036918580532, -0.03459551930427551, -0.00427903002128005, 0.014251789078116417, 0.008858464658260345, 0.0008204384939745069, -0.004093896131962538, 0.00656700087711215, 0.008062041364610195, 0.010807606391608715, -0.010849524289369583, 0.007433285936713219, -0.022411637008190155, 0.0029970675241202116, -0.0058753699995577335, -0.0019875657744705677, -0.0050370292738080025, -0.03845188766717911]"
Announcing Dragonfly,Announcing Dragonfly," Roman Gershman and I first met as engineers at Google. In 2013 we joined forces at Ubimo, a location intelligence company, where we had our first hands-on experience with in-memory datastores. As a startup that handled 300K requests per second, the only viable choice was using an in-memory datastore. At the beginning it was all great, but as the business grew, we started struggling with memory consumption, eviction logic and scaling issues.  Each limitation came with a workaround that was also limited in its own way. Impossible to grow with a single CPU? Fix by using application-level sharding. Resharding is an issue? Use cluster mode. Snapshot doubles the memory usage? Leave 55% memory free, or perform a snapshot from the HA instance. Team spending too much time on management? Get a managed service. Costs are too high? Flex your latency limitation and move to a different solution. These changes came at a high cost and always at an inconvenient time. It's the story of managing and scaling in-memory datastores for many companies around us.  In 2020, Roman joined a big cloud infrastructure company as a principal engineer in a team providing in-memory datastores as a managed service. There he witnessed the limitations of the current solutions at a global scale. He didn't believe that incremental improvements would provide the adequate answer to these problems - a profound architectural change was imperative. So in late 2021 we decided to join forces again and experiment with something we called Dragonfly.  Why Dragonfly? Dragonflies are speedy insects known for their agile flight and bright colors. They are elegantly designed with two sets of powerful independent wings, capable of moving in any direction, performing aerial maneuvers and sudden direction changes. These are exactly the qualities we want our in-memory datastore to have.  Dragonfly started as an experiment to see how an in-memory datastore could look like if designed in 2022. Based on learnings from our experience as memory store users and engineers at cloud companies, we knew that two key properties for Dragonfly had to be preserved: 1) sub-millisecond latency over very high throughput, and the more challenging one, 2) atomicity guarantees for all operations.  Roman was psyched to start coding. After a few months he came up with a groundbreaking POC based on a completely new architecture. It had atomicity, low latency and, on top of that, he also added memory optimizations. At this point the naiad (baby dragonfly) hatched from its egg. We could already see that this was not a linear improvement but a giant leap and were eager to share this with the world, but it was still lacking maturity. We spent the next few months adding Redis and Memcached commands, documenting, testing and also adding some colors to its wings, just like a real dragonfly. Version by version it transformed into the Dragonfly we envisioned.  Then came May 31st - the launch date. The truth is that we did not plan to launch Dragonfly that day. We opened up the repo to our closest friends and design partners. One of our design partners shared the repo on Hacker News and we learned about it from the spike in github stars. This spike turned out to be a flood of stars and engagement. Dragonfly was flying, only way faster than we expected. Maybe the in-memory market was waiting for a Dragonfly?  Dragonfly is a modern replacement for Redis and Memcached. Dragonfly's novel architecture vertically scales to support any workload limited only by the physical properties of the underlying hardware. This makes Dragonfly simple to run, monitor and scale, which also translates to overall cost savings. Dragonfly is a masterpiece creation by Roman Gershman. It was designed from the ground up to support next-century cloud workloads.  We released Dragonfly under BSL, so anyone can use it to run their workloads as long as they do not offer Dragonfly as a service or a managed service. In the near future we are planning to add high availability and support for more Redis commands. With the unlocked power of multiple CPUs there are many aerial maneuvers Dragonfly can do. Some of them are already live, some of them are about to hatch and the best ones will probably come from the community.  So today we are announcing Dragonfly - a modern replacement for Redis and Memcached. We may have not predicted the events of the past few days but we cannot be more ecstatic about it.  [Get](https://github.com/dragonflydb/dragonfly) it!  Oded","[0.004267417825758457, -0.00790861900895834, -0.013488276861608028, -0.025822626426815987, 0.0013219143729656935, 0.02068624645471573, -0.012256952002644539, 0.008000088855624199, -0.016014249995350838, -0.031156018376350403, 0.018913138657808304, 0.014205962419509888, 0.010195364244282246, -0.022600075230002403, 0.02528787963092327, 0.011243748478591442, 0.007162788417190313, -0.0060334880836308, 0.01822359673678875, -0.0030607199296355247, 0.008520763367414474, -0.00963950902223587, -0.003679900197312236, 0.015507647767663002, -0.004791609942913055, -0.0050132484175264835, 0.02921404503285885, -0.008731847628951073, 0.0004375598218757659, 0.00574148865416646, 0.027032842859625816, -0.00571686215698719, -0.009576183743774891, 0.0023324796929955482, -0.0411754809319973, -0.008985147811472416, 0.009358063340187073, -0.0026104070711880922, 0.029833225533366203, -0.002455612178891897, 0.0266388189047575, -0.021023979410529137, -0.0035145508591085672, -0.006272716913372278, -0.019827837124466896, 0.0016534924507141113, -0.002251564059406519, -0.01697116531431675, 0.01216548215597868, -0.01815323531627655, 0.012496180832386017, 0.03174705430865288, -0.017435550689697266, 0.016492707654833794, -0.0029375876765698195, 0.02655438520014286, 0.02527380734682083, 0.01687265932559967, -4.20794021920301e-05, -0.010835652239620686, 0.00576611515134573, 0.02426060289144516, -0.008485582657158375, 0.013636034913361073, -0.01153223030269146, 0.00144416734110564, -0.012453963980078697, -0.021206919103860855, -0.0043483334593474865, -0.008168956264853477, 0.03492739051580429, 0.0277505274862051, 0.008886641822755337, -0.004763465374708176, 0.0067863548174500465, -0.029467346146702766, 0.0004890115815214813, 0.005903319921344519, -0.003817104734480381, -0.0008931497577577829, 0.0015057334676384926, 0.0011424928670749068, -0.010322014801204205, 0.02189646102488041, -0.00029068044386804104, 0.03155004233121872, -0.016211261972784996, 0.0229518823325634, -0.016337912529706955, 0.004087996203452349, 0.008781099691987038, 0.02296595461666584, 0.00797194428741932, -0.0002770479186438024, 0.006958740297704935, 0.004270935896784067, 0.0015444322489202023, -0.0007581438403576612, -0.014761817641556263, -0.008562980219721794, -0.016647502779960632, -0.017168177291750908, -0.008429293520748615, -0.012355457991361618, -0.02313482202589512, -0.0157187320291996, 0.020883256569504738, -0.03295727074146271, 0.012263988144695759, 0.018800560384988785, -0.0005365055403672159, 0.03256324678659439, 0.02780681662261486, -0.013171650469303131, -0.009358063340187073, -0.016436418518424034, 0.022698581218719482, -0.027595732361078262, 0.02075660601258278, -0.020278150215744972, 0.025203445926308632, 0.021586870774626732, 0.01396673358976841, -0.007247222121804953, -0.002730021486058831, 0.0011152278166264296, -0.026174433529376984, -0.005076573695987463, 0.011630736291408539, -0.0009428425109945238, 0.01326312031596899, 0.03377346321940422, -0.006142548285424709, -0.011131170205771923, -0.025808554142713547, 0.01329830102622509, -0.014902540482580662, -0.0014151432551443577, -0.008471510373055935, -0.011827748268842697, 0.0064802831038832664, 0.026934336870908737, -0.030818283557891846, -0.009442497044801712, -0.022417135536670685, 0.025977421551942825, -0.013410879299044609, 0.015352852642536163, 0.010497917421162128, -0.016253478825092316, 0.017928078770637512, -0.021474292501807213, -0.008492618799209595, 0.01040644757449627, 0.03304170444607735, 0.021206919103860855, -0.01215140987187624, 0.023219255730509758, -0.03031168133020401, -0.002346551977097988, 0.02047516219317913, 0.039205361157655716, -0.0016763599123805761, -0.0065928613767027855, 0.02672325260937214, 0.031184162944555283, 0.002868985291570425, -0.028637081384658813, 0.002350070048123598, -0.03188777714967728, 0.005526886321604252, 0.028172696009278297, -0.03979639708995819, 0.022614147514104843, -0.010230544954538345, 0.014832179062068462, 0.006993921007961035, 0.023725857958197594, -0.002756407018750906, -0.01325608417391777, 0.018983500078320503, -0.022149762138724327, 0.02039072848856449, 0.023205183446407318, -0.008907750248908997, -0.004538308829069138, -0.010251653380692005, -0.0018944800831377506, 0.0019965041428804398, 0.003551490604877472, -0.016140900552272797, 0.0033140210434794426, -0.025667831301689148, -0.018673909828066826, -0.6047701239585876, -0.019841909408569336, 0.010645676404237747, -0.04162579029798508, -0.003148671705275774, -0.008752956055104733, 0.004601634107530117, 0.006304379552602768, -0.0018469862407073379, 0.012503216974437237, -0.010434592142701149, -0.01213030144572258, -0.010441628284752369, -0.0028074190486222506, -0.04739542677998543, 0.009843557141721249, 0.011243748478591442, -0.0056887175887823105, -0.01822359673678875, -0.0016130346339195967, -0.035631000995635986, 0.018758343532681465, 0.0035127918235957623, 0.0039015384390950203, -0.010983411222696304, -0.006167174782603979, -0.005973680876195431, 0.008415221236646175, -0.017843645066022873, 0.03974010795354843, -0.034448932856321335, 0.0243450365960598, 0.03025539219379425, -0.008126739412546158, 0.053896818310022354, -0.011187459342181683, -0.019729331135749817, 0.029354767873883247, -0.01336866244673729, 0.02558339759707451, -0.015859454870224, -0.027187636122107506, 0.014051167294383049, 0.02661067433655262, -0.008105630986392498, -0.005002694204449654, 0.01701338216662407, -0.013150542043149471, -0.00788751058280468, -0.01673193648457527, -0.0002403280814178288, -0.013650107197463512, -0.0014793480513617396, -0.0063606686890125275, 0.004538308829069138, -0.008942930959165096, 0.029382912442088127, -0.023613279685378075, 0.022740798071026802, -0.010167219676077366, 0.017829572781920433, 0.007289438974112272, 0.0012682639062404633, -0.01826581358909607, -0.024724988266825676, 0.004686067812144756, -0.012714301235973835, -0.014402974396944046, 0.0191945843398571, -0.0207988228648901, 0.02665289118885994, 0.0024503350723534822, 0.01040644757449627, -0.003285876475274563, -0.006423993967473507, 0.013495313003659248, 0.04809903725981712, 0.007219077553600073, -0.0007115294574759901, 0.027652021497488022, 0.007437197957187891, -0.011335218325257301, -0.015127696096897125, -0.02048923447728157, 0.04100661352276802, -0.002221660455688834, -0.037995144724845886, -0.0038593215867877007, -0.0005659693269990385, -0.005227850284427404, 0.008323751389980316, 0.023585135117173195, -0.012911313213407993, -0.030761994421482086, 0.043033018708229065, 0.028482286259531975, -0.025020506232976913, -0.0033931774087250233, 0.022206051275134087, -0.012636903673410416, 0.0030695151071995497, -0.03650348260998726, 0.001781022408977151, 0.023908795788884163, 0.0029094431083649397, 0.012812807224690914, -0.03025539219379425, 0.007402017246931791, 0.02790532261133194, -0.005583175458014011, 0.008907750248908997, -0.0193353071808815, -0.0078945467248559, -0.003132840385660529, 0.005547994747757912, -0.022304557263851166, 0.0264980960637331, -0.011095989495515823, 0.0029112021438777447, -0.018505042418837547, 0.004728284664452076, -0.026146288961172104, 0.01583131030201912, 0.010082785971462727, 0.00752866780385375, -0.0020598294213414192, 0.0039930082857608795, -0.011602591723203659, -0.002102046273648739, 0.02057366818189621, 0.023824363946914673, -0.028440069407224655, 0.025738192722201347, -0.02067217417061329, 0.038304734975099564, 0.00787343829870224, 0.024739060550928116, -0.00962543673813343, 0.028186768293380737, -0.02679361402988434, 0.019588608294725418, 0.0115463025867939, 0.007655317895114422, -0.01509955246001482, -0.0276801660656929, -0.0022937809117138386, -0.011384471319615841, 0.00607218686491251, 0.006286789197474718, -0.010765290819108486, -0.014353721402585506, -0.00015622425416950136, -0.022642292082309723, 0.0150573356077075, -0.010160183534026146, 0.006304379552602768, -0.014410010538995266, -0.0555010549724102, -0.02770831063389778, -0.0230926051735878, -0.006768764462321997, 0.034561511129140854, -0.028341563418507576, 0.01393858902156353, -0.028623009100556374, -0.04156950116157532, -0.01815323531627655, 0.018589476123452187, -0.01939159631729126, -0.007387944962829351, -0.01806880161166191, -0.022670436650514603, 0.004256863612681627, 0.0027247443795204163, -0.005604283884167671, -0.005234886426478624, -0.005878693424165249, 0.010455700568854809, -0.0012154928408563137, -0.0031029367819428444, 0.014663311652839184, 0.0009560352191329002, -7.910158456070349e-05, -0.014466299675405025, 0.03146560862660408, -0.0029446238186210394, 0.01680229790508747, 0.03557471185922623, 0.005259512923657894, 0.028130479156970978, 0.0030765512492507696, 0.023402195423841476, -0.017210394144058228, -0.01402302272617817, -0.01563429832458496, -0.022600075230002403, -0.0028601901140064, 0.0009261316736228764, -0.01825174130499363, 0.04227311536669731, 0.011173387058079243, 0.0025136603508144617, 0.012439891695976257, 0.0004353610274847597, 0.005090645980089903, -0.01801251247525215, -0.00784529373049736, -0.006842643953859806, 0.008781099691987038, 0.0012075771810486913, 0.005153971258550882, 0.004949923139065504, -0.006782836746424437, -0.018997572362422943, 0.0008276257431134582, 0.035687290132045746, -0.029805080965161324, 0.018406536430120468, -0.02537231333553791, 0.006835607811808586, 0.0034952014684677124, 0.004612188320606947, 0.017590343952178955, 0.00968172587454319, 0.005006212275475264, 0.0017282513435930014, 0.011145242489874363, 0.04120362550020218, 0.022614147514104843, -0.022557858377695084, 0.012538397684693336, 0.021375786513090134, -0.00018645766249392182, -0.0034934424329549074, 0.022571930661797523, 0.018899066373705864, 0.021544653922319412, -0.03033982589840889, 0.020038921386003494, -0.015578009188175201, 0.014958829618990421, 0.008591124787926674, 0.014677383936941624, -0.026835830882191658, 0.025062723085284233, 0.0072683305479586124, 0.016126828268170357, 0.012714301235973835, -0.012432855553925037, 0.012341385707259178, -0.029692502692341805, -0.012524325400590897, 0.01324904803186655, -0.0024485760368406773, 0.011011555790901184, -0.015620226040482521, 0.00047845736844465137, 0.0035866713151335716, 0.010800471529364586, 0.01591574400663376, 0.0003797315584961325, 0.018800560384988785, 0.017534054815769196, -0.002080937847495079, 0.023711785674095154, -0.007166306488215923, 0.020038921386003494, -0.013080180622637272, -0.012278060428798199, -0.004165393766015768, -6.239075446501374e-05, -0.028805948793888092, -0.016450490802526474, -0.02061588503420353, -0.0008373004384338856, 0.01146890502423048, 0.0013975529000163078, 0.004830308724194765, -0.005396717693656683, 0.0150573356077075, -0.011665917001664639, -0.02198089472949505, -0.0020369619596749544, -0.0016534924507141113, -0.0025681904517114162, -0.045284584164619446, -0.008886641822755337, 0.011736278422176838, 0.014902540482580662, 0.01681637018918991, 0.006283271126449108, -0.00755681237205863, -0.019701186567544937, 0.013101289048790932, -0.009336954914033413, 0.00963950902223587, 0.053671661764383316, -0.025836698710918427, -0.03416748717427254, 0.0033034668304026127, 0.009456569328904152, 0.01327015645802021, -0.020925473421812057, 0.004154839552938938, 0.05465671792626381, -0.004517200402915478, -0.01383304689079523, -0.02051737904548645, 0.016028322279453278, -0.007366836536675692, -0.020278150215744972, -0.028721515089273453, -0.034280065447092056, -0.011877001263201237, 0.02046108990907669, -0.002235732739791274, -0.03261953592300415, 0.012278060428798199, 0.01210919301956892, 0.012334349565207958, 0.002255082130432129, -0.013706396333873272, -0.0335201621055603, 0.004038743209093809, 0.08015568554401398, 0.029354767873883247, -0.014747745357453823, -0.011271893046796322, -0.017815500497817993, 0.007212041411548853, -0.013030927628278732, -0.03864246979355812, 0.032084789127111435, -0.0038874661549925804, 0.004742356948554516, -0.0064767650328576565, 0.002617443213239312, -0.006582307163625956, 0.007683462463319302, 0.016154972836375237, -0.011025628075003624, -0.024654626846313477, -0.01588759943842888, 0.0021565763745456934, -0.011729242280125618, 0.007803076878190041, 0.0335201621055603, 0.023880651220679283, 0.03647533804178238, 0.018716126680374146, 0.01827988587319851, -0.008464474231004715, 0.0035022376105189323, -0.023556990548968315, -0.016675647348165512, -0.0015453117666766047, 0.008337823674082756, 0.01687265932559967, -0.007057246286422014, 0.023838436231017113, -0.006972812581807375, -0.01916643977165222, 0.003263009013608098, 0.009245485067367554, 0.007183896843343973, -0.0029094431083649397, -0.010103894397616386, 0.011940325610339642, 0.01701338216662407, -0.009252521209418774, 0.002847876865416765, 0.012883168645203114, -0.0364471934735775, 0.0043518515303730965, 0.034392643719911575, -0.018687982112169266, -0.014051167294383049, -0.011954397894442081, -0.0028109371196478605, -0.00017040646343957633, 0.01139150746166706, -0.00015347576118074358, -0.019813764840364456, -0.028594864532351494, -0.01213030144572258, -0.01038533914834261, -0.01809694617986679, -0.03633461520075798, -0.023233328014612198, -0.00604052422568202, -0.012615795247256756, 0.004506646189838648, -0.025949276983737946, -0.024696843698620796, -0.007039655931293964, -0.02037665620446205, -0.04365219920873642, 0.0035092737525701523, 0.0004648248723242432, 0.0048936340026557446, 0.020165571942925453, 0.004200574476271868, -0.017322972416877747, 0.017646633088588715, 0.007676426321268082, -0.01832210272550583, 0.005414308048784733, -0.034364499151706696, -0.04615706577897072, 0.004802164155989885, -0.00601237965747714, -0.008281534537672997, -0.03014281578361988, 0.004003562498837709, 0.018772415816783905, 0.011644808575510979, 0.02442947030067444, 0.011194495484232903, 0.0070291017182171345, 0.0195463914424181, 0.029973948374390602, 0.016464563086628914, 0.004369441885501146, -0.029382912442088127, 0.028383780270814896, -0.0070291017182171345, -0.013530492782592773, -0.021249135956168175, 0.01573280431330204, -0.013417915441095829, -0.004503128118813038, -0.011166350916028023, 0.010307942517101765, -0.012517289258539677, 0.0018557814182713628, -0.024851638823747635, -0.007613101042807102, -0.005066019482910633, 0.031127873808145523, -0.010265725664794445, -0.007194451056420803, 0.01324904803186655, -0.02317703887820244, -0.006423993967473507, 0.03183148801326752, -0.007725679315626621, 0.04494684934616089, 0.012847987934947014, -0.003679900197312236, 0.02182609960436821, 0.0114759411662817, 0.0018082874594256282, -0.03554656729102135, 0.0033896593376994133, 0.00024538530851714313, 0.03245066851377487, 0.00011752549471566454, -0.01827988587319851, -0.006807463243603706, -0.017843645066022873, -0.01698523759841919, 0.004647369030863047, -0.013502349145710468, -0.0036341652739793062, -0.019110150635242462, -0.01944788545370102, 0.010195364244282246, -0.012650975957512856, -0.01146186888217926, -0.02178388275206089, -0.03042425960302353, -0.00030783104011788964, 0.017266683280467987, 0.014367793686687946, -0.03751668706536293, -0.03022724948823452, 0.012468036264181137, -0.012439891695976257, 0.0029463828541338444, -0.01837839186191559, 0.008260426111519337, -0.007655317895114422, 0.028102334588766098, 0.0037854420952498913, 0.03774184361100197, 0.008640377782285213, 0.010547170415520668, 0.026061855256557465, -0.003245418658480048, -0.008513727225363255, -0.005196187645196915, -0.008795171976089478, -0.0034952014684677124, -0.008612233214080334, 0.02165723219513893, 0.019813764840364456, 0.002497829031199217, 0.003651755629107356, -0.0015039744321256876, 0.013073144480586052, -0.017745139077305794, -0.005291175562888384, -0.028299346566200256, -0.03599688038229942, -0.015324708074331284, 0.005632428452372551, -0.004731802735477686, -0.002775756409391761, 0.0014758299803361297, -0.010089822113513947, 0.02777867205440998, -0.0207988228648901, 0.04323003068566322, -0.005477633327245712, 0.023303689435124397, -0.010680857114493847, 0.002237491775304079, -0.0021548173390328884, 0.010976375080645084, -0.022135689854621887, -0.01583131030201912, -0.013516421429812908, -0.016380129382014275, 0.017140032723546028, 0.01590167172253132, 0.01508548017591238, 0.015409141778945923, 0.01208104845136404, 0.014452227391302586, -0.0019507692195475101, -0.006744138430804014, -0.0011257820297032595, 0.010019460693001747, -0.009829484857618809, -0.003964863717556, -0.0342237763106823, -0.034420788288116455, -0.035659145563840866, -0.01384711917489767, 0.026104072108864784, 0.010561242699623108, 0.024950144812464714, -0.012489144690334797, -0.014353721402585506, -0.003372069215402007, -0.006990402936935425, 0.035631000995635986, -0.006856716237962246, 0.01798436790704727, 0.024936072528362274, 0.014663311652839184, -0.02776459977030754, -0.02296595461666584, 0.027117274701595306, -0.016239406540989876, 0.011187459342181683, 0.04489056020975113, -0.018772415816783905, -0.024035446345806122, -0.0012577096931636333, -0.01384711917489767, 0.0012946493225172162, -0.022191978991031647, -0.006441584322601557, 0.01203883159905672, -0.010497917421162128, -0.018772415816783905, -0.024612409994006157, -0.008816280402243137, -0.0005092404899187386, -0.031127873808145523, 0.0265684574842453, 0.017759211361408234, -0.014079311862587929, -0.004168911837041378, 0.01039237529039383, -0.0027968648355454206, 0.02285337634384632, -0.005614838097244501, 0.004844381008297205, 0.011215603910386562, -0.002478479640558362, -0.004562935326248407, -0.01507140789180994, 0.007472378667443991, 0.023331834003329277, -0.01322793960571289, -0.011898109689354897, 0.008323751389980316, 0.027384648099541664, 0.009491750039160252, -0.009421388618648052, -0.008253389969468117, 0.028721515089273453, -0.01152519416064024, -0.005871657282114029, 0.00027309011784382164, -0.0028179732616990805, -0.00027374972705729306, -0.020911401137709618, -0.01837839186191559, 0.006283271126449108, 0.01395266130566597, 0.0021301908418536186, 0.015366924926638603, -0.023838436231017113, -0.0015382756246253848, -0.00302026211284101, -0.01594388857483864, -0.022628219798207283, 0.0001748040522215888, -0.0020264077465981245, 0.008323751389980316, -0.05080091580748558, -0.00786640215665102, 0.00961840059608221, 0.007753823883831501, 0.0036095387768000364, -0.006139030214399099, -0.005910356063395739, -0.004636814817786217, 0.027314286679029465, -0.0024221905041486025, 0.023796219378709793, 0.028524503111839294, -0.007226113695651293, -0.0315781868994236, 0.024865711107850075, -0.002256841165944934, -0.013537528924643993, 0.019630825147032738, -0.01946195773780346, -0.01832210272550583, -0.008056377992033958, 0.003528623143211007, 0.003658791771158576, -0.023711785674095154, -0.004696622025221586, 0.02645587921142578, 0.017308900132775307, 0.014761817641556263, -0.02766609378159046, -0.023486629128456116, 0.0385298915207386, -0.02426060289144516, -0.014227070845663548, 0.009224376641213894, 0.0034969605039805174, -0.00963950902223587, 0.007606064900755882, -0.005062501411885023, -0.026244794949889183, -0.045622318983078, -0.012946493923664093, -0.014564805664122105, 0.03005838207900524, 0.004028188996016979, -0.0005712464335374534, -0.014719600789248943, -0.035631000995635986, -0.013052036054432392, 0.0025418049190193415, 0.008886641822755337, 0.02034851163625717, 0.002585780806839466, 0.005646500736474991, 0.021263208240270615, 0.017337044700980186, -0.004130213055759668, -0.0005567343905568123, -0.02431689202785492, -0.014466299675405025, -0.05423454940319061, -0.017252610996365547, -0.0020193716045469046, 0.0408940352499485, 0.0020422390662133694, -0.0057555609382689, -0.023711785674095154, -0.00042920440318994224, -0.047902025282382965, -0.004795128013938665, -0.0033122620079666376, 0.0076975347474217415, 0.027539443224668503, 0.014325576834380627, 0.019110150635242462, 0.015352852642536163, 0.01804065704345703, 0.02310667745769024, -0.00752866780385375, 0.006881342735141516, 0.006325487978756428, -0.030536837875843048, 0.047592438757419586, -2.3444630642188713e-05, -0.04002155363559723, -0.028763731941580772, -0.01403005886822939, -0.030621271580457687, 0.014494444243609905, 0.008422257378697395, 0.008752956055104733, 0.012981674633920193, 0.0011539265979081392, -0.008246353827416897, -0.010497917421162128, 0.0027159492019563913, 0.014860323630273342, -0.03391418606042862, -0.0018786488799378276, 0.023852508515119553, -0.009372135624289513, -0.01929309032857418, -0.013403843156993389, 0.001435372163541615, -0.0023025760892778635, 0.0032313463743776083, -0.0044292486272752285, 0.03912092745304108, 0.018702054396271706, 0.00303785246796906, 0.011672953143715858, 0.0020017812494188547, 0.019644897431135178, 0.03636275976896286, -0.008865533396601677, -0.014177817851305008, -0.01566244289278984, -0.009146979078650475, -0.02912961132824421, 0.01576094888150692, 0.009477677755057812, -0.01676008105278015, 0.02531602419912815, -0.036897506564855576, 0.021206919103860855, -0.025161229074001312, -0.024612409994006157, -0.020081138238310814, -0.0114759411662817, 0.006923559587448835, -0.004496091976761818, 0.006174210924655199, -0.004629778675734997, -0.006986884865909815, 0.001483745640143752, 0.012362494133412838, -0.012805771082639694, 0.0028443587943911552, 0.01951824687421322, -0.01395266130566597, -0.0026965998113155365, 0.027173563838005066, -0.010779363103210926, -0.024753132835030556, -0.017252610996365547, -0.0005321079515852034, 0.022262340411543846, -0.012693192809820175, 0.22481867671012878, 0.0008869931334629655, 0.014804034493863583, 0.046663668006658554, -0.010849724523723125, 0.002068624598905444, 0.015212129801511765, 0.003043129574507475, -0.015338780358433723, 0.017660705372691154, -0.0046579232439398766, -0.005168043542653322, -0.004689585883170366, -0.002747611841186881, 0.02313482202589512, 0.007345728110522032, -0.022670436650514603, -0.02783496119081974, -0.017322972416877747, -0.00043602066580206156, -0.01930716261267662, -0.01680229790508747, -0.0339423306286335, -0.016534924507141113, 0.022586002945899963, -0.022600075230002403, -0.009393244050443172, -0.00795083586126566, 0.003289394546300173, 0.018673909828066826, -0.010434592142701149, -0.0074934870935976505, 0.016337912529706955, -0.004084478132426739, 0.01694302074611187, -0.00578722357749939, 0.035828012973070145, -0.00392616493627429, 0.0005690476391464472, 0.0027863106224685907, 0.02556932531297207, -0.015155840665102005, 0.022403063252568245, 0.014241143129765987, 0.011088953353464603, -0.008323751389980316, -0.03619389235973358, 0.017646633088588715, -0.006986884865909815, 0.03360459581017494, -0.012735409662127495, 0.00602293387055397, 0.007676426321268082, 0.007247222121804953, 0.011799603700637817, -0.005386163480579853, -0.014550733380019665, 0.013417915441095829, 0.0056816814467310905, 0.019701186567544937, -0.014283359982073307, 0.021291352808475494, 0.00393671914935112, 0.007669390179216862, -0.030987150967121124, 0.01936345174908638, -0.036897506564855576, 0.05887840315699577, 0.005614838097244501, -0.015183985233306885, -0.012327313423156738, -0.013044999912381172, -0.031156018376350403, 0.009259557351469994, -0.022656364366412163, -0.029411057010293007, 0.015563936904072762, -0.006635078229010105, 0.007676426321268082, 0.02440132573246956, 0.004049297422170639, 0.0019261427223682404, 0.0004223881696816534, 0.007081872783601284, -0.014037095010280609, -0.009526930749416351, 0.029861370101571083, -0.01587352715432644, -0.046494800597429276, -0.03641904890537262, 0.013495313003659248, -0.004362405743449926, -0.019954487681388855, -0.018786488100886345, 0.04021856561303139, -0.008795171976089478, -9.65819854172878e-05, 0.015395069494843483, -0.009956135414540768, -0.03675678372383118, -0.02773645520210266, 0.032028499990701675, 0.04438395798206329, -0.009055509231984615, -0.01704152673482895, 0.008204136975109577, -0.014494444243609905, 0.016169045120477676, -0.003838213160634041, -0.02884816564619541, 0.0035743580665439367, -0.02921404503285885, 0.022740798071026802, -0.008295606821775436, 0.009238448925316334, 0.00973097886890173, 0.017590343952178955, -0.017266683280467987, 0.010223508812487125, -0.0004670236667152494, 0.00028694249340333045, -0.014719600789248943, 0.01587352715432644, 0.014621094800531864, -0.03636275976896286, -0.029664358124136925, -0.029973948374390602, 0.018702054396271706, -0.011074881069362164, -0.034280065447092056, 0.021122485399246216, -0.016281623393297195, 0.0052172960713505745, -0.03729153051972389, -0.01808287389576435, 0.012876132503151894, 0.01580316573381424, 0.004179466050118208, -0.02299409918487072, -0.019940415397286415, -0.01697116531431675, 0.014522588811814785, 0.03473037853837013, 0.015507647767663002, 0.009048473089933395, -0.0006464452017098665, 0.008373004384338856, 0.009118834510445595, -0.0011090711923316121, -0.02299409918487072, -0.01389637216925621, 0.016211261972784996, 0.012925385497510433, 0.005864621140062809, 0.008921822533011436, -0.012869096361100674, -0.01330533716827631, -0.02538638561964035, 0.000518915185239166, 0.007387944962829351, -0.052489589899778366, 0.002971009351313114, 0.029720647260546684, -0.014367793686687946, -0.010462736710906029, -0.01594388857483864, -0.18046286702156067, 0.014508516527712345, 0.001574335852637887, -0.012615795247256756, 0.03737596422433853, 0.004246309399604797, 0.031718909740448, -0.007641245611011982, -0.003683418268337846, 0.0036060207057744265, 0.0031170090660452843, 0.01701338216662407, -0.03549027815461159, -0.0342237763106823, 0.023472556844353676, 0.019110150635242462, 0.011328182183206081, 0.020967690274119377, 0.043033018708229065, 0.01699930988252163, 0.018434680998325348, -0.05668312683701515, 0.0067019215784966946, 0.006891896948218346, 0.023472556844353676, -0.012482108548283577, 0.0010061677312478423, -0.009111798368394375, -0.014621094800531864, -0.03295727074146271, -0.01925087347626686, -0.011088953353464603, 0.020995834842324257, 0.00046526463120244443, 0.022811159491539, 0.010849724523723125, 0.014332612976431847, 0.03540584444999695, -0.008696666918694973, 0.04635407775640488, 0.0156483706086874, 0.03343572840094566, 0.006740620359778404, 0.011166350916028023, -0.0009586737724021077, 0.003641201416030526, -0.008492618799209595, -0.026343300938606262, -0.014283359982073307, 0.02077067829668522, 0.023613279685378075, -0.010286834090948105, -0.0035145508591085672, -0.010744182392954826, 0.013776757754385471, 0.00038676770054735243, 0.012890204787254333, 0.020939545705914497, 0.023458484560251236, -0.01570465974509716, 0.005467079114168882, -0.00788751058280468, 0.015549864619970322, -0.002489033853635192, 0.011813675984740257, -0.024570193141698837, -0.006304379552602768, 0.016394201666116714, -0.022191978991031647, -0.0015074925031512976, -0.0025910576805472374, 0.016450490802526474, 0.010673820972442627, 0.027370575815439224, 0.003032575361430645, 0.015296563506126404, 0.0003847887855954468, 0.007007993292063475, 0.027567587792873383, -0.0014001914532855153, 0.0008966678287833929, 0.017815500497817993, -0.015380997210741043, 0.0061179217882454395, -0.008534835651516914, -0.009562111459672451, -0.0030712741427123547, -0.007986016571521759, -0.021052123978734016, 0.004270935896784067, 0.03019910492002964, -0.032084789127111435, 0.01808287389576435, 0.00790158286690712, 0.005488187540322542, 0.022206051275134087, 0.006311415694653988, -0.0017256127903237939, 0.03748854249715805, 0.005189151503145695, -0.011813675984740257, 0.005372091196477413, -0.022107545286417007, -0.0017766248201951385, 0.0018786488799378276, 0.017337044700980186, 0.00793676357716322, -0.01388229988515377, 0.03762926533818245, -0.00958321988582611, -0.04227311536669731, 0.03903649374842644, 0.024964217096567154, 0.039458662271499634, -0.021066196262836456, 0.013424951583147049, 0.014093384146690369, -0.017365189269185066, 0.01925087347626686, -0.021333569660782814, 0.07801669836044312, -0.012608759105205536, -0.00791565515100956, 0.01149001345038414, 0.021023979410529137, -0.009315846487879753, -0.0947345644235611, -0.017548127099871635, 0.010884905233979225, -0.014649239368736744, -0.010237581096589565, -0.008056377992033958, -0.008710739202797413, 0.024710915982723236, -0.03883948177099228, 0.012425819411873817, -0.028496358543634415, -0.006205873563885689, -0.010329050943255424, 0.0019050342962145805, 0.004633296746760607, 0.011039700359106064, -0.013516421429812908, -0.005308765918016434, 0.00015259624342434108, 0.030874572694301605, 0.009920954704284668, -0.004612188320606947, 0.009815412573516369, 0.014663311652839184, -0.023965084925293922, 0.005980717018246651, -0.0025136603508144617, 0.005424862261861563, 0.015986105427145958, 0.0020527932792901993, 0.00971690658479929, -0.016154972836375237, 0.021333569660782814, -0.018814632669091225, -0.00969579815864563, -0.010863796807825565, -0.038051433861255646, 0.006895415019243956, 0.023345906287431717, -0.018884994089603424, 0.009498786181211472, -0.012735409662127495, 0.01203883159905672, -0.02428874745965004, -0.023979157209396362, 0.016408273950219154, -0.007402017246931791, 0.02673732489347458, 0.030818283557891846, 0.00033773461473174393, 0.0016693237703293562, -0.0047810557298362255, -0.0032243102323263884, -0.014733673073351383, 0.026258867233991623, -0.025850770995020866, 0.014649239368736744, 0.008633341640233994, -0.016253478825092316, -0.0012726614950224757, -0.009970207698643208, -0.010110930539667606, -0.015001046471297741, -0.0037854420952498913, 0.011215603910386562, 0.002073901705443859, -0.01331940945237875, -0.0005536560784094036, -0.011152278631925583, -0.014747745357453823, -0.011243748478591442, 0.003799514379352331, -0.021094340831041336, 0.007634209468960762, -0.02172759361565113, -0.013059072196483612, 0.0003639002679847181, 0.008942930959165096, -0.00569927180185914, -0.0115463025867939, -0.01401598658412695, -0.01157444715499878, -0.012897240929305553, -0.039374228566884995, 0.008598160929977894, 0.03475852310657501, 0.03723524138331413, 0.0023166483733803034, 0.01819545216858387, -0.02668103575706482, -0.020024849101901054, -0.005080091767013073, -0.009315846487879753, -0.02804604545235634, -0.014649239368736744, 0.012608759105205536, -0.004186502192169428, 0.005505777895450592, 0.01576094888150692, 0.013621962629258633, -0.018983500078320503, -0.023866580799221992, -0.06101738661527634, 0.008893677964806557, 0.003760815830901265, -0.004992139991372824, 0.018786488100886345, -0.014747745357453823, -0.02651216834783554, -0.012847987934947014, 0.0036271291319280863, 0.012749481946229935, -0.028257129713892937, 0.005361536983400583, -0.010005388408899307, -0.009111798368394375, -0.019110150635242462, -0.024415398016572, 0.01203883159905672, 0.006800427101552486, 0.000524192291777581, 0.026948409155011177, 0.001982431858778, 0.0038804300129413605, -0.006895415019243956, 0.01563429832458496, -0.011820712126791477, -0.021249135956168175, -0.011834784410893917, 0.02404951862990856, -0.01680229790508747, -0.01319979503750801, -0.010082785971462727, -0.03959938511252403, -0.0010615773499011993, 0.016239406540989876, 0.01581723801791668, 0.0031891295220702887, -9.289901208830997e-05, -0.004450357053428888, 0.009442497044801712, 0.01826581358909607, -0.013692324049770832, -0.035771723836660385, 0.019096078351140022, -0.030705705285072327, 0.003658791771158576, -0.0037397074047476053, 0.007039655931293964, -0.008654450066387653, 0.039205361157655716, -0.0071381619200110435, 0.008211173117160797, 0.02081289514899254, -0.015254346653819084, -0.028510430827736855, -0.007219077553600073, 0.0055726212449371815, -0.002503106137737632, 0.024007301777601242, -0.001824118779040873, -0.010202400386333466, 0.023556990548968315, 0.00966765359044075, 0.0008161920122802258, -0.019743403419852257, 0.03791071102023125, -0.024936072528362274, -0.027469081804156303, 0.008900714106857777, 0.0033439246471971273, -0.016084611415863037, -0.02043294534087181, 0.0006209391867741942, 0.020081138238310814, -0.0010703725274652243, -0.007486450951546431, 0.002735298592597246, -0.006297343410551548, -0.008844424970448017, -0.018448753282427788, 0.012292132712900639, 0.003366792108863592, -0.046551089733839035, 0.004464429337531328, 0.00570630794391036, 0.02666696347296238, 0.007620137184858322, 0.010561242699623108, 0.035828012973070145, 0.026272939518094063, 0.004274453967809677, -0.006645632442086935, 0.004453875124454498, -0.006508427672088146, -0.004024670924991369, 0.0069130053743720055, -0.0009190955315716565, -0.016534924507141113, 0.017956223338842392, 0.014677383936941624, 0.009576183743774891, 0.017421478405594826, 0.023472556844353676, 0.025034578517079353, -0.021418003365397453, -0.0010650954209268093, 0.03346387296915054, -0.003760815830901265, 0.0021266727708280087, 0.010603459551930428, 0.01685858704149723, 0.013087216764688492, -0.012306204997003078, -0.020320367068052292, 0.04508757218718529, -0.004513682331889868, 0.009034400805830956, -0.004302598536014557, -0.03152189776301384, -0.0024292266461998224, 0.027046915143728256, 0.02196682244539261, 0.012665048241615295, 0.04235754907131195, -0.008548907935619354, 0.013094252906739712, 0.038192156702280045, 0.021164702251553535, -0.007282402832061052, -0.014353721402585506, -0.0022181423846632242, 0.02426060289144516, 0.004299080464988947, -0.0004995657945983112, -0.024513904005289078, 0.002353588119149208, -0.02058774046599865, -0.031043440103530884, 0.023951012641191483, -0.00397189985960722, 0.08426478505134583, 0.02186831645667553, -0.02279708720743656, -0.02060181275010109, -0.025738192722201347, 0.0009982520714402199, 0.00196835957467556, 0.005505777895450592, -0.01809694617986679, -0.03717895224690437, 0.050435036420822144, -0.00790158286690712, -0.01209512073546648, -0.029354767873883247, 0.014522588811814785, 0.0191945843398571, -0.010659748688340187, 0.015127696096897125, -0.0037256351206451654, -0.02075660601258278, 0.03003023751080036, -0.016084611415863037, 0.01221473515033722, -0.012292132712900639, -0.022065328434109688, 0.010540134273469448, 0.014902540482580662, -0.004956959281116724, -0.010870832949876785, -0.03979639708995819, 0.013558637350797653, -0.008337823674082756, -0.033323150128126144, 0.0020580703858286142, 0.0039965263567864895, 0.012700228951871395, 0.010448664426803589, -0.028524503111839294, 0.006976330652832985, 0.004063369706273079, -0.02303631603717804, -0.009175123646855354, -0.011996614746749401, -0.02907332219183445, 0.0279616117477417, 0.013037963770329952, -0.009329918771982193, -0.00602293387055397, -0.02431689202785492]"
Announcing Dragonfly Kubernetes Operator General Availability,Announcing Dragonfly Kubernetes Operator General Availability,"## Introduction  We are excited to announce that the Kubernetes Operator for Dragonfly is now generally available, making it simple and easy to run and manage Dragonfly on Kubernetes. Dragonfly is a data store built for modern cloud workloads, and Kubernetes is the leading orchestration engine for modern cloud workloads, making this a perfect fit for those looking to architect resilient, reliable, and performant applications.  Along with general availability, we are also excited to announce new capabilities such as advanced snapshotting, enterprise-grade security, and performance and reliability enhancements.  To get started immediately, visit our newly updated [Dragonfly Operator documentation](https://www.dragonflydb.io/docs/managing-dragonfly/operator/installation).  ---  ## Advanced Snapshotting  Snapshotting has always been a reliable data backup mechanism for Dragonfly. In this latest release, we are taking it to the next level, ensuring that snapshotting is more seamlessly integrated with Kubernetes and cloud storage solutions. With the introduction of the high-level `snapshot` field in the Dragonfly Custom Resource Definition (CRD), configuring and utilizing snapshotting has never been easier.  By setting up this configuration, you empower Dragonfly to automatically handle data backups during pod terminations as well as restores when a pod comes back up again, minimizing downtime and maintaining the integrity of your operations.  Dragonfly Kubernetes Operator supports snapshotting in two ways: Persistent Volume Claims (PVC) and Cloud Storage. Each option offers unique advantages, catering to different use cases and preferences.  ### 1. Persistent Volume Claims (PVC)  `PersistentVolume (PV)` is the method Kubernetes users employ to manage disk storage from underlying cloud or on-premise infrastructure. A `PersistentVolumeClaim (PVC)` is a request for storage by your applications. With the `snapshot.persistentVolumeClaimSpec` field, you can use the exact same [Kubernetes PVC syntax](https://kubernetes.io/docs/concepts/storage/persistent-volumes/#persistentvolumeclaims) to configure Dragonfly snapshotting storage.  ```yaml apiVersion: dragonflydb.io/v1alpha1 kind: Dragonfly metadata: name: dragonfly-instance-snapshotting-to-pvc spec: replicas: 1 snapshot: cron: ""*/5 * * * *"" persistentVolumeClaimSpec: # uses standard Kubernetes PVC API accessModes: - ReadWriteOnce resources: requests: storage: 2Gi ```  More details can be found in the [Dragonfly Operator snapshots to PVC documentation](https://www.dragonflydb.io/docs/managing-dragonfly/operator/snapshot-pvc).  <iframe width=""100%"" height=""475"" src=""https://www.youtube.com/embed/yZfsIAizR3M"" title=""YouTube video player"" frameborder=""0"" allow=""accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"" allowfullscreen></iframe>  ### 2. Cloud Storage  Dragonfly has recently added support for snapshotting to S3-compatible cloud storage. This allows for seamless writing and reading of snapshot files directly from an S3 bucket, facilitated by the `--dr s3://<>` server argument. To utilize this feature, the environment must be properly configured with the necessary credentials.  The same should work with a Dragonfly instance managed by the operator when the `snapshot.dir` field is set accordingly. Additionally, for those utilizing managed Kubernetes services such as Amazon EKS, there are tools available to attach an IAM role directly to a Kubernetes service account. This feature simplifies credential management, automating rotation based on the pod's lifecycle and eliminating the need to handle long-lived credentials.  ```yaml apiVersion: dragonflydb.io/v1alpha1 kind: Dragonfly metadata: name: dragonfly-instance-snapshotting-to-s3 spec: replicas: 1 serviceAccountName: dragonfly-s3-svc-acc # service account with S3 permissions snapshot: dir: ""s3://dragonfly-snapshots"" # S3 bucket name ```  More details can be found in the [Dragonfly Operator snapshots to S3 documentation](https://www.dragonflydb.io/docs/managing-dragonfly/operator/snapshot-s3).  <iframe width=""100%"" height=""475"" src=""https://www.youtube.com/embed/chqlgwsPS6M"" title=""YouTube video player"" frameborder=""0"" allow=""accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"" allowfullscreen></iframe>  ---  ## Enterprise-Grade Security  ### 1. Client Authentication  With the introduction of the `authentication` field in the Dragonfly Operator configuration, we have streamlined the process of authenticating clients connecting to your Dragonfly instance. Currently, the following two methods, `passwordFromSecret` and `clientCaCertSecret`, are supported.  `passwordFromSecret` utilizes Kubernetes Secrets to store and manage credentials. By specifying a secret in your configuration, Dragonfly will automatically retrieve and use the value associated with the `key` as the authentication password for clients.  ```yaml apiVersion: dragonflydb.io/v1alpha1 kind: Dragonfly metadata: name: dragonfly-instance-with-password-auth spec: replicas: 1 authentication: passwordFromSecret: name: dragonfly-auth key: password ```  `clientCaCertSecret` enhances security with TLS by having client certificates verified by Dragonfly. Setting this up requires a few more steps to follow. Detailed instructions for both methods above can be found in the [Dragonfly Operator authentication documentation](https://www.dragonflydb.io/docs/managing-dragonfly/operator/authentication).  ### 2. Server TLS  The Dragonfly Kubernetes Operator now supports the integration of TLS certificates. By specifying a Kubernetes Secret in your Dragonfly instance configuration, you can ensure that the certificates are propagated and configured. This results in encrypted communication between clients and the Dragonfly server, safeguarding network communications from man-in-the-middle attacks.  Using TLS with [cert-manager](https://cert-manager.io/docs/) is available in the [Dragonfly Operator server TLS documentation](https://www.dragonflydb.io/docs/managing-dragonfly/operator/server-tls).  <iframe width=""100%"" height=""475"" src=""https://www.youtube.com/embed/4nywgCkE-7Y"" title=""YouTube video player"" frameborder=""0"" allow=""accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"" allowfullscreen></iframe>  ---  ## Monitoring and Reliability  ### 1. Monitoring with Prometheus & Grafana  **Prometheus** is the default way of monitoring and storing metrics in Kubernetes. We have new [documentation](https://www.dragonflydb.io/docs/managing-dragonfly/operator/prometheus-guide) on how to install the Prometheus Operator and use it to collect and store metrics.  **Grafana** can then be used to start visualizing these important metrics. We provide [custom dashboards](https://www.dragonflydb.io/docs/managing-dragonfly/operator/grafana-guide) with important metrics that you can directly load and start monitoring your instances.  ### 2. Reliability - Custom Rollout Strategy  Unlike the conventional way of relying on Kubernetes for stateful set upgrades, the Dragonfly Operator takes a proactive and controlled approach. When any modification is made to the Dragonfly Custom Resource, the Operator first initiates the upgrade process with the replicas. It upgrades each replica, pausing to confirm the readiness of at least one replica before proceeding. Following this validation, the master is then upgraded, with the Operator selecting one of the latest replicas to assume the master role. This whole rollout process is done automatically with no additional operational input.  ### 3. Reliability - Using the `REPLTAKEOVER` Command for Upgrades  In previous iterations, upgrading Dragonfly presented certain challenges. Particularly, the abrupt transition from the old version of the master to a new one could result in potential data inconsistencies. Clients were not locked during this transition, meaning that writes to the old master might not have been fully propagated to the new master, leading to data loss.  The `REPLTAKEOVER` command addresses these challenges by locking the old master, ensuring that all ongoing operations are completed. Only once this steady state is achieved will the system proceed to migrate to the new master.  Finally, with the recent change to use Cluster IP Service instead of Headless Service, any failover updates are propagated to clients faster.  <iframe width=""100%"" height=""475"" src=""https://www.youtube.com/embed/wOloKdzIaj0"" title=""YouTube video player"" frameborder=""0"" allow=""accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"" allowfullscreen></iframe>  ---  ## Benchmarks  Last but not least, Dragonfly is known for being ultra-performant and extremely reliable. With all the abstraction layers in Kubernetes plus Dragonfly running in a containerized environment, we are able to achieve **1.3 million QPS with sub-millisecond P99.9 latency** on an AWS `c6gn.8xlarge` instance. The load is generated with the [memtier-benchmark](https://github.com/RedisLabs/memtier_benchmark) tool. Detailed benchmarking steps and results can be found in the video below.  <iframe width=""100%"" height=""475"" src=""https://www.youtube.com/embed/O5dX5y9ndVM"" title=""YouTube video player"" frameborder=""0"" allow=""accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"" allowfullscreen></iframe>  ---  ## Conclusion  Kubernetes is designed for managing complex production workloads, and Dragonfly is designed to make it easy to scale those same workloads with unparalleled performance. We're excited to see what you build. If you would like a free trial of a fully managed Dragonfly Cloud account, [please request one here](https://www.dragonflydb.io/cloud).  Also, we will be hosting an online **Technical Workshop about Dragonfly Operator on Nov 15, 2023**. It's a great chance to connect and learn, and if you are interested, [please register here](https://www.dragonflydb.io/workshop-2023-11-15).","[0.006248580291867256, -0.023803463205695152, -0.0028813278768211603, -0.029675623401999474, -0.018725208938121796, 0.030414776876568794, -0.03285124525427818, 0.001286673708818853, -0.020532026886940002, -0.007562630344182253, 0.009253100492060184, -0.0031396893318742514, -0.01849251240491867, -0.006494964938610792, 0.019505426287651062, 0.004044809378683567, 0.0024279123172163963, -0.03257748484611511, 0.005807141773402691, -0.0382990762591362, -0.011094138957560062, 0.005382813047617674, -0.013427945785224438, 0.0019779186695814133, -0.006648954935371876, 0.011662191711366177, 0.012907801195979118, -0.022215653210878372, 0.008479727432131767, -0.008418131619691849, 0.02232515811920166, 0.01850620098412037, -0.008267562836408615, 0.012154960073530674, -0.008294939063489437, -0.006744771264493465, 0.017589103430509567, -0.007302558049559593, 0.008938276208937168, -0.0027547136414796114, 0.019957130774855614, -0.004996126517653465, -0.0005030346801504493, -0.023762399330735207, -0.021846076473593712, 0.02784143015742302, 0.0006861119181849062, -0.02129855751991272, 0.030195768922567368, -0.016781510785222054, -0.0081717474386096, 0.033125005662441254, -0.02009401097893715, 0.013749614357948303, 0.02484375424683094, 0.0025237284135073423, 0.008575543761253357, 0.017123710364103317, 0.02081947587430477, -0.00826071947813034, 0.0010103468084707856, 0.014221850782632828, 0.01177169568836689, 0.00036230473779141903, -0.02092898078262806, 0.0006292210891842842, 0.0030472951475530863, -0.012859893031418324, 0.0015373355709016323, -0.002758135786280036, 0.04495145380496979, 0.02934711053967476, 0.011812759563326836, -0.01971074566245079, 0.006833743304014206, -0.022763174027204514, 0.015631716698408127, -0.008048554882407188, 0.004397275857627392, 0.0014415194746106863, 0.012072832323610783, -0.005831095855683088, -0.009766400791704655, 0.01943698525428772, -0.0018786805449053645, 0.022393597289919853, -0.024775313213467598, -0.001466328976675868, -0.014221850782632828, 0.00660789106041193, -0.0009650053107179701, -0.0007815003045834601, 0.004376743920147419, 0.016288742423057556, -0.0020035835914313793, 0.02504907362163067, 0.011477403342723846, 0.0008880101959221065, -0.010478178039193153, -0.03520558401942253, -0.02970300056040287, 0.010895662941038609, 0.014605116099119186, -0.0196286179125309, -0.02456999383866787, -0.023474952206015587, 0.02270842343568802, -0.021517565473914146, 0.02550077810883522, 0.0035143988206982613, -0.010820378549396992, 0.030579032376408577, 0.012079676613211632, -0.02728022076189518, 0.007850078865885735, -0.013708550482988358, -0.00553338136523962, -0.019560178741812706, 0.013072057627141476, -0.024131976068019867, 0.03501395136117935, 0.014221850782632828, 0.021599693223834038, -0.024966945871710777, -0.02185976505279541, -0.01045764610171318, -0.0007211874471977353, -0.004944796673953533, 0.009739025495946407, -0.01794499158859253, -0.0005813130410388112, 0.02663688361644745, 0.008356534875929356, 0.0013448478421196342, -0.022626293823122978, 0.008418131619691849, -0.03586260974407196, -0.0017999744741246104, 0.0014671845128759742, -0.018246129155158997, -0.005944021977484226, 0.018533576279878616, -0.009335228241980076, -0.029648248106241226, -0.015440084971487522, 0.010047005489468575, 0.009191504679620266, 0.03482231870293617, 0.009971721097826958, -0.0071793654933571815, 0.020244579762220383, -0.011333678849041462, -0.010635590180754662, -0.0008580676512792706, 0.01177169568836689, 0.003979791421443224, -0.007042485289275646, 0.003627324942499399, 0.014728307723999023, -0.01672675833106041, 0.01708264648914337, 0.031810954213142395, -0.009218879975378513, -0.004787384532392025, 0.013332130387425423, 0.02697908505797386, 0.014837811700999737, -0.020586779341101646, -0.014399795792996883, -0.011518467217683792, 0.008424974977970123, 0.031728826463222504, -0.04256973788142204, 0.027909869328141212, -0.014659867621958256, 0.01916322484612465, -0.00035096934880129993, 0.0046573481522500515, -0.026103051379323006, -0.01737009547650814, 0.023050623014569283, -0.004640238359570503, 0.005345171317458153, 0.03942149132490158, -0.028252070769667625, -0.023119062185287476, 0.005622353404760361, -0.012770920991897583, 0.009321540594100952, 0.00345622468739748, -0.0007802170584909618, 0.008602919988334179, -0.007959582842886448, -0.012018079869449139, -0.6084050536155701, -0.01229184027761221, 0.010512398555874825, -0.04259711503982544, 0.019491737708449364, -0.0025647925212979317, 0.010909350588917732, 0.002985699102282524, 0.011840135790407658, 0.016466686502099037, 0.012134428136050701, -0.00203267065808177, -0.019040033221244812, 0.006310176569968462, -0.02343388833105564, -0.016001293435692787, 0.02951136790215969, -0.022544166073203087, 0.005204868968576193, -0.004212487488985062, -0.02511751465499401, 0.015180012211203575, -0.01079300232231617, -0.0027769566513597965, 8.833049651002511e-05, -0.007117769680917263, 0.001618608133867383, 0.005440987180918455, 0.008575543761253357, 0.01868414506316185, -0.04043440520763397, 0.02253047749400139, 0.01624767854809761, -0.0003879697760567069, 0.05061829090118408, -0.0200666356831789, -0.0317562036216259, 0.013202093541622162, 0.013393726199865341, 0.06110331416130066, -0.00991012528538704, -0.011319991201162338, 0.029648248106241226, 0.01513894833624363, -0.01982025057077408, -0.012373968958854675, 0.021654445677995682, -0.03194783627986908, -0.010820378549396992, 0.01219602394849062, 0.004496513865888119, -0.0029446349944919348, 0.019560178741812706, -0.011573219671845436, -0.02492588199675083, -0.026760075241327286, 0.03542459011077881, -0.019382234662771225, 0.012866737321019173, -0.010669810697436333, 0.009212036617100239, 0.02915547974407673, -0.0044794040732085705, -0.015919165685772896, -0.026034610345959663, 0.018998969346284866, -0.014413483440876007, -0.013653798028826714, -0.0001241545978700742, -0.016275053843855858, 0.03164669871330261, -0.009547392837703228, 0.015002068132162094, -0.02046358771622181, 0.012921489775180817, 0.033973660320043564, 0.02484375424683094, 0.01275723334401846, 0.017506975680589676, 0.03416529297828674, 0.02597985975444317, 0.004582064226269722, -0.010498709976673126, -0.004424652084708214, 0.031044425442814827, 0.0177533607929945, -0.03840858116745949, 0.0040687634609639645, 0.0022054819855839014, -0.0038771312683820724, 0.027389725670218468, 0.02035408280789852, -0.013345818035304546, -0.02177763730287552, 0.01060821395367384, 0.02269473485648632, -0.007932206615805626, -0.0052733090706169605, 0.0061801401898264885, -0.0026161225978285074, -0.011908575892448425, -0.030031511560082436, -0.013605889864265919, -0.004852402489632368, 0.009143596515059471, 0.008671360090374947, -0.03307025134563446, -0.007124613504856825, 0.019505426287651062, -0.021722884848713875, -4.341668318375014e-05, 0.01321578212082386, -0.010067537426948547, -0.006874807178974152, 0.021846076473593712, -0.02383084036409855, 0.03476756811141968, 0.016329806298017502, 0.01690470241010189, -0.019012657925486565, -0.000798610330093652, -0.007692666258662939, 0.019012657925486565, -0.0069090272299945354, -0.004523890092968941, 0.020011883229017258, -0.0061938283033668995, -0.022831615060567856, -0.014591427519917488, 0.021996645256876945, 0.012989929877221584, -0.010854598134756088, 0.010916194878518581, -0.00691244937479496, 0.03263223543763161, 0.000615533092059195, 0.017958680167794228, 0.006169874221086502, 0.015426396392285824, -0.027978310361504555, -0.0007297424599528313, 0.005105630960315466, 0.023228567093610764, -0.01578228548169136, -0.014769371598958969, -0.002215747954323888, -0.03298812359571457, -0.005841361824423075, 0.004092717543244362, -0.02521332912147045, -0.0035794167779386044, -0.020874228328466415, -0.001579255098477006, 0.015850724652409554, 0.001505682012066245, 0.012182336300611496, -0.011388431303203106, -0.029593495652079582, -0.013256845995783806, -0.013865962624549866, 0.009465265087783337, 0.014865187928080559, -0.04421230033040047, -0.014961004257202148, -0.02307799831032753, -0.011511623859405518, -0.016220301389694214, 0.00558471167460084, -0.009506328962743282, -0.018163999542593956, -0.025446025654673576, -0.0022756331600248814, -0.01045764610171318, 0.00473947636783123, 0.029210232198238373, -0.027540292590856552, -0.010478178039193153, 0.004243285860866308, -0.0017007362330332398, 0.0034271376207470894, 0.01810924895107746, -0.008821927942335606, -0.014550363644957542, -0.0017571994103491306, 0.03285124525427818, 0.007713198196142912, 0.011518467217683792, 0.051904965192079544, 0.010437114164233208, 0.02091529220342636, -0.004729210399091244, 0.03914773091673851, -0.004838714376091957, -0.0003351425693836063, -0.020983731374144554, -0.01186066772788763, -0.02495325729250908, 0.007459970191121101, -0.011997547931969166, 0.02521332912147045, 0.024501552805304527, -0.0018290614243596792, 0.03512345626950264, -0.027540292590856552, 0.005885847844183445, -0.0071793654933571815, -0.011901731602847576, -0.0005034624482505023, 0.01757541485130787, 0.012298684567213058, 0.023474952206015587, 0.007145145442336798, 0.005263043101876974, 0.004051653668284416, 0.019450673833489418, 0.03148244321346283, -0.00887668039649725, -0.016233989968895912, -0.0173016544431448, 0.016179237514734268, -0.00821965467184782, -0.004951640497893095, 0.007596850395202637, 0.004647082183510065, -0.0011686146026477218, 0.006070636212825775, -0.008048554882407188, 0.020148763433098793, 0.0177533607929945, -0.016014982014894485, -0.012490317225456238, 0.029949383810162544, 0.0035794167779386044, 0.012989929877221584, 0.02259891852736473, 0.04363740235567093, 0.021325932815670967, -0.016562502831220627, 0.028635334223508835, -0.030004136264324188, 0.028443701565265656, -0.002727337647229433, 0.028881719335913658, -0.02904597483575344, 0.023091686889529228, 0.01935485750436783, -0.012360280379652977, -0.005485473200678825, -0.017342720180749893, -0.022667357698082924, -0.022571543231606483, -0.007049329578876495, 0.009472108446061611, -0.006019305903464556, 0.007295713759958744, -0.0034664906561374664, 0.003931883256882429, -0.004883200395852327, 0.015727533027529716, 0.005622353404760361, 0.01312681008130312, 0.023557079955935478, 0.013133653439581394, -0.011456871405243874, 0.025829290971159935, -0.013763302937150002, 0.010197573341429234, -0.005519693251699209, -0.018054496496915817, -0.00726149370893836, 0.0027940666768699884, -0.01363326609134674, -0.002024115761741996, -0.030195768922567368, -0.0030541392043232918, -0.0012627197429537773, -0.012353437021374702, 0.033973660320043564, -0.017876552417874336, 0.0242825448513031, -0.0065770926885306835, -0.04566323012113571, 0.01608342118561268, 0.0068097892217338085, 0.015659093856811523, -0.03884659707546234, 0.004756586626172066, 0.019395921379327774, 4.879030166193843e-05, 0.03296075016260147, 0.009102532640099525, -0.0006950946990400553, -0.006529184989631176, 0.005725013557821512, -0.0031277122907340527, -0.011237863451242447, 0.025747163221240044, -0.03276911750435829, -0.0013884783256798983, -0.0028779059648513794, 0.0008315471350215375, 0.019464362412691116, 0.006156186107546091, 0.007672134321182966, 0.029264982789754868, -0.00021804585412610322, -0.03205733746290207, -0.01847882568836212, 0.020627843216061592, -0.039366740733385086, 0.016685694456100464, -0.02495325729250908, -0.05464256927371025, -0.029839880764484406, -0.0011438049841672182, 0.007678978145122528, -0.028087813407182693, 0.00040871568489819765, 0.018287193030118942, 0.015330580994486809, -0.01717846281826496, 0.002657186472788453, 0.0019744967576116323, 0.008288094773888588, 0.0485650897026062, 0.0006613024161197245, 0.004729210399091244, 0.021955581381917, -0.017862863838672638, 0.000602272804826498, 0.0001302500459132716, -0.02149018831551075, 0.01036867406219244, 0.009259944781661034, -0.01513894833624363, -0.009075156413018703, -0.0088698361068964, 0.005571023561060429, 0.020395146682858467, 0.010964103043079376, -0.01672675833106041, -0.011183110997080803, -0.008028022944927216, -0.0014167098561301827, 0.009506328962743282, -0.014071282930672169, 0.03586260974407196, 0.016945766285061836, 0.04744267091155052, 0.01452298741787672, 0.0015852436190471053, 0.004000323358923197, 0.01336634997278452, -0.026554755866527557, -0.012182336300611496, 0.010334453545510769, 0.020340396091341972, 0.018341945484280586, -0.011935952119529247, 0.022941118106245995, 0.006135654170066118, 0.014933628030121326, -0.021325932815670967, 0.024802688509225845, -0.0030010980553925037, 0.017903927713632584, 0.014564051292836666, -0.013790678232908249, 0.009807465597987175, -0.014399795792996883, -0.017534350976347923, -0.008493415080010891, -0.03728616237640381, 0.0009547392837703228, 0.010129133239388466, 0.010005941614508629, -0.008972495794296265, 0.0036341689992696047, 0.008294939063489437, 0.017411159351468086, 0.015344268642365932, -0.02139437198638916, -0.0029822769574820995, -0.03942149132490158, -0.02923760749399662, 0.003273147391155362, -0.027033835649490356, -0.01008806936442852, -0.01265457272529602, -0.008760332129895687, -0.024350984022021294, 0.005454675294458866, -0.028060438111424446, -0.007049329578876495, -0.01860201731324196, -0.019081097096204758, -0.019040033221244812, 0.015426396392285824, 0.018615705892443657, -0.005085099022835493, 0.007199897896498442, 0.004773696418851614, -0.016220301389694214, 0.008951963856816292, 0.009444733150303364, -0.016767822206020355, 0.005341749172657728, -0.03950362280011177, -0.037121906876564026, -0.022667357698082924, -0.004910576622933149, 0.0005346882389858365, 0.0025682144332677126, 0.01311996579170227, 0.002631521550938487, 0.011525311507284641, -0.0013970333384349942, -0.0018273504683747888, 0.01210705190896988, 0.001200268161483109, 0.036382753401994705, 0.012079676613211632, -0.0011403830721974373, -0.029292359948158264, 0.014180786907672882, -0.010012785904109478, -0.003180753206834197, -0.017616480588912964, 0.014495611190795898, 0.007555786054581404, 0.0015159479808062315, -0.01134736742824316, 0.007145145442336798, -0.0011959905968979, -0.007583162281662226, -0.02131224423646927, -0.012921489775180817, -0.01756172813475132, 0.019395921379327774, -0.0060295723378658295, -0.009513173252344131, 0.008014334365725517, -0.0032748584635555744, 0.0019060565391555429, 0.019929755479097366, -0.00406534131616354, 0.051904965192079544, 0.005345171317458153, 0.026595819741487503, 0.032358475029468536, 0.009431044571101665, -0.009492640383541584, -0.04081767052412033, 0.006573671009391546, 0.02539127506315708, 0.0038155352231115103, 0.0031704872380942106, -0.011504779569804668, -0.00210282183252275, -0.01176485139876604, -0.01867045648396015, 0.024337297305464745, 0.003678655019029975, -0.020600467920303345, -0.0392572358250618, 0.00744628207758069, 0.022106150165200233, -0.03036002442240715, -0.01489256415516138, -0.018547264859080315, -0.05119318887591362, 0.008951963856816292, 0.02016245201230049, 4.360382445156574e-05, -0.01643930934369564, -0.018519889563322067, -0.01409865915775299, -0.03996901214122772, 0.006433368660509586, -0.01737009547650814, 0.011395275592803955, 0.00033578419242985547, 0.0345759354531765, 0.01531689241528511, 0.02896384708583355, 0.0027855117805302143, 0.005800297949463129, 0.011819603852927685, -0.0071793654933571815, -0.008917744271457195, -0.012284996919333935, -0.020983731374144554, 0.0072341179475188255, -0.01877996139228344, 0.004359633661806583, -0.00026862736558541656, -0.011874356307089329, 0.011737476103007793, 0.0015518791042268276, 0.0046984124928712845, -0.018985280767083168, 0.00018692700541578233, -0.030579032376408577, -0.04328151419758797, -0.019108474254608154, 0.006761881057173014, 0.0028436859138309956, -0.004263817798346281, -0.02885434217751026, 0.020901603624224663, 0.013181561604142189, -3.8952035538386554e-05, 0.030770665034651756, -0.010005941614508629, 0.025350209325551987, -0.03627324849367142, 0.004681302234530449, 0.01579597406089306, 0.018424073234200478, -0.005937178153544664, 0.008363379165530205, -0.026965396478772163, -0.0005458097439259291, 0.028744839131832123, 0.025062762200832367, 0.01700051873922348, 0.010156509466469288, 0.016480375081300735, -0.006857697386294603, 0.0023919811937958, -0.0076036942191421986, 0.0001579468953423202, 0.008520791307091713, -0.0242962334305048, -0.01746591180562973, -0.038545459508895874, -0.01327053364366293, -0.018424073234200478, -0.0158917885273695, 0.00691244937479496, 0.00858923140913248, 0.016849949955940247, -0.00752156600356102, -0.010717718861997128, 0.03706715255975723, -0.0005351159488782287, 0.04248761013150215, 0.0029429239220917225, 0.03682076930999756, 0.008719267323613167, 0.0009436177788302302, 0.0013294487725943327, -0.010710874572396278, -0.0017033028416335583, -0.026842204853892326, 0.004458872135728598, 0.03263223543763161, -0.020901603624224663, -0.018424073234200478, -0.001200268161483109, -0.01504313200712204, -0.011621127836406231, -0.03337138891220093, -0.010190729983150959, 0.01961493119597435, -0.001155782025307417, -0.014700931496918201, 0.003481889609247446, 0.003498999634757638, 0.02578822709619999, -0.017821799963712692, 0.008732955902814865, 0.039750006049871445, -0.022092461585998535, 0.003856599098071456, 0.015056820586323738, -0.008472883142530918, 0.022065086290240288, 0.011217331513762474, 0.01415341068059206, -0.008705579675734043, 0.016576189547777176, -0.008459195494651794, -0.027526605874300003, -0.004359633661806583, 0.01579597406089306, -0.0042603956535458565, -0.021134300157427788, 0.02343388833105564, 0.026855891570448875, -0.003627324942499399, 0.002544260350987315, -0.022010333836078644, 0.02997676096856594, -0.009321540594100952, -0.0013243157882243395, 0.00485924631357193, 0.009492640383541584, -0.014413483440876007, -0.025651346892118454, -0.01616554893553257, 0.0034836006816476583, 0.006262268405407667, 0.0005056011723354459, 0.018465137109160423, -0.027115965262055397, -0.008336002938449383, -0.015234764665365219, 0.010902506299316883, -0.01391387078911066, 0.008719267323613167, 6.378830585163087e-05, 0.022626293823122978, -0.04128306359052658, -0.02290005423128605, 0.00948579702526331, -0.0168088860809803, 0.002823153743520379, 0.008555011823773384, -0.021640757098793983, -0.007713198196142912, 0.04799019172787666, -0.00868504773825407, 0.011326835490763187, 0.029264982789754868, -0.01219602394849062, -0.033125005662441254, 0.03520558401942253, -0.014961004257202148, -9.13782132556662e-05, 0.030579032376408577, -0.016316117718815804, -0.017493287101387978, -0.006306754425168037, -0.004582064226269722, 0.0121481167152524, -0.023611832410097122, -0.00043844434549100697, 0.019505426287651062, 0.024528928101062775, 0.01988869160413742, -0.024309920147061348, -0.01294202171266079, 0.03063378483057022, -0.011374743655323982, -0.03870971500873566, 0.001457773963920772, -0.006792678963392973, -0.010861442424356937, -0.0009590167901478708, -0.0007250372436828911, -0.01336634997278452, -0.02877221442759037, -0.008582387119531631, -0.023666583001613617, -0.0061938283033668995, 0.004181689582765102, -0.0035965268034487963, -0.005930333863943815, -0.02437836118042469, -0.026965396478772163, 0.009547392837703228, 0.0005077399546280503, 0.00962952058762312, 0.03892872482538223, 0.005242511164397001, 0.03145506605505943, 0.01383174303919077, 0.006067214068025351, -0.0001097180211218074, -0.025555530562996864, -0.016822574660182, -0.04158420115709305, -0.017725983634591103, -0.015262140892446041, 0.0485924668610096, 0.021846076473593712, -0.004099561367183924, -0.03323450684547424, -0.027088588103652, -0.02522701770067215, -0.007542097941040993, -0.008753487840294838, 0.00967058539390564, 0.011189955286681652, 0.02177763730287552, 0.02654106728732586, -0.00203267065808177, 0.004181689582765102, 0.03698502480983734, -0.03167407587170601, 0.008021178655326366, 0.005714747589081526, -0.027129651978611946, 0.036300625652074814, 0.004178267437964678, -0.03463068604469299, -0.02539127506315708, -0.00021366140572354198, 0.0065907808020710945, 0.0012515982380136847, 0.012154960073530674, -0.004150891676545143, -0.006529184989631176, -0.009773245081305504, -0.020011883229017258, 0.0017075802898034453, 0.018177688121795654, 0.006642111111432314, -0.03602686524391174, 0.011723787523806095, 0.01934117078781128, -0.00744628207758069, 0.00013281655265018344, 0.016973143443465233, 0.011477403342723846, -0.00028210150776430964, 0.02187345363199711, -0.00043352521606720984, 0.02439204789698124, -0.004931108560413122, 0.006361506413668394, -0.0030147861689329147, 0.005475207231938839, 0.002309853211045265, 0.045553725212812424, 0.009780089370906353, -0.024775313213467598, -0.010266013443470001, -0.00957476906478405, -0.03194783627986908, -0.004404120147228241, -0.004010589327663183, -0.010437114164233208, 0.021079547703266144, -0.006210938561707735, 0.017315343022346497, -0.013044681400060654, -0.03137293830513954, -0.0014167098561301827, -0.007063017692416906, 0.005759233608841896, -0.010498709976673126, -0.010286545380949974, -0.014783060178160667, -0.024255167692899704, -9.645775571698323e-05, -0.019847625866532326, -0.012928333133459091, 0.0013183272676542401, 0.010820378549396992, -0.008609763346612453, 0.0022499680053442717, 0.015015755780041218, -0.01017704140394926, -0.010320765897631645, 0.012504004873335361, 0.009615832939743996, -0.013948090374469757, -0.0007271759677678347, 0.21878927946090698, 0.003664966905489564, 0.010238638147711754, 0.04818182438611984, 0.018519889563322067, 0.0006296488572843373, 0.004318569786846638, 0.003938727080821991, -0.005567601416260004, 0.0063717723824083805, 0.029566120356321335, 0.021449124440550804, -0.0056702615693211555, -0.007815858349204063, 0.008630295284092426, -0.021189052611589432, -0.0373956672847271, -0.02437836118042469, -0.0014996934914961457, 0.018574640154838562, -0.014783060178160667, -0.025760849937796593, -0.018930530175566673, -0.01302414946258068, 0.01652143895626068, -0.017821799963712692, -0.009937501512467861, 0.021695509552955627, 0.02465212158858776, 0.024980634450912476, -0.02224303036928177, -0.0021661289501935244, 0.02793724648654461, -0.012271308340132236, 0.015809660777449608, -0.0018187954556196928, 0.0284984540194273, -0.013010461814701557, -0.008431819267570972, 0.017698608338832855, 0.00037599276402033865, -0.010286545380949974, 0.021175364032387733, -0.0020052946638315916, 0.014755683951079845, -0.012353437021374702, -0.010354985482990742, 0.014632491394877434, -0.018355632200837135, 0.01195648405700922, -0.025829290971159935, -0.00010939720959868282, 0.001069376477971673, 0.023201191797852516, 0.004304881673306227, -0.017110023647546768, -0.003818957135081291, -0.006625000853091478, -0.005646307487040758, 0.02092898078262806, 0.0014406639384105802, 0.02317381463944912, 0.0036991869565099478, -0.014824124053120613, -0.02343388833105564, -0.004910576622933149, -0.015275828540325165, 0.07922624796628952, 0.016507750377058983, 0.0025151732843369246, -0.018560953438282013, -0.009677428752183914, -0.02726653218269348, -0.0016442731721326709, -0.0033090785145759583, -0.0271022766828537, 0.01813662424683571, 0.006416258402168751, 0.01972443424165249, 0.02822469361126423, -0.003175620222464204, -0.004229597747325897, -0.009081999771296978, -0.0012413321528583765, -0.004407541826367378, -0.026691636070609093, 0.018191376700997353, -0.01643930934369564, -0.00402085529640317, -0.034055788069963455, 0.0006163885700516403, -0.01895790547132492, -0.014550363644957542, -0.027882494032382965, 0.017712295055389404, 0.0001611550251254812, -0.006857697386294603, 0.03222159668803215, -0.019861314445734024, -0.02270842343568802, -0.026212554425001144, 0.06964463740587234, 0.03977738320827484, 0.0021301978267729282, -0.018437759950757027, 0.016028668731451035, -0.014221850782632828, 0.00887668039649725, -0.008267562836408615, -0.0196286179125309, 0.0010137688368558884, -0.02896384708583355, 0.029456615447998047, -0.006734504830092192, -0.007501034066081047, 0.02521332912147045, 0.015905477106571198, -0.00902040395885706, -0.011196798644959927, -0.0007173377089202404, -0.0019402765901759267, -0.010190729983150959, 0.0036102149169892073, -0.0042877718806266785, -0.016781510785222054, -0.017110023647546768, -0.015576965175569057, 0.01046449039131403, -0.017137398943305016, -0.029757751151919365, 0.0030079421121627092, -0.003534930758178234, 0.01125839538872242, -0.025952482596039772, 0.0030558500438928604, -0.006419680546969175, 0.02091529220342636, 0.0006779846735298634, 0.003904507262632251, -0.011730631813406944, -8.319749031215906e-05, 0.005926912184804678, 0.02654106728732586, 0.023242255672812462, -0.008726111613214016, -0.017986055463552475, -0.00611854437738657, -0.003422004636377096, 0.005827673710882664, -0.027882494032382965, -0.005345171317458153, 0.009855372831225395, -0.010443958453834057, -0.005571023561060429, 0.01793130487203598, -0.014167099259793758, -0.0046710362657904625, -0.012161804363131523, -0.0007297424599528313, -0.0057694995775818825, -0.05540909990668297, -0.006792678963392973, 0.02316012792289257, -0.01615186221897602, -0.001134394551627338, -0.03766942769289017, -0.17356407642364502, 0.014509299769997597, 0.007685822434723377, -0.023940343409776688, 0.03632799908518791, 0.00971849262714386, 0.015754908323287964, -0.024884818121790886, 0.015084195882081985, -0.0010445668594911695, 0.027211779728531837, 0.01943698525428772, -0.03224897012114525, -0.042076967656612396, 0.04070816561579704, 0.014358730986714363, -0.016507750377058983, 0.025747163221240044, 0.055628105998039246, 0.020723659545183182, 0.027581356465816498, -0.03597211092710495, 0.0010171908652409911, -0.011121515184640884, -0.014919940382242203, -0.01135421171784401, -0.013161029666662216, -0.0033193444833159447, -0.00018521600577514619, -0.013496385887265205, -0.020121386274695396, -0.01064243447035551, 0.011278927326202393, 0.0014013109030202031, 0.02177763730287552, -0.015357956290245056, 0.011655347421765327, 0.0026503426488488913, -0.02168182097375393, 0.027115965262055397, 0.009930657222867012, 0.029839880764484406, 0.009526860900223255, 0.00821965467184782, 0.004667614120990038, 0.018725208938121796, -1.1208401701878756e-05, -0.011012011207640171, -0.006751615088433027, 0.014728307723999023, 0.04089979827404022, -0.006707129068672657, -0.019642306491732597, -0.012989929877221584, 0.008390755392611027, -0.0006942391628399491, -0.0015570120885968208, 0.012462940998375416, 0.010498709976673126, -0.01556327659636736, -0.00019708607578650117, -0.015850724652409554, -0.009711649268865585, -0.0072067417204380035, -0.00877401977777481, -0.019683370366692543, -0.016370870172977448, 0.03482231870293617, -0.00850025936961174, 0.004866090603172779, 0.013037837110459805, 0.006344396620988846, -0.008760332129895687, 0.04374690726399422, -0.0036718109622597694, 0.003399761626496911, -0.01196332834661007, 0.0177396722137928, 0.033015500754117966, -0.015193700790405273, -0.011135202832520008, 0.012524536810815334, -0.023105375468730927, 0.004941374529153109, 0.0010616768850013614, -0.0028385529294610023, -0.0214765015989542, 6.8707435275428e-05, -0.0147146200761199, 0.003247482469305396, 0.03307025134563446, -0.02737603709101677, -0.0061082784086465836, -0.0007669567712582648, 0.006121966056525707, 0.012100208550691605, 0.018191376700997353, -0.0012019791174679995, 0.014262915588915348, 0.0028898827731609344, 0.016179237514734268, 0.013229469768702984, -0.025637658312916756, 0.01037551835179329, 0.03148244321346283, 0.02766348607838154, -0.002929236041381955, 0.017876552417874336, 0.035917360335588455, -0.004219331778585911, -0.02822469361126423, 0.02962087094783783, 0.052370358258485794, 0.02822469361126423, -0.007665290497243404, 0.023762399330735207, -0.006104856263846159, -0.006279378663748503, 0.013161029666662216, -0.021339621394872665, 0.06679753214120865, -0.0036752328742295504, -0.0037026088684797287, -0.01442717108875513, -0.0046984124928712845, -0.005064566619694233, -0.0877675712108612, -0.011805916205048561, 0.01943698525428772, 0.007672134321182966, -0.030606409534811974, -0.031537193804979324, -0.01372908242046833, 0.03668389096856117, -0.03036002442240715, 0.004171423614025116, -0.018054496496915817, -0.014386107213795185, -0.006881651468575001, -0.001173747587017715, 0.007254649884998798, -0.0013884783256798983, -0.009964877739548683, -0.02513120137155056, 0.021065860986709595, 0.022106150165200233, 0.013475853949785233, -0.001688759308308363, 0.003986635245382786, 0.010662966407835484, -0.01961493119597435, -0.023228567093610764, -0.01869783364236355, 0.016494061797857285, 0.0036102149169892073, 0.016932079568505287, 0.016329806298017502, -0.01616554893553257, 0.012353437021374702, 0.008151214569807053, -0.01461880374699831, -0.018848400563001633, -0.04429442808032036, 0.003160221269354224, 0.029128102585673332, -0.04473244398832321, 0.008151214569807053, -0.009061467833817005, 0.02923760749399662, -0.03170144930481911, -0.025254394859075546, 0.030305271968245506, -0.018383009359240532, 0.01793130487203598, 0.018533576279878616, 0.006963779218494892, -0.031893081963062286, -0.024611057713627815, -0.011723787523806095, 0.018341945484280586, 0.006861119065433741, -0.03290599584579468, 0.018738897517323494, 0.0028026218060404062, -0.01504313200712204, 0.001683626207523048, -0.011545843444764614, 0.01327053364366293, -0.013865962624549866, 0.0121481167152524, -0.032659612596035004, -0.0012541647301986814, -0.009157284162938595, -0.004010589327663183, -0.017917616292834282, -0.0017520663095638156, -0.03159194812178612, 0.00034754734952002764, -0.016685694456100464, 0.006070636212825775, -0.0027119386941194534, -0.015850724652409554, -0.011888043954968452, 0.0025031964760273695, 0.002735892776399851, -0.0041474695317447186, -0.01652143895626068, -0.002446733182296157, 0.002313275123015046, -0.04361002519726753, 0.015385332517325878, 0.022489413619041443, 0.028553206473588943, -0.016124485060572624, 0.041912712156772614, -0.04752479866147041, -0.003962681163102388, -0.009451576508581638, -0.004185111727565527, -0.0036204808857291937, -0.0012421876890584826, 0.006710551213473082, -0.011203642934560776, 0.01597391813993454, 0.01700051873922348, 0.0056565734557807446, -0.03383678197860718, -0.014084970578551292, -0.07501034438610077, 0.00044486060505732894, 0.02316012792289257, 0.004037965554744005, -0.011148891411721706, -0.028060438111424446, 0.0009230857249349356, -0.0114363394677639, 0.010416582226753235, 0.02885434217751026, -0.022462038323283195, 0.007788482587784529, 0.0027427366003394127, 0.009862217120826244, -0.016849949955940247, -0.031893081963062286, 0.019300105050206184, -0.0040824515745043755, 0.010224949568510056, 0.03898347541689873, -0.023283319547772408, 0.013065213337540627, 0.005317795090377331, 0.006471010856330395, -0.025925107300281525, -0.005440987180918455, 0.007069861516356468, 0.023707648739218712, -0.010060693137347698, -0.027950933203101158, 0.004472559783607721, -0.016849949955940247, 0.001195135060697794, 0.030606409534811974, 0.006501808762550354, -0.01820506528019905, 0.03016839176416397, 0.010546618141233921, 0.00967058539390564, -0.0022243030834943056, 0.0006467588827945292, -0.0494958758354187, 0.03145506605505943, 0.0011600595898926258, -0.03238585218787193, -0.006522340700030327, 0.0074257501401007175, -0.008849304169416428, 0.037696801126003265, 0.005074833054095507, 0.014564051292836666, -0.00024980632588267326, 0.005731857847422361, -0.02185976505279541, 0.0031482442282140255, -0.010943571105599403, -0.012168648652732372, 0.00826071947813034, -0.007829546928405762, -0.005625775549560785, 0.05688740313053131, -0.003310789354145527, 0.0045854863710701466, -0.025432338938117027, 0.017808111384510994, 0.0025237284135073423, -0.05633988231420517, -0.001863281475380063, 0.007925362326204777, -0.034247420728206635, -0.0373409129679203, 0.008274407126009464, -0.004462293814867735, -0.00646758871152997, -0.021558629348874092, -0.012435564771294594, -0.01606973446905613, -0.006891917437314987, -0.011388431303203106, 0.009143596515059471, 0.014919940382242203, -0.016302429139614105, -0.0063854604959487915, 0.010532930493354797, 0.0191495381295681, 0.010806690901517868, -0.002735892776399851, 0.01461880374699831, 0.01916322484612465, -0.012873581610620022, -0.01923166587948799, 0.012059144675731659, 0.004037965554744005, 0.005204868968576193, 0.022024022415280342, 0.001100174500606954, -0.009533705189824104, -0.0031687761656939983, 0.021161677315831184, 0.03276911750435829, 0.007713198196142912, 0.02317381463944912, -0.004503358155488968, -0.0035794167779386044, -0.00707670534029603, 0.006149342283606529, 0.018725208938121796, -0.014180786907672882, 0.014961004257202148, 0.013386881910264492, -0.006340974476188421, -0.014440859667956829, -0.008828772231936455, 0.02885434217751026, -0.0034288486931473017, -0.0008512236527167261, 0.0074120620265603065, -0.03876446932554245, -0.008144371211528778, 0.017986055463552475, -0.005790031980723143, 0.005735279526561499, 0.02083316445350647, -0.008582387119531631, 0.025665033608675003, 0.03487706929445267, 0.01242187712341547, -0.0027991996612399817, 0.009314696304500103, -0.014276603236794472, 0.02391296811401844, 0.0009607278043404222, -0.01064243447035551, -0.022448349744081497, 0.006265690550208092, -0.00938313640654087, -0.023967720568180084, 0.023584455251693726, 0.013352662324905396, 0.0886983573436737, 0.011621127836406231, -0.021654445677995682, 5.1864757551811635e-05, -0.02539127506315708, -0.004171423614025116, -0.007884298451244831, 0.00859607569873333, -0.022010333836078644, -0.03520558401942253, 0.04035227745771408, -0.0060158842243254185, -0.02073734812438488, 0.004660770297050476, -0.005865315906703472, -0.0047839623875916, -0.009930657222867012, 0.00197278568521142, 0.007309401873499155, -0.00798695906996727, 0.024227792397141457, -0.011128358542919159, -0.0038292231038212776, -0.008609763346612453, -0.035917360335588455, -0.007104081567376852, 0.027882494032382965, 0.0158917885273695, -0.0017914194613695145, -0.045909613370895386, 0.010868286713957787, -0.009807465597987175, -0.022763174027204514, -0.017506975680589676, -0.016699383035302162, 0.02634943462908268, 0.009752713143825531, -0.01663094200193882, 0.010149666108191013, 0.007391530089080334, 0.012223400175571442, -0.012791452929377556, -0.01568646915256977, -0.02651369199156761, 0.006997999269515276, 0.015590652823448181, 0.024131976068019867, -0.013790678232908249, 0.014057595282793045]"
Fearlessly Handling BigKeys with Dragonfly,Fearlessly Handling BigKeys with Dragonfly,"## Introduction  Dragonfly stakes its claim as the most performant in-memory data store on earth, boasting an impressive 4 million ops/sec on an AWS EC2 `c6gn.16xlarge` instance and fully leveraging the CPU and memory resources. Given that computer memory is a precious commodity, Dragonflys mission is to utilize it smartly and efficiently. However, just like any traditional, successful technology, there are limitations to consider when building applications around them.  One often-overlooked pitfall when working with an in-memory data store is the BigKey issue. Ideally, an in-memory data store instance should be highly available, responding to read and write requests within sub-milliseconds. However, unnecessary BigKeys can cause slowdowns or even make an in-memory data store unresponsive. The reasoning is clear: Despite the blazing speed of modern memory hardware and operating systems, real-world applications still often require operations with O(M) time complexity. When you need to perform an ultra-fast operation M times, the latency required can mount up, causing what might initially seem fast to instead be perceived as slow, depending on the magnitude of M.  In this blog post, we delve into the infamous BigKey issue and establish best practices for working with them in Dragonfly. While we stand by the statement made at the beginning of this post, it's also crucial to understand any technology's limits. By exploring both the strengths and constraints, we hope to provide a comprehensive understanding of working with BigKeys in Dragonfly as well as how it compares with Redis.  ## What is a BigKey?  Contrary to what the name might suggest, a BigKey within an in-memory data store isn't about the length of the key's name but rather the size of the value associated with that key. To give you a basic understanding of how Dragonfly (as well as Redis) organizes data from an API/command perspective, there is a global hash map storing key-value pairs. The value stored against each key may be of different data types, including String, List, Set, Sorted-Set, Hash, and so on.  The capability to store multiple items in List, Set, Sorted-Set, and Hash data types means that these keys can potentially become BigKeys when they contain a large number of elements. It's worth noting that, theoretically, a very large value could also be stored on a String key. While Redis limits this to 512MB, it would arguably be more practical to select the appropriate data type for the use case rather than saving such a vast blob of data as a String with an in-memory data store. Let's look at an example of various data types being stored below:  ![Dragonfly Data Types](/assets/blog/fearlessly-handling-bigkeys-with-dragonfly/data-types.png)  Understanding how values can become oversized within an in-memory data store is important. But how do we define ""too big""? Alibaba Cloud provides an overview of the characteristics of BigKeys in their [blog post](https://www.alibabacloud.com/blog/a-detailed-explanation-of-the-detection-and-processing-of-bigkey-and-hotkey-in-redis_598143) below:  > A String key whose size of value is 5MB (the data is too large).  > A List key with 20,000 elements (the number of elements in the list is excessive).  > A Sorted-Set key with 10,000 members (the number of members is excessive).  > A Hash key whose size is 100MB even if only contains 1,000 members (the size of the key is too large).  _Essentially, a BigKey refers to a key that has a large-sized value attached to it._  However, it's important to note that these characteristics may vary, and different systems and applications may have unique definitions for BigKeys. In our context:  _If the value stored with a key is large enough to impact the performance of the in-memory data store, and subsequently your applications, we would classify that as a BigKey._  Let's explore how BigKeys would impact performance with a case study.  ---  ## Case Study - BigKey in a Real World Application  ### The Scenario  Picture this: We're operating a web application that's seeing misuse of our APIs by some users. To tackle this, we want to utilize an in-memory data store to establish a block list using user IDs. This way, any API request would be halted if it came from a user listed in the block list. Here are the finer details:  - User IDs are UUID V4 strings. - Each blocked user ID must be paired with a reason, which is a string value. This rules out the use of a Bloom Filter, as we need to record the blocking rationale. - The exact user ID must be recorded for analysis purposes. Deletion or expiration of these IDs isn't an option until the analytics team completes their work. This requirement means we can't set automatic data expiration. Instead, we need to offer the analytics team an internal API endpoint or a similar means to delete the data. - Considering the scale of our user base, potentially millions of user IDs could be blocked at a given time.  Given these requirements, the Hash data type emerges as a strong candidate since it:  - Enforces uniqueness on the fields, which can be utilized to store user IDs. - Allows us to store the blocking reason in the values. - Ensures accessing a single field/value pair takes O(1) time - ideal for our use case.  Below is an illustration of our potential in-memory storage:  - The Hash *field* comprises a UUID V4 string, representing the user ID. - The Hash *value* denotes the specific reason for blocking a user. - In total, we have 10 million field/value pairs stored with this *single Hash data type* named `blocked_user_ids`.  ![Big Hash Key](/assets/blog/fearlessly-handling-bigkeys-with-dragonfly/big-hash-key.png)  While this scenario may not perfectly mirror every real-world situation, it presents a close approximation that helps us understand the dynamics at play. Now, let's delve into the potential impacts such a BigKey can have on our system.  ### BigKey Memory Usage  We loaded a Dragonfly instance and a Redis instance from a snapshot containing a Hash key `blocked_user_ids` with 10 million field/value pairs, using `.dfs` files for Dragonfly and a `.rdb` file for Redis, respectively.  - Dragonfly requires only 614.75MB to store this BigKey. - In contrast, Redis consumes approximately 891.88MB to store this BigKey.  These figures reinforce Dragonfly's superior efficiency in memory utilization compared to Redis, resulting in steady-state memory usage that's 30% less, as detailed in the [Redis vs. Dragonfly Scalability and Performance blog post](https://www.dragonflydb.io/blog/scaling-performance-redis-vs-dragonfly).  ### Read the BigKey  While it's common practice to avoid performing a full-read (i.e., `HGETALL`) on such a large key, for experimental purposes, we conducted this operation on both Dragonfly and Redis. The time complexity of `HGETALL` is O(N), where N represents the size of the Hash, which in our case is a substantial 10 million. In a real-world scenario, smaller batch reads (i.e., `HSCAN`) would be the more advisable approach. Our experiment was conducted using the following methodology:  - To minimize the impact of network latency, the client was running in the same region of GCP as the server. - We implemented two threads: one responsible for reading a key from Dragonfly/Redis in a loop for thousands of iterations, and another that issued the `HGETALL` command with a slight delay. - The `HGETALL` command was strategically placed somewhere in between the thousands of read commands, concurrently. - We recorded the time taken for the `HGETALL` command, as well as the P50 through P99.9 and maximum latencies for the thousands of read commands.  ![Costly Operation with Concurrent Reads](/assets/blog/fearlessly-handling-bigkeys-with-dragonfly/costly-operation-with-concurrent-reads.png)  By implementing this experimental setup, we were able to evaluate the performance and latency of the `HGETALL` command in the context of Dragonfly and Redis:  | Dragonfly           | 1st Run | 2nd Run | 3rd Run | |---------------------|---------|---------|---------| | `HGETALL`           | 13.64s  | 13.49s  | 11.98s  | | Other Reads - P50   | 0.216ms | 0.240ms | 0.215ms | | Other Reads - P90   | 0.279ms | 0.312ms | 0.288ms | | Other Reads - P99   | 0.353ms | 0.402ms | 0.367ms | | Other Reads - P99.9 | 0.614ms | 0.481ms | 0.550ms | | Other Reads - Max   | 0.746ms | 1.41ms  | 0.948ms |  | Redis               | 1st Run | 2nd Run | 3rd Run | |---------------------|---------|---------|---------| | `HGETALL`           | 15.68s  | 20.09s  | 18.41s  | | Other Reads - P50   | 0.193ms | 0.210ms | 0.227ms | | Other Reads - P90   | 0.228ms | 0.265ms | 0.293ms | | Other Reads - P99   | 0.324ms | 0.468ms | 1.49ms  | | Other Reads - P99.9 | 19.7ms  | 20.3ms  | 20.4ms  | | Other Reads - Max   | 4.47s   | 4.48s   | 4.45s   |  The results of our experiment clearly demonstrate the considerable slowness of performing an `HGETALL` full-read operation, primarily due to its O(N) time complexity and network I/O. While we expected some degree of sluggishness for both Dragonfly and Redis, the disparity between the two systems is significant.  A crucial aspect to consider is the single-threaded nature of Redis' command execution architecture (as discussed [below](#discussion--best-practices)). *During the processing of the `HGETALL` command in Redis, all other concurrent command executions experience a substantial pause for a significantly longer duration (measured in seconds), exacerbating the overall performance impact.*  In contrast, Dragonfly showcases its strength by maintaining responsiveness to read and write operations despite the ongoing full-read. The only bottleneck experienced in this scenario is the client, which awaits the full-read response. This advantage can be attributed to Dragonfly's multi-threaded, shared-nothing architecture.  As stated earlier, real-world applications should ideally use `HSCAN` when they need to iterate through all fields of a Hash key and `HGET` for individual field access. In the same vein, a Hash key of this scale should be built gradually for write operations rather than instantaneously from one substantial blob of data. Real-world applications should utilize `HSET` with a manageable number of field/value pairs for each call. When utilizing `HGET`, `HSCAN`, and `HSET` with appropriate parameters, both Dragonfly and Redis are capable of handling these commands properly for our use case.  ### Delete the BigKey  The end of the road for our `blocked_user_ids` key arrives once the analysis team completes its work. The key's deletion from the in-memory store becomes necessary to free up memory for future use. While deletion might appear to be a straightforward operation, it often presents unexpected challenges, especially when dealing with BigKeys. In our experiment, we used the synchronous `DEL` command to remove this key from both Dragonfly and Redis with the same methodology as above, and the results were as follows:  | Dragonfly           | 1st Run | 2nd Run | 3rd Run | |---------------------|---------|---------|---------| | `DEL`               | 367.9ms | 374.3ms | 372.4ms | | Other Reads - P50   | 0.218ms | 0.236ms | 0.204ms | | Other Reads - P90   | 0.292ms | 0.315ms | 0.278ms | | Other Reads - P99   | 0.379ms | 0.418ms | 0.350ms | | Other Reads - P99.9 | 0.501ms | 0.602ms | 0.488ms | | Other Reads - Max   | 0.773ms | 1.42ms  | 0.686ms |  | Redis               | 1st Run | 2nd Run | 3rd Run | |---------------------|---------|---------|---------| | `DEL`               | 5.677s  | 5.689s  | 5.719s  | | Other Reads - P50   | 0.183ms | 0.225ms | 0.194ms | | Other Reads - P90   | 0.258ms | 0.315ms | 0.265ms | | Other Reads - P99   | 0.352ms | 0.463ms | 0.353ms | | Other Reads - P99.9 | 0.517ms | 1.17ms  | 1.45ms  | | Other Reads - Max   | 5.67s   | 5.68s   | 5.71s   |  Based on the results above, it is noteworthy that Dragonfly consistently demonstrated efficient deletion of the BigKey across multiple trials. In stark contrast, Redis took seconds to delete the BigKey. Notably, during the deletion of this key, Redis suspended all other concurrent operations for a significantly extended duration, further highlighting the impact of BigKey deletion on Redis' single-threaded execution model. Dragonfly's ability to handle deletion efficiently, while simultaneously maintaining responsiveness to other operations, showcases the advantages of its modern architecture.  ---  ## Discussion & Best Practices  In light of the experiments conducted, it is clear that BigKeys, while useful, can exert significant pressure on in-memory databases, potentially resulting in high memory usage and increased latency if not managed with caution.  - BigKeys consume considerable memory. Their use should be limited to scenarios where they are indispensable for your application's requirements. Otherwise, consider resorting to probabilistic data types, such as HyperLogLog or Bloom Filter, for storing statistical data pertaining to a large number of IDs. - Performing full reads (such as `HGETALL` and `SMEMBERS`) on BigKeys and the deletion (`DEL`) operation can have major costs and negatively impact other concurrent commands.  However, in situations where the use of these resource-intensive BigKeys is unavoidable, extra caution should be exercised when using Redis. Conversely, Dragonfly offers greater flexibility and peace of mind.  As quoted below from [the Redis documentation](https://redis.io/docs/management/optimization/benchmarks/):  > Redis is, mostly, a **single-threaded server from the POV of commands execution** (actually modern versions of Redis use threads for different things).  If Redis is executing an expensive command like `HGETALL` or `DEL`, _this expensive operation will pause the execution of all other concurrent commands_. New commands arriving at the Redis server will be put on hold until the completion of the expensive command. While this might not initially seem problematic, consider that your in-memory data store typically responds to clients within sub-milliseconds. A sudden surge in the latency of a few seconds can trigger a cascading effect, potentially crippling your backend system.  While working with Dragonfly, the execution of expensive commands can also be blocking. However, thanks to the multi-threaded, shared-nothing architecture, the Dragonfly server would continue to function normally without noticeable latency, maintaining its ability to respond within sub-milliseconds to other concurrent commands.  Considering the aforementioned points, it is crucial to consider whether an `HGETALL` full-read is necessary for our application:  - For a Hash key with only a few tens of fields, it's absolutely fine. - However, for a Hash resembling the `blocked_user_ids` example demonstrated earlier, opting for `HSCAN` is definitely advisable.  In the meantime, compared to a full-read, the deletion of a BigKey seems somewhat inevitable. One might wonder if there are better methods to perform deletion on BigKeys beyond just the `DEL` command. The answer is yes, and this leads us to our next exploration.  ### Best Practice - Draining the BigKey  One traditional method of deleting a BigKey from Redis is to gradually drain the key from the client side. This can be done by using the `HSCAN` and `HDEL` commands, as shown in the Go snippet below:  ```go package main  import ( ""context"" ""log""  ""github.com/redis/go-redis/v9"" )  const ( hashKey   = ""blocked_user_ids"" batchSize = 100 )  func main() { ctx := context.Background() rdb := redis.NewClient(&redis.Options{ Addr:     ""127.0.0.1:6379"", Username: """", Password: """", }) _, err := rdb.Ping(ctx).Result() if err != nil { log.Fatalln(err) }  cursor := uint64(0) for { log.Printf(""draining hash key, cursor: %d\n"", cursor)  fields, nextCursor, err := rdb.HScan(ctx, hashKey, cursor, ""*"", batchSize).Result() if err != nil { log.Fatalln(err) }  if len(fields) > 0 { if err := rdb.HDel(ctx, hashKey, fields...).Err(); err != nil { log.Fatalln(err) } }  cursor = nextCursor if cursor == 0 { break } }  log.Println(""draining hash key completed"") } ```  The loop continues until the cursor returns to 0, signaling the end of the Hash. The underlying principle behind this pattern is to issue multiple `HSCAN` and `HDEL` commands with a reasonable batch size, allowing Redis to execute other commands in between these smaller batches on its single thread.  Though it's not strictly necessary, applying the same pattern to Dragonfly could still be beneficial as a general technique. However, bear in mind that even if we use the `DEL` command to delete the entire key from Dragonfly, blocking the current client, executions for other concurrent commands would continue normally.  ### Best Practice - Lazy Free with `UNLINK`  To address the issue of BigKey deletion, Redis introduced the `UNLINK` command starting from version 4.0 onwards. This command evaluates the cost of deleting a key and reclaiming the corresponding memory, and then decides whether to proceed in the main thread or delegate it to a background thread. In addition, from version 6.0 onwards, Redis provides a configuration `lazyfree-lazy-user-del` which, when set to `yes`, makes `DEL` behave the same as `UNLINK`.  As of Dragonfly version 1.8.0, the `UNLINK` command behaves the same as `DEL`, which is a synchronous operation. However, as we've noted multiple times, other concurrent command executions would not be highly impacted while Dragonfly is running expensive commands.  ### Best Practice - Lazy Free with `EXPIRE`  In [this section](#the-scenario) above, we established the application scenario where we can't automatically expire the `blocked_user_ids` BigKey, as we need to wait for the analytics team to complete their work before deletion. This scenario leads to the use of the `DEL` command. However, once the analytics team is done, we can utilize expiration commands (`EXPIRE`, `PEXIRE`, `EXPIREAT`, or `PEXIREAT`) to delete the BigKey, if it aligns with the application logic.  In Redis, expired keys are immediately removed from the keyspace, turning them inaccessible to the application. However, *the actual deletion (reclaiming the memory) is carried out periodically in the main thread by default*. This means if Redis needs to expire a BigKey or many keys simultaneously, it risks stalling the main thread, consequently preventing the Redis server from responding to other commands during this process. More details can be found [here](https://redis.io/commands/expire/). Starting from Redis version 4.0, we can configure `lazyfree-lazy-expire` to `yes` to perform the actual deletion in the background.  In Dragonfly, while there may be some slight delay (similar to what we have seen using the `DEL` command) observed on other commands at the moment of reclaiming the memory occupied by the BigKey, the resulting latency has minimal impact on the overall performance of the Dragonfly server.  ### Dragonfly Specific - Item Level Expiration  Speaking of expiration, let's slightly alter our application scenario. If every other requirement remains the same, but we now need to block an individual user ID for a set period of time (say 24 hours) without additional concern for the analytics team, how do we achieve this?  In Redis, we cannot use a Hash data type anymore since expiration can only be applied at the key level. To meet this requirement, we could opt to use the String data type and store 10 million records for each user. While feasible, this approach would comparatively increase memory usage.  Dragonfly aims to be fully compatible with Redis, ensuring you don't need to modify a line of code when switching to Dragonfly, while simultaneously offering more. You may have noticed that Dragonfly is implementing additional practical commands to address common problems like this one. One such command is `HSETEX` (documentation found [here](https://www.dragonflydb.io/docs/command-reference/hashes/hsetex)), *which sets and expires an individual field of a Hash data type*. Note that this command is currently experimental, but by utilizing it, we can effortlessly implement the logic of blocking an individual user ID for a set period without any difficulties. Similarly, Dragonfly offers the `SADDEX`  (documentation found [here](https://www.dragonflydb.io/docs/command-reference/sets/saddex)) command for the Set data type, which sets and expires a single member.  By leveraging the `HSETEX` command, we can achieve our desired outcome while still working with a Hash BigKey. This approach allows us to conserve memory without the burden of using 10 million individual String keys. Additionally, our write and auto-expire operations utilizing `HSETEX`, as well as read operations using `HGET` or `HSCAN`, only affect a small subset of field/value pairs within the BigKey. This advantage eliminates the need for manual key draining and simplifies our workflow by allowing individual field/value pairs to expire naturally. The ability of Dragonfly to utilize the `HSETEX` command offers a convenient and efficient solution for managing BigKeys.  ## Conclusion  In this blog post, we explored the concept of BigKeys and the challenges they pose in traditional in-memory databases like Redis. To recap, here are the important best practices to follow when working with BigKeys:  - Avoid performing full-reads (`HGETALL`, `SMEMBERS`) on BigKeys. - Utilize scan/range commands (`LRANGE`, `SSCAN`, `ZSCAN`, `ZRANGE`, `HSCAN`) when iterating through all the items within a BigKey. - Prefer write commands (`LPUSH`, `SSAD`, `ZADD`, `HSET`) with a reasonable size. - Choose read commands and utility commands for different data types wisely. - When feasible, leverage Dragonfly's specific commands (`HSETEX`, `SADDEX`). - Use caution when deleting BigKeys.  While there are still best practices and patterns to follow, working with BigKeys in Dragonfly becomes a much more seamless and fearless endeavour due to its revolutionary architecture and outstanding hardware efficiency.  To dive deeper into Dragonfly, we encourage you to refer to our [documentation](https://www.dragonflydb.io/docs/getting-started), which will help you get started with running Dragonfly in just a few minutes. Additionally, our [blog](https://www.dragonflydb.io/blog) features a range of engaging posts that highlight the remarkable capabilities of Dragonfly. Happy coding!  ---  ## Appendix - Test Environment  We used the following Dragonfly version, Redis version, and cloud instances to gather the data points used in this blog:  - Dragonfly -- **1.8.0** - Redis -- **7.0.12** - Server Instance -- GCP `c2-standard-16` (16 vCPU, 8 core, 64GB memory) - Client Instance -- GCP `e2-standard-2` (2 vCPU, 1 core, 8GB memory) - Client and server instances are in the same region and communicate over a private network.  We went with a moderate instance for the server, not the larger memory-optimized ones, for those experiments we have conducted in this blog. Since our goal wasn't to push DragonflyDB or Redis to their limits, as we did in the [Redis vs. Dragonfly Scalability and Performance blog post](https://www.dragonflydb.io/blog/scaling-performance-redis-vs-dragonfly), but to see how a single BigKey could impact their performance. This moderate `c2-standard-16` instance is strong in processing power and has enough memory to hold the BigKey we tested.","[-0.00105858757160604, 0.005081220529973507, 0.006196440197527409, -0.021300699561834335, -0.0266119334846735, 0.020227300003170967, -0.022443799301981926, 0.0008407712448388338, -0.017578652128577232, -0.03685801476240158, -0.001989970449358225, 0.006454335059970617, -0.007388331461697817, -0.017104685306549072, -0.0028594934847205877, 0.03111463412642479, 0.014720901846885681, -0.0184011273086071, 0.02064550668001175, -0.01121492963284254, 0.0012276130728423595, 0.0028246426954865456, -0.014693021774291992, 0.019112080335617065, -0.015278511680662632, 0.0010751415975391865, 0.02014365792274475, -0.015180930495262146, 0.00598733639344573, -0.00019647036970127374, 0.02156556397676468, -0.0057189869694411755, -0.02166314609348774, 0.021844368427991867, -0.02007395774126053, -0.020352762192487717, 0.00043367239413782954, 0.007339540868997574, 0.028884194791316986, 0.020060017704963684, 0.037917476147413254, -0.00841990951448679, -0.007841389626264572, -0.02626342698931694, 0.0002324100787518546, 0.024088749662041664, 0.0067261699587106705, -0.02670951560139656, 0.010615498758852482, -0.015850061550736427, 0.008956609293818474, 0.03794535622000694, -0.0010882106143981218, 0.015501555986702442, -0.007764718029648066, 0.015864001587033272, 0.015348212793469429, 0.00997424777597189, 0.020087897777557373, -0.0012746613938361406, 0.010573678649961948, 0.040008511394262314, -0.0050289444625377655, 0.005039399489760399, -0.006520551163703203, -0.011946792714297771, -0.020087897777557373, -0.013501130044460297, 0.005712016485631466, -0.0111312884837389, 0.02163526602089405, 0.02696043998003006, 0.001946407137438655, 0.0007514664903283119, 0.007283779792487621, -0.025036685168743134, 0.001563921570777893, -0.004673468414694071, 0.013689323328435421, -0.00018372811609879136, -0.0011561693390831351, -0.0006900422740727663, -0.004718773998320103, 0.027420468628406525, -0.0008930471376515925, 0.029581205919384956, -0.01564095914363861, -0.0002709635882638395, 0.0010943094966933131, 0.02429785206913948, -0.004189044702798128, -0.0030651120468974113, -0.0036105243489146233, 0.008698714897036552, 0.00406706752255559, -0.004638617392629385, 0.008838117122650146, 0.010329724289476871, -0.013250205665826797, -0.0009688472491689026, -0.03496214374899864, -0.019042378291487694, -0.01897267811000347, -0.012560163624584675, -0.013835696503520012, 0.002331506460905075, 0.005408816505223513, -0.027420468628406525, 0.005677165929228067, 0.009960307739675045, -0.0134314289316535, 0.021649206057190895, 0.017592594027519226, -0.006241746246814728, -0.010622468777000904, -0.006558886729180813, 0.026374949142336845, -0.019293302670121193, 0.014539678581058979, -0.020408524200320244, 0.03231349587440491, 0.003138298401609063, 0.03412572667002678, -0.012358030304312706, -0.003563476027920842, -0.003749926807358861, -0.021077655255794525, -0.04073340445756912, 0.021900130435824394, -0.007597435265779495, 0.023015350103378296, 0.02258320152759552, 0.010315783321857452, -0.008907818235456944, -0.0167840588837862, 0.01095703523606062, -0.00871962495148182, -0.004896512255072594, -0.00019603474356699735, -0.013793875463306904, 0.003300353651866317, 0.0299715343862772, -0.009068131446838379, -0.020701268687844276, -0.017773816362023354, 0.02683497779071331, -0.02074308879673481, 0.014316635206341743, -0.011584346182644367, -0.02042246423661709, 0.0024569686502218246, -0.023837825283408165, -0.0167840588837862, 0.014665140770375729, 0.01900055818259716, -0.0016031285049393773, -0.02410268969833851, 0.014232993125915527, -0.01902843825519085, -0.028744792565703392, 0.020227300003170967, 0.032815344631671906, -0.003655830165371299, -0.005175317171961069, 0.022862007841467857, 0.030306098982691765, 0.018735693767666817, -0.01055973768234253, 0.004896512255072594, -0.03683013468980789, 0.007541674189269543, 0.02454877644777298, -0.0277271531522274, 0.04081704840064049, 0.009535130113363266, 0.0079598817974329, 0.003993880935013294, 0.006903907749801874, 0.003662800183519721, -0.035157304257154465, 0.021244937554001808, 0.00032890273723751307, 0.000992371467873454, 0.005621404852718115, -0.023935405537486076, -0.016128867864608765, 8.483947749482468e-05, 0.005983851384371519, 0.013640533201396465, -0.008364149369299412, -0.0014654685510322452, 0.010162441059947014, -0.02318263240158558, -0.01476272288709879, -0.6151552796363831, -0.0025928860995918512, -0.0022025592625141144, -0.03839144483208656, -0.0037847773637622595, -0.0024604538921266794, 0.014595439657568932, 0.014957886189222336, -0.0042204102501273155, 0.010092739947140217, 0.004718773998320103, -0.017913218587636948, 0.01696528121829033, -0.00816898513585329, -0.04310324788093567, 0.0025475802831351757, 0.009423607960343361, 0.00818292610347271, 0.0008612459641881287, -0.0016963538946583867, -0.023294154554605484, 0.03323355317115784, -0.0004935719189234078, 0.017048923298716545, -0.010448216460645199, 0.006604192778468132, -0.010901274159550667, -0.012476522475481033, 0.008726594969630241, 0.033261433243751526, -0.032815344631671906, 0.014943946152925491, 0.02131463959813118, 0.010845513083040714, 0.06156013533473015, -0.015850061550736427, -0.023517198860645294, 0.020896432921290398, 0.0018104896880686283, 0.03245289623737335, 0.0017068091547116637, -0.017815636470913887, 0.028256883844733238, 0.01982303336262703, 0.0070572504773736, 0.0005576099501922727, -0.005844449158757925, -0.018442947417497635, -0.003735986538231373, 0.008852057158946991, -0.008663863874971867, -0.012204687111079693, 0.010197291150689125, -0.016895581036806107, -0.016770118847489357, -0.007681076880544424, 0.043688736855983734, -0.01197467278689146, 0.01564095914363861, -0.01748107187449932, 0.02153768390417099, -0.0030354890041053295, -0.020338822156190872, -0.008322328329086304, -0.03727622330188751, 0.010873393155634403, -0.010970975272357464, -0.021300699561834335, 0.011661017313599586, -0.02210923284292221, 0.03114251419901848, 0.001826172461733222, 0.00916571356356144, -0.006632072851061821, 0.006179015152156353, 0.021774668246507645, 0.04954364150762558, -0.013326876796782017, -0.010371544398367405, 0.02417238987982273, 0.025998562574386597, -0.0013007994275540113, -0.022945648059248924, -0.001334778731688857, 0.03175588697195053, 0.013612652197480202, -0.021677086129784584, 7.97752509242855e-05, -2.7281501388642937e-05, -0.01198861375451088, 0.02728106640279293, 0.009249354712665081, -0.02208135277032852, -0.029190879315137863, 0.027671393007040024, 0.017522891983389854, -0.005722471978515387, -0.011521615087985992, 0.0076950169168412685, -0.006809811107814312, -0.004216925241053104, -0.026221606880426407, -0.00876841600984335, 0.010650349780917168, 0.02668163552880287, 0.006140679121017456, -0.027448348701000214, -0.009702412411570549, 0.034237250685691833, 0.002265290357172489, -3.5735499182010244e-07, -0.017968980595469475, -0.021704966202378273, -0.017216205596923828, 0.000674795126542449, -0.022067412734031677, 0.025873100385069847, -0.009144802577793598, 0.004784990102052689, -0.01798292063176632, 0.01335475780069828, 0.0004275735409464687, 0.0026399344205856323, -0.007513793651014566, 0.005656255874782801, -0.003465894144028425, -0.0014759238110855222, -0.013236265629529953, 0.0035443080123513937, 0.014149351976811886, 0.01073399093002081, -0.02185830846428871, 0.019934555515646935, -0.016742238774895668, 0.039088454097509384, -0.007583495229482651, 0.021481921896338463, 0.0026573596987873316, 0.020687328651547432, -0.027518050745129585, 0.012295299209654331, -0.016128867864608765, 0.015585197135806084, -0.03242501616477966, -0.034209370613098145, -0.007904120720922947, -0.02014365792274475, 0.01124280970543623, 0.0006569342222064734, -0.012385910376906395, 0.011124318465590477, -0.021593444049358368, -0.006436909548938274, 0.020324882119894028, -0.007437122520059347, -0.00011903665290446952, -0.003582643810659647, -0.030222458764910698, -0.0021224028896540403, -0.014149351976811886, -0.006182500161230564, 0.04081704840064049, -0.021997710689902306, -0.009827874600887299, -0.03967394679784775, -0.016059165820479393, -0.006621617823839188, 0.018763573840260506, -0.011911941692233086, -0.025970682501792908, -0.013549921102821827, -0.03197892755270004, -0.003462409134954214, 0.022889887914061546, -0.007214078214019537, -0.0034711218904703856, -0.02616584673523903, 0.015585197135806084, 0.008879938162863255, -0.006893452722579241, 0.013075952418148518, 0.021426161751151085, 0.030696425586938858, -0.009618771262466908, 0.045500971376895905, 0.014734841883182526, 0.005722471978515387, 0.027295006439089775, 0.006203410215675831, 0.02578945830464363, -0.0006443008314818144, -0.0015621790662407875, -0.026890737935900688, -0.01700710318982601, -0.013201414607465267, -0.014888185076415539, 0.004673468414694071, 0.004230865277349949, -0.010064858943223953, 0.0432705320417881, 0.025510653853416443, -0.00248136417940259, 0.007813509553670883, -0.024060867726802826, -0.0019446646329015493, -0.005112586077302694, 0.0018854185473173857, -0.004098433069884777, 0.021844368427991867, -0.010545797646045685, 0.0008303160429932177, 0.021007953211665154, 0.006834206636995077, -0.0006673893658444285, -0.00748591311275959, 0.02223469503223896, -0.01649131439626217, 0.008022612892091274, -0.01030881330370903, 0.012281358242034912, 0.004610736854374409, 0.0030529142823070288, 0.0074928835965693, 0.009653622284531593, 0.01141706295311451, 0.0011744658695533872, 0.020561866462230682, 0.0175368320196867, 0.02103583514690399, -0.025050625205039978, -0.008022612892091274, 0.012218627147376537, -0.0005070765037089586, -0.0050498549826443195, 0.023893585428595543, 0.029413923621177673, 0.04237835481762886, -0.024465136229991913, 0.00851749163120985, -0.017174385488033295, 0.010936124250292778, 0.009082071483135223, -0.0027357737999409437, -0.028856312856078148, 0.004865146707743406, 0.0065275211818516254, 0.004910452291369438, 0.01564095914363861, -0.01643555238842964, 0.0025806883350014687, -0.019711511209607124, -0.008357178419828415, -0.0031626936979591846, -0.003157466184347868, 0.00045480061089619994, -0.005931575782597065, 0.010239112190902233, 0.01842900738120079, 0.013912367634475231, 0.008280507288873196, 0.004227380268275738, 0.01775987632572651, 0.03086370974779129, 0.002599856350570917, 0.018847215920686722, -0.008064433932304382, 0.005311234388500452, -0.0009191851131618023, -0.011382212862372398, 0.004973183386027813, 0.0015107743674889207, -0.02410268969833851, -0.013975098729133606, -0.02514820732176304, 0.01055973768234253, 0.0076253158040344715, 0.013821756467223167, 0.009563010185956955, -0.0062626563012599945, 0.024005107581615448, -0.0050289444625377655, -0.044134825468063354, 0.0006547560333274305, 0.003549535758793354, -0.0038022026419639587, -0.025622176006436348, -0.0034641516394913197, 0.03206257149577141, 0.025162147358059883, 0.02578945830464363, -0.002432573353871703, 0.008845087140798569, -0.019781211391091347, -0.0009270264999940991, -0.003938120324164629, -0.0001312343665631488, 0.055147621780633926, -0.0010742703452706337, -0.011451913975179195, 0.0030058659613132477, 0.004642102867364883, 0.014121470972895622, -0.030780067667365074, -0.007576524745672941, 0.046867113560438156, -0.002138085663318634, -0.02569187805056572, -0.02017153985798359, 0.02322445437312126, 0.005380935966968536, 0.00028359692078083754, -0.02715560421347618, -0.0313376784324646, -0.011981643736362457, -0.0033073239028453827, 0.011103407479822636, -0.030306098982691765, 0.0075347041711211205, 0.04073340445756912, 0.005760807543992996, -0.01360568217933178, -0.016505254432559013, -0.007932000793516636, 0.012093164958059788, 0.04951576143503189, 0.011089467443525791, -0.031226156279444695, -0.01038548443466425, -0.02347537875175476, -0.0052763838320970535, -0.01731378771364689, -0.02106371521949768, 0.03387480229139328, -0.0071304370649158955, 0.022499561309814453, -0.002960560144856572, -0.00496272835880518, 0.0026712999679148197, 0.0006909135263413191, 0.014651200734078884, -0.014623320661485195, -0.01738348975777626, -0.008378089405596256, 0.014198143035173416, -0.0086429538205266, 0.0029588176403194666, 0.02086855098605156, 0.03248078003525734, 0.046421024948358536, 0.013515071012079716, 0.0007004974759183824, -0.004025246482342482, 0.014219053089618683, -0.013912367634475231, -0.013975098729133606, 0.0044678496196866035, 0.01852658949792385, 0.002796762390062213, 0.005795658100396395, 0.02703014202415943, 0.0008651666576042771, -0.03727622330188751, 0.006116284057497978, 0.0019917129538953304, 0.00659025227651, 0.0006246973644010723, 0.004401633515954018, 0.011925882659852505, 0.012358030304312706, -0.02318263240158558, 0.0024238605983555317, 0.03496214374899864, -0.016449492424726486, 0.009172683581709862, 0.03565915301442146, -0.013208385556936264, -0.019363004714250565, -0.012239538133144379, -0.009312085807323456, -0.004683923441916704, 0.005088190548121929, 0.0019185265991836786, -0.021551623940467834, -0.029999414458870888, -0.0006970124086365104, -0.000616420351434499, -0.020784910768270493, -0.015431854873895645, -0.022694723680615425, 0.009946366772055626, -0.0175368320196867, 0.004910452291369438, -0.01855446957051754, -0.0108803641051054, -0.028744792565703392, -0.013438398949801922, -0.046197980642318726, -0.007569554727524519, 0.02213711477816105, 0.008845087140798569, 0.021398281678557396, 0.003756896825507283, -0.012253478169441223, -0.0003389222838450223, 0.004568916279822588, -0.023517198860645294, 0.004948788322508335, -0.038586605340242386, -0.025580355897545815, 0.0028072174172848463, 0.012309239245951176, -0.010364574380218983, -0.024493016302585602, 0.0024743941612541676, 0.016351910308003426, 0.00788321066647768, 0.033289313316345215, 0.008057462982833385, 0.009618771262466908, 0.003087765071541071, 0.019293302670121193, 0.011507675051689148, 0.003314293920993805, -0.03267594054341316, 0.014156321994960308, -0.0028072174172848463, -0.01355689112097025, -0.0022774881217628717, -0.0038544787093997, -0.012678655795753002, 0.005234563257545233, -0.004084492567926645, 0.014428156428039074, -0.0284799262881279, 0.005241533275693655, -0.03136555850505829, 0.0030598845332860947, -0.014302694238722324, 0.015208810567855835, 0.003241107799112797, -0.0072907498106360435, 0.011375242844223976, -0.010427305474877357, 0.0051195560954511166, 0.024311792105436325, -0.023782063275575638, 0.03220197185873985, 0.016770118847489357, -0.003495517186820507, 0.01887509599328041, 0.013961158692836761, -0.04117949306964874, -0.04218319058418274, -0.0012650775024667382, 0.002890859032049775, 0.014497858472168446, 0.0004369396483525634, -0.011528585106134415, -0.015710659325122833, -0.015780361369252205, -0.01633797027170658, 0.017230147495865822, -0.0037812923546880484, 0.012629864737391472, -0.03323355317115784, -0.008482640609145164, 0.01237197034060955, -0.02203953266143799, -0.008949639275670052, -0.024855462834239006, -0.03841932490468025, 0.02128675952553749, -0.011723748408257961, 0.012734416872262955, -0.0021450556814670563, -0.035352468490600586, -0.0014506570296362042, -0.03390268236398697, -0.008092314004898071, -0.00979999452829361, -0.00021204423683229834, 0.004628162365406752, 0.027643512934446335, 0.006914363242685795, 0.03593796119093895, 0.019906673580408096, 0.00628705183044076, 0.025956742465496063, 0.0007227147580124438, -0.010064858943223953, 0.003816142911091447, -0.005684136413037777, -0.013222325593233109, -0.0373041033744812, 0.010162441059947014, 0.01700710318982601, -0.02616584673523903, -0.002946619875729084, -0.009298145771026611, 0.007527734152972698, -0.017843518406152725, -0.0076044052839279175, -0.05118859186768532, -0.03086370974779129, -0.013968128710985184, 0.02372630313038826, -0.01284593902528286, 0.003593099070712924, -0.0297206100076437, -0.00937481690198183, 0.0313376784324646, -0.020757028833031654, 0.03551975265145302, 0.003830083180218935, 0.028661150485277176, -0.016881641000509262, 0.002491819439455867, 0.00688996771350503, -0.0036140093579888344, -0.014651200734078884, -0.013689323328435421, -0.02293170802295208, -0.012887759134173393, 0.0202691201120615, 0.0007061606738716364, 0.006558886729180813, 0.014525738544762135, 0.018150202929973602, 0.004652557894587517, -0.01176556944847107, -0.014065710827708244, 0.012511372566223145, -0.007855329662561417, -0.017146505415439606, -0.020784910768270493, -0.01927936263382435, -0.021328579634428024, -0.024493016302585602, 0.0010359346633777022, 0.015557317063212395, 0.002012623241171241, 0.020631566643714905, -0.01919572241604328, -0.010998855344951153, 0.0033508872147649527, -0.015069408342242241, 0.039729706943035126, -0.004527095705270767, 0.024939104914665222, 0.02750410884618759, 0.01340354885905981, -0.03153284266591072, -0.024158449843525887, 0.013968128710985184, -0.013563861139118671, 0.024228151887655258, 0.036551330238580704, -0.03320566937327385, 0.00229142839089036, 0.0005985593888908625, -0.022625023499131203, 0.0076741063967347145, -0.030306098982691765, 0.022388039156794548, 0.008733565919101238, -0.014734841883182526, -0.010162441059947014, 0.0011579118436202407, -0.014400276355445385, 0.004227380268275738, -0.03844720497727394, 0.02651435136795044, 0.011298570781946182, -0.028396286070346832, -0.008141105063259602, 0.0036453749053180218, 0.0029657878912985325, 0.03702529892325401, -0.021021895110607147, 0.01497182622551918, -0.024060867726802826, 0.015627019107341766, -0.013898427598178387, -0.0027985048945993185, -0.007458032574504614, 0.01795504055917263, -0.007172257639467716, -0.013940248638391495, 0.002937907353043556, 0.003153981175273657, 0.0013870546827092767, 0.004436484072357416, -0.004847721196711063, 0.025803400203585625, -0.021830428391695023, -0.00874053593724966, 0.015738539397716522, 0.006266141775995493, -0.009556040167808533, -0.030222458764910698, -0.03270382061600685, -0.009890605695545673, 0.004251775797456503, -0.0010106679983437061, 0.03044550120830536, -0.023935405537486076, -0.0037952326238155365, -0.015738539397716522, -0.012413791380822659, -0.03429301083087921, -0.020547926425933838, -0.010057888925075531, 0.02484152279794216, -0.04745260626077652, -0.004087977577000856, 0.0005536892567761242, -0.016226448118686676, 0.004732714034616947, 0.0066878339275717735, -0.019488466903567314, 0.0021781637333333492, 0.02210923284292221, -0.0028263854328542948, 0.020004255697131157, 0.026904679834842682, -0.021830428391695023, -0.01795504055917263, 0.025329431518912315, -0.00950027909129858, -0.006903907749801874, 0.003502487437799573, -0.01272047683596611, -0.027225304394960403, -0.03415360674262047, 0.0027270610444247723, 0.008378089405596256, -0.014679081737995148, 0.011138258501887321, 0.019432706758379936, 0.023991167545318604, 0.008803267031908035, -0.006450850050896406, -0.011298570781946182, 0.01403782982379198, -0.017341669648885727, -0.03624464571475983, 0.017230147495865822, -0.007374391425400972, -0.002240894827991724, -0.004530580714344978, 0.0007762975874356925, -0.017202265560626984, -0.02118917740881443, -0.01159131620079279, -0.017620474100112915, 0.03618888556957245, -0.013626592233777046, 0.00834323838353157, -0.01874963380396366, -0.025803400203585625, -0.01927936263382435, 0.008259597234427929, -0.009179653599858284, 0.02949756570160389, 0.018192023038864136, -0.00761137530207634, 0.01633797027170658, 0.023837825283408165, -0.002375069772824645, 0.007980791851878166, -0.014302694238722324, -0.017174385488033295, -0.04335417225956917, -0.008747505955398083, 0.004251775797456503, 0.04123525321483612, 0.010768841952085495, -0.004927877802401781, -0.0249948650598526, -0.0008690873510204256, -0.039757587015628815, -0.03758290782570839, -0.017676234245300293, 0.023796003311872482, 0.031895287334918976, 0.0009296403150074184, 0.027992017567157745, 0.025705818086862564, 0.011772539466619492, 0.027615630999207497, -0.03967394679784775, 0.012915640138089657, -0.00869174487888813, -0.014086620882153511, 0.044831838458776474, -0.0005001064273528755, -0.033763282001018524, -0.02325233444571495, -0.004081007558852434, -0.016351910308003426, -0.0046246773563325405, 0.02233227714896202, -0.001826172461733222, 0.006018701940774918, -0.0064403945580124855, -0.0071792276576161385, 0.003234137548133731, 0.012873819097876549, -0.0040217614732682705, -0.04901391267776489, 0.0011099922703579068, 0.012525312602519989, -0.011549495160579681, -0.007423182018101215, 0.006767990533262491, 0.0156688392162323, -0.011033706367015839, -0.011946792714297771, -0.00856628268957138, 0.005889754742383957, 0.011709808371961117, 0.0022130142897367477, -0.004028731491416693, -0.006189470179378986, 0.027462288737297058, 0.04056612402200699, -0.012044374831020832, -0.007806539069861174, -0.01197467278689146, 0.0032428503036499023, -0.03624464571475983, 0.012044374831020832, -0.010009097866714, -0.02512032724916935, -0.010538827627897263, -0.018038680776953697, 0.006304477341473103, -0.014198143035173416, -0.03476697951555252, -0.013473249971866608, -0.02236015722155571, -0.0134314289316535, 0.009967277757823467, -0.0023105961736291647, -0.008433850482106209, -0.01750895194709301, 0.02029700204730034, 0.014093590900301933, -0.009430577978491783, 0.01636585220694542, 0.01441421639174223, -0.018164142966270447, -0.004558461252599955, 0.017495011910796165, -0.010287903249263763, -0.025859160348773003, 0.00624871626496315, 0.018958738073706627, -0.006342812906950712, -0.012852909043431282, 0.21233786642551422, 0.015459734946489334, 0.0079598817974329, 0.05871632695198059, 0.012385910376906395, 0.02233227714896202, 0.019363004714250565, -0.004105403088033199, -0.011856180615723133, -0.006903907749801874, -0.00010400731844129041, 0.010197291150689125, -0.02952544577419758, -0.0004630776238627732, 0.032174091786146164, -0.001983000198379159, -0.031923167407512665, -0.03334507346153259, 0.009988187812268734, -0.015403973869979382, -0.008329298347234726, -0.0030180637259036303, -0.03663497045636177, -0.01055973768234253, 0.03125403821468353, -0.029776370152831078, -0.007172257639467716, -0.017244087532162666, 0.013082923367619514, 0.01313171349465847, -0.016700416803359985, -0.008726594969630241, 0.0149857671931386, 0.013535981066524982, -0.018317485228180885, 0.006039612460881472, 0.0385587252676487, -0.007207108195871115, 0.00394160533323884, -0.0011770797427743673, 0.015613078139722347, -0.0009758173837326467, 0.02445119619369507, 0.01395418867468834, 0.012615924701094627, -0.006792386062443256, -0.005799143109470606, -0.0007153089973144233, -0.011772539466619492, 0.01564095914363861, -0.01658889465034008, -0.008956609293818474, -0.001356560387648642, 0.01382872648537159, -0.008336268365383148, -0.01656101457774639, 0.009981217794120312, -0.004279656335711479, -0.006367208436131477, 0.024032987654209137, -0.0172859076410532, 0.02096613310277462, 0.016226448118686676, -0.0032271675299853086, -0.03708105906844139, 0.011221899650990963, -0.04257351905107498, 0.04695075750350952, 0.01267168577760458, -0.009556040167808533, -0.016003405675292015, -0.011138258501887321, -0.030055174604058266, 0.00014408552669920027, -0.021203117445111275, -0.035352468490600586, 0.015348212793469429, 0.009953336790204048, 0.018122322857379913, 0.03041762113571167, 0.002669557463377714, -0.017048923298716545, -0.011904971674084663, 0.009291175752878189, -0.005670195911079645, -0.009960307739675045, 0.023447496816515923, -0.020185479894280434, -0.02128675952553749, -0.00972332339733839, -0.00018209448899142444, -0.005161376670002937, -0.025203969329595566, -0.026904679834842682, 0.03161648288369179, -0.013062012381851673, -0.011667987331748009, 0.0335681177675724, -0.01668647676706314, -0.04814961552619934, -0.03660709038376808, 0.0509934276342392, 0.013912367634475231, -0.004669982939958572, -0.024785760790109634, -0.001946407137438655, -0.03186740726232529, 0.010469126515090466, -0.01519487053155899, -0.007050280459225178, 0.008245657198131084, -0.03250866010785103, 0.00856628268957138, -0.018359307199716568, 0.0040635825134813786, 0.024493016302585602, 0.02372630313038826, 0.0038091728929430246, 0.001724234432913363, -0.004652557894587517, 0.0036906807217746973, 0.0008355436148121953, 0.023294154554605484, 0.009472399018704891, -0.024506956338882446, -0.03961818665266037, -0.02452089637517929, 0.018833275884389877, -0.0010681714629754424, -0.03833568096160889, 0.011096437461674213, -0.013689323328435421, 0.02111947536468506, -0.023809943348169327, -0.022067412734031677, 0.012302269227802753, 0.00830838829278946, -0.021328579634428024, -0.022415919229388237, -0.017787756398320198, 0.009779084473848343, 0.00975120346993208, 0.031728003174066544, 0.019934555515646935, 0.02857750840485096, -0.015264571644365788, 0.010552767664194107, 0.0062835668213665485, -0.0008608103380538523, -0.0315886028110981, -0.027796855196356773, 0.000724021636415273, -0.0010664289584383368, 0.0011038933880627155, 0.010336694307625294, 0.0017303333152085543, 0.008287477307021618, -0.016100985929369926, -0.00243780086748302, -0.010427305474877357, -0.045947056263685226, 0.0007588722510263324, 0.004910452291369438, 0.002796762390062213, -0.01820596493780613, -0.017801696434617043, -0.17821213603019714, 0.016867700964212418, 0.01706286333501339, -0.02121705748140812, 0.0340699665248394, 0.006126739084720612, 0.008259597234427929, -0.0022496075835078955, 0.010064858943223953, -0.004994093906134367, 0.007820479571819305, -0.014149351976811886, -0.0277271531522274, -0.03599372133612633, 0.01318050455302, 0.0022339248098433018, 0.015236691571772099, 0.0022600628435611725, 0.04254563897848129, 0.011235839687287807, 0.020283062011003494, -0.05213652923703194, 0.011605256237089634, -0.009932426735758781, 0.0004521867958828807, -0.017369549721479416, 0.015836121514439583, -0.0019725451711565256, 0.010462156496942043, -0.030333980917930603, -0.024032987654209137, -0.005499427672475576, 0.031449198722839355, -0.004523610696196556, 0.02479970082640648, 0.007151347119361162, 0.0076462263241410255, 0.019809093326330185, -0.012141956016421318, 0.028744792565703392, 0.033540237694978714, 0.04260139912366867, -0.020952193066477776, -0.011298570781946182, 0.015654899179935455, 0.004227380268275738, -0.005917635280638933, -0.002760169096291065, 0.004816355649381876, -0.0018348852172493935, 0.05364207550883293, -0.0024796216748654842, 0.004795445594936609, -0.002275745617225766, 0.00856628268957138, 0.0005867973086424172, 0.0007632285705767572, 0.017174385488033295, 0.008998430334031582, -0.009806964546442032, 0.0111312884837389, -0.007032855413854122, -0.008907818235456944, 0.008754475973546505, 0.012002553790807724, -0.025510653853416443, -0.01164010725915432, 0.018916916102170944, -0.02477182075381279, 0.004610736854374409, -0.004237835295498371, 0.0026172816287726164, 0.015961583703756332, 0.032564420253038406, 0.016547074541449547, -0.007855329662561417, 0.005056825000792742, 0.010950065217912197, 0.018498709425330162, 0.010315783321857452, -0.017244087532162666, 0.01919572241604328, -0.03933938220143318, 0.004084492567926645, -0.0297206100076437, -0.01138918288052082, -0.004223895259201527, -0.014400276355445385, 0.006998004391789436, 0.01519487053155899, 0.03889329358935356, -0.038140520453453064, 0.015933703631162643, -0.005307749379426241, 0.0004887799732387066, 0.014497858472168446, 0.017327727749943733, 0.003948575351387262, 0.03889329358935356, 0.02071520872414112, -0.01151464506983757, 0.014302694238722324, -0.028744792565703392, -0.007583495229482651, 0.011173108592629433, 0.027518050745129585, -0.0012563648633658886, 0.016519194468855858, 0.033317193388938904, 0.013062012381851673, -0.030027294531464577, 0.01932118460536003, 0.02420026995241642, 0.02074308879673481, -0.015041527338325977, 0.02081279084086418, -0.007036340422928333, -0.010587618686258793, 0.013438398949801922, -0.018470829352736473, 0.08180137723684311, -0.011319481767714024, -0.019070260226726532, 0.0220116525888443, 0.012887759134173393, -0.015877943485975266, -0.10717263072729111, -0.03019457682967186, 0.009193593636155128, 0.009841815568506718, -0.013041102327406406, 0.001087339362129569, -0.020659448578953743, 0.02860538847744465, -0.027545930817723274, 0.024311792105436325, -0.027392588555812836, -0.00748591311275959, -0.005739897023886442, 0.010469126515090466, 0.011145228520035744, 0.00748591311275959, 0.00047048338456079364, -0.0006321031250990927, 0.002718348288908601, 0.04371661692857742, 0.01713256537914276, -0.007283779792487621, -0.0038022026419639587, -0.0028350979555398226, -0.014302694238722324, -0.0028490382246673107, -0.010664289817214012, 0.019530287012457848, 0.020087897777557373, 0.005872329697012901, 0.021830428391695023, -0.007214078214019537, 0.007381361443549395, -0.0035216552205383778, 0.006266141775995493, -0.008189896121621132, -0.0051195560954511166, 0.006823751609772444, 0.032118331640958786, -0.01877751387655735, -0.0014916065847501159, 0.014372396282851696, 0.01830354519188404, -0.019042378291487694, -0.004865146707743406, 0.012204687111079693, -0.0018017770489677787, 0.02118917740881443, 0.00509167555719614, -0.013326876796782017, -0.008378089405596256, -0.0010359346633777022, -0.02854962833225727, 0.01706286333501339, 0.024019047617912292, -0.02410268969833851, 0.02328021451830864, 0.009263294748961926, -0.007186198141425848, 0.015376093797385693, -0.007897150702774525, 0.007029369939118624, 0.006224320735782385, 0.025301549583673477, 0.0030320039950311184, -0.0034937746822834015, -0.00032280388404615223, 0.0009610058623366058, -0.01905631832778454, -0.009479369036853313, -0.013187474571168423, 0.017773816362023354, -0.010977945290505886, 0.00846870057284832, -0.02521790936589241, 0.022123174741864204, 0.001342620118521154, 0.005952485837042332, 0.011667987331748009, 0.005593524780124426, -0.022889887914061546, -0.0028716910164803267, -0.006043097469955683, -0.03161648288369179, 0.0009984702337533236, 0.01544579491019249, 0.035631272941827774, -0.019084200263023376, 0.022792305797338486, -0.047619886696338654, -0.012211657129228115, 0.016170687973499298, -0.010420335456728935, -0.03114251419901848, -0.01463726069778204, 0.02334991656243801, -0.01972545124590397, 0.022848065942525864, 0.011326451785862446, 0.00950027909129858, -0.028187181800603867, 0.0008612459641881287, -0.06200622394680977, 0.00629750732332468, 0.021454041823744774, -0.0018540529999881983, 0.02236015722155571, -0.016979223117232323, -0.019460586830973625, -0.01713256537914276, -0.008963579311966896, 0.003927664831280708, -0.02882843278348446, 0.011500705033540726, -0.026430711150169373, -0.020575806498527527, -0.026542233303189278, -0.008440820500254631, -0.00018405483569949865, -0.01693740114569664, -0.0048721167258918285, 0.031170394271612167, 0.005360025446861982, 0.008440820500254631, 0.02156556397676468, 0.002923967083916068, -0.015613078139722347, -0.006290536839514971, -0.010078798979520798, 0.03186740726232529, -0.007841389626264572, -0.025399131700396538, -0.0007627929444424808, -0.03287110477685928, -0.013222325593233109, 0.01909814029932022, 0.015529436059296131, 0.016254330053925514, 0.0033334619365632534, 0.00325156282633543, 0.015264571644365788, -0.0036802254617214203, -0.018596291542053223, -0.03777807205915451, -0.004481789655983448, -0.01381478551775217, -0.003676740452647209, 0.009590891189873219, 0.0061720446683466434, -0.004729229025542736, 0.01766229420900345, 0.010866423137485981, 0.024827582761645317, 0.015905823558568954, 0.002833355451002717, -0.033484477549791336, -0.014044799841940403, -0.0007993861217983067, 0.0015090318629518151, 0.01785745844244957, 0.0057677775621414185, 0.0013182247057557106, 0.01944664679467678, 0.01279714796692133, 0.012838969007134438, -0.02842416614294052, 0.023684481158852577, -0.015585197135806084, -0.033958446234464645, 0.002760169096291065, 0.012608954682946205, -0.02081279084086418, -0.007039825432002544, -0.01370326429605484, 0.0217607282102108, -0.009590891189873219, 0.0006124996580183506, -0.009298145771026611, -0.008092314004898071, 0.01421208307147026, -0.014358455315232277, 0.010169411078095436, 0.010643379762768745, -0.03086370974779129, -0.0011465854477137327, -0.0059455158188939095, 0.027044082060456276, 0.004081007558852434, -0.010594588704407215, 0.03504578396677971, 0.015306392684578896, -0.0008603747119195759, 0.002345446730032563, 0.009855755604803562, -0.006196440197527409, -0.00019614365010056645, 0.020826730877161026, 0.009535130113363266, -0.013410518877208233, 0.025677938014268875, 0.03287110477685928, 0.012211657129228115, 0.012406820431351662, 0.008266567252576351, 0.00886599812656641, -0.005422756541520357, -0.019390884786844254, 0.029190879315137863, 0.0008372861775569618, 0.006084918510168791, 0.014804543927311897, 0.026193726807832718, -0.008559312671422958, -0.00992545671761036, -0.012601984664797783, 0.0299715343862772, 0.0009836587123572826, 0.016547074541449547, 0.00962574128061533, -0.025287609547376633, -0.009458458051085472, 0.03301050886511803, -0.005123041104525328, 0.002655617194250226, 0.03367963805794716, -0.002862978493794799, 0.010002127848565578, 0.028284763917326927, 0.02163526602089405, 0.0008825919358059764, -0.009521189145743847, -0.02166314609348774, 0.011333421804010868, -0.005924605298787355, -0.013068982400000095, -0.003910239785909653, 0.003593099070712924, -0.026974380016326904, -0.007925030775368214, 0.030724307522177696, 0.007722897455096245, 0.0927862897515297, 0.017592594027519226, -0.02680709771811962, -0.004366782959550619, -0.00799473188817501, 0.0033543722238391638, 0.014818483963608742, -0.0030076084658503532, -0.00975120346993208, -0.045222166925668716, 0.035798557102680206, -0.014372396282851696, -0.012999281287193298, -0.035575512796640396, 0.013459309935569763, 0.013898427598178387, -0.010545797646045685, 0.005157891660928726, 0.004610736854374409, -0.012169837020337582, 0.03128191828727722, 0.000736654968932271, 0.018345367163419724, -0.009172683581709862, -0.03164436295628548, -0.006869057193398476, 0.028661150485277176, -0.003920694813132286, -0.004391178023070097, -0.03551975265145302, 0.019335124641656876, -0.003568703541532159, -0.022388039156794548, -0.012462581507861614, -0.0018244299571961164, 0.02755987085402012, 0.006583282258361578, -0.02860538847744465, 0.005949000827968121, -0.007715927436947823, 0.0008760574855841696, -0.01544579491019249, -0.00800867285579443, -0.007437122520059347, 0.01564095914363861, -0.00038226775359362364, -0.011298570781946182, -0.01403782982379198, -0.028173241764307022]"
A prelude to analysis of Redis memory-store,A prelude to analysis of Redis memory-store,"of numerous dev-ops and software engineers. Indeed, according to [StackOverflow survey in 2021](https://insights.stackoverflow.com/survey/2021#databases), Redis is the most loved database for the 5th time in a row and is at the top of [db-engines](https://db-engines.com/en/ranking/key-value+store) ranking, way before the next contestant. But how well does Redis utilizes modern hardware systems? Will it stay competitive in a few years without reinventing itself?  To understand choices behind Redis design, I have been reading [the old posts](http://oldblog.antirez.com/) of Salvatore @antirez \- the creator of Redis. Before I begin, I want to add that I have tremendous respect for Salvatore and for how much he achieved by being a talented and authentic software programmer (even though [he does not want to be remembered as such](http://antirez.com/news/133)).  Based on his notes and GitHub discussions, I identified the following architectural principles in Redis:  1. **Simple is beautiful (and code is a poem)**\ Probably the strongest motive around Redis is simplicity. Salvatore's preference is towards simple solutions and he expressed his attitude to coding in his [Redis manifesto](http://oldblog.antirez.com/post/redis-manifesto.html). As a consequence, Redis resides in a single self-contained codebase without much reliance on third-party projects and its functionality is implemented in plain C using posix API.  2. **Single-threaded architecture**\ Redis development started a few years after Memcached. By that time, Memcached, the predecessor of Redis, has already been a mature system that has been used and supported by large, highly technological companies like Facebook and Twitter. It used multi-threaded architecture to scale its I/O performance vertically within a single node. Remarkably, antirez decided against this architecture and adopted the single-threaded design instead. Specifically, Redis utilizes a single thread that manipulates its main in-memory dictionary. antirez has defended this approach many times with the following arguments: _ Redis cares very much about latency and adopts share-nothing architecture to control its tail and average latencies. _ Most of the CPU spent on system-cpu handling I/O and not on userland cpu handling Redis data-structures. Therefore, the upside of parallelization is limited anyway. _ Pipelining of requests can increase throughput by order of magnitude. _ On the other hand, multi-threading adds complexity. Quoting antirez: ""...Slower development speed to achieve the same features. Multi-thread programming is hard... In a future of cloud computing, I want to consider every single core as a computer itself..."" \* Vertical scale has physical limit anyway, therefore horizontal scaling (aka Redis cluster) is the way to scale.  In addition to the principles above, Redis maintains unique design goals that differentiate it from, say, a disk-based database. I believe that if we list Redis design goals by priority, it will be:  1. Low latency 2. High throughput 3. Memory efficiency 4. High availability 5. Strong consistency guarantees 6. Durability  Obviously, if one would want to implement an alternative memory store he would need to prioritize design goals similarly to Redis. In other words, the new store design should not sacrifice low latency for durability, or for strong consistency.  ## Retrospective  I think that _simplicity_ was the main guideline for Redis which heavily affected architectural decisions like its serialization algorithm, efficiency of its data structures, reliability and more. Even the choice of its threading model has been, in part, done because of simplicity reasons. And if Redis is the experiment on how far one can go nowdays by implementing relatively simple solutions, it without a question succeeded tremendously.  Redis in 2021 is a mature product with relatively stable feature set, and the questions I am asking myself today are: a) how more efficienty Redis could be today if it would adopt state-of-the-art algorithms and datastructures. b) how much simpler it would be for a user if it adopt product simplicity over simplicity of implementation.  In other words, if one would want to implement a drop-in replacement for Redis **today** by redesigning it from scratch, how it would compare to Redis. I do not have a definite answer to this question today but hope to have one in few months.  Again, I am not arguing with the tremendous popularity of the Redis memory store. It seems that Salvatore's decision to go for simplicity and deliver features quickly in Redis early days - paid off: today Memcached is a niche system, and the vast majority of software stacks use Redis. However, I do claim (currently without proof) that it is possible to **vastly** improve reliability, performance and cost-efficiency metrics of Redis-like memory store that follows similar design goals but with different architectural principles.  In my next posts, I am going to detail Redis specific design choices based on the principles state above and show how a different architecture, if aligned better with modern hardware systems, could provide, what I think a disruptive change to in-memory datastores.","[-0.022195767611265182, 0.001048421487212181, 0.002304280176758766, -0.032470814883708954, 0.009196377359330654, 0.004497927147895098, -0.005137525033205748, -0.003885987913236022, -0.02503073960542679, -0.007751232013106346, 0.008878306485712528, 0.024477574974298477, 0.0029974656645208597, -0.009611250832676888, -0.000775728200096637, -0.005832438822835684, 0.03186233341693878, 0.005842810962349176, 0.007253382820636034, -0.004930087830871344, 0.0018721196101978421, -0.01738322712481022, -0.025487102568149567, -0.0031063701026141644, -0.02006607875227928, 0.0005263715866021812, 0.03545790910720825, -0.01077289879322052, -0.0018721196101978421, -0.007599111646413803, 0.02048095315694809, -0.01837892457842827, 0.0014313157880678773, 0.0010224919533357024, -0.03177936002612114, 0.0006564519135281444, 0.003061425406485796, -0.016733257099986076, 0.00925169326364994, -0.006651815492659807, 0.026330679655075073, -0.004612017422914505, -0.010606949217617512, -0.03484942764043808, -0.0054141078144311905, 0.024187162518501282, -0.005790951661765575, -0.0329686664044857, -0.0022558781784027815, -0.019388452172279358, 0.010413341224193573, 0.012881842441856861, -0.012301018461585045, 0.010683009400963783, 0.005835896357893944, -0.01743854396045208, -0.004446067847311497, 0.017701296135783195, 0.0019983104430139065, -0.02147665247321129, 0.023329755291342735, 0.03435157984495163, -0.016511991620063782, 0.019319305196404457, -0.010447913780808449, -0.006209283135831356, 0.002084742533043027, -0.014002002775669098, 0.01535034365952015, 0.015336514450609684, 0.0220298171043396, 0.03487708792090416, -0.0009922406170517206, 0.03233252465724945, 0.02714659832417965, -0.014963127672672272, -0.000413793750340119, 0.016083287075161934, -0.009936235845088959, -0.012971731834113598, -0.019208673387765884, -0.01688537746667862, -0.009030426852405071, 0.011250004172325134, 0.002015596954151988, 0.04051937535405159, -0.00626459950581193, 0.0026292649563401937, -0.005583514459431171, 0.009846346452832222, -0.013441922143101692, 0.017009839415550232, 0.025500930845737457, 0.003422711743041873, -0.023454219102859497, 0.008345885202288628, 0.02108943648636341, 0.008249080739915371, -0.028405049815773964, 0.007523050997406244, -0.02662109024822712, -0.011858485639095306, -0.011616475880146027, -0.010330365970730782, -0.0174800306558609, 0.0055109113454818726, 0.0007878286996856332, -0.019665034487843513, 0.03200062736868858, 0.014465278945863247, -0.027437010779976845, 0.04762755334377289, 0.011816998943686485, -0.012141983024775982, -0.010302707552909851, 0.003061425406485796, 0.017687467858195305, -0.012812696397304535, 0.012390907853841782, -0.016221579164266586, 0.025459444150328636, 0.021186240017414093, 0.029096506536006927, -0.038196079432964325, 0.029981572180986404, -0.011194687336683273, -0.023689312860369682, 0.005407193209975958, 0.0017623507883399725, -0.0042801182717084885, -0.0035402593202888966, 0.01846189983189106, -0.04065766558051109, -0.011367551982402802, -0.0047399369068443775, -0.005663032177835703, -0.008062387816607952, -0.006506609730422497, -0.003401967929676175, -0.03335588052868843, 0.026441311463713646, -0.008103875443339348, -0.020204370841383934, -0.027533814311027527, -0.012238787487149239, 0.038721587508916855, -0.003813384799286723, 0.029594356194138527, -0.01590350829064846, 0.0034192544408142567, -0.0029525209683924913, -0.019900130107998848, -0.02772742137312889, 0.012978645972907543, 0.0281422957777977, -0.0004688942281063646, -0.02096497267484665, -0.004456439986824989, -0.027962516993284225, -0.0012506727362051606, 0.03271974250674248, 0.01951291412115097, -0.012549943290650845, -0.005483253393322229, 0.009369241073727608, 0.035098351538181305, 0.04394900053739548, 0.004878228530287743, 0.02208513393998146, -0.006859252694994211, -0.008781502954661846, 0.03122619353234768, -0.03128151223063469, 0.01640135794878006, 0.0015903508756309748, 0.009210205636918545, -0.0019464511424303055, 0.013213741593062878, -0.0009619893971830606, -0.012128153815865517, 0.0260817538946867, 0.0076405988074839115, 0.027589131146669388, 0.03844500333070755, 0.0015834362711757421, -0.0025825914926826954, 0.010945762507617474, 0.03285803273320198, -0.004058851860463619, -0.02158728428184986, 0.0010596576612442732, -0.0032740484457463026, -0.015212051570415497, -0.015488634817302227, -0.6186603307723999, -0.0007264619343914092, -0.007910267449915409, -0.04878919944167137, 0.01380147971212864, 0.005707976873964071, 0.02107560634613037, 0.010461742989718914, -0.005801323335617781, 0.008214508183300495, 0.00501651968806982, -0.007702829781919718, 0.01853104494512081, -0.025417955592274666, -0.029622014611959457, -0.023952066898345947, 0.01098725013434887, -0.01901506446301937, -0.020881999284029007, -0.00023920087551232427, -0.012743551284074783, 0.02816995419561863, -0.028017833828926086, -0.0017614865209907293, 0.009147974662482738, 0.0038375859148800373, -0.008103875443339348, 0.008027814328670502, -0.02102028951048851, 0.030064545571804047, -0.02158728428184986, 0.017314080148935318, 0.02868163213133812, 0.013683931902050972, 0.05575908347964287, 0.008899050764739513, -0.0026361795607954264, 0.03791949525475502, 0.012231872417032719, 0.042317163199186325, 0.0018133457051590085, -0.003930932376533747, 0.018337437883019447, 0.009701140224933624, 0.0048471130430698395, 0.0220298171043396, 0.010240476578474045, 0.0025220890529453754, 0.013033962808549404, -0.024947766214609146, 0.004864399321377277, -0.026828527450561523, 0.0033777670469135046, -0.004394208546727896, 0.019817154854536057, -0.023786118254065514, 0.04002152755856514, -0.007751232013106346, 0.01843424141407013, 0.007336357608437538, 0.014257841743528843, 0.01848955824971199, -0.013511068187654018, -0.012964816763997078, -0.049480658024549484, 0.011229259893298149, -0.008456517942249775, -0.0168438907712698, 0.0064582074992358685, -0.00526198698207736, -0.0007752960664220154, -0.016069458797574043, -0.008643211796879768, -0.02811463735997677, -0.009376156143844128, 0.003462470369413495, 0.02456055022776127, 0.008131532929837704, 0.0021245013922452927, 0.0195405725389719, 0.016747087240219116, 0.0026067926082760096, 0.002146973740309477, -0.03236018493771553, 0.010952677577733994, 0.011754767037928104, -0.026441311463713646, -0.02099263109266758, 0.009514447301626205, 0.02410418726503849, -0.00015276875637937337, 0.021933013573288918, -0.012957902625203133, -0.015502464026212692, 0.03996621072292328, 0.029511380940675735, -0.014548253268003464, -0.00629225792363286, -0.01407806295901537, -0.039772599935531616, -0.024325454607605934, -0.028432708233594894, 0.012646746821701527, 0.026496628299355507, 0.01734173856675625, 0.0026551946066319942, -0.004335434641689062, -0.002556661842390895, 0.036204684525728226, -0.019305476918816566, 0.008560236543416977, -0.014714202843606472, -0.018683165311813354, 0.009044256061315536, 0.008753844536840916, -0.01788107492029667, 0.022831907495856285, -0.013192998245358467, -0.009369241073727608, -0.02667640708386898, 0.0009896476985886693, -0.002701867837458849, -0.002828058786690235, 0.005379534792155027, -0.014188695698976517, -0.011104797944426537, 0.013462666422128677, 0.022223424166440964, 0.015682242810726166, 0.002567033749073744, 0.005071836523711681, -0.024228649213910103, 0.014990786090493202, -0.004238630644977093, 0.023302098736166954, 0.005922328215092421, 0.019844813272356987, -0.003547173924744129, 0.007426247000694275, -0.02920714020729065, 0.024463744834065437, 8.65401525516063e-05, 0.012619088403880596, -0.01407114788889885, -0.033134616911411285, -0.025929633527994156, -0.020895827561616898, -0.0047261081635952, -0.008076217025518417, -0.009950065053999424, -0.005611172877252102, -0.00511332368478179, -0.012950987555086613, 0.015336514450609684, -0.002838430693373084, 0.01485249400138855, 0.007599111646413803, -0.021338360384106636, -0.00408651027828455, -0.010510144755244255, 0.001991395838558674, 0.014043489471077919, -0.019333135336637497, 0.014002002775669098, -0.033023983240127563, -0.026040267199277878, -0.018116170540452003, 0.016788573935627937, -0.0014926826115697622, -0.027589131146669388, 0.0018064312171190977, -0.0019378080032765865, 0.016249237582087517, -0.005272359121590853, -0.03526430204510689, 0.0002744219673331827, -0.03692379966378212, 0.008615553379058838, 0.02309466153383255, -0.005199756007641554, 0.009825603105127811, 0.021158581599593163, -0.010765983723104, -0.019236331805586815, 0.03429626300930977, 0.018060853704810143, -0.00744007620960474, 0.012155812233686447, -0.01795022189617157, 0.02053626999258995, 0.023205293342471123, 0.0019585515838116407, -0.0064063481986522675, -0.014299328438937664, -0.012743551284074783, -0.0023198379203677177, -0.007751232013106346, -0.008615553379058838, 0.011277662590146065, 0.0346834771335125, -0.005739092361181974, 0.017258765175938606, 0.014147208072245121, -0.012778123840689659, -0.016567308455705643, -0.023703143000602722, 0.006727875676006079, -0.001387235475704074, 0.028543341904878616, -0.006205825600773096, -0.004141827113926411, 0.002463315147906542, 0.002413184614852071, -0.02558390609920025, -0.0028159583453089, 0.05423787981271744, -0.009970808401703835, 0.008947452530264854, -0.0064582074992358685, 0.0204671248793602, 0.013649359345436096, 0.02606792561709881, 0.005158268380910158, -0.01837892457842827, -0.006724418606609106, -0.006102106999605894, 0.006942227482795715, 0.011139370501041412, 0.007917181588709354, -0.04364475980401039, -0.02106177806854248, 0.02258298173546791, 0.01230793260037899, -0.009652738459408283, 0.04342349246144295, 0.005528198089450598, 0.015709901228547096, -0.021711746230721474, 0.0072326394729316235, -0.009777200408279896, -0.0008599995053373277, 0.01284726895391941, 0.0013846424408257008, -0.024242479354143143, 0.016166262328624725, 0.03498771786689758, 0.022679787129163742, 0.01103565189987421, -0.009604336693882942, 0.0023284810595214367, -0.005054549779742956, -0.002765827579423785, -0.01050323061645031, 0.0013431550469249487, 0.0014365017414093018, -0.021172409877181053, 0.0159173384308815, 0.012957902625203133, 0.02363399788737297, 0.010330365970730782, 0.017742784693837166, 0.0029525209683924913, 0.00263099349103868, -0.014147208072245121, 0.023758459836244583, -0.012978645972907543, 0.00562845915555954, -0.030617712065577507, 0.01052397396415472, -0.018876774236559868, -0.01488015241920948, -0.040740642696619034, -0.008297482505440712, -0.02873694896697998, -0.005832438822835684, 0.0022645213175565004, 0.002257606713101268, 0.001077808439731598, -0.011111712083220482, 0.008802246302366257, 0.004964660387486219, -0.022693615406751633, 0.010828215628862381, 0.012141983024775982, -0.01047557219862938, -0.02102028951048851, -0.0179087333381176, 0.01228718925267458, 0.007578367833048105, 0.00043842688319273293, 0.012031350284814835, 0.024463744834065437, -0.013670102693140507, 0.01053088903427124, 0.0012480797013267875, -0.010676094330847263, 0.07041797041893005, -0.003343194257467985, -0.03141980245709419, -0.021767063066363335, 0.02055010013282299, 0.001460702740587294, -0.02417333424091339, -0.00944530125707388, 0.0659373328089714, 0.0012351148761808872, -0.0032533048652112484, -0.017286423593759537, 0.00898202508687973, -0.00717040803283453, -0.006243855692446232, -0.015253539197146893, 0.007218810264021158, -0.0050994944758713245, 0.020854340866208076, 0.0023958981037139893, -0.028847582638263702, 0.007301785051822662, 0.04159804806113243, 0.0022040188778191805, -0.008249080739915371, -0.011125541292130947, -0.0032947922591120005, 0.006102106999605894, 0.05863554775714874, 0.000744612654671073, 0.013435008004307747, 0.03285803273320198, -0.014824836514890194, -0.0017614865209907293, -0.004373464733362198, -0.019692692905664444, 0.019333135336637497, -0.0046016457490623, -0.0041245403699576855, -0.011982948519289494, 0.01793639175593853, -0.008484176360070705, 0.022679787129163742, 0.008629382587969303, -0.005555856041610241, -0.028930557891726494, -0.018876774236559868, -0.030479419976472855, -0.012301018461585045, 0.002539375564083457, 0.02050861157476902, 0.029096506536006927, 0.02879226580262184, -0.000508652999997139, 0.009839431382715702, -0.007910267449915409, 0.00996389426290989, -0.03335588052868843, 0.0018876773538067937, 0.0022990943398326635, 0.011706365272402763, 0.024366941303014755, -0.017576834186911583, 0.019789496436715126, 0.008857563138008118, 0.01104256696999073, -0.00462930416688323, 0.013393520377576351, -0.002855716971680522, -0.005179012194275856, -0.0008401201339438558, 0.003258490702137351, 0.0019602803513407707, -0.009950065053999424, 0.01337277702987194, 0.03686848282814026, -0.026759382337331772, -0.014893981628119946, 0.020328832790255547, -0.024740329012274742, -0.046880777925252914, 0.0017943306593224406, 0.004065766464918852, -0.000925687956623733, -0.01407806295901537, 0.009265522472560406, -0.017065156251192093, -0.0056180874817073345, -0.011229259893298149, -0.0015497277490794659, -0.00626459950581193, -0.016553478315472603, 0.01052397396415472, -0.01107022538781166, -0.004034650977700949, 0.0012731450842693448, -0.020757537335157394, -0.005960358772426844, -0.024975422769784927, -0.01685771904885769, -0.04953597113490105, 0.01695452257990837, 0.04508299008011818, 0.0021003002766519785, 0.021960671991109848, 0.016124775633215904, 0.014893981628119946, 0.015239709988236427, -0.0003210953145753592, -0.011816998943686485, 0.0017822302179411054, -0.04151507467031479, -0.021255385130643845, 0.011644134297966957, -0.012840354815125465, -0.020633073523640633, -0.012515369802713394, 0.01253611408174038, 0.025915805250406265, -0.010240476578474045, 0.04394900053739548, 0.025846660137176514, -0.010876617394387722, 0.03545790910720825, 0.034102655947208405, 0.013234484940767288, -0.007336357608437538, -0.025265835225582123, 0.01801936700940132, 0.035043034702539444, -0.002897204365581274, -0.026565775275230408, 0.00797941256314516, -0.0031080988701432943, -0.010074527002871037, -0.010185160674154758, -0.006897282786667347, -0.012881842441856861, 0.0089543666690588, -0.015336514450609684, 0.00474685151129961, 0.0018081598682329059, -1.3329452485777438e-05, 0.010358024388551712, -0.015557780861854553, 0.03435157984495163, -0.00822142232209444, 0.011927631683647633, 0.011685621924698353, -0.03377075493335724, 0.033577147871255875, 0.014866323210299015, -0.012902585789561272, 0.009030426852405071, -0.001017305999994278, -0.02299785614013672, -0.04444684833288193, -0.0014036574866622686, 0.005697604734450579, 0.031115561723709106, -0.009666567668318748, -0.03576214984059334, -0.0017035769997164607, -0.005690690595656633, 0.017231106758117676, -0.016774743795394897, -0.008601724170148373, -0.000827587500680238, 0.0007727030897513032, -0.0199692752212286, 0.005234329029917717, -0.022901052609086037, -0.008387371897697449, -0.023993555456399918, -0.012135068885982037, 0.010309622623026371, -0.002005225047469139, 0.012646746821701527, -0.011872314848005772, -0.02915182337164879, -0.003605947829782963, 0.003175515914335847, 0.003071797313168645, -0.020370321348309517, 0.011374466121196747, -0.0037269527092576027, 0.025044569745659828, 0.020384149625897408, 0.014285500161349773, 0.03885987773537636, 0.007253382820636034, 0.0073847598396241665, -0.0022852651309221983, -0.013621700927615166, -8.789065759629011e-05, 0.0026655662804841995, -0.008574065752327442, -0.005714891478419304, 0.006897282786667347, 0.007606025785207748, -0.029511380940675735, 0.012204213999211788, -0.011485098861157894, 0.025791343301534653, -0.0037062091287225485, -0.02313614822924137, -0.03933006897568703, -0.03294100612401962, -0.0009948336519300938, 0.036121707409620285, 0.0027468125335872173, 0.006140137556940317, 0.010385682806372643, -0.009853260591626167, 0.010759069584310055, -0.017327910289168358, 0.029345430433750153, -0.002921405481174588, -0.0012256073532626033, -0.013628615997731686, 0.009182548150420189, 0.0004386429791338742, -0.0025877775624394417, -0.014672715216875076, -0.014174866490066051, -0.02714659832417965, -0.021283043548464775, 0.004297404550015926, 0.0010501501383259892, 0.01749385893344879, 0.020204370841383934, 0.004200600553303957, 0.013144595548510551, 0.004491012543439865, -0.013773821294307709, -0.009154889732599258, 0.014188695698976517, 0.003038953058421612, -0.01940228044986725, -0.01080055721104145, -0.025376468896865845, -0.022818077355623245, -0.006676016375422478, 0.02198833040893078, 0.004287032876163721, -0.00034399982541799545, -0.02610941231250763, -0.010786728002130985, 0.014147208072245121, -0.007287955842912197, 0.015336514450609684, 0.013227570801973343, 0.014382303692400455, 0.01539183035492897, 0.005199756007641554, -0.028985872864723206, -0.007606025785207748, 0.04015981778502464, -0.004912801552563906, 0.024256307631731033, 0.022887224331498146, -0.008629382587969303, -0.023260610178112984, 0.006644900888204575, -0.009618165902793407, -0.001932622049935162, -0.025417955592274666, 0.005711433943361044, 0.018835285678505898, -0.00562845915555954, -0.025860488414764404, -0.01539183035492897, -0.014174866490066051, 0.0025428328663110733, -0.030064545571804047, -0.004798710811883211, 0.006866167299449444, -0.0072326394729316235, -0.018268290907144547, 0.03750462457537651, 0.0017554361838847399, 0.016152434051036835, -0.023910580202937126, -0.01689920760691166, -0.002516903216019273, -0.005621544551104307, 0.0014883610419929028, 0.012245701625943184, 0.00665527256205678, 0.008366628549993038, -0.017742784693837166, 0.005621544551104307, 0.015267368406057358, 0.01436847448348999, 0.023315927013754845, 0.003979334607720375, -0.011671792715787888, 0.02503073960542679, -0.00042611031676642597, -0.013621700927615166, 0.010904275812208652, -0.011243089102208614, 0.0012359792599454522, -0.04170868173241615, -0.02248617820441723, 0.00947295967489481, -0.014534424059092999, -0.008525663986802101, 0.014230183325707912, -0.004425324033945799, 0.00038829626282677054, -0.009970808401703835, -0.013165339827537537, -0.01844806969165802, -0.004522128030657768, 0.01077289879322052, 0.013082364574074745, -0.0358174666762352, 0.008532578125596046, -0.007889523170888424, -0.023232951760292053, -0.010641521774232388, 0.001203999388962984, -0.004971574991941452, -0.00033967819763347507, 0.021144751459360123, -0.00972188450396061, 0.030479419976472855, 0.015516293235123158, 0.0012515370035544038, -0.012294103391468525, 0.019208673387765884, -0.035651519894599915, -0.007211895659565926, 0.02876460738480091, 0.0009481603046879172, -0.015018444508314133, -0.02310848981142044, 0.011243089102208614, 0.0021124009508639574, -0.011332978494465351, 0.009625080041587353, 0.019775668159127235, 0.019111869856715202, 0.013746163807809353, -0.01685771904885769, -0.022195767611265182, 0.025334980338811874, -0.024505233392119408, -0.013172253966331482, 0.01201752107590437, -0.005185926798731089, 0.017756612971425056, -0.01743854396045208, -0.01580670475959778, -0.006997543852776289, -0.04253843054175377, -0.03537493571639061, -0.01306853536516428, 0.017770443111658096, -0.034102655947208405, -0.01156115997582674, -0.005597343668341637, -0.02929011546075344, -0.01648433320224285, 0.02055010013282299, 0.007716658990830183, -0.014728032052516937, 0.004183314274996519, -0.007523050997406244, 0.020273515954613686, -0.01512907724827528, -0.014548253268003464, 0.004660419654101133, -0.02711893990635872, 0.0004563615657389164, -0.04569147154688835, -0.02001076377928257, -0.014741861261427402, 0.05523357912898064, 0.017161959782242775, 0.009818688035011292, -0.01255685742944479, 0.012059008702635765, -0.05385066568851471, -0.03274739906191826, 0.006420177407562733, 0.009645824320614338, 0.022942541167140007, 0.0031772444490343332, 0.02055010013282299, 0.006015675142407417, 0.012964816763997078, 0.009044256061315536, -0.017576834186911583, 0.004103796556591988, -0.038168422877788544, -0.018309779465198517, 0.03191765025258064, -0.007460820022970438, -0.035568542778491974, -0.012273360043764114, 0.0010000196052715182, -0.006734790280461311, 0.004117625765502453, 0.02505839802324772, -0.004971574991941452, 0.038693927228450775, 0.0008876578067429364, 0.006734790280461311, -0.004421866964548826, -0.0016214664792641997, 0.022375546395778656, -0.03166872635483742, 0.005009605083614588, 0.03335588052868843, -0.014002002775669098, 0.001531577087007463, -0.01644284464418888, -0.011395209468901157, 0.021656431257724762, -0.01750768907368183, 0.006752076558768749, -0.012480797246098518, -0.001047557219862938, -0.007751232013106346, 0.0010449643013998866, 0.002107214881107211, -0.0016811046516522765, 0.03885987773537636, -0.019084211438894272, -0.019070381298661232, 0.013725419528782368, -0.005887755658477545, -0.019319305196404457, 0.027492327615618706, -0.004698449745774269, -0.005583514459431171, 0.027367863804101944, -0.016691770404577255, 0.011415953747928143, 0.02360633946955204, -0.012114324606955051, -0.0016206020954996347, -0.010869702324271202, -0.025943463668227196, -0.010600034147500992, -0.0017018483486026525, 0.017825759947299957, 0.010828215628862381, 0.00892670825123787, 0.006420177407562733, -0.013158424757421017, -0.013379691168665886, 0.007260297425091267, -0.001305124955251813, -0.016677940264344215, 0.015433317981660366, -0.019734179601073265, -0.034157972782850266, 0.003913646098226309, 0.02057775855064392, 0.001120160217396915, -0.004850570112466812, 0.21794721484184265, 0.015170564875006676, 0.0010536074405536056, 0.03573449328541756, -0.010122928768396378, -0.003547173924744129, 0.019761838018894196, 0.01647050306200981, -0.010786728002130985, 0.0368131659924984, -0.0030043802689760923, -0.006672559306025505, -0.025279665365815163, -0.0012912957463413477, 0.006731333211064339, -0.003758068196475506, -0.02045329473912716, -0.03941304236650467, -0.004705364350229502, -0.002186732366681099, 0.009044256061315536, 0.0063026295974850655, -0.015696071088314056, -0.0015877579571679235, 0.02929011546075344, 0.011090968735516071, 0.01561309676617384, -0.019830984994769096, -0.0026966820005327463, -0.0020916571374982595, -0.01995544694364071, -0.017065156251192093, 0.0014840393560007215, -0.021200068295001984, -0.021200068295001984, -0.023371243849396706, 0.0065100667998194695, -0.021338360384106636, -0.0008885221322998405, -0.007889523170888424, 0.019194843247532845, -0.02256915345788002, 0.016276895999908447, -0.017009839415550232, 0.008636296726763248, 0.01074524037539959, -0.016719428822398186, 0.004854027647525072, -0.0016715971287339926, 0.0045878165401518345, -0.022237254306674004, -0.011319149285554886, 0.013925942592322826, -0.005915414076298475, 0.014866323210299015, -0.0017511146143078804, 0.016193920746445656, 0.01098725013434887, -0.0070217447355389595, -0.0015298484358936548, -0.0075921970419585705, 0.0031582294031977654, -0.001337104826234281, 0.001963737653568387, -0.02666257880628109, 0.022887224331498146, -0.055703770369291306, 0.032055940479040146, 0.004719193559139967, -0.023813776671886444, -0.01746620237827301, -0.01848955824971199, -0.021960671991109848, 0.009645824320614338, 0.01412646472454071, -0.016719428822398186, 0.017673637717962265, 0.0008751251734793186, 0.012024435214698315, 0.020273515954613686, 0.000550140393897891, -0.004968117922544479, -0.019208673387765884, 0.015820534899830818, 0.013282887637615204, 0.0034296263474971056, 0.02767210640013218, -0.011747852899134159, -0.01052397396415472, -0.028847582638263702, -0.015654584392905235, -0.010952677577733994, -0.02312231995165348, -0.02926245704293251, 0.018033195286989212, -0.004677705932408571, 0.001922250259667635, 0.025252006947994232, -0.003032038453966379, -0.021241556853055954, -0.009860175661742687, 0.04878919944167137, 0.03443455323576927, 0.01261217426508665, -0.025265835225582123, -0.001716541824862361, -0.0008051151526160538, 0.01688537746667862, 0.003975877072662115, -0.008636296726763248, 0.016608795151114464, -0.03484942764043808, 0.00474685151129961, -0.025417955592274666, 0.004608560353517532, 0.015267368406057358, 0.0011789340060204268, -0.02823909930884838, 0.011872314848005772, 0.0008409844595007598, -0.015225880779325962, -0.029594356194138527, 0.026496628299355507, 0.0006516981520690024, -0.023343585431575775, -0.020245857536792755, -0.03598341718316078, 0.03739399090409279, -0.02724340185523033, -0.02554241754114628, 0.02208513393998146, -0.014976956881582737, -0.007460820022970438, 9.28605004446581e-05, -0.019236331805586815, 0.02308083139359951, -0.003951676189899445, -0.01279886718839407, -0.01003995444625616, -0.015820534899830818, 0.009044256061315536, 0.018752312287688255, 0.03271974250674248, 0.01561309676617384, 0.014479107223451138, -0.006876538973301649, -0.0032602192368358374, 0.018738482147455215, -0.0018340894021093845, -0.01895974762737751, 0.005044178105890751, 0.014140293933451176, 0.0016473961295560002, -0.010406426154077053, 0.005801323335617781, -0.0008997583063319325, 0.0014728031819686294, -0.009044256061315536, -0.009424557909369469, 0.008152277208864689, -0.040187474340200424, 0.025044569745659828, 0.021200068295001984, 0.007695915177464485, -0.023869091644883156, -0.02414567582309246, -0.17601726949214935, 0.021836210042238235, 0.015640756115317345, -0.012909500859677792, 0.031502775847911835, -0.0007238689577206969, 0.04754457622766495, 0.015253539197146893, -0.004594731144607067, 0.000652130285743624, -0.01234250608831644, 0.010302707552909851, -0.026247704401612282, -0.03545790910720825, 0.004390751477330923, 0.008539493195712566, 0.0058220671489834785, 0.03733867406845093, 0.020743707194924355, 0.01995544694364071, 0.03388138860464096, -0.025860488414764404, 0.009590507484972477, -0.01098725013434887, 0.021711746230721474, 0.006254227831959724, -0.004370007663965225, 0.013697761110961437, 0.037670571357011795, -0.0328303724527359, 0.00501651968806982, -0.011222345754504204, 0.04240013659000397, 0.004083053208887577, -0.0007843714556656778, 0.012515369802713394, 0.00514098210260272, 0.016055628657341003, -0.025362638756632805, 0.02767210640013218, 0.03366012126207352, 0.007446990814059973, 0.008947452530264854, -0.0034572845324873924, 9.91808483377099e-05, 0.023219123482704163, 0.005939614959061146, -0.025791343301534653, 0.013842967338860035, 0.00499231880530715, 0.025514759123325348, 0.008560236543416977, 0.0036958372220396996, -0.009673481807112694, -0.002210933482274413, -0.012383992783725262, 0.015765218064188957, 0.015032272785902023, 0.01745237223803997, -0.000436482165241614, 0.01207283791154623, -0.017314080148935318, 0.028985872864723206, -0.012695148587226868, 0.012950987555086613, -0.030617712065577507, -0.0006097785662859678, 0.01793639175593853, -0.03963430970907211, 0.016498161479830742, -0.026344507932662964, 0.01336586195975542, -0.002520360518246889, 0.0163460411131382, 0.009728798642754555, 0.01893209107220173, -0.014299328438937664, 0.0031167420092970133, 0.02052244171500206, 0.005472881253808737, 0.00257221981883049, -0.0014753962168470025, -0.008062387816607952, 0.004681163467466831, -0.004701906815171242, -0.003462470369413495, -6.504016346298158e-05, -0.018351266160607338, -0.014465278945863247, -0.0007204116554930806, 0.036647215485572815, -0.041791655123233795, -0.011927631683647633, 0.011118627153337002, -0.019817154854536057, 0.0120451794937253, 0.01333820354193449, -0.004701906815171242, 0.02303934469819069, 0.010779812932014465, 0.007474649231880903, -0.0032325610518455505, -0.013621700927615166, -0.013027047738432884, 0.014658886939287186, 0.019194843247532845, -0.018365096300840378, -0.0049508316442370415, 0.04580210521817207, 0.008069301955401897, -0.029566697776317596, 0.0307006873190403, 0.0231638066470623, 0.01956823095679283, -0.023468047380447388, 0.03122619353234768, 0.01945759728550911, -0.019692692905664444, 0.013199912384152412, -0.014285500161349773, 0.04989553242921829, -0.0070770615711808205, -0.022347887977957726, 0.03935772553086281, 0.028985872864723206, -0.041293807327747345, -0.1088629737496376, -0.018212974071502686, 0.01742471382021904, 0.016719428822398186, -0.012480797246098518, 0.032609108835458755, 0.0046431333757936954, 0.028930557891726494, -0.043783050030469894, 0.02772742137312889, -0.020328832790255547, -0.015447147190570831, -0.008504919707775116, -0.004394208546727896, 0.011367551982402802, -0.006838508881628513, 0.006378689780831337, -0.0030061088036745787, -0.024933936074376106, 0.018295949324965477, 0.012183470651507378, -0.014423791319131851, 0.006748619489371777, 0.0013180897803977132, -0.002043255139142275, 0.02158728428184986, -0.0043319775722920895, 0.008096960373222828, 0.007965583354234695, 0.00690419739112258, 0.01796405017375946, 0.014506765641272068, -0.010413341224193573, -0.021144751459360123, 0.0034157971385866404, -0.0059776450507342815, -0.014409962110221386, -0.003574832109734416, 0.02001076377928257, -0.028930557891726494, -0.008269825018942356, 0.005680318456143141, 0.0005151354125700891, -0.02042563632130623, -0.007142750080674887, 0.004470268730074167, -0.00871927198022604, 0.019222501665353775, 0.012791953049600124, -0.006945684552192688, -0.006157423835247755, 0.010378768667578697, -0.023772288113832474, -0.010586204938590527, 0.024837132543325424, -0.008034729398787022, 0.04118317365646362, 0.01028887927532196, -0.01695452257990837, 0.001458109705708921, 0.007875693961977959, 0.009631995111703873, 0.011180858127772808, 0.024325454607605934, 0.022306399419903755, -0.00717040803283453, 0.0016586323035880923, -0.007523050997406244, 0.00033319578506052494, -0.009071914479136467, 0.006506609730422497, 0.0010423712665215135, -0.03366012126207352, 0.002580862957984209, -0.037642914801836014, 0.00849109049886465, -0.015668412670493126, -0.01328980177640915, -0.0018150743562728167, 0.03783652186393738, -0.020757537335157394, -0.010537803173065186, -0.01635987125337124, -0.024380771443247795, 0.015765218064188957, 0.008615553379058838, -0.005548941902816296, -0.009438387118279934, 0.007647513411939144, -0.026980647817254066, -0.023426560685038567, 0.001306853606365621, -0.008836818858981133, -0.008276739157736301, 0.005085665732622147, 0.035651519894599915, -0.018641678616404533, 0.014714202843606472, -0.016083287075161934, 0.009362326934933662, -0.03332822397351265, 0.0030562395695596933, -0.04812540113925934, 0.005797866266220808, 0.010814386419951916, -0.017673637717962265, 0.011671792715787888, -0.013780736364424229, -0.0035126011352986097, -0.03424094617366791, 0.0009187733521685004, -0.005759836174547672, -0.03330056369304657, 0.012480797246098518, 0.002098571741953492, -0.010703752748668194, -0.038140762597322464, 0.001356984139420092, 0.005227414425462484, -0.007765061222016811, -0.0026534658391028643, 0.008975110948085785, -0.00841503031551838, 0.016705598682165146, -0.0059949313290417194, 0.014064233750104904, -0.022776590660214424, -0.017687467858195305, -0.015004615299403667, 0.013407349586486816, -0.006254227831959724, 0.001860019052401185, -0.0036716361064463854, -0.028017833828926086, 0.0017148131737485528, 0.012501540593802929, -0.009618165902793407, 0.00795175414532423, 0.006994086783379316, 0.01746620237827301, 0.009078829549252987, 0.019111869856715202, -0.03393670544028282, -0.04154273122549057, 0.008857563138008118, -0.03366012126207352, -0.014672715216875076, 0.01080055721104145, -0.01999693363904953, 0.017604492604732513, 0.007854950614273548, 0.004459897056221962, 0.017770443111658096, 0.028073150664567947, -0.00770974438637495, -0.03855563700199127, -0.00950061809271574, 0.005811695475131273, 0.011395209468901157, 0.02468501217663288, -0.007045946083962917, -0.0028643603436648846, 0.0260817538946867, -0.0015272554010152817, -0.013594042509794235, -0.04040874168276787, 0.0012826526071876287, -0.03194531053304672, -0.0349600613117218, 0.014963127672672272, -0.008249080739915371, -0.007765061222016811, 0.010178245604038239, -0.003102912800386548, 0.004349263850599527, 0.03349417448043823, 0.010122928768396378, -0.02978796325623989, 0.013206826522946358, 0.00257221981883049, -0.017701296135783195, 0.006382147315889597, 0.0036647217348217964, -0.05473572760820389, 0.006810850463807583, -0.0015549137024208903, 0.0461893230676651, -0.008269825018942356, -0.030645370483398438, 0.034047339111566544, 0.0074884784407913685, 0.0025030740071088076, 0.016276895999908447, -0.0029542497359216213, -0.026289191097021103, -0.015599267557263374, -0.011429782956838608, 0.0015039187856018543, -0.02566688135266304, 0.015488634817302227, 0.01156115997582674, 0.01641518622636795, 0.004418409429490566, 0.005842810962349176, 0.009106487035751343, -0.01079364214092493, -0.0020000392105430365, 0.039219435304403305, -0.007737402804195881, 0.016124775633215904, -0.024353113025426865, 0.01149892807006836, -0.0047399369068443775, -0.0008098689140751958, 0.0003638791968114674, 0.023772288113832474, -0.005268901586532593, -0.002987093757838011, -0.008663955144584179, -0.012895671650767326, -0.014755690470337868, 0.03244315832853317, -0.0050026909448206425, -0.002383797662332654, 0.02823909930884838, 0.0009792757919058204, 0.005981102120131254, 0.03366012126207352, 0.017327910289168358, -0.011927631683647633, 0.00014747479872312397, -0.010413341224193573, 0.017037497833371162, 0.0031063701026141644, 0.00010171979374717921, -0.025431785732507706, -0.004273203667253256, -0.013192998245358467, 0.011478184722363949, 0.007612940389662981, -0.018268290907144547, 0.0683712586760521, 0.025238176807761192, -0.03551322594285011, 0.0024235565215349197, -0.001522069564089179, 0.016760915517807007, 0.009030426852405071, 0.0027416266966611147, 0.006309544201940298, -0.0379471555352211, 0.042372480034828186, 0.0031392143573611975, 0.0028401592280715704, -0.01848955824971199, 0.02308083139359951, 0.01641518622636795, -0.0400768406689167, 0.0008612960227765143, -0.002560119144618511, -0.01940228044986725, -0.0028125010430812836, -0.02613707073032856, 0.0032930634915828705, -0.04165336489677429, -0.011332978494465351, -0.009175633080303669, 0.02417333424091339, 0.002086471300572157, -0.00010063939407700673, -0.03645360842347145, 0.019098039716482162, 0.007149664219468832, -0.0422065295279026, 0.0023215666878968477, 0.0037062091287225485, 0.015779046341776848, 0.010344195179641247, -0.024366941303014755, 0.019803326576948166, 0.007765061222016811, -0.009217120707035065, 0.006631071679294109, -0.020315004512667656, -0.027035964652895927, 0.026800869032740593, -0.007191151846200228, -0.007730488199740648, -0.023149976506829262, -0.016332212835550308]"
Announcing the Kubernetes Operator for Dragonfly,Announcing the Kubernetes Operator for Dragonfly," We are thrilled to announce the latest addition to our in-memory data store - the Kubernetes operator for Dragonfly! This new operator will enable easier deployment and management of Dragonfly instances within Kubernetes environments, making it possible for the Kubernetes community to take advantage of Dragonfly's performance and reliability for the first time.  We understand firsthand the challenge of deploying and managing in-memory data stores at scale. From managing replicas to ensuring high availability, all while scaling to meet demand and delivering great performance, this is what we built the Kubernetes operator to achieve.   The new Kubernetes operator for Dragonfly includes Replica Management, which allows developers to specify the number of replicas they need, and the operator will take care of the rest. This includes ensuring there is always only one master, enabling high availability and failover. Developers can also easily scale up by increasing or decreasing resources and replicas as needed, without worrying about the complexity of traditional deployment methods.   <iframe width=""100%"" height=""475"" src=""https://www.youtube.com/embed/WFwXazDiJpg"" title=""YouTube video player"" frameborder=""0"" allow=""accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"" allowfullscreen></iframe>  Check out the [GitHub repository](https://github.com/dragonflydb/dragonfly-operator) for documentation on installing the operator and getting started and [hop into our Discord](https://discord.gg/HsPjXGVH85) if you have questions or need help.  This release marks the beginning of our work on the Kubernetes Opertator for Dragonfly and represents only a small portion of the functionality we plan to deliver. Please stay tuned for many more configuration options as the project evolves.","[0.004895630292594433, -0.01240899320691824, -0.011964852921664715, -0.036930885165929794, -0.01477773766964674, 0.03308167681097984, -0.02874794974923134, 0.009071215987205505, -0.01674271933734417, -0.0028498962055891752, 0.0036002229899168015, -0.0026412850711494684, -0.002863354980945587, -0.018626948818564415, 0.003966974560171366, 0.004313538316637278, 0.003283941652625799, -0.027590494602918625, 0.012920426204800606, -0.03986489772796631, 0.0030854246579110622, 0.002163498429581523, 0.006830329541116953, 0.006450118962675333, -0.010504575446248055, 0.02397008240222931, 0.015666017308831215, -0.02550438418984413, 0.008505946956574917, -0.014898866415023804, 0.024050835520029068, -0.0029693427495658398, -0.003707893192768097, -0.009623025543987751, -0.009575920179486275, -0.010255588218569756, 0.019542144611477852, -0.004801419097930193, 0.013956752605736256, 0.006470307242125273, 0.026069652289152145, -0.015612182207405567, 0.004858618602156639, -0.014481645077466965, -0.027725081890821457, 0.0203362125903368, -0.0021702279336750507, -0.020982233807444572, 0.02189743146300316, -0.019851697608828545, -0.005538287106901407, 0.037523072212934494, -0.0005560157587751746, 0.012631062418222427, 0.028128845617175102, 0.02752320095896721, 0.0063088019378483295, -0.003288988722488284, 0.022974133491516113, -0.01069972850382328, 0.005820921156555414, 0.013795247301459312, 0.0036170464009046555, -0.002282945206388831, -0.023996999487280846, 0.009017380885779858, -0.011810077354311943, -0.010645893402397633, 0.016473542898893356, -0.004542337264865637, 0.04527532681822777, 0.01881537027657032, 0.013189601711928844, -0.013499153777956963, 0.011460148729383945, -0.02663492038846016, 0.022637663409113884, -0.0035598466638475657, 0.008156019262969494, 0.00020135592785663903, 0.010760292410850525, -0.015571805648505688, -0.0005951303173787892, 0.030497590079903603, -0.005898309405893087, 0.014683526009321213, -0.01674271933734417, 0.0018505819607526064, 0.00425970321521163, 0.00750326830893755, 0.010551681742072105, 0.011271726340055466, 0.008236771449446678, 0.011365938000380993, 0.006302072666585445, 0.02485836297273636, 0.010174836032092571, 0.0025420265737921, -0.030874434858560562, -0.032327983528375626, -0.02596198208630085, 0.010901609435677528, -0.0037650929298251867, -0.016433168202638626, -0.006433295551687479, -0.01481811422854662, 0.028694113716483116, -0.02367398887872696, 0.01932680420577526, 0.013707765378057957, -0.015867898240685463, 0.026917554438114166, 0.024548809975385666, -0.011843724176287651, -0.006591436453163624, -0.020093955099582672, 0.004044362809509039, -0.02799425646662712, 0.007745526265352964, -0.02633882686495781, 0.03956880420446396, 0.036257945001125336, 0.006850517820566893, -0.007577291689813137, -0.01359336543828249, 0.013122308067977428, -0.006147296633571386, -0.01729452982544899, 0.0026009087450802326, -0.012254216708242893, 0.017092647030949593, 0.01116405613720417, 0.009528814814984798, 0.009024110622704029, -0.024427682161331177, 0.003929962869733572, -0.02096877619624138, 0.009737425483763218, 0.02173592522740364, -0.002367062494158745, -0.005003300495445728, 0.012301323004066944, -0.017429117113351822, -0.015544887632131577, -0.026284992694854736, 0.025275584310293198, -0.0043438202701509, 0.013135766610503197, 0.022758793085813522, -0.014670067466795444, 0.013243436813354492, -0.01986515522003174, -0.010565140284597874, 0.003373106010258198, 0.027011767029762268, 0.006042991299182177, 0.010073894634842873, -0.005121064838021994, 0.00775898527354002, -0.008337712846696377, 0.021251410245895386, 0.0319780558347702, -0.01071991678327322, -0.024548809975385666, 0.02278571017086506, 0.027644328773021698, 0.020995693281292915, -0.029070960357785225, -0.01721377670764923, -0.008452111855149269, 0.0005261540645733476, 0.02283954620361328, -0.04142611846327782, 0.012906967662274837, -0.035154327750205994, 0.005134523846209049, -0.0004605425347108394, 0.017482951283454895, -0.029690062627196312, -0.02223389968276024, 0.013055014424026012, -0.007745526265352964, 0.007308116182684898, 0.025719724595546722, -0.016675425693392754, -0.027644328773021698, -0.0001729663199512288, -0.01114386785775423, 0.016379332169890404, 0.0010952079901471734, 0.003482458647340536, 0.0022795803379267454, -0.009051027707755566, -0.009118321351706982, -0.6102747917175293, -0.020443882793188095, 0.03421221300959587, -0.04180296137928963, 0.011870642192661762, -0.002287992276251316, 0.02372782491147518, 0.0025807206984609365, -0.0010195024078711867, 0.01234842836856842, 0.0030282249208539724, 0.00038000018685124815, -0.020497718825936317, -0.009400956332683563, -0.0247776098549366, -0.008135830983519554, 0.020363129675388336, -0.02643303945660591, 0.0004449808329809457, 0.0009833319345489144, -0.02702522464096546, 0.021709008142352104, -0.01407788135111332, -0.011789889074862003, 0.00021555073908530176, 0.00533977011218667, 0.01242918148636818, 0.014858490787446499, -0.0015805652365088463, 0.03135894984006882, -0.029313217848539352, 0.02596198208630085, 0.023122180253267288, -0.01069972850382328, 0.045517586171627045, -0.013721223920583725, -0.03792683407664299, -0.0018606759840622544, -0.0037415402475744486, 0.05146636441349983, -0.015787146985530853, -0.007631126791238785, 0.02799425646662712, 0.016554296016693115, -0.006641906686127186, -0.012442640028893948, 0.029232464730739594, -0.033593107014894485, -0.017146483063697815, 0.007106234319508076, 0.002185368910431862, 0.00096734962426126, 0.015087289735674858, -0.009374038316309452, -0.02367398887872696, -0.01775212772190571, 0.031224364414811134, -0.022422323003411293, 0.00027296083862893283, -0.006870706100016832, 0.0019161934033036232, 0.024091212078928947, -0.006739482749253511, -0.018869206309318542, -0.02126486785709858, 0.010538223199546337, -0.016312038525938988, -0.008855875581502914, -0.004522149451076984, -0.002648014575242996, 0.031224364414811134, -0.009138509631156921, 0.016137074679136276, -0.0068437885493040085, 0.00231490982696414, 0.04446779936552048, 0.02465648017823696, 0.012509933672845364, 0.013182872906327248, 0.029151711612939835, 0.024629563093185425, -0.012334969826042652, -0.007974325679242611, -0.013519342057406902, 0.04998590052127838, 0.022274276241660118, -0.03006690926849842, 0.007442703936249018, 0.013822164386510849, 0.0017117882380262017, 0.036419451236724854, 0.02100915089249611, -0.014845031313598156, -0.017563704401254654, 0.03402378782629967, 0.021910889074206352, -0.010982362553477287, -0.006046355701982975, 0.02570626512169838, -0.0006426566396839917, -0.005975697189569473, -0.03512740880250931, 0.00038189280894584954, -0.004673560615628958, 0.007745526265352964, 0.01168894860893488, -0.04279891401529312, 6.403434235835448e-05, 0.011359208263456821, -0.01907108724117279, -0.0019128287676721811, 0.004145303275436163, -0.007799361366778612, -0.003275529947131872, 0.02134562097489834, -0.017994385212659836, 0.02511407807469368, 0.009697048924863338, -0.0037415402475744486, -0.015235336497426033, -0.0018774995114654303, -0.011897559277713299, 0.021628255024552345, 0.0038593043573200703, 0.007907032035291195, 0.008169477805495262, -0.001646176679059863, -0.029690062627196312, -0.01314922608435154, 0.017940551042556763, 0.01597556844353676, -0.021587878465652466, 0.003849210450425744, -0.007469621486961842, 0.04293350130319595, 8.963756044977345e-06, 0.01547759398818016, -0.007005293853580952, 0.015316088683903217, -0.025006407871842384, 0.005195088218897581, 0.007543644867837429, 0.023310603573918343, -0.01654083840548992, -0.014279763214290142, 0.015652557834982872, -0.025396713986992836, -0.00799451395869255, 0.0031914126593619585, -0.006685647647827864, 0.007806091103702784, -0.0040039862506091595, -0.0014485009014606476, 0.03332393243908882, 0.016338955610990524, 0.011238079518079758, -0.009360579773783684, -0.0353427492082119, -0.008896252140402794, -0.005228735040873289, 0.024710316210985184, 0.02130524441599846, -0.04987822845578194, -0.01067954022437334, -0.02118411660194397, -0.03658095747232437, -0.012435910291969776, 0.007859925739467144, -0.017429117113351822, -0.012765650637447834, -0.03897662088274956, -0.012287863530218601, 0.0036002229899168015, -0.0012180194025859237, 0.009380768053233624, -0.02524866722524166, -0.01236861664801836, 0.002481462201103568, 0.011870642192661762, -0.0013223248533904552, 0.010430552996695042, -0.006847152952104807, -0.0053801462054252625, -0.016042862087488174, 0.03620411083102226, 0.004687019158154726, 0.004851889330893755, 0.04436013102531433, 0.01991899125277996, 0.015275712125003338, -0.0016916000749915838, 0.03994565084576607, -0.012536851689219475, 0.0001825346698751673, -0.030497590079903603, -0.018828829750418663, -0.02139945700764656, -0.003677611006423831, -0.011971582658588886, 0.027805835008621216, 0.03666171059012413, 0.0051479823887348175, 0.036850132048130035, -0.029070960357785225, 0.002333415672183037, -0.003721351968124509, -0.012032147496938705, -0.0017715116264298558, 0.011291914619505405, 0.0034286235459148884, 0.014252845197916031, 0.005935321096330881, 0.011345749720931053, 0.0018303937977179885, 0.016836930066347122, 0.009777802042663097, -0.023875871673226357, -0.01903071068227291, -0.014683526009321213, 0.0008087884052656591, -0.0055517456494271755, 0.0018085232004523277, 0.009051027707755566, 0.016971519216895103, -0.009656673297286034, -0.012267676182091236, -0.01329727191478014, 0.028694113716483116, 0.021937808021903038, -0.01361355371773243, -0.017011893913149834, 0.01788671500980854, 0.007355222012847662, 0.009125051088631153, 0.03208572417497635, 0.02380857802927494, 0.02874794974923134, -0.023754741996526718, 0.021237950772047043, -0.017859797924757004, 0.027832752093672752, -0.007873385213315487, 0.028317267075181007, -0.01767137460410595, 0.017281070351600647, 0.029609311372041702, 0.002547073643654585, 0.010013330727815628, -0.02874794974923134, -0.010524763725697994, -0.0189499594271183, -0.009797990322113037, 0.017227236181497574, -0.0002967239997815341, 0.003268800675868988, -0.0101681062951684, -0.006143931765109301, -0.0027758728247135878, 0.018613489344716072, 0.018963417038321495, 0.0017715116264298558, 0.024468056857585907, 0.02282608672976494, -0.015356465242803097, 0.02096877619624138, -0.00738886883482337, 0.008781852200627327, -0.004458220209926367, -0.02401045896112919, -0.011264996603131294, -0.0016150532756000757, -0.009185615926980972, -0.003475729376077652, -0.03956880420446396, -0.003892951412126422, 0.004084738902747631, -0.021453291177749634, 0.01899033598601818, -0.035800348967313766, 0.010659351944923401, 0.005894944537431002, -0.03550425544381142, 0.023835495114326477, 0.0051311589777469635, 0.016904223710298538, -0.037738412618637085, 0.0005728392279706895, 0.03133203461766243, 0.008391547948122025, 0.017779044806957245, 0.011264996603131294, 0.001948158023878932, 0.0010447376407682896, -0.003440400119870901, -3.722193287103437e-05, 4.1007213440025225e-05, 0.045302245765924454, -0.020282378420233727, -0.0003989265824202448, -0.001374477637000382, 0.008559782058000565, 0.021493667736649513, -0.0019683463033288717, 0.018573112785816193, 0.03768457844853401, -0.0004618043021764606, -0.010645893402397633, -0.025867771357297897, 0.015760228037834167, -0.028344186022877693, 0.009044298902153969, -0.02388932928442955, -0.045140739530324936, -0.0150065366178751, -0.011715865693986416, -0.0028179315850138664, -0.014643150381743908, 0.0054676285944879055, 0.01112367957830429, 0.012361886911094189, -0.0024175329599529505, -0.00459953723475337, -0.001259236829355359, 0.004205868113785982, 0.051654789596796036, -0.0022089218255132437, -0.005531557369977236, 0.012247487902641296, -0.02736169472336769, 0.01038344670087099, 0.003717987332493067, -0.017738668248057365, 0.007509998045861721, 0.004787960089743137, -0.020834187045693398, -0.020201625302433968, -0.005659415852278471, 0.0024831444025039673, 0.02659454382956028, 0.012200381606817245, -0.029286300763487816, -0.007341763004660606, -0.024589186534285545, -0.01640624925494194, 0.0029441076330840588, -0.003326000412926078, 0.029286300763487816, 0.010094082914292812, 0.04815550521016121, 0.017146483063697815, 0.0048115127719938755, 0.018196268007159233, 0.008761663921177387, -0.009118321351706982, -0.011460148729383945, 0.0023990271147340536, 0.013768329285085201, 0.014616232365369797, -0.013943293131887913, 0.03216647729277611, 0.002701849676668644, -9.037358540808782e-05, 0.0013845717767253518, 0.04029557853937149, -0.005672874860465527, 0.00555847492069006, 0.013378025032579899, -0.01699843630194664, 0.011870642192661762, -0.01166876032948494, -0.007678232621401548, 0.0004908248083665967, -0.03623102977871895, -0.0016991706797853112, 0.01771175116300583, -0.015383382327854633, -0.02059192955493927, 0.005760356783866882, -0.0026244616601616144, 0.012065794318914413, 0.01948831044137478, -0.01999974437057972, -0.0059555089101195335, -0.03399687260389328, -0.02169554866850376, -0.009609567001461983, -0.028048092499375343, -0.010329611599445343, -0.008418465033173561, 0.005174899939447641, -0.018075138330459595, 0.00968359038233757, -0.018290478736162186, -0.02485836297273636, 0.001369430567137897, -0.042475901544094086, -0.020699599757790565, 0.026446497067809105, 0.0034151647705584764, 0.0019851697143167257, 0.0022392040118575096, 0.005134523846209049, -0.019757485017180443, 0.0031930948607623577, 0.011325561441481113, -0.008977004326879978, -8.895410428522155e-05, -0.036338698118925095, -0.036123357713222504, -0.011285184882581234, 0.004014080390334129, 0.004024174530059099, -0.01065262220799923, 0.010141189210116863, 0.01236861664801836, 0.01314922608435154, 0.0058242860250175, 0.0063088019378483295, -0.0049326419830322266, -0.005356593523174524, 0.03281249850988388, 0.011009279638528824, -0.000827294250484556, -0.0262580756098032, 0.01429322175681591, -0.005837744567543268, -0.007341763004660606, -0.014468185603618622, 0.000635506643448025, -0.006853882689028978, 0.007160069886595011, 0.004256338346749544, 0.0031846831552684307, 0.0042697973549366, 0.00580409774556756, -0.005447440315037966, -0.01784633845090866, -0.018277019262313843, 0.04489848017692566, -0.011399584822356701, -0.0033562825992703438, 0.003317588707432151, -0.02130524441599846, 0.005656051449477673, 0.03466981276869774, -0.010989092290401459, 0.04339109733700752, 0.014091339893639088, 0.027725081890821457, 0.03187038376927376, 0.018384689465165138, -0.007523456588387489, -0.035450421273708344, 0.02080726996064186, 0.0018472172087058425, 0.01995936781167984, -0.0007267739856615663, -0.013902917504310608, -0.004643278196454048, -0.022503076121211052, -0.02426617592573166, 0.025679348036646843, 0.003088789526373148, -0.02071305923163891, -0.03170888125896454, 0.002737178932875395, 0.01555834710597992, -0.023647071793675423, -0.01792709156870842, -0.021237950772047043, -0.053808193653821945, 0.011150597594678402, 0.007139881607145071, 0.0034723645076155663, -0.013889458030462265, -0.0033646943047642708, -0.013916376046836376, -0.020941857248544693, 0.006002614740282297, -0.01869424246251583, 0.005521463695913553, -0.007745526265352964, 0.03176271542906761, 0.014643150381743908, 0.042179808020591736, -0.0033411416225135326, 0.020363129675388336, 0.00292223715223372, 0.005975697189569473, -0.007853196933865547, -0.014858490787446499, -0.014360515400767326, 0.014279763214290142, -0.02955547533929348, 0.006584706716239452, 0.006265060976147652, 0.0010960492072626948, -0.0032250594813376665, -0.005999249871820211, 0.015100748278200626, -0.02807500958442688, 0.013519342057406902, -0.009481708519160748, -0.035881102085113525, -0.023108720779418945, 0.002679979195818305, 0.006423201411962509, -0.005639227572828531, -0.02710597775876522, 0.023539401590824127, 0.010787210427224636, -0.006840423680841923, 0.025652429088950157, 0.01143996138125658, 0.01682347245514393, -0.027886586263775826, 0.0062583317048847675, 0.027240565046668053, 0.02489873766899109, -0.0077186087146401405, -0.007826278917491436, -0.02402391843497753, -0.011614925228059292, 0.02702522464096546, 0.041587620973587036, 0.005511369556188583, 0.012260946445167065, 0.01331746019423008, -0.009300014935433865, 0.011937935836613178, -0.0066789183765649796, -0.011985041201114655, 0.004670195747166872, -0.017577163875102997, -0.009515355341136456, -0.040026403963565826, -0.014320139773190022, -0.02203201875090599, -0.010376717895269394, 0.017698291689157486, 0.003852575086057186, 0.007732067722827196, 0.0077186087146401405, -0.021116821095347404, 0.02702522464096546, 0.009131780825555325, 0.037819165736436844, -0.017563704401254654, 0.025019867345690727, 0.007301386911422014, 0.003694434417411685, 0.00040502508636564016, -0.01678309589624405, 0.011298643425107002, -0.02402391843497753, 0.007489809766411781, 0.03423912823200226, -0.028990207239985466, -0.019259510561823845, -0.0159890279173851, -0.01652737893164158, -0.009542273357510567, -0.023943165317177773, -0.01403750479221344, 0.01958252117037773, -0.002158451359719038, -0.007301386911422014, -0.00271194358356297, -0.014131716452538967, 0.01403750479221344, -0.030686013400554657, 0.001532618305645883, 0.030201496556401253, -0.026486873626708984, -0.001931334612891078, -0.0027977433055639267, -0.017402200028300285, 0.012435910291969776, 0.011803347617387772, 0.00944806169718504, -0.023108720779418945, 0.03208572417497635, -0.025612054392695427, -0.0189499594271183, -0.0017883350374177098, 0.028478773310780525, -0.016419708728790283, -0.00849921815097332, 0.018277019262313843, 0.020457342267036438, 0.010793939232826233, 0.000582092150580138, -0.0188557468354702, 0.027294401079416275, -0.022435782477259636, -0.006032897159457207, 0.014979619532823563, 0.011756242252886295, -0.004178950563073158, -0.017011893913149834, -0.015168041922152042, -0.0014518656535074115, 0.012186923064291477, 0.0019986284896731377, 0.016850389540195465, -0.017563704401254654, 0.002089475281536579, -0.014535480178892612, -0.0006056450074538589, -0.016123615205287933, -0.005292664282023907, -0.005676239263266325, 0.01699843630194664, -0.038922782987356186, -0.01711956411600113, 0.010087354108691216, -0.0170791894197464, 0.002706896746531129, 0.023943165317177773, -0.02748282440006733, -0.004592807963490486, 0.05472338944673538, -0.006850517820566893, 0.018411608412861824, 0.022610746324062347, -0.025356337428092957, -0.031143611297011375, 0.035665761679410934, -0.006436660420149565, -0.017267610877752304, 0.01188410073518753, -0.024643022567033768, -0.020053578540682793, 0.002340144943445921, -0.002476415131241083, 0.014885407872498035, -0.00740905711427331, 0.0026732496917247772, 0.0037920104805380106, 0.011150597594678402, 0.021318703889846802, -0.02351248450577259, -0.020268918946385384, 0.0531083345413208, -0.012906967662274837, -0.03480440005660057, 0.002880178391933441, 0.0011187609052285552, -0.024239258840680122, -0.0006964917411096394, -0.011621654033660889, -0.019138380885124207, -0.025019867345690727, -0.018869206309318542, -0.02363361418247223, 0.009320203214883804, -0.0035766700748354197, 0.010067165829241276, -0.02135908044874668, -0.02410466969013214, -0.011379396542906761, 0.0048821717500686646, -0.003292353358119726, 0.021466750651597977, 0.027832752093672752, 0.008653993718326092, 0.02888253703713417, 0.020565012469887733, -0.0006127949454821646, -0.000410282431403175, -0.027455905452370644, -0.023660531267523766, -0.04460239037871361, -0.013620282523334026, -0.02207239530980587, 0.04075317829847336, -0.0026564262807369232, -0.006561154033988714, -0.025262124836444855, -0.014535480178892612, -0.014804655686020851, -0.0033781530801206827, -0.002119757467880845, 0.006335719488561153, 0.015396841801702976, 0.0058713918551802635, -0.00039703393122181296, -0.01334437821060419, 0.009993142448365688, 0.023525943979620934, -0.023391354829072952, 0.001737864688038826, 0.011110221035778522, -0.012509933672845364, 0.033808447420597076, -0.004838430322706699, -0.0256658885627985, -0.037119310349226, -0.018277019262313843, -2.1541929527302273e-05, 0.008956816047430038, 0.023647071793675423, -0.010417093522846699, 0.004252973478287458, -0.002516791457310319, -0.011137138120830059, -0.006608259864151478, 0.012758920900523663, 0.0209283996373415, -0.022045478224754333, 0.01141304336488247, 0.025464007630944252, -0.0007978531648404896, -0.006382825318723917, 0.0018976876745000482, -0.0068437885493040085, 0.0066452715545892715, 0.03480440005660057, -0.008640535175800323, 0.01865386590361595, -0.0031375775579363108, -0.019595980644226074, 0.007469621486961842, -0.0047442191280424595, -0.00023721095931250602, 0.05518098920583725, 0.004380831960588694, -0.024333469569683075, -0.012886779382824898, -0.006376096047461033, -0.029824651777744293, -0.012234028428792953, -0.011796618811786175, -0.0010354847181588411, 0.00040775889647193253, -0.012758920900523663, 0.007900302298367023, -0.02592160552740097, -0.02574664168059826, -0.003152718534693122, -0.015087289735674858, -0.005508004687726498, -0.0034723645076155663, -0.005090782418847084, -0.009872013702988625, -0.03230106458067894, -0.0004306808696128428, -0.020497718825936317, -0.01725415326654911, -0.002523520728573203, 0.01306847296655178, 0.004051092080771923, 0.01234842836856842, 0.02406429499387741, -0.00546426372602582, -0.02143983356654644, 0.014091339893639088, 0.0075301858596503735, -0.0019161934033036232, -0.007476350758224726, 0.22373871505260468, -0.0018017938127741218, 0.0035800349432975054, 0.042987335473299026, -0.007846467196941376, -0.012536851689219475, 0.008384818211197853, -0.0003701163805089891, -0.0037583636585623026, -0.004697113297879696, 0.006857247091829777, 0.012254216708242893, -0.011379396542906761, -0.005538287106901407, 0.010221941396594048, -0.015329547226428986, -0.032624077051877975, -0.01741565763950348, -0.016567755490541458, 0.017133023589849472, -0.01810205541551113, -0.033727698028087616, -0.025813935324549675, -0.018128972500562668, 0.024037376046180725, -0.025867771357297897, -0.017281070351600647, 0.02063230611383915, 0.026486873626708984, 0.028182679787278175, -0.031601209193468094, 0.011722595430910587, 0.02262420579791069, -0.0092798275873065, 0.02296067401766777, -0.009522085078060627, 0.022435782477259636, -0.009414414875209332, 0.013862540945410728, 0.01919221691787243, 0.004242879804223776, -0.013775059022009373, 0.02777891606092453, 0.023027967661619186, 0.017900174483656883, -0.018559655174613, -0.01834431290626526, 0.0051143355667591095, -0.008916440419852734, 0.009797990322113037, -0.01632549799978733, -0.0028364374302327633, 0.018317395821213722, 0.028048092499375343, 0.0006195243331603706, -0.024198882281780243, 0.0038189280312508345, -0.004942736122757196, 0.009353850036859512, 0.01860002987086773, 0.002084428211674094, 0.028398020192980766, -0.0051816292107105255, -0.010369988158345222, -0.03518124297261238, 0.004771136678755283, -0.03483131527900696, 0.0760151743888855, 0.0045961723662912846, -0.005356593523174524, -0.02304142713546753, -0.01526225358247757, -0.006786588579416275, -0.004828336648643017, -0.006870706100016832, -0.02130524441599846, 0.01717340014874935, -0.013472236692905426, 0.014871949329972267, 0.047967083752155304, -0.0039871628396213055, -0.01209271140396595, -0.007160069886595011, 0.010100812651216984, -0.004421208519488573, -0.017900174483656883, 0.011682218872010708, -0.010417093522846699, -0.011729324236512184, -0.03044375404715538, 0.018034761771559715, -0.012321511283516884, -0.016123615205287933, -0.014481645077466965, 0.018236642703413963, 0.005979062058031559, -0.01378178782761097, 0.03278558328747749, -0.02224735915660858, -0.016890766099095345, -0.022085854783654213, 0.051143355667591095, 0.02993232198059559, -0.012745462357997894, -0.02752320095896721, 0.011244808323681355, -0.010282506234943867, -0.0010245494777336717, -0.006675553508102894, -0.011231349781155586, 0.015746770426630974, -0.036930885165929794, 0.020753435790538788, -0.008149289526045322, -0.0023603332228958607, 0.02874794974923134, 0.01715994067490101, -0.004118385724723339, -0.00015382962010335177, -0.004111656453460455, 0.0023603332228958607, -0.01283294428139925, 0.01893649995326996, -0.005437346175312996, -0.028048092499375343, -0.008304066024720669, -0.025127537548542023, 0.007402327843010426, -0.012038876302540302, -0.02947472222149372, 0.0037751870695501566, -0.003260388970375061, 0.013001179322600365, -0.023579778149724007, 0.006665459368377924, 0.001250825123861432, 0.030928270891308784, -7.61787814553827e-05, -0.00999987218528986, -0.019986284896731377, -0.00497974781319499, -0.0028650371823459864, 0.028721030801534653, 0.01826356165111065, -0.00877512339502573, -0.031089775264263153, 0.0006590595003217459, 0.008653993718326092, 0.017106106504797935, -0.035827264189720154, -0.0014283127384260297, 0.018532736226916313, -0.015383382327854633, -0.0004138574004173279, 0.012274404987692833, -0.009925848804414272, 0.001544394763186574, -0.01215327624231577, 0.0021937808487564325, -0.005911767948418856, -0.05009356886148453, -0.016648508608341217, 0.021843595430254936, -0.013122308067977428, -0.010639163665473461, -0.009185615926980972, -0.16968826949596405, 0.004488502163439989, 0.0012331604957580566, -0.027550118044018745, 0.034777481108903885, 0.0020642399322241545, 0.022637663409113884, -0.028317267075181007, 0.00921926274895668, -0.009986412711441517, 0.020390048623085022, 0.010410364717245102, -0.04489848017692566, -0.052623819559812546, 0.029420888051390648, 0.020686140283942223, -0.012355158105492592, 0.005642592441290617, 0.04503307119011879, 0.015141124837100506, 0.026096569374203682, -0.03814217448234558, 0.004145303275436163, -0.011547631584107876, -0.005847838707268238, -0.018505819141864777, -0.010551681742072105, -0.011554360389709473, -0.008317524567246437, -0.005847838707268238, -0.023135637864470482, -0.004845160059630871, 0.01551797054708004, -0.0039366926066577435, 0.02651379257440567, 0.0003488767542876303, 0.010248859412968159, 0.006742847617715597, -0.015962110832333565, 0.03353927284479141, 0.004138574004173279, 0.030766764655709267, 0.01830393821001053, 0.017725210636854172, 0.012866591103374958, 0.02130524441599846, 0.0035295644775032997, -0.007947408594191074, -0.01067954022437334, 0.003287306521087885, 0.029878485947847366, -0.008048349060118198, -0.020322754979133606, -0.013330918736755848, 0.004370737820863724, 0.0032368360552936792, -0.0006708359578624368, 0.010221941396594048, 0.013330918736755848, -0.015531429089605808, 0.006147296633571386, -0.00435391440987587, -0.008256959728896618, -0.01118424441665411, -0.0012154958676546812, -0.018169349059462547, -0.015840981155633926, 0.023270227015018463, 0.0001040426577674225, -0.0037718224339187145, 0.008546323515474796, 0.005548381246626377, 0.010531493462622166, 0.04570600762963295, -0.008378089405596256, 0.013627012260258198, -0.0011078256648033857, 0.03135894984006882, 0.02880178391933441, -0.015464135445654392, -0.006335719488561153, 0.01143996138125658, -0.0188557468354702, 0.004384196829050779, -0.0012011958751827478, 0.003751634154468775, -0.009649943560361862, 0.005608945619314909, -0.016433168202638626, 0.012294593267142773, 0.03776533156633377, -0.02761741168797016, 0.0008260324830189347, 0.0030181307811290026, 0.0014922419795766473, 0.009064486250281334, 0.009501896798610687, -0.006413107272237539, 0.03491206839680672, 0.005864662118256092, 0.003660787595435977, 0.025181373581290245, -0.0013955070171505213, 0.011776430532336235, 0.02371436543762684, 0.02769816480576992, -0.004252973478287458, 0.010975632816553116, 0.028424937278032303, -0.0065645189024508, -0.03073984757065773, 0.0174694936722517, 0.03324317932128906, 0.018061678856611252, 0.016500461846590042, 0.03394303843379021, 0.0017294528661295772, -0.018559655174613, 0.016513919457793236, -0.020497718825936317, 0.07526148110628128, -0.0035733054392039776, -0.0016158944927155972, -0.0069110821932554245, 0.004798054229468107, -0.0007902826182544231, -0.08565165847539902, -0.02608311176300049, 0.011103491298854351, -0.00655442476272583, -0.028855619952082634, -0.007839737460017204, 0.0018556289141997695, 0.030039992183446884, -0.03464289382100105, 0.00497974781319499, -0.011130409315228462, -0.005948779638856649, -0.0015788828022778034, -0.00019651917682494968, -0.0018842288991436362, 0.013970211148262024, -0.007725338451564312, -0.021830137819051743, 0.011002550832927227, 0.013539530336856842, 0.013505883514881134, -0.00580409774556756, 0.012745462357997894, 0.005820921156555414, -0.00896354578435421, -0.013445318676531315, -0.013714494183659554, -0.0010195024078711867, 0.008357901126146317, 0.013889458030462265, 0.0317896343767643, -0.0194479338824749, 0.01112367957830429, 0.00044876610627397895, -0.01745603419840336, -0.011009279638528824, -0.05057808756828308, 0.0059218620881438255, 0.03310859203338623, -0.04379486292600632, 0.016688883304595947, -0.015046913176774979, 0.016500461846590042, -0.018061678856611252, -0.030928270891308784, 0.00826368946582079, -0.030632177367806435, 0.004313538316637278, 0.02114374004304409, 0.0030063544400036335, -0.03073984757065773, -0.02947472222149372, -0.014952701516449451, 0.024508433416485786, 0.020914940163493156, -0.018034761771559715, 0.01507383119314909, 0.007509998045861721, -0.02469685673713684, -0.0037415402475744486, -0.010773751884698868, 0.010181564837694168, -0.022005101665854454, -0.013768329285085201, -0.024764150381088257, 0.0016074827872216702, -0.01899033598601818, -0.008256959728896618, -0.005894944537431002, -0.0033546003978699446, -0.026150405406951904, 0.009225991554558277, -0.026446497067809105, -0.0038593043573200703, -0.022974133491516113, 0.00030829012393951416, -0.0021803220734000206, -0.0007372886757366359, 0.008896252140402794, -0.007341763004660606, -0.009414414875209332, 0.00620449660345912, 0.00044287790660746396, -0.0227049570530653, 0.02012087218463421, 0.023660531267523766, 0.016877306625247, -0.007012023124843836, 0.04005332291126251, -0.03709239140152931, -0.021534044295549393, -0.009252909570932388, -0.018250102177262306, -0.003950151149183512, -0.019811321049928665, 0.008344441652297974, 0.0071331518702209, 0.012927155941724777, 0.010854504071176052, 0.014212468639016151, -0.02993232198059559, -0.011157326400279999, -0.0746154636144638, -0.002128169173374772, -0.003140942193567753, 0.0028532608412206173, -0.005373416934162378, -0.012866591103374958, -0.016177451238036156, -0.006880800239741802, 0.0256658885627985, 0.03798067197203636, -0.009205804206430912, -0.003650693455711007, -0.014831572771072388, 0.007193716708570719, -0.014414350502192974, -0.030712930485606194, 0.02359323762357235, -0.02436038665473461, 0.010968904010951519, 0.032704830169677734, -0.011715865693986416, 0.015531429089605808, 0.013647200539708138, 0.017348363995552063, -0.022731876000761986, -0.012227299623191357, 0.0029895310290157795, 0.012987720780074596, -0.007920490577816963, -0.02845185622572899, -0.011715865693986416, -0.020497718825936317, -0.003933327738195658, 0.024333469569683075, 0.02304142713546753, -0.015450676903128624, 0.016204368323087692, 0.0013929834822192788, 0.011554360389709473, -0.0034387176856398582, 0.0027859669644385576, -0.04390253126621246, 0.018707700073719025, -0.0023889329750090837, -0.029743898659944534, -0.01569293439388275, 0.010100812651216984, -0.006335719488561153, 0.028398020192980766, 0.0209283996373415, 0.006601530592888594, 0.005756991915404797, -0.014320139773190022, -0.020955316722393036, 0.005672874860465527, -0.017402200028300285, 0.00013595468772109598, -0.0004554954939521849, -0.009804719127714634, -0.020524635910987854, 0.04193755239248276, -0.0008765028906054795, -0.01473736111074686, -0.013458777219057083, 0.02777891606092453, 0.008990463800728321, -0.031305115669965744, 0.0011860547820106149, 0.01915184035897255, -0.023566318675875664, -0.04613668844103813, 0.012254216708242893, -0.0009463203023187816, -0.016312038525938988, -0.007382139563560486, -0.011177514679729939, 0.003704528557136655, -0.0006212067091837525, -0.026621462777256966, 0.008405006490647793, 0.013155954889953136, -0.026271533221006393, -0.0038256575353443623, 0.01814243197441101, 0.01215327624231577, 0.010955444537103176, 0.00900392234325409, 0.01209271140396595, 0.029070960357785225, -0.0007490650750696659, -0.01974402740597725, 0.002740543568506837, 0.0009370673797093332, -0.005302758421748877, 0.01632549799978733, -0.0022089218255132437, -0.020699599757790565, 0.008532864972949028, 0.020861105993390083, 0.033162426203489304, 0.013559718616306782, 0.01725415326654911, -0.003492552787065506, -0.021803218871355057, -0.012314781546592712, 0.005881485994905233, 0.010800668969750404, -0.01192447729408741, 0.012503203935921192, 0.01160819549113512, 0.006692376919090748, -0.020874563604593277, -0.027415530756115913, 0.023579778149724007, 0.005309487693011761, -0.007106234319508076, 0.011170784942805767, -0.03095518797636032, -0.0044245729222893715, 0.02536979503929615, 0.0033546003978699446, 0.010666080750524998, 0.02329714410007, -0.005110970698297024, 0.028936371207237244, 0.03733465075492859, 0.016984976828098297, -0.0038021046202629805, -0.00019504713418427855, -0.00947497971355915, 0.002932331059128046, 0.004670195747166872, -0.016904223710298538, -0.025935065001249313, 0.016984976828098297, -0.0008155177929438651, -0.02495257370173931, 0.008633805438876152, 0.018048221245408058, 0.092381052672863, 0.016567755490541458, -0.021883971989154816, -0.017604080960154533, -0.028721030801534653, 0.002282945206388831, -0.0052691115997731686, 0.018546195700764656, -0.03445447236299515, -0.041291531175374985, 0.04842467978596687, -0.010915068909525871, -0.009293286129832268, 0.007341763004660606, 5.0969862058991566e-05, 0.0037852812092751265, -0.014939242973923683, 0.023108720779418945, -0.008176207542419434, -0.019205676391720772, 0.017388740554451942, -0.009851825423538685, 0.012664709240198135, -0.007610938511788845, -0.029367052018642426, 0.013795247301459312, 0.036850132048130035, 0.0070322114042937756, -0.005925226956605911, -0.04724030941724777, 0.009421144612133503, -0.004394290968775749, -0.030982105061411858, -0.005413793493062258, -0.01843852549791336, 0.023996999487280846, 0.0023990271147340536, -0.009138509631156921, 0.02752320095896721, 0.019932448863983154, 0.002261074725538492, 0.0011667078360915184, -0.009118321351706982, -0.022731876000761986, 0.01860002987086773, 0.014050963334739208, 0.006335719488561153, -0.020093955099582672, -0.001099413842894137]"
